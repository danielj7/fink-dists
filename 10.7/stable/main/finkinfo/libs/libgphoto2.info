Package: libgphoto2
Version: 2.4.14
Revision: 2
# Dist restricted by libjpeg8.  Use libgphoto2.6 whenever possible.
Distribution: 10.7, 10.8
Source: mirror:sourceforge:gphoto/%n-%v.tar.bz2
Depends: %N-shlibs (= %v-%r)
BuildDepends: <<
	dbus1.3-dev,
	fink-package-precedence,
	gd2,
	gettext-tools,
	libexif12,
	libgettext8-dev,
	libhal1-dev,
	libiconv-dev,
	libjpeg8,
	libtool2,
	libusb,
	pkgconfig
<<
Conflicts: <<
	libgphoto2,
	libgphoto2.6
<<
# manpages are for lib: not needed at runtime, filename is libversion-agnostic
Replaces: <<
	%N-shlibs (<< 2.4.4-1003),
	libgphoto2,
	libgphoto2.6
<<
GCC: 4.0
Maintainer: Jack Fink <jackfink@users.sourceforge.net>
Homepage: http://www.gphoto.org
License: LGPL
Description: Library for digital cameras
Source-MD5: c7fc6cafa6343f2457976dbe9f2d9d68
BuildDependsOnly: True
PatchFile: %n.patch
PatchFile-MD5: 8e81dcbf8684c37b90050e447aa45c67
PatchScript: <<
	%{default_script}
	perl -pi -e "s,graphviz,fragility_sucks,g;s,doxygen,fragility_sucks,g" configure
	perl -pi -e "s/-g -O/-O/g;s/-O2/-Os/g" configure libgphoto2_port/configure
	perl -pi -e 's,<stdlib.h>,<stdlib.h>\n#include <sys/types.h>,' camlibs/sonydscf1/sonydscf1.c
<< 
ConfigureParams: --mandir=%p/share/man --with-extra-libs=%p/lib --with-extra-includes=%p/include --enable-dependency-tracking
CompileScript: <<
	%{default_script}
	fink-package-precedence --prohibit-bdep=libgphoto2,libgphoto2.6 .
<<
InfoTest: <<
	TestScript: make check || exit 2
<<
InstallScript: make install DESTDIR=%d
DocFiles: ABOUT-NLS AUTHORS COPYING ChangeLog HACKING INSTALL MAINTAINERS NEWS README TESTERS
Splitoff: <<
  Package: %N-shlibs
  Description: Library for digital cameras, shared libs
  Depends: <<
    dbus1.3-shlibs,
    libhal1-shlibs,
    libexif12-shlibs,
    libgettext8-shlibs,
    libiconv,
    libjpeg8-shlibs,
    libtool2-shlibs,
    libusb-shlibs
  <<
  # .la for .so used at runtime by ltdl
  Replaces: %N (<< 2.4.4-1003)
  Files: <<
    share/libgphoto2
    share/locale
    lib/libgphoto2/%v
    lib/libgphoto2/print-camera-list
    lib/libgphoto2_port/0.8.0
    lib/libgphoto2.2.dylib
    lib/libgphoto2_port.0.dylib
    lib/udev
  <<
  Shlibs: <<
    %p/lib/libgphoto2.2.dylib 7.0.0 %n (>= 2.4.4-1003)
    %p/lib/libgphoto2_port.0.dylib 9.0.0 %n (>= 2.3.1-1003)
  <<
  DocFiles: COPYING
<<
