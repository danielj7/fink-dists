Package: libgda
Version: 3.1.5
Revision: 3
BuildDepends: <<
	autoconf (>= 2.60),
	automake1.10,
	avahi-dev,
	gettext-bin,
	gettext-tools,
	dbus-dev (>= 1.2.1-1),
	fink (>= 0.24.12-1),
	gconf2-dev (>= 2.24.0-1),
	glib2-dev (>= 2.18.0-1),
	gnome-vfs2-unified-dev (>= 1:2.24.0-1),
	gtk-doc (>= 1.8-1),
	intltool40,
	libavahi-glib1-dev,
	libgettext3-dev,
	libiconv-dev,
	libncurses5,
	libtool14,
	libxml2 (>= 2.6.30-1),
	libxslt (>= 1.1.22-1),
	orbit2-dev (>= 2.14.16-1),
	pkgconfig (>= 0.23),
	readline5,
	sqlite3-dev (>= 3.4.2-1002)
<<
Depends: <<
	%N4-shlibs (= %v-%r),
	libncurses5-shlibs,
	readline5-shlibs
<<
Source: mirror:gnome:sources/%n/3.1/%n-%v.tar.bz2
Source-MD5: eb7da5286a112e7cff3111c89fba4456
PatchFile: %n-%v.patch
PatchFile-MD5: 2140b5f2d0e70d59411cd59f90676be3
PatchScript: <<
	%{default_script}
	perl -pi -e 's,/usr/share/gtk-doc/html,%p/share/gtk-doc/html,g' doc/C/html/*.html
<<
ConfigureParams: <<
	--mandir='%p/share/man' \
	--disable-gtk-doc \
	PERL=/usr/bin/perl \
	--without-bdb --without-odbc --without-mysql --without-msql --without-postgres --without-tds --without-ibmdb2 --without-sybase --without-oracle --without-firebird --without-xbase --without-mdb --without-ldap \
	--disable-dependency-tracking --disable-static
<<
CompileScript: <<
	autoreconf -f -i
	./configure %c
	make
<<
#InfoTest: <<
#	TestDepends: check
#	# fails "sometimes"
#	TestScript: make check || exit 2
#<<
InstallScript: make -j1 install DESTDIR=%d
SplitOff: <<
	Package: %N4-shlibs
	Depends: <<
		dbus-shlibs (>= 1.2.1-1),
		gconf2-shlibs (>= 2.24.0-1),
		glib2-shlibs (>= 2.18.0-1),
		gnome-vfs2-unified-shlibs (>= 1:2.24.0-1),
		libavahi-client3-shlibs,
		libavahi-common3-shlibs,
		libavahi-glib1-shlibs,
		libgettext3-shlibs,
		libiconv,
		libxml2-shlibs (>= 2.6.30-1),
		libxslt-shlibs (>= 1.1.22-1),
		orbit2-shlibs (>= 2.14.16-1),
		sqlite3-shlibs (>= 3.4.2-1002)
	<<
	Replaces: %N, %N-shlibs
	Files: <<
		lib/libgda*-3.0.*.dylib
		lib/libgda-3.0/providers/*.so
		share/locale
	<<
	Shlibs: <<
		%p/lib/libgda-3.0.3.dylib		4.0.0 %n (>= 3.0.0-1)
		%p/lib/libgda-report-3.0.3.dylib	4.0.0 %n (>= 3.0.0-1)
		%p/lib/libgda-xslt-3.0.0.dylib		1.0.0 %n (>= 3.0.0-1)
		%p/lib/libgdasql-3.0.3.dylib		4.0.0 %n (>= 3.0.0-1)
	<<
	DocFiles: AUTHORS COPYING COPYING.LIB ChangeLog NEWS README
	Description: Shared libraries for libgda package
<<
SplitOff2: <<
	Package: %N4-dev
	Depends: %N (= %v-%r)
	Conflicts: %N-dev, %N3-dev
	Replaces: %N-dev, %N3-dev
	BuildDependsOnly: True
	Files: <<
		include
		lib
		share/gtk-doc
	<<
	DocFiles: AUTHORS COPYING COPYING.LIB ChangeLog NEWS README
	Description: Developer files for libgda package
<<
DocFiles: AUTHORS COPYING COPYING.LIB ChangeLog NEWS README
DescPackaging: <<
	Was in section:crypto b/c libgcrypt: lib was auto-detected,
	but package seems to be buildable without it (could force
	non-detection and get into section:gnome?)...lose non-critical
	functionality? Conversely, could implement needed libgcrypt
	algos internally (md5 is not crypto). See:
	http://bugzilla.gnome.org/show_bug.cgi?id=513019
	Import branch-V4 switch to internal md5, scrapping libgcrypt.

	Regenerating gtk-doc files The Right Way (--enable-gtk-doc) is
	very slow, so just patch the prefix in the bad URLs in the
	existing generated files.

	Installs some .py into subdir of %p/bin. Will fix in next
	%v. Mean-time, just don't bother.
	See: http://bugzilla.gnome.org/show_bug.cgi?id=579458
<<
DescPort: <<
	Try to make sure local libs are linked first: very important
	since there are wrappers in the nascent libgda-sqlite.la that
	need to mask and intercept calls to those in the global
	libsqlite3.dylib. NB: still not fixed.

	Don't rely on build-dir libgda-3.0.la propagating
	dependency_libs libgdasql-3.0.la when linking (libtool seems
	to try to use installed lib instead of build-dir?): specify
	all needed .la directly on linker when dependent lib is
	actually needed also.

	Library compatibility does not appear to have changed since
	3.1.2 (brute-force compare of all public headers), so fix
	mis-use of -version-info. See:
	http://bugzilla.gnome.org/show_bug.cgi?id=539310
<<
DescUsage: <<
	This is just the basic library and sqlite support. Most
	databases are explicitly disabled to avoid a *huge* package
	that has "N-1" database types that any one user doesn't need.
	Othre database support modules appear to be plugins that could
	be built as stand-alone packages.
<<
Description: Uniform access to various data sources
License: GPL/LGPL
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
Homepage: http://www.gnome-db.org
