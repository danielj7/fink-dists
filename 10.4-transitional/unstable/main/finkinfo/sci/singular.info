Package: singular
Version: 3.0.0
Revision: 15
Source: http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/src/3-0-0/Singular-3-0-0-4.tar.gz
#Source: http://www-user.rhrk.uni-kl.de/~bricken/Singular-3-0-0.tar.gz
Maintainer: Michael Brickenstein <bricken@mathematik.uni-kl.de>
HomePage: http://www.singular.uni-kl.de
License: Restrictive/Distributable
Description: Computer Algebra system
Source-MD5: f2c977c7b74cb7c4e1c65cad09c3d1ac
SourceDirectory:Singular-3-0-0
CompileScript: <<
#! /bin/sh -ev
export CPPFLAGS="-I%p/include" 
export CFLAGS="-O1"
export CXXFLAGS="-O1"
export LDFLAGS="-L%p/lib -ldl"
rm -rf gmp
rm -rf doc
rm -rf ntl/doc
#echo "#undef PDEBUG" >> Singular/mod2.h.in
#echo "#undef PDEBUG" >> kernel/mod2.h.in
./configure  --disable-doc --libdir=%i/lib/Singular --includedir=%i/include/Singular  --bindir=%i/lib/Singular --prefix=%i/share/Singular --enable-factory --enable-MP --enable-libfac --without-dynamic-kernel




<<
InstallScript: <<
#! /bin/sh -ev
export CPPFLAGS="-I%p/include" 
export CFLAGS="-O1"
export CXXFLAGS="-O1"
export LDFLAGS="-L%p/lib -ldl"
make install
mkdir -p %i/bin
#ln -sf  ../share/Singular/bin/Singular-3-0-0 %i/bin/Singular
#ln -sf  ../share/Singular/bin/ESingular %i/bin/ESingular
#rm -f %i/lib/Singular/Singular
ln -sf Singular-3-0-0 %i/lib/Singular/Singular
rm -f %i/share/Singular/LIB
cd Singular
make install-sharedist install_slibdir=%i/share/Singular/LIB
cd ..

cat >%i/bin/Singular <<!ANF
#!/bin/bash
export SINGULAR_BIN_DIR=%p/lib/Singular
export SINGULAR_ROOT_DIR=%p/share/Singular
export SINGULAR_INFO_FILE=%p/share/doc/Singular/info/singular.hlp
export SINGULAR_IDX_FILE=%p/share/doc/Singular/doc/singular.idx
export SINGULAR_HTML_DIR=%p/share/doc/Singular/html
export SINGULAR_EXAMPLES_DIR=%p/share/doc/Singular/examples
export PATH="%p/lib/Singular:%p/bin:\$PATH"
%p/lib/Singular/Singular-3-0-0  \$*
!ANF
chmod 755 %i/bin/Singular

cat >%i/lib/Singular/singularsurf <<!ANF
#!/bin/bash
x11_app=X11

if [ -d /Applications/Utilities/X11.app ]; then
  x11_app=/Applications/Utilities/X11.app
elif [ -d /Applications/X11.app ]; then
  x11_app=/Applications/X11.app
fi

/usr/bin/open -a "\$x11_app" 

sleep 1;

if [ -z \$DISPLAY ]; then
export DISPLAY=":0.0"
fi

surf \$*
!ANF

chmod 755 %i/lib/Singular/singularsurf

cat >%i/bin/ESingular <<!ANF
#!/bin/bash
export SINGULAR_BIN_DIR=%p/lib/Singular
export SINGULAR_ROOT_DIR=%p/share/Singular
export SINGULAR_INFO_FILE=%p/share/doc/Singular/info/singular.hlp
export SINGULAR_IDX_FILE=%p/share/doc/Singular/doc/singular.idx
export SINGULAR_HTML_DIR=%p/share/doc/Singular/html
export SINGULAR_EXAMPLES_DIR=%p/share/doc/Singular/examples
export PATH="%p/bin:\$PATH"
%p/lib/Singular/ESingular  \$*
!ANF
chmod 755 %i/bin/ESingular

<<
DocFiles: README.general ChangeLog COPYING BUGS GPL
Depends: readline-shlibs, gmp-shlibs (>= 4.1.2-11), surf
BuildDepends: readline, gmp (>= 4.1.2-11)
BuildConflicts: broken-gcc
#, singular-factory, singular-libfac
