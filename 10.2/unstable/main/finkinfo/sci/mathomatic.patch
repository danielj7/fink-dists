diff -Nurd -x'*~' am-10.6.orig/am.1 am-10.6/am.1
--- am-10.6.orig/am.1	2003-09-22 01:03:13.000000000 -0400
+++ am-10.6/am.1	2003-09-22 01:08:06.000000000 -0400
@@ -1,17 +1,10 @@
-.TH am 1
+.TH mathomatic 1
 
 .SH NAME
-am, ac \- Algebraic Manipulator
+mathomatic \- Algebraic Manipulator
 
 .SH SYNOPSIS
-.B am
-[
-.B -c
-] [
-.I input_files
-]
-.br
-.B ac
+.B mathomatic
 [
 .B -c
 ] [
@@ -19,12 +12,9 @@
 ]
 
 .SH DESCRIPTION
-.B "am"
-executes the automatic algebraic manipulator "Mathomatic".
-.B "ac"
-executes Mathomatic in color mode.  The
+The
 .B "-c"
-option toggles color mode.
+option disables color mode.
 Color mode outputs ANSI escape sequences to make each level of
 parentheses a different color, for easier reading.
 
diff -Nurd -x'*~' am-10.6.orig/am.h am-10.6/am.h
--- am-10.6.orig/am.h	2003-09-22 01:03:13.000000000 -0400
+++ am-10.6/am.h	2003-09-22 01:03:53.000000000 -0400
@@ -7,7 +7,6 @@
 #include <math.h>
 #include <setjmp.h>
 #include <ctype.h>
-#include <malloc.h>
 #include <string.h>
 #include <errno.h>
 #if	MSC
diff -Nurd -x'*~' am-10.6.orig/cmds.c am-10.6/cmds.c
--- am-10.6.orig/cmds.c	2003-09-22 01:03:13.000000000 -0400
+++ am-10.6/cmds.c	2003-09-23 05:02:13.000000000 -0400
@@ -9,6 +9,9 @@
 #if	MSC
 #include <process.h>
 #endif
+#if	UNIX && !SECURE
+#include <unistd.h>
+#endif
 
 extern	int	euclid_count;
 
diff -Nurd -x'*~' am-10.6.orig/main.c am-10.6/main.c
--- am-10.6.orig/main.c	2003-09-22 01:03:13.000000000 -0400
+++ am-10.6/main.c	2003-09-23 05:01:51.000000000 -0400
@@ -30,6 +30,7 @@
 #include <signal.h>
 #if	READLINE
 #include <readline/readline.h>
+#include <readline/history.h>
 #endif
 #if	LINUX
 #include <fenv.h>
@@ -37,6 +38,9 @@
 #if	UNIX
 #include <sys/ioctl.h>
 #endif
+#if	(IBM_PC || UNIX) && !SECURE
+#include <unistd.h>
+#endif
 
 #define	VERSION		"10.6"
 
@@ -150,8 +154,7 @@
 		}
 		if (i && (argv[0][i-1] == 'C' || argv[0][i-1] == 'c')) {
 			if (!coption) {
-				printf("ANSI color mode enabled.  To disable, rename this program to \"am\",\n");
-				printf("or use the \"-c\" option.\n");
+				printf("ANSI color mode enabled.  To disable, use the \"-c\" option.\n");
 			}
 			color_flag = true;
 		}
diff -Nurd -x'*~' am-10.6.orig/manual.htm am-10.6/manual.htm
--- am-10.6.orig/manual.htm	2003-09-22 01:03:13.000000000 -0400
+++ am-10.6/manual.htm	2003-09-22 01:11:49.000000000 -0400
@@ -81,14 +81,10 @@
 <dt>
 SYNTAX
 <dd>
-ac [-c] [-h] [input_files]
-<dd>
-am [-c] [-h] [input_files]
+mathomatic [-c] [-h] [input_files]
 </dl>
 <p>
-The Mathomatic program is named either "am" or "ac".
-"ac" defaults to ANSI color mode, while "am" does not.
-ANSI color mode can be toggled by the "-c" option.
+ANSI color mode can be disabled by the "-c" option.
 ANSI color mode outputs ANSI escape sequences
 to make each level of parentheses a different color,
 to improve readability.
@@ -277,7 +273,7 @@
 Please consult the Mathomatic Command Reference,
 for detailed information on commands.
 It is available in the file
-<a href="am.htm">"am.htm"</a>.
+<a href="mathomatic.htm">"mathomatic.htm"</a>.
 It can be viewed with a web browser or
 an HTML file viewing/printing program.
 </p>
