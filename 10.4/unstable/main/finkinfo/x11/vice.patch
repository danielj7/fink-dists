diff -Nurd -x'*~' vice-1.20.orig/configure vice-1.20/configure
--- vice-1.20.orig/configure	Sun Aug 27 13:15:37 2006
+++ vice-1.20/configure	Thu Oct  5 18:06:32 2006
@@ -3506,9 +3506,9 @@
     if test x"$GCC" = "xyes" ; then
       warnings="-Wall -Wstrict-prototypes -Winline"
       if test x"$ac_cv_prog_cc_g" = "xyes" ; then
-        CFLAGS="-g -O2 -finline-functions $warnings"
+        CFLAGS="-g -O3"
       else
-        CFLAGS="-O2 -finline-functions $warnings"
+        CFLAGS="-O3"
       fi
     fi
   fi
@@ -3556,11 +3556,6 @@
 
 
 
-cat >>confdefs.h <<\_ACEOF
-#define MACOSX_SUPPORT
-_ACEOF
-
-
   ;;
 
 *)
@@ -6045,15 +6040,15 @@
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  INTLLIBS=-lintl gt_cv_func_gettext_libintl=yes
+  gt_cv_func_gettext_libintl=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
 gt_cv_func_gettext_libintl=no
+       LIBS="$save_libs"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
-       LIBS="$save_libs"
 fi
 echo "$as_me:$LINENO: result: $gt_cv_func_gettext_libintl" >&5
 echo "${ECHO_T}$gt_cv_func_gettext_libintl" >&6
diff -Nurd -x'*~' vice-1.20.orig/src/Makefile.in vice-1.20/src/Makefile.in
--- vice-1.20.orig/src/Makefile.in	Sun Aug 27 13:15:29 2006
+++ vice-1.20/src/Makefile.in	Thu Oct  5 18:16:14 2006
@@ -547,7 +547,7 @@
 video_lib = $(top_builddir)/src/video/libvideo.a
 xcbm2_lib = $(top_builddir)/src/cbm2/libcbm2.a
 
-common_libs = @ARCH_LIBS@ @LIBOBJS@ @READLINE@ @RESID_LIBS@ @SOUND_LIBS@ @VICE_LIBPNG@ @VICE_ZLIB@
+common_libs = @ARCH_LIBS@ @LIBOBJS@ @READLINE@ @RESID_LIBS@ @VICE_LIBPNG@ @VICE_ZLIB@
 
 driver_libs = $(sounddrv_lib) $(gfxoutputdrv_lib) $(printerdrv_lib) $(rs232drv_lib) $(monitor_lib) $(diskimage_lib) $(fsdevice_lib) $(tape_lib) $(imagecontents_lib) $(fileio_lib) $(serial_lib) $(core_lib)
 
@@ -582,7 +582,7 @@
 
 
 x64_SOURCES = $(base_sources) $(maincpu_sources)
-x64_LDADD = $(x64_libs) @X_LIBS@ @INTLLIBS@
+x64_LDADD = $(x64_libs) @X_LIBS@ @INTLLIBS@ @SOUND_LIBS@
 x64_DEPENDENCIES = $(x64_libs)
 
 # x128
@@ -609,7 +609,7 @@
 
 
 x128_SOURCES = $(base_sources)
-x128_LDADD = $(x128_libs) @X_LIBS@ @INTLLIBS@
+x128_LDADD = $(x128_libs) @X_LIBS@ @INTLLIBS@ @SOUND_LIBS@
 x128_DEPENDENCIES = $(x128_libs)
 
 # xvic
@@ -630,7 +630,7 @@
 
 
 xvic_SOURCES = $(base_sources) $(maincpu_sources)
-xvic_LDADD = $(xvic_libs) @X_LIBS@ @INTLLIBS@
+xvic_LDADD = $(xvic_libs) @X_LIBS@ @INTLLIBS@ @SOUND_LIBS@
 xvic_DEPENDENCIES = $(xvic_libs)
 
 # xpet
@@ -650,7 +650,7 @@
 
 
 xpet_SOURCES = $(base_sources) $(maincpu_sources)
-xpet_LDADD = $(xpet_libs) @X_LIBS@ @INTLLIBS@
+xpet_LDADD = $(xpet_libs) @X_LIBS@ @INTLLIBS@ @SOUND_LIBS@
 xpet_DEPENDENCIES = $(xpet_libs) 
 
 # xplus4
@@ -670,7 +670,7 @@
 
 
 xplus4_SOURCES = $(base_sources)
-xplus4_LDADD = $(xplus4_libs) @X_LIBS@ @INTLLIBS@
+xplus4_LDADD = $(xplus4_libs) @X_LIBS@ @INTLLIBS@ @SOUND_LIBS@
 xplus4_DEPENDENCIES = $(xplus4_libs)
 
 # xcbm2
@@ -692,7 +692,7 @@
 
 
 xcbm2_SOURCES = $(base_sources)
-xcbm2_LDADD = $(xcbm2_libs) @X_LIBS@ @INTLLIBS@
+xcbm2_LDADD = $(xcbm2_libs) @X_LIBS@ @INTLLIBS@ @SOUND_LIBS@
 xcbm2_DEPENDENCIES = $(xcbm2_libs) 
 
 # c1541
diff -Nurd -x'*~' vice-1.20.orig/src/arch/unix/archdep.h vice-1.20/src/arch/unix/archdep.h
--- vice-1.20.orig/src/arch/unix/archdep.h	Mon Mar 28 11:10:20 2005
+++ vice-1.20/src/arch/unix/archdep.h	Thu Oct  5 18:21:17 2006
@@ -97,7 +97,7 @@
 
 /* Define the default system directory (where the ROMs are).  */
 #define LIBDIR          PREFIX "/lib/vice"
-#define DOCDIR          LIBDIR "/doc"
+#define DOCDIR          PREFIX "/share/doc/vice"
 #define VICEUSERDIR     ".vice"
 
 #endif
diff -Nurd -x'*~' vice-1.20.orig/src/arch/unix/x11/ui-resources.c vice-1.20/src/arch/unix/x11/ui-resources.c
--- vice-1.20.orig/src/arch/unix/x11/ui-resources.c	Sat Aug 26 10:08:09 2006
+++ vice-1.20/src/arch/unix/x11/ui-resources.c	Thu Oct  5 22:35:45 2006
@@ -89,7 +89,7 @@
 
 static const resource_t resources[] = {
     { "HTMLBrowserCommand", RES_STRING, 
-#ifdef MACOSX_SUPPORT    
+#if 1
       (resource_value_t)"/usr/bin/open %s",
 #else
       (resource_value_t)"netscape %s",
diff -Nurd -x'*~' vice-1.20.orig/src/network.c vice-1.20/src/network.c
--- vice-1.20.orig/src/network.c	Sun May 28 14:39:43 2006
+++ vice-1.20/src/network.c	Fri Oct  6 03:52:29 2006
@@ -135,7 +135,7 @@
 static int suspended;
 
 static char *server_name = NULL;
-static unsigned short server_port;
+static unsigned int server_port;
 static int frame_delta;
 static unsigned int network_control;
 
