Package: paraview
Version: 3.4.0
Revision: 1001
Source: http://www.paraview.org/files/v3.4/%n-%v.tar.gz
Source-MD5: a12067913e08ea7a465ca41509dbfde1
PatchFile: %n.patch
PatchFile-MD5: 143ec88963219c1fcf3e7d9e56fb43e5
License: BSD
Depends: x11, x11-shlibs, qt4-x11-core-shlibs, qt4-x11-designer-shlibs, libpng3-shlibs, readline5-shlibs
BuildDepends: cmake (>= 2.4.2-1), x11-dev, qt4-x11, qt4-x11-designer, libpng3, readline5, fink (>= 0.28)
Conflicts: paraview, paraview-mpi-lammpi, paraview-mpi-openmpi
Replaces:  paraview, paraview-mpi-lammpi, paraview-mpi-openmpi
BuildDependsOnly: True
NoSetLDFLAGS: true
SetLIBRARY_PATH: %p/lib 
PatchScript: <<
#!/bin/sh -ex
sed 's|@FINKPREFIX@|%p|g' <%{PatchFile} | patch -p1
<<
CompileScript: <<
#!/bin/sh -ex
 mkdir ../%n-darwin
 cd ../%n-darwin
 %p/bin/cmake -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON  \
       -DQT_QMAKE_EXECUTABLE:STRING=%p/lib/qt4-x11/bin/qmake \
       -DVTK_INSTALL_QT_PLUGIN_DIR:STRING=%p/lib/paraview-3.4/plugins/designer \
       -DBUILD_SHARED_LIBS:BOOL=ON \
       -DCMAKE_INSTALL_PREFIX:PATH=%p \
       -DCMAKE_INSTALL_NAME_DIR:STRING=%p/lib/%n-3.4 \
       -DVTK_USE_RPATH=ON \
       -DCMAKE_EXE_LINKER_FLAGS:STRING="-Wl,-search_paths_first" \
       -DCMAKE_SHARED_LINKER_FLAGS:STRING="-Wl,-search_paths_first -Wl,-undefined -Wl,dynamic_lookup" \
       -DVTK_USE_CARBON:BOOL=OFF \
       -DVTK_USE_COCOA:BOOL=OFF \
       -DVTK_USE_X:BOOL=ON \
       -DCMAKE_X_LIBS:STRING="-lSM;-lICE;-lX11;-lXext" \
       -DOPENGL_gl_LIBRARY:STRING="-L/usr/X11R6/lib -lGL" \
       -DOPENGL_glu_LIBRARY:STRING="-L/usr/X11R6/lib -lGLU" \
       -DOPENGL_INCLUDE_DIR:PATH="/usr/X11R6/include" \
       -DOPENGL_xmesa_INCLUDE_DIR:PATH=/usr/X11R6/include \
       -DVTK_USE_INFOVIS:BOOL=ON \
       -DPARAVIEW_WRAP_PYTHON:BOOL=ON \
       -DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=ON \
       -DBUILD_DOCUMENTATION:BOOL=ON \
       -DDOCUMENTATION_HTML_HELP=ON \
       %b
 export DYLD_LIBRARY_PATH=`pwd`/bin
 make
<< 
InstallScript: <<
#!/bin/sh -ev
 /usr/bin/install -d %i/share/doc/%n
 /bin/cp -R Examples %i/share/doc/%n/
 cd ../%n-darwin
 make install DESTDIR=%d
 # move documentation
 mkdir -p %i/share/doc/paraview/html
 mv %i/bin/Documentation %i/share/doc/paraview/html/Documentation
 mv %i/bin/pqClient.adp %i/share/doc/paraview/html
 echo > %i/share/doc/paraview/pqClientDocFinder.txt %p/bin/paraview-assistant
 echo >> %i/share/doc/paraview/pqClientDocFinder.txt %p/share/doc/paraview/html/pqClient.adp
 # rename copy of Qt assisstant
 mv %i/bin/assistant %i/bin/paraview-assistant
 install_name_tool -id %p/lib/paraview-3.4/plugins/designer/libQVTKWidgetPlugin.dylib %i/lib/paraview-3.4/plugins/designer/libQVTKWidgetPlugin.dylib
<<
Shlibs: <<
!%p/lib/paraview-3.4/libKWCommon.dylib
!%p/lib/paraview-3.4/libQVTK.pv3.4.dylib
!%p/lib/paraview-3.4/libQtChart.dylib
!%p/lib/paraview-3.4/libQtTesting.dylib
!%p/lib/paraview-3.4/libXdmf.dylib
!%p/lib/paraview-3.4/libpqComponents.dylib
!%p/lib/paraview-3.4/libpqCore.dylib	
!%p/lib/paraview-3.4/libpqWidgets.dylib
!%p/lib/paraview-3.4/libvtkClientServer.dylib
!%p/lib/paraview-3.4/libvtkCommon.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkCommonCS.dylib
!%p/lib/paraview-3.4/libvtkDICOMParser.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkFiltering.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkFilteringCS.dylib
!%p/lib/paraview-3.4/libvtkGenericFiltering.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkGenericFilteringCS.dylib
!%p/lib/paraview-3.4/libvtkGeovis.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkGraphics.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkGraphicsCS.dylib
!%p/lib/paraview-3.4/libvtkHybrid.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkHybridCS.dylib
!%p/lib/paraview-3.4/libvtkIO.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkIOCS.dylib
!%p/lib/paraview-3.4/libvtkImaging.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkImagingCS.dylib
!%p/lib/paraview-3.4/libvtkInfovis.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkInfovisCS.dylib
!%p/lib/paraview-3.4/libvtkNetCDF.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkPVCommandOptions.dylib
!%p/lib/paraview-3.4/libvtkPVFilters.dylib
!%p/lib/paraview-3.4/libvtkPVFiltersCS.dylib	
!%p/lib/paraview-3.4/libvtkPVServerCommon.dylib
!%p/lib/paraview-3.4/libvtkPVServerCommonCS.dylib
!%p/lib/paraview-3.4/libvtkPVServerManager.dylib
!%p/lib/paraview-3.4/libvtkParallel.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkParallelCS.dylib
!%p/lib/paraview-3.4/libvtkQtChart.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkRendering.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkRenderingCS.dylib
!%p/lib/paraview-3.4/libvtkViews.pv3.4.dylib	
!%p/lib/paraview-3.4/libvtkViewsCS.dylib
!%p/lib/paraview-3.4/libvtkVolumeRendering.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkVolumeRenderingCS.dylib
!%p/lib/paraview-3.4/libvtkWidgets.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkWidgetsCS.dylib
!%p/lib/paraview-3.4/libvtkXdmf.dylib
!%p/lib/paraview-3.4/libvtkXdmfCS.dylib
!%p/lib/paraview-3.4/libvtkexoIIc.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkexpat.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkfreetype.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkftgl.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkhdf5.dylib
!%p/lib/paraview-3.4/libvtkjpeg.pv3.4.dylib
!%p/lib/paraview-3.4/libvtklibxml2.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkmetaio.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkpng.pv3.4.dylib
!%p/lib/paraview-3.4/libvtksqlite.pv3.4.dylib
!%p/lib/paraview-3.4/libvtksys.pv3.4.dylib
!%p/lib/paraview-3.4/libvtktiff.pv3.4.dylib
!%p/lib/paraview-3.4/libvtkverdict.vtk5.3.0.dylib
!%p/lib/paraview-3.4/libvtkzlib.pv3.4.dylib
!%p/lib/paraview-3.4/plugins/designer/libQVTKWidgetPlugin.dylib
<<
DocFiles: License_v1.2.txt
Description: Visualization application for large data sets
DescDetail: << 
 ParaView is an application designed with the need to visualize 
 large data sets in mind. The goals of the ParaView       
 project include the following:
   * Develop an open-source, multi-platform visualization application.
   * Support distributed computation models to process large data sets.
   * Create an open, flexible, and intuitive user interface.
   * Develop an extensible architecture based on open standards. 
 ParaView runs on distributed and shared memory parallel as well as 
 single processor systems and has been succesfully tested on Windows, 
 Linux and various Unix workstations and clusters. 
 Under the hood, ParaView uses the Visualization Toolkit (VTK) as the 
 data processing and rendering engine and has a user interface written 
 using a unique blend of Tcl/Tk and C++.
<<
DescUsage: <<
 Examples are provided in the %p/share/doc/%n/Examples folder.
 For documentation, point your browser at %p/share/doc/%n/README.html 
<<
DescPackaging: <<
 No shlibs splitoff. Dylibs are only used internally,
 and they don't have reasonable compatibility versions.

 The 3 package paraview, paraview-mpi-lammpi, paraview-mpi-openmpi
 conflict with each other. Only one of them can be installed.

<<
DescPort: <<
 The dylibs are still created with compat version 0.0.0, 
 because cmake doesn't know about compatibility versions.

 This version uses CMake's RPATH mechanism to get correct
 install_names for dibraries. 
 The patch is needed to desactivate the weird default that 
 does not install any executables when RPATH is used.

 Cmake knows now about versioned file names for dylibs, so 
 that a future repacked version will be able to adhere to 
 Fink's shlibs policy.

 Use patches from Fedora 11 to build paraview 3.4 against
 qt 4.5.1. Added Shlib entries for private shared libraries.
 Remove assistant binary that is installed and fix rpath
 for %p/lib/paraview-3.4/plugins/designer/libQVTKWidgetPlugin.dylib.
<<
Maintainer: Jack Howarth <howarth@bromo.med.uc.edu>
Homepage: http://www.paraview.org/

