Package: ruby18-tcltk-x11
Version: 1.8.3
Revision: 2
Description: Tcl/Tk (using X11) extensions for Ruby
License: GPL
Homepage: http://www.ruby-lang.org/
Maintainer: Michal Suchanek <hramrach@centrum.cz>, Blair Zajac <blair@orcaware.com>

# Dependencies.
Depends: ruby18 (>= %v-%r), tcltk (>= 8.4.6-2), tcltk-shlibs (>= 8.4.6-2)
BuildDepends: ruby18-dev (>= %v-%r), tcltk-dev (>= 8.4.6-2)
Conflicts: ruby18 (<< 1.8.3-1)
Provides: ruby18-tcltk

# Unpack Phase.
Source: ftp://ftp.ruby-lang.org/pub/ruby/1.8/ruby-%v.tar.gz
Source-MD5: 63d6c2bddd6af86664e338b31f3189a6
SourceDirectory: ruby-%v/ext

# Patch Phase.
PatchScript: <<
#!/bin/sh -ex
  cd ..
  sed 's|@PREFIX@|%p|g' %a/../../languages/ruby18.patch > ruby18.patch
  patch -p1 < ruby18.patch
  rm ruby18.patch
<<

# Compile Phase.
CompileScript: <<
#!/bin/sh -ex
  pushd tcltklib
  %p/bin/ruby1.8 extconf.rb
  make
  popd

  pushd tk
  %p/bin/ruby1.8 extconf.rb
  make
  popd
<<

# Install Phase.
InstallScript: <<
#!/bin/sh -ex
  pushd tcltklib
  make install DESTDIR=%i
  popd

  pushd tk
  make install DESTDIR=%i
  popd

  install -d %i/share/doc/%N
  cp -r tcltklib/demo %i/share/doc/%N
  cp -r tcltklib/sample %i/share/doc/%N/tcltklib-sample
  cp -r tk/sample %i/share/doc/%N/tk-sample
<<
DocFiles: ../COPYING ../COPYING.ja ../ChangeLog ../GPL ../LEGAL ../LGPL ../README ../README.EXT ../README.EXT.ja ../README.ja ../ToDo
