diff -Nurd -x'*~' pango-1.22.0.orig/Makefile.in pango-1.22.0/Makefile.in
--- pango-1.22.0.orig/Makefile.in	2008-09-22 18:34:13.000000000 -0400
+++ pango-1.22.0/Makefile.in	2008-09-27 02:16:57.000000000 -0400
@@ -260,7 +260,7 @@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
-SUBDIRS = pango modules pango-view examples docs tools tests
+SUBDIRS = pango modules pango-view          docs tools tests
 EXTRA_DIST = \
 	autogen.sh		\
 	pango.pc.in		\
diff -Nurd -x'*~' pango-1.22.0.orig/docs/Makefile.in pango-1.22.0/docs/Makefile.in
--- pango-1.22.0.orig/docs/Makefile.in	2008-09-22 18:34:08.000000000 -0400
+++ pango-1.22.0/docs/Makefile.in	2008-09-27 03:32:31.000000000 -0400
@@ -272,9 +272,9 @@
 	-DPANGO_ENABLE_ENGINE	\
 	-I$(top_srcdir)		\
 	$(GLIB_CFLAGS)		\
-	$(XFT_CFLAGS)		\
-	$(CAIRO_CFLAGS)		\
 	$(FREETYPE_CFLAGS)	\
+	$(CAIRO_CFLAGS)		\
+	$(XFT_CFLAGS)		\
 	$(X_CFLAGS)
 
 
diff -Nurd -x'*~' pango-1.22.0.orig/docs/html/pango-Miscellaneous-Utilities.html pango-1.22.0/docs/html/pango-Miscellaneous-Utilities.html
--- pango-1.22.0.orig/docs/html/pango-Miscellaneous-Utilities.html	2008-09-22 18:37:13.000000000 -0400
+++ pango-1.22.0/docs/html/pango-Miscellaneous-Utilities.html	2008-09-27 02:16:57.000000000 -0400
@@ -411,7 +411,7 @@
 <pre class="programlisting">char*               pango_config_key_get                (const char *key);</pre>
 <p>
 Looks up a key in the Pango config database
-(pseudo-win.ini style, read from $sysconfdir/pango/pangorc,
+(pseudo-win.ini style, read from @SYSCONFDIR@/pango/pangorc,
  ~/.pangorc, and getenv (PANGO_RC_FILE).)</p>
 <p>
 
diff -Nurd -x'*~' pango-1.22.0.orig/docs/pango-querymodules.1 pango-1.22.0/docs/pango-querymodules.1
--- pango-1.22.0.orig/docs/pango-querymodules.1	2008-09-22 18:37:12.000000000 -0400
+++ pango-1.22.0/docs/pango-querymodules.1	2008-09-27 02:17:34.000000000 -0400
@@ -188,7 +188,7 @@
 The Pango module path is specified by the key
 \FCPango/ModulesPath\F[]
 in the Pango config database, which is read from
-\FC\fIsysconfdir\fR/pango/pangorc\F[],
+\FC\fI@SYSCONFDIR@\fR/pango/pangorc\F[],
 \FC~/\&.pangorc\F[]
 and the file specified in the environment variable
 \fBPANGO_RC_FILE\fR\&.
diff -Nurd -x'*~' pango-1.22.0.orig/ltmain.sh pango-1.22.0/ltmain.sh
--- pango-1.22.0.orig/ltmain.sh	2008-08-29 18:27:25.000000000 -0400
+++ pango-1.22.0/ltmain.sh	2008-09-27 02:42:52.000000000 -0400
@@ -2924,100 +2924,72 @@
 	    fi
 	    tmp_libs="$tmp_libs $deplib"
 	  done
-
-	  if test "$link_all_deplibs" != no; then
-	    # Add the search paths of all dependency libraries
-	    for deplib in $dependency_libs; do
-	      case $deplib in
-	      -L*) path="$deplib" ;;
-	      *.la)
-		dir=`$echo "X$deplib" | $Xsed -e 's%/[^/]*$%%'`
-		test "X$dir" = "X$deplib" && dir="."
-		# We need an absolute path.
-		case $dir in
-		[\\/]* | [A-Za-z]:[\\/]*) absdir="$dir" ;;
-		*)
-		  absdir=`cd "$dir" && pwd`
-		  if test -z "$absdir"; then
-		    $echo "$modename: warning: cannot determine absolute directory name of \`$dir'" 1>&2
-		    absdir="$dir"
-		  fi
-		  ;;
-		esac
-		if grep "^installed=no" $deplib > /dev/null; then
-		  path="$absdir/$objdir"
-		else
-		  eval libdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $deplib`
-		  if test -z "$libdir"; then
-		    $echo "$modename: \`$deplib' is not a valid libtool archive" 1>&2
-		    exit $EXIT_FAILURE
-		  fi
-		  if test "$absdir" != "$libdir"; then
-		    $echo "$modename: warning: \`$deplib' seems to be moved" 1>&2
-		  fi
-		  path="$absdir"
-		fi
-		depdepl=
-		case $host in
-		*-*-darwin*)
-		  # we do not want to link against static libs,
-		  # but need to link against shared
-		  eval deplibrary_names=`${SED} -n -e 's/^library_names=\(.*\)$/\1/p' $deplib`
-		  eval deplibdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $deplib`
-		  if test -n "$deplibrary_names" ; then
-		    for tmp in $deplibrary_names ; do
-		      depdepl=$tmp
-		    done
-		    if test -f "$deplibdir/$depdepl" ; then
-		      depdepl="$deplibdir/$depdepl"
-	      	    elif test -f "$path/$depdepl" ; then
-		      depdepl="$path/$depdepl"
-		    else
-		      # Can't find it, oh well...
-		      depdepl=
-		    fi
-		    # do not add paths which are already there
-		    case " $newlib_search_path " in
-		    *" $path "*) ;;
-		    *) newlib_search_path="$newlib_search_path $path";;
-		    esac
-		  fi
-		  path=""
-		  ;;
-		*)
-		  path="-L$path"
-		  ;;
-		esac
-		;;
-	      -l*)
-		case $host in
-		*-*-darwin*)
-		  # Again, we only want to link against shared libraries
-		  eval tmp_libs=`$echo "X$deplib" | $Xsed -e "s,^\-l,,"`
-		  for tmp in $newlib_search_path ; do
-		    if test -f "$tmp/lib$tmp_libs.dylib" ; then
-		      eval depdepl="$tmp/lib$tmp_libs.dylib"
-		      break
-		    fi
-		  done
-		  path=""
-		  ;;
-		*) continue ;;
-		esac
-		;;
-	      *) continue ;;
-	      esac
-	      case " $deplibs " in
-	      *" $path "*) ;;
-	      *) deplibs="$path $deplibs" ;;
-	      esac
-	      case " $deplibs " in
-	      *" $depdepl "*) ;;
-	      *) deplibs="$depdepl $deplibs" ;;
-	      esac
-	    done
-	  fi # link_all_deplibs != no
-	fi # linkmode = lib
+          if test "$link_all_deplibs" != no; then
+            # Add the search paths of all dependency libraries
+            for deplib in $dependency_libs; do
+              case $deplib in
+              -L*) path="$deplib" ;;
+              *.la)
+#               func_dirname "$deplib" "" "."
+#               dir="$func_dirname_result"
+                case "$deplib" in
+                  */*) dir="${deplib%/*}" ;;
+                  *  ) dir="." ;;
+                esac
+                # We need an absolute path.
+                case $dir in
+                [\\/]* | [A-Za-z]:[\\/]*) absdir="$dir" ;;
+                *)
+                  absdir=`cd "$dir" && pwd`
+                  if test -z "$absdir"; then
+                    $echo "$modename: warning: cannot determine absolute directory name of \`$dir'" 1>&2
+                    absdir="$dir"
+                  fi
+                  ;;
+                esac
+                if grep "^installed=no" $deplib > /dev/null; then
+                case $host in
+                *-*-darwin*)
+                  depdepl=
+                  eval deplibrary_names=`${SED} -n -e 's/^library_names=\(.*\)$/\1/p' $deplib`
+                  if test -n "$deplibrary_names" ; then
+                    for tmp in $deplibrary_names ; do
+                      depdepl=$tmp
+                    done
+                    if test -f "$absdir/$objdir/$depdepl" ; then
+                      depdepl="$absdir/$objdir/$depdepl"
+                      darwin_install_name=`otool -L $depdepl | awk '{if (NR == 2) {print $1;exit}}'`
+                      if test -z "$darwin_install_name"; then
+                          darwin_install_name=`otool64 -L $depdepl  | awk '{if (NR == 2) {print $1;exit}}'`
+                      fi
+                      compiler_flags="$compiler_flags ${wl}-dylib_file ${wl}${darwin_install_name}:${depdepl}"
+                      linker_flags="$linker_flags -dylib_file ${darwin_install_name}:${depdepl}"
+                      path=
+                    fi
+                  fi
+                  ;;
+                *)
+                  path="-L$absdir/$objdir"
+                  ;;
+                esac
+                else
+                  eval libdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $deplib`
+                  test -z "$libdir" && \
+                    $echo "\`$deplib' is not a valid libtool archive" 1>&2
+                  test -z "$libdir" && exit 1
+                  test "$absdir" != "$libdir" && \
+                    $echo "\`$deplib' seems to be moved" 1>&2
+                  path="-L$absdir"
+                fi
+                ;;
+              esac
+              case " $deplibs " in
+              *" $path "*) ;;
+              *) deplibs="$path $deplibs" ;;
+              esac
+            done
+          fi # link_all_deplibs != no
+        fi # linkmode = lib
       done # for deplib in $libs
       dependency_libs="$newdependency_libs"
       if test "$pass" = dlpreopen; then
diff -Nurd -x'*~' pango-1.22.0.orig/pango/Makefile.in pango-1.22.0/pango/Makefile.in
--- pango-1.22.0.orig/pango/Makefile.in	2008-09-22 18:34:12.000000000 -0400
+++ pango-1.22.0/pango/Makefile.in	2008-09-27 03:36:24.000000000 -0400
@@ -431,9 +431,9 @@
 	-I$(top_srcdir)					\
 	$(PANGO_DEBUG_FLAGS)				\
 	$(GLIB_CFLAGS)					\
-	$(XFT_CFLAGS)					\
-	$(CAIRO_CFLAGS)					\
 	$(FREETYPE_CFLAGS)				\
+	$(CAIRO_CFLAGS)					\
+	$(XFT_CFLAGS)					\
 	$(X_CFLAGS)
 
 BUILT_SOURCES = pango-enum-types.h pango-enum-types.c pango-features.h
@@ -571,9 +571,9 @@
 	libpangoft2-$(PANGO_API_VERSION).la	\
 	libpango-$(PANGO_API_VERSION).la	\
 	$(GLIB_LIBS)				\
-	$(X_LIBS)				\
-	$(XFT_LIBS)				\
 	$(FREETYPE_LIBS)			\
+	$(XFT_LIBS)				\
+	$(X_LIBS)				\
 	$(libm)
 
 libpangoxft_1_0_la_DEPENDENCIES = \
diff -Nurd -x'*~' pango-1.22.0.orig/pangoxft.pc.in pango-1.22.0/pangoxft.pc.in
--- pango-1.22.0.orig/pangoxft.pc.in	2008-07-05 14:34:52.000000000 -0400
+++ pango-1.22.0/pangoxft.pc.in	2008-09-27 02:16:57.000000000 -0400
@@ -6,6 +6,6 @@
 Name: Pango Xft
 Description: Xft font support for Pango
 Version: @VERSION@
-Requires: pango pangoft2 xft
+Requires: pango pangoft2 xft pangox
 Libs: -L${libdir} -lpangoxft-@PANGO_API_VERSION@
 Cflags: -I${includedir}/pango-1.0
diff -Nurd -x'*~' pango-1.22.0.orig/tests/Makefile.in pango-1.22.0/tests/Makefile.in
--- pango-1.22.0.orig/tests/Makefile.in	2008-09-22 18:34:12.000000000 -0400
+++ pango-1.22.0/tests/Makefile.in	2008-09-27 02:16:57.000000000 -0400
@@ -291,7 +291,7 @@
 CLEANFILES = pangorc
 DISTCLEANFILES = all-unicode.txt runtests.log
 INCLUDES = -I$(top_srcdir) $(PANGO_DEBUG_FLAGS) $(GLIB_CFLAGS) \
-	$(XFT_CFLAGS) $(CAIRO_CFLAGS) $(FREETYPE_CFLAGS) $(X_CFLAGS) \
+	$(FREETYPE_CFLAGS) $(XFT_CFLAGS) $(CAIRO_CFLAGS) $(X_CFLAGS) \
 	$(am__append_1) $(am__append_2) $(am__append_3)
 TESTS_ENVIRONMENT = \
    srcdir=$(srcdir)                    \
diff -Nurd -x'*~' pango-1.22.0.orig/tests/runtests.sh.in pango-1.22.0/tests/runtests.sh.in
--- pango-1.22.0.orig/tests/runtests.sh.in	2008-07-05 14:34:52.000000000 -0400
+++ pango-1.22.0/tests/runtests.sh.in	2008-09-27 14:26:45.000000000 -0400
@@ -1,7 +1,7 @@
 #! @SHELL@
 
 LOGFILE=runtests.log
-POTENTIAL_TESTS='testboundaries testcolor testboundaries_ucd'
+POTENTIAL_TESTS='testboundaries testcolor'
 
 ECHO_C='@ECHO_C@'
 ECHO_N='@ECHO_N@'
diff -Nurd -x'*~' pango-1.22.0.orig/update-pango-modules pango-1.22.0/update-pango-modules
--- pango-1.22.0.orig/update-pango-modules	1969-12-31 19:00:00.000000000 -0500
+++ pango-1.22.0/update-pango-modules	2008-09-27 02:16:57.000000000 -0400
@@ -0,0 +1,20 @@
+#!/bin/sh -e
+#
+# update-pango-modules
+#
+#   Packages which install pango module(s) should call update-pango-modules
+#   in their PostInstScript and PostRmScript to update the pango.module file.
+#
+
+CONFDIR=@SYSCONFDIR@/pango
+CONFFILE=$CONFDIR/pango.modules
+
+mkdir -p $CONFDIR
+
+TMPFILE=`tempfile`
+pango-querymodules >$TMPFILE
+
+mv -f $TMPFILE $CONFFILE
+chmod 0644 $CONFFILE
+
+exit 0
