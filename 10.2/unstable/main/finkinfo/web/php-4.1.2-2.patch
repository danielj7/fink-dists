diff -ruN php-4.1.2/Makefile.in php-4.1.2-patched/Makefile.in
--- php-4.1.2/Makefile.in	Sat Apr 21 21:09:12 2001
+++ php-4.1.2-patched/Makefile.in	Sun Jun 30 20:08:10 2002
@@ -13,7 +13,7 @@
 		$(EXT_LTLIBS) \
 		$(TSRM_LIB)
 
-LTLIBRARY_LDFLAGS = -rpath $(phptempdir) $(EXTRA_LDFLAGS) $(LDFLAGS) $(PHP_RPATHS)
+LTLIBRARY_LDFLAGS = -module -rpath $(phptempdir) $(EXTRA_LDFLAGS) $(LDFLAGS) $(PHP_RPATHS)
 LTLIBRARY_LIBADD = $(LTLIBRARY_DEPENDENCIES) $(EXTRA_LIBS)
 
 PROGRAM_NAME         = php
diff -ruN php-4.1.2/Zend/zend_ini_scanner.c php-4.1.2-patched/Zend/zend_ini_scanner.c
--- php-4.1.2/Zend/zend_ini_scanner.c	Wed Feb 27 04:18:44 2002
+++ php-4.1.2-patched/Zend/zend_ini_scanner.c	Sun Jun 30 20:08:10 2002
@@ -493,7 +493,7 @@
 #define yymore() yymore_used_but_not_detected
 #define YY_MORE_ADJ 0
 #define YY_RESTORE_YY_MORE_OFFSET
-char *yytext;
+/*char *yytext;*/
 #define INITIAL 0
 /*
    +----------------------------------------------------------------------+
diff -ruN php-4.1.2/Zend/zend_language_scanner.c php-4.1.2-patched/Zend/zend_language_scanner.c
--- php-4.1.2/Zend/zend_language_scanner.c	Wed Feb 27 04:18:43 2002
+++ php-4.1.2-patched/Zend/zend_language_scanner.c	Sun Jun 30 20:08:10 2002
@@ -2722,7 +2722,7 @@
 #define yymore() (yy_more_flag = 1)
 #define YY_MORE_ADJ yy_more_len
 #define YY_RESTORE_YY_MORE_OFFSET
-char *yytext;
+/*char *yytext;*/
 #define INITIAL 0
 
 /*
diff -ruN php-4.1.2/configure php-4.1.2-patched/configure
--- php-4.1.2/configure	Wed Feb 27 04:18:32 2002
+++ php-4.1.2-patched/configure	Sun Jun 30 20:09:39 2002
@@ -3153,7 +3153,7 @@
   if test "$?" != "0"; then
     APACHE_INSTALL="$APXS -i -a -n php4 $SAPI_SHARED" # Old apxs does not have -S option
   else 
-    APACHE_INSTALL="\$(mkinstalldirs) \"\$(INSTALL_ROOT)`$APXS -q LIBEXECDIR`\" && $APXS -S LIBEXECDIR=\"\$(INSTALL_ROOT)`$APXS -q LIBEXECDIR`\" -i -a -n php4 $SAPI_SHARED"
+    APACHE_INSTALL="\$(mkinstalldirs) \"\$(INSTALL_ROOT)`$APXS -q LIBEXECDIR`\" && $APXS -S LIBEXECDIR=\"\$(INSTALL_ROOT)`$APXS -q LIBEXECDIR`\" -i -n php4 $SAPI_SHARED"
   fi
 
   
@@ -61524,7 +61524,7 @@
     # FIXME: Relying on posixy $() will cause problems for
     #        cross-compilation, but unfortunately the echo tests do not
     #        yet detect zsh echo's removal of \ escapes.
-    archive_cmds='$nonopt $(test "x$module" = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags -install_name $rpath/$soname $verstring'
+    archive_cmds='$nonopt $(test x$module = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags $(test .$module != .yes && echo -install_name $rpath/$soname $verstring)'
     # We need to add '_' to the symbols in $export_symbols first
     #archive_expsym_cmds="$archive_cmds"' && strip -s $export_symbols'
     hardcode_direct=yes
diff -ruN php-4.1.2/ltmain.sh php-4.1.2-patched/ltmain.sh
--- php-4.1.2/ltmain.sh	Wed Feb 27 04:18:24 2002
+++ php-4.1.2-patched/ltmain.sh	Sun Jun 30 20:08:10 2002
@@ -2858,7 +2858,12 @@
 	if test -n "$export_symbols" && test -n "$archive_expsym_cmds"; then
 	  eval cmds=\"$archive_expsym_cmds\"
 	else
+	  save_deplibs="$deplibs"
+	  for conv in $convenience; do
+	    deplibs="${deplibs%$conv*} ${deplibs#*$conv}"
+	  done
 	  eval cmds=\"$archive_cmds\"
+	  deplibs="$save_deplibs"
 	fi
 	IFS="${IFS= 	}"; save_ifs="$IFS"; IFS='~'
 	for cmd in $cmds; do
diff -ruN php-4.1.2/php.ini-dist php-4.1.2-patched/php.ini-dist
--- php-4.1.2/php.ini-dist	Tue Aug 14 16:23:25 2001
+++ php-4.1.2-patched/php.ini-dist	Sun Jun 30 20:08:11 2002
@@ -355,7 +355,7 @@
 user_dir =
 
 ; Directory in which the loadable extensions (modules) reside.
-extension_dir = ./
+extension_dir = @PREFIX@/lib/php/extensions/
 
 ; Whether or not to enable the dl() function.  The dl() function does NOT work
 ; properly in multithreaded servers, such as IIS or Zeus, and is automatically
