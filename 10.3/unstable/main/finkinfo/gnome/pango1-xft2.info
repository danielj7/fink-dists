Package: pango1-xft2
Version: 1.10.0
Revision: 1
Depends: %N-shlibs (=%v-%r), libgettext3-shlibs, glib2 (>= 2.5.7-1), libiconv
Provides: pango1
Replaces: pango1
Conflicts: pango1-xft1
BuildDepends: <<
  glib2-dev (>= 2.5.7-1), pkgconfig (>= 0.15.0-2), gtk-doc (>= 1.2-1),
  x11-dev, xft2-dev, libgettext3-dev, libiconv-dev, gcc3.3
<<
Source: mirror:gnome:sources/pango/1.10/pango-%v.tar.bz2
Source-MD5: c75489ec7f5fe77e31e4cbde71ad0c16
PatchScript: <<
  #!/bin/bash -ev
  SYSCONFDIR=%p/etc
  perl -p -e 'BEGIN{$s=shift} s|\@PREFIX\@|%p|; s|\@SYSCONFDIR\@|$s|' $SYSCONFDIR <%a/%n.patch | patch -p1
  
# Fix jpeg/ImageIO problem
cat <<PATCHEOF | patch -lu ltmain.sh
@@ -2400,7 +2400,7 @@
 	  if test -n "\$library_names" &&
 	     { test "\$prefer_static_libs" = no || test -z "\$old_library"; }; then
 	    # We need to hardcode the library path
-	    if test -n "\$shlibpath_var"; then
+	    if test -n "\$shlibpath_var" && test "\$installed" = no; then
 	      # Make sure the rpath contains only unique directories.
 	      case "\$temp_rpath " in
 	      *" \$dir "*) ;;
<<PATCHEOF
<<
NoSetCPPFLAGS: true
NoSetLDFLAGS: true
SetCPPFLAGS: -no-cpp-precomp
SetCFLAGS: -O3 -funroll-loops -fstrict-aliasing -pipe
SetLDFLAGS: -no-undefined -L/usr/X11R6/lib
ConfigureParams: --mandir=%p/share/man --disable-dependency-tracking --enable-static
CompileScript: <<
  #!/bin/bash -ev
  export LD_TWOLEVEL_NAMESPACE=1
  export FREETYPE_CONFIG=/usr/X11R6/bin/freetype-config
  ./configure %c
  make -j2
  make check
<<
InstallScript: <<
  #!/bin/bash -ev
  make install DESTDIR=%d
  SYSCONFDIR=%i/etc
  install -d -m 755 %i/sbin
  install -c -m 755 update-pango-modules %i/sbin/
  install -d -m 755 $SYSCONFDIR/pango
  install -c -m 644 examples/pangox.aliases $SYSCONFDIR/pango
<<
PostInstScript: <<
  if [ configure = "$1" ]; then
    update-pango-modules
  fi
<<
PostRmScript: <<
  case "$1" in
    purge)
      SYSCONFDIR=%p/etc
      rm -f $SYSCONFDIR/pango/pango.modules
      rmdir $SYSCONFDIR/pango || true
      ;;
  esac
<<
SplitOff: <<
  Package: %N-shlibs
  Depends: libgettext3-shlibs, glib2-shlibs (>= 2.5.7-1), libiconv, x11-shlibs, xft2-shlibs
  Provides: pango1-shlibs
  Replaces: pango1-shlibs
  Conflicts: pango1-xft1-shlibs
  Files: <<
    lib/lib*-1.0.*.dylib
    lib/pango
  <<
  Shlibs: <<
    %p/lib/libpango-1.0.0.dylib 1001.0.0 %n (>= 1.10.0-1)
    %p/lib/libpangoft2-1.0.0.dylib 1001.0.0 %n (>= 1.10.0-1)
    %p/lib/libpangox-1.0.0.dylib 1001.0.0 %n (>= 1.10.0-1)
    %p/lib/libpangoxft-1.0.0.dylib 1001.0.0 %n (>= 1.10.0-1)
  <<
  Description: GTK+ - i18n text shared libraries (for XFree86 >= 4.3)
  DocFiles: AUTHORS COPYING ChangeLog NEWS README TODO
<<
SplitOff2: <<
  Package: %N-dev
  Depends: %N-shlibs (=%v-%r)
  Provides: pango1-dev
  Replaces: pango1-dev
  Conflicts: pango1-xft1-dev
  BuildDependsOnly: True
  Files: <<
    include
    lib
    share/gtk-doc
  <<
  Description: GTK+ - i18n text development headers and libraries (for XFree86 >= 4.3)
  DocFiles: AUTHORS COPYING ChangeLog NEWS README TODO
<<
ConfFiles: %p/etc/pango/pangox.aliases
DocFiles: AUTHORS COPYING ChangeLog NEWS README TODO
Description: GTK+ - i18n libs (for XFree86 >= 4.3)
DescDetail: <<
System for layout and rendering of internationalized text.

These packages link against the freetype that comes as part of x11.
<<
DescPackaging: <<
  Currently, uses example pangox.aliases without modification. For
  future, it should be managed by font managing system like defoma
  (Debian font manager).

  Fink's cairo package is too old, so patch configure to make sure we
  don't accidentally detect some other cairo on the system. When a
  package for cairo>=0.5.2-head becomes available, remove patch and
  set (Build)Depends for it.
<<
DescPort: <<
  Instead of requiring xslt to build this package, we just manually
  patch the pregenerated manpage target that is included in the
  tarball.

  check uses some C++ but it doesn't leak out into the installed
  package
<<
DescUsage: <<
Packages which install pango module(s) should call update-pango-modules
in their PostInstScript and PostRmScript to update the pango.modules file.
<<
License: LGPL
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
Homepage: http://www.pango.org
