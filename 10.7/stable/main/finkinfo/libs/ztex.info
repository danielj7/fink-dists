Package: ztex
Version: 110926
Revision: 2
Maintainer: None <fink-devel@lists.sourceforge.net>
Depends: system-java
BuildDepends: <<
	fpc,
	sdcc,
	system-java-dev
<<
Source: http://www.ztex.de/downloads/%n-%v.tar.bz2
Source-MD5: 133760cee32286af5ecb34ee866378fa
SourceDirectory: ztex

PatchFile: %n.patch
PatchFile-MD5: 2aeba30c8f2cfe45bdad4c8542664aa7
PatchScript: <<
	sed 's|@FINK_PREFIX@|%p|g' < %{PatchFile} | patch -p1
<<
CompileScript: <<
	#!/bin/sh -ev
	# Java detection code from ppl13.
	JAVA_FW=/System/Library/Frameworks/JavaVM.framework
	if test -x /usr/libexec/java_home; then
		JAVA_HOME=`/usr/libexec/java_home`
	else
		JAVA_HOME=$JAVA_FW/Home
	fi
	# try to locate jni.h, it may not be under java_home!
	test -d $JAVA_HOME && test -x $JAVA_HOME || \
	  { echo "$JAVA_HOME not found." ; exit 1 ;}
	export JAVA_INCLUDE=$JAVA_HOME/include
	test -r $JAVA_INCLUDE/jni.h || export JAVA_INCLUDE=$JAVA_FW/Headers
	test -r $JAVA_INCLUDE/jni.h || \
	  { echo "Missing Java development package containing jni.h." ; \
	  echo "Please download/install from connect.apple.com" ; \
	  echo "or install the JDK from Oracle and try again." ; \
	  echo "Thank you and have a nice day." ; exit 1 ;}
	make -C libusbJava-src -f Makefile.macosx install2
	rm -f bmp/Makefile.conf
	make -C bmp install2
	make distclean all
<<

InstallScript: <<
	/usr/bin/install -m 755 -d %i/share/%n
	/usr/bin/install -m 755 -d %i/share/doc/%n
	/usr/bin/install -m 644 Makefile.mk %i/share/%n

	/bin/cp -R docs/ %i/share/doc/%n/docs
	/bin/cp -R examples/ %i/share/doc/%n/examples
	/bin/cp -R bin/ %i/share/%n/bin
	/bin/cp -R java/ %i/share/%n/java
	/bin/cp -R include/ %i/share/%n/include
	/bin/cp -R libusbJava/ %i/share/%n/libusbJava
<<

Description: Firmware development kit for FX2 USB boards
Homepage: http://www.ztex.de/usb-1/usb-1.0.e.html
License: GPL3
DescDetail: <<
This SDK is especially designed for the ZTEX boards, but also works with other
EZ-USB FX2 based hardware. The SDK consists in a Firmware Development Kit for
EZ-USB FX2 devices and a Java API for the development of the host software.

A unique macro approach gives developers a maximum of flexibility in endpoint
setup just by calling a few macros and without the need of studying the USB
specification. These features distinguish the ZTEX SDK from the products of
competitors.
<<
DescPackaging: <<
* Former maintainer: Sjors Gielen <fink@sjorsgielen.nl>
* Java detection code copied from ppl13 package.
<<
