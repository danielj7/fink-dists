diff -Nurd -x'*~' inkscape-0.48.2.orig/configure inkscape-0.48.2/configure
--- inkscape-0.48.2.orig/configure	2011-07-08 15:25:02.000000000 -0400
+++ inkscape-0.48.2/configure	2011-12-09 15:32:23.000000000 -0500
@@ -10840,6 +10840,8 @@
 $as_echo "yes" >&6; }
 
 fi
+INKSCAPE_CFLAGS="$INKSCAPE_CFLAGS -I/usr/X11R6/include"
+INKSCAPE_LIBS="$INKSCAPE_LIBS -L/usr/X11R6/lib -lX11"
 
 # Check for Apple Mac OS X Carbon framework
 carbon_ok=no
diff -Nurd -x'*~' inkscape-0.48.2.orig/src/Makefile.in inkscape-0.48.2/src/Makefile.in
--- inkscape-0.48.2.orig/src/Makefile.in	2011-07-08 15:25:02.000000000 -0400
+++ inkscape-0.48.2/src/Makefile.in	2011-12-13 16:55:27.000000000 -0500
@@ -2438,6 +2438,9 @@
 # Add Inkview-only sources here.
 inkview_SOURCES = inkview.cpp $(win32_sources)
 INCLUDES = \
+	-I$(top_srcdir)/cxxtest \
+	-I$(srcdir)/bind/javainc \
+	-I$(srcdir)/bind/javainc/linux \
 	$(PERL_CFLAGS) $(PYTHON_CFLAGS)	\
 	$(FREETYPE_CFLAGS)	\
 	$(GNOME_PRINT_CFLAGS)	\
@@ -2451,10 +2454,7 @@
 	$(POPPLER_GLIB_CFLAGS)	\
 	-DPOTRACE=\"potrace\"	\
 	$(INKSCAPE_CFLAGS) \
-	-I$(top_srcdir)/cxxtest \
 	$(WIN32_CFLAGS) \
-	-I$(srcdir)/bind/javainc \
-	-I$(srcdir)/bind/javainc/linux \
 	$(AM_CPPFLAGS)
 
 CXXTEST_TEMPLATE = $(srcdir)/cxxtest-template.tpl
diff -Nurd -x'*~' inkscape-0.48.2.orig/src/box3d.cpp inkscape-0.48.2/src/box3d.cpp
--- inkscape-0.48.2.orig/src/box3d.cpp	2011-07-08 14:25:09.000000000 -0400
+++ inkscape-0.48.2/src/box3d.cpp	2011-12-09 15:42:12.000000000 -0500
@@ -431,6 +431,9 @@
 static double remember_snap_threshold = 30;
 static guint remember_snap_index = 0;
 
+// constant for sizing the array of points to be considered:
+static const int MAX_POINT_COUNT = 4;
+
 static Proj::Pt3
 box3d_snap (SPBox3D *box, int id, Proj::Pt3 const &pt_proj, Proj::Pt3 const &start_pt) {
     double z_coord = start_pt[Proj::Z];
@@ -460,7 +463,7 @@
     Box3D::Line diag2(A, E); // diag2 is only taken into account if id equals -1, i.e., if we are snapping the center
 
     int num_snap_lines = (id != -1) ? 3 : 4;
-    Geom::Point snap_pts[num_snap_lines];
+    Geom::Point snap_pts[MAX_POINT_COUNT];
 
     snap_pts[0] = pl1.closest_to (pt);
     snap_pts[1] = pl2.closest_to (pt);
@@ -472,7 +475,7 @@
     gdouble const zoom = inkscape_active_desktop()->current_zoom();
 
     // determine the distances to all potential snapping points
-    double snap_dists[num_snap_lines];
+    double snap_dists[MAX_POINT_COUNT];
     for (int i = 0; i < num_snap_lines; ++i) {
         snap_dists[i] = Geom::L2 (snap_pts[i] - pt) * zoom;
     }
diff -Nurd -x'*~' inkscape-0.48.2.orig/src/graphlayout.cpp inkscape-0.48.2/src/graphlayout.cpp
--- inkscape-0.48.2.orig/src/graphlayout.cpp	2011-07-08 14:25:09.000000000 -0400
+++ inkscape-0.48.2/src/graphlayout.cpp	2011-12-09 15:59:40.000000000 -0500
@@ -155,11 +155,12 @@
          ++i)
     {
         SPItem *iu=*i;
-        map<string,unsigned>::iterator i=nodelookup.find(iu->getId());
-        if(i==nodelookup.end()) {
+        map<string,unsigned>::iterator i_iter=nodelookup.find(iu->getId());
+        map<string,unsigned>::iterator i_iter_end=nodelookup.end();
+        if(i_iter==i_iter_end) {
             continue;
         }
-        unsigned u=i->second;
+        unsigned u=i_iter->second;
         GSList *nlist=iu->avoidRef->getAttachedConnectors(Avoid::runningFrom);
         list<SPItem *> connectors;
 
diff -Nurd -x'*~' inkscape-0.48.2.orig/src/ui/widget/registered-widget.h inkscape-0.48.2/src/ui/widget/registered-widget.h
--- inkscape-0.48.2.orig/src/ui/widget/registered-widget.h	2011-07-08 14:25:09.000000000 -0400
+++ inkscape-0.48.2/src/ui/widget/registered-widget.h	2011-12-09 15:47:53.000000000 -0500
@@ -61,9 +61,6 @@
 
     bool is_updating() {if (_wr) return _wr->isUpdating(); else return false;}
 
-    // provide automatic 'upcast' for ease of use. (do it 'dynamic_cast' instead of 'static' because who knows what W is)
-    operator const Gtk::Widget () { return dynamic_cast<Gtk::Widget*>(this); }
-
 protected:
     RegisteredWidget() : W() { construct(); }
     template< typename A >
diff -Nurd -x'*~' inkscape-0.48.2.orig/src/widgets/desktop-widget.h inkscape-0.48.2/src/widgets/desktop-widget.h
--- inkscape-0.48.2.orig/src/widgets/desktop-widget.h	2011-07-08 14:25:09.000000000 -0400
+++ inkscape-0.48.2/src/widgets/desktop-widget.h	2011-12-09 15:52:21.000000000 -0500
@@ -239,7 +239,7 @@
 private:
     GtkWidget *tool_toolbox;
     GtkWidget *aux_toolbox;
-    GtkWidget *commands_toolbox,;
+    GtkWidget *commands_toolbox;
     GtkWidget *snap_toolbox;
 
     static void init(SPDesktopWidget *widget);
