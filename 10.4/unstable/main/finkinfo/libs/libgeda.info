Package: libgeda
Epoch: 1
Version: 1.4.3
Revision: 11

# Update both %N__-shlibs and %N__-data dependencies
Depends: <<
  %N33-shlibs (=%e:%v-%r),
  gd2-shlibs,
  guile18-shlibs,
  libpng3-shlibs (>= 1:1.2.16-1),
  shared-mime-info,
  desktop-file-utils
<<

Conflicts: geda-symbols (<= 20070626-10)

# gmp and libtool1.4 are apparently required by guile-1.8.
BuildDepends: <<
  atk1 (>= 1.20.0-1),
  cairo (>= 1.6-1),
  expat1,
  fontconfig2-dev (>= 2.4.1-1),
  freetype219 (>= 2.3.5-1),
  gd2,
  gettext-tools,
  gdk-pixbuf,
  glib2-dev (>= 2.14.0-1),
  glitz,
  gmp,
  gtk+2-dev (>= 2.12.0-1),
  guile18,
  guile18-dev,
  intltool,
  libgettext3-dev,
  libiconv,
  libiconv-dev,
  libjpeg,
  libpng3 (>= 1:1.2.16-1),
  libtool14 (>= 1.5.26-1),
  pango1-xft2-ft219-dev (>= 1.18.4-4),
  pixman (>= 0.10.0-1),
  pkgconfig (>= 0.21-1),
  texi2html | tetex-base,
  x11-dev,
  xft2-dev
<<
BuildDependsOnly: True

CustomMirror: <<
  nam-US: http://www.geda.seul.org/release/v1.4/%v/
<<

Source: mirror:custom:%n-%v.tar.gz
SourceDirectory: %n-%v
Source-MD5: f4254f345b5d1a1f3ae4e2e27ae38b0a

SetCPPFLAGS: -I%p/lib/pango-ft219/include/pango-1.0 -I%p/lib/pango-ft219/include -I%p/lib/freetype219/include/freetype2 -I%p/lib/freetype219/include -I%p/lib/fontconfig2/include
NoSetLDFLAGS: true
SetLDFLAGS: -L%p/lib/pango-ft219/lib -L%p/lib/freetype219/lib -L%p/lib/fontconfig2/lib
SetLIBS: -L%p/lib
SetCFLAGS: -Os -pipe
ConfigureParams: --with-rcdir=%p/etc/gEDA --infodir=%p/share/info GUILE=%p/bin/guile-1.8 GUILE_CONFIG=%p/bin/guile-1.8-config --disable-dependency-tracking --disable-gdgeda --disable-update-mime-database

CompileScript: <<
#!/bin/sh -ev

	export PKG_CONFIG_PATH="%p/lib/pango-ft219/lib/pkgconfig:%p/lib/fontconfig2/lib/pkgconfig:%p/lib/freetype219/lib/pkgconfig:$PKG_CONFIG_PATH" FREETYPE_CONFIG=%p/lib/freetype219/bin/freetype-config
	./configure %c
	make
<<
InstallScript: make -j1 install DESTDIR=%d

SplitOff: <<
  Package: %N33-shlibs
  Depends: <<
    atk1-shlibs (>= 1.20.0-1),
    gdk-pixbuf-shlibs,
    glib2-shlibs (>= 2.14.0-1),
    guile18-shlibs,
    gtk+2-shlibs (>= 2.12.0-1),
    libiconv,
    libjpeg-shlibs,
    libgettext3-shlibs,
    %N33-data,
    libpng3-shlibs,
    pango1-xft2-ft219 (>= 1.18.4-4),
    x11-shlibs
  <<

  Description: GNU EDA -- Electronics design -- library files
  Files: lib/libgeda.33.dylib
# Shlibs references compatibility version, not current version:
  Shlibs: <<
    %p/lib/libgeda.33.dylib 34.0.0 %n (>= 1:1.4.0-1)
  <<
  DocFiles: AUTHORS BUGS NEWS README TODO

  DescDetail: <<
Shared library files for GNU EDA, an electronics design package, 
including gschem, a schematic editor.

This package contains the shared libraries needed for the gEDA tools
(version %v).
  <<
<<

SplitOff2: <<
  Package:   %N33-data
  Provides:  %N-data
  Conflicts: %N26-data, %N27-data, %N28-data, %N29-data, %N31-data
  Replaces:  %N26-data, %N27-data, %N28-data, %N29-data, %N31-data
  Description: GNU EDA -- Electronics design -- data files
  Files: <<
     share/gEDA/prolog.ps
     etc/gEDA/system-gafrc
     share/gEDA/scheme/geda.scm
     share/icons
     share/locale
     share/mime
     share/mimelnk
  <<

  ConfFiles: %p/etc/gEDA/system-gafrc

DescDetail: <<
Shared library files for GNU EDA, an electronics design package, 
including gschem, a schematic editor.

This package contains the PostScript prologue for printing gEDA schematics,
the system-gafrc file, and a miscellaneous Scheme library for gEDA.
  <<
<<

DocFiles: AUTHORS BUGS NEWS README TODO

Description: GNU EDA -- Electronics design -- dev. files

DescDetail: <<
Library development files for GNU EDA, an electronics design package, 
including gschem, a schematic editor.

This package contains development library files for gEDA.
You only need to install this package if you wish to recompile
the geda-* client packages.

Release notes: http://geda.seul.org/release/v1.4/%v/gaf-%v-relnotes.html
<<

License: GPL
Homepage: http://www.geda.seul.org/
Maintainer: Charles Lepple <clepple+fink@ghz.cc>

DescPackaging: <<
prolog.ps has been split off since we do not yet know whether it will
be backwards compatible in future releases.
<<
