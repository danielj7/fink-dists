diff -ru xmlwitch-0.1.0.orig/xmlwitch.py xmlwitch-0.1.0/xmlwitch.py
--- xmlwitch-0.1.0.orig/xmlwitch.py	2009-08-02 22:11:44.000000000 -0400
+++ xmlwitch-0.1.0/xmlwitch.py	2010-02-19 17:38:02.000000000 -0500
@@ -1,5 +1,5 @@
-from __future__ import with_statement
-from StringIO import StringIO
+
+from io import StringIO
 from xml.sax import saxutils
 from keyword import kwlist as PYTHON_KWORD_LIST
 
@@ -21,11 +21,10 @@
     return element(name, self)
   __getitem__ = __getattr__
   def __str__(self):
-    return self._document.getvalue().encode(self._encoding)
-  def __unicode__(self):
+    return self._document.getvalue()
+  def __byte__(self):
     return self._document.getvalue().decode(self._encoding)
   def _write(self, line):
-    line = line.decode(self._encoding)
     self._document.write('%s%s\n' % (self._indentation * self._indent, line))
 
 class element:
@@ -53,7 +52,7 @@
   @property
   def serialized_attrs(self):
     serialized = []
-    for attr, value in self.attributes.items():
+    for attr, value in list(self.attributes.items()):
       serialized.append(' %s=%s' % (self.nameprep(attr), saxutils.quoteattr(value)))
     return ''.join(serialized)
   def nameprep(self, name):
@@ -86,4 +85,4 @@
           xml.label('Some label', for_='some_field')
           div.text(':')
           xml.input(None, type='text', value='')
-  print xml
+  print(xml)
