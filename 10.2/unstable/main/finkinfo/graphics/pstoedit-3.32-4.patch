diff -Naur pstoedit-3.32.orig/configure pstoedit-3.32/configure
--- pstoedit-3.32.orig/configure	Thu Aug 22 00:36:56 2002
+++ pstoedit-3.32/configure	Sun Nov  3 09:47:49 2002
@@ -3090,7 +3090,7 @@
   ;;
 
 darwin* | rhapsody*)
-  lt_cv_deplibs_check_method='file_magic Mach-O dynamically linked shared library'
+  lt_cv_deplibs_check_method=pass_all
   lt_cv_file_magic_cmd='/usr/bin/file -L'
   case "$host_os" in
   rhapsody* | darwin1.[012])
@@ -5048,7 +5048,7 @@
     # FIXME: Relying on posixy $() will cause problems for
     #        cross-compilation, but unfortunately the echo tests do not
     #        yet detect zsh echo's removal of \ escapes.
-    archive_cmds='$nonopt $(test "x$module" = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags -install_name $rpath/$soname $verstring'
+    archive_cmds='$nonopt $(test .$module = .yes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linkopts $(test .$module != .yes && echo -install_name $rpath/$soname $tmp_verstring)'
     # We need to add '_' to the symbols in $export_symbols first
     #archive_expsym_cmds="$archive_cmds"' && strip -s $export_symbols'
     hardcode_direct=yes
diff -Naur pstoedit-3.32.orig/ltmain.sh pstoedit-3.32/ltmain.sh
--- pstoedit-3.32.orig/ltmain.sh	Wed Aug 21 00:35:18 2002
+++ pstoedit-3.32/ltmain.sh	Wed Oct 30 07:48:57 2002
@@ -2858,7 +2858,18 @@
 	if test -n "$export_symbols" && test -n "$archive_expsym_cmds"; then
 	  eval cmds=\"$archive_expsym_cmds\"
 	else
-	  eval cmds=\"$archive_cmds\"
+         save_deplibs="$deplibs"
+         for conv in $convenience; do
+       tmp_deplibs=
+       for test_deplib in $deplibs; do
+         if test "$test_deplib" != "$conv"; then
+           tmp_deplibs="$tmp_deplibs $test_deplib"
+         fi
+       done
+       deplibs="$tmp_deplibs"
+         done
+         eval cmds=\"$archive_cmds\"
+         deplibs="$save_deplibs"	
 	fi
 	IFS="${IFS= 	}"; save_ifs="$IFS"; IFS='~'
 	for cmd in $cmds; do
@@ -3913,10 +3924,10 @@
 
 # Directory that this library needs to be installed in:
 libdir='$install_libdir'"
-	  if test "$installed" = no && test $need_relink = yes; then
-	    $echo >> $output "\
-relink_command=\"$relink_command\""
-	  fi
+#	  if test "$installed" = no && test $need_relink = yes; then
+#	    $echo >> $output "\
+#relink_command=\"$relink_command\""
+#	  fi
 	done
       fi
 
diff -Naur pstoedit-3.32.orig/src/Makefile.in pstoedit-3.32/src/Makefile.in
--- pstoedit-3.32.orig/src/Makefile.in	Thu Aug 22 00:36:43 2002
+++ pstoedit-3.32/src/Makefile.in	Sun Nov  3 07:49:03 2002
@@ -191,7 +191,7 @@
 	psimage.h
 
 
-CPPFLAGS = \
+CPPFLAGS += \
 	${LIBPLOTTER_CFLAGS}			\
 	${LIBMING_CFLAGS}			\
 	${LIBMAGICK_CFLAGS}			\
diff -Naur pstoedit-3.32.orig/src/miscutil.cpp pstoedit-3.32/src/miscutil.cpp
--- pstoedit-3.32.orig/src/miscutil.cpp	Sun Jun 16 02:04:08 2002
+++ pstoedit-3.32/src/miscutil.cpp	Wed Oct 30 06:36:52 2002
@@ -26,7 +26,7 @@
 // #ifdef _MSC_VER
 // for getcwd ( at least for Visual C++)
 
-#if defined(unix) || defined(__unix__) || defined(_unix) || defined(__unix) || defined(__EMX__) || defined (NetBSD) 
+#if defined(unix) || defined(__unix__) || defined(_unix) || defined(__unix) || defined(__EMX__) || defined (NetBSD) || defined(__APPLE__)
 #include <unistd.h>
 
 #ifdef __hpux
