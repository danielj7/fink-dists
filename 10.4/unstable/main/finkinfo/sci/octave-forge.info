Package: octave-forge
Version: 20070821
Revision: 1004
Distribution: 10.4
Maintainer: Corey Halpin <chalpin@cs.wisc.edu>
BuildDepends: <<
  fftw3, g95, gsl, hdf5 (>= 1.6.5-1002), imagemagick10-dev,
  libcurl4, libdap6, libiconv-dev, libjpeg, libnc-dap3 (>= 3.7.0-11),
  libncurses5, libpng3, libxml2, openssl097-dev, pcre,
  readline5 (>= 5.0-1004), texinfo, x11-dev
<<
Depends: << 
  fftw3-shlibs, grace, gsl-shlibs, hdf5-shlibs (>= 1.6.5-1002),
  imagemagick10-shlibs, libdap6-shlibs, libjpeg-shlibs, 
  libnc-dap3-shlibs (>= 3.7.0-11),
  octave (>= 2.9.6-12), openssl097-shlibs, pcre-shlibs,
  qhull, readline5-shlibs (>= 5.0-1004), x11
<<
Source: mirror:sourceforge:octave/%n-bundle-%v.tar.gz
Source-MD5: b7653a0bb693e534e2155e4e99d3029a
PatchScript: <<
#!/bin/sh -ev
  cd main
  tar -zxf optiminterp-0.2.3.tar.gz
  rm optiminterp-0.2.3.tar.gz
  # the underscore turns F77_FUNC in disarray, and if using F77_FUNC_ instead,
  # there are other occurences of the symbol that would need an appended underscore..
  perl -pi -e 's,optiminterp_wrapper,optiminterpwrapper,; s,OPTIMINTERP_WRAPPER,OPTIMINTERPWRAPPER,' optiminterp-0.2.3/src/optiminterp*
  tar -zcf optiminterp-0.2.3.tar.gz optiminterp-0.2.3
  rm -fR optiminterp-0.2.3
  # "Ginac library or headers not found" _ skip this
  rm symbolic-*
  cd -
  rm extra/{java,jhandles,xraylib}-* nonfree/arpack-*
<<
NoSetCPPFLAGS: true
NoSetLDFLAGS: true
SetLIBRARY_PATH: /usr/X11R6/lib:%p/lib
SetMAKEFLAGS: -j1
CompileScript: echo ''
InstallScript: <<
#!/bin/bash -ev
export CPATH=/usr/X11R6/include:%p/include
mkdir -p %i/share/octave/packages
echo "pkg prefix %i/share/octave/packages" > tmp
echo "pkg global_list %i/share/octave/octave_packages" >> tmp
echo "pkg install *.tar.gz" >> tmp
for d in main extra nonfree; do cd $d; octave -q ../tmp; cd -; done
find %i/share/octave/packages -name CVS -exec rm -fR \{\} \; || :
perl -pi -e '$/="\n\n";s,(?<=length: )(\d+),$1 - length("%d"),e if s,%d,,;' %i/share/octave/octave_packages
#perl -pi.bak -e 's,%i,%p,' %i/share/octave/octave_packages
mkdir -p  %i/share/doc/%n
echo 'Cf docs in %p/share/octave/packages/*/packinfo' > %i/share/doc/%n/README
<<

#InstallScript: <<
##!/bin/bash -ev
#OSD=`%p/bin/octave-config --oct-site-dir`
#MSD=`%p/bin/octave-config --m-site-dir`
#make install prefix=%i \
#  MPATH=%d${MSD}/octave-forge \
#  OPATH=%d${OSD}/octave-forge \
#  XPATH=%d${OSD/\/oct\///exec/} \
#  ALTMPATH=%d${MSD}/../octave-forge-alternatives/m \
#  ALTOPATH=%d${OSD/\/oct\///octave-forge-alternatives/oct/} \
#  mandir=%i/share/man
#<<
#DocFiles:<<
#  AUTHORS COPYING COPYING.BSD COPYING.GPL INSTALL INSTALL.MacOSX
#  README RELEASE-NOTES TODO
#<<
Description: Extensions to octave
DescDetail: <<
Contains custom scripts, functions and extensions for GNU Octave. A lot of
MatLab(TM) compatibility is gained from this package.
<<
DescPort: <<
Install script thanks to the debian package by
  Dirk Eddelbuettel <edd@debian.org>
Previous versions thanks to Per Persson.
Nasty perl script courtesy of Daniel Macks, to correct the lengths of the package 
full-path-to-file names to correspond to the as-installed-by-Fink values.
<<
Homepage: http://octave.sourceforge.net/ 
License: GPL
