Package: evolution
Version: 2.26.3
Revision: 6
Depends: <<
	%N-2.26-shlibs (>= %v-%r),
	atk1-shlibs (>= 1.26.0-1),
	audiofile-shlibs (>= 0.2.3-1),
	cairo-shlibs (>= 1.8-1),
	db47-aes-shlibs | db47-shlibs,
	dbus-shlibs (>= 1.2.1-1),
	enchant1-shlibs (>= 1.4.2-2),
	esound-shlibs (>= 0.2.38-1),
	evolution-data-server (>= 2.24.5-1),
	expat1-shlibs,
	fontconfig2-shlibs (>= 2.4.1-1),
	freetype219-shlibs (>= 2.3.8-2),
	gconf2 (>= 2.26.0-1),
	gconf2-shlibs (>= 2.26.0-1),
	glib2-shlibs (>= 2.20.0-1),
	glitz-shlibs,
	gnome-icon-theme (>= 2.24.0-1),
	gnome-keyring (>= 2.26.0-1),
	gnome-keyring-shlibs (>= 2.26.0-1),
	gnome-pilot (>= 2.0.17-1),
	gnome-pilot-shlibs (>= 2.0.17-1),
	gnome-spell (>= 1.0.8-4),
	gnome-vfs2-unified (>= 1:2.24.1-1),
	gnome-vfs2-unified-shlibs (>= 1:2.24.1-1),
	gnutls26-shlibs (>= 2.8.0-1),
	gstreamer-0.10 (>= 0.10.23-1),
	gstreamer-0.10-shlibs (>= 0.10.23-1),
	gtk+2 (>= 2.16.0-1),
	gtk+2-shlibs (>= 2.16.0-1),
	gtkhtml3.14-shlibs (>= 3.26.0-1),
	libart2-shlibs (>= 2.3.16-2),
	libavahi-client3-shlibs,
	libavahi-common3-shlibs,
	libavahi-glib1-shlibs,
	libbonobo2 (>= 2.24.1-1),
	libbonobo2-shlibs (>= 2.24.1-1),
	libbonoboui2 (>= 2.24.1-1),
	libbonoboui2-shlibs (>= 2.24.1-1),
	libcamel-1.2.14-shlibs (>= 2.26.0-1),
	libcamel-provider-1.2.14-shlibs (>= 2.26.0-1),
	libebackend-1.2.0-shlibs (>= 2.26.0-1),
	libebook-1.2.9-shlibs (>= 2.26.0-1),
	libecal-1.2.7-shlibs (>= 2.26.0-1),
	libedataserver-1.2.11-shlibs (>= 2.26.0-1),
	libedataserverui-1.2.8-shlibs (>= 2.26.0-1),
	libexchange-storage-1.2.3-shlibs (>= 2.26.0-1),
	libgcrypt-shlibs (>= 1.4.3-2),
	libgdata-1.2.1-shlibs (>= 2.26.0-1),
	libgdata-google-1.2.1-shlibs (>= 2.26.0-1),
	libgettext3-shlibs,
	libglade2-shlibs (>= 2.6.4-1),
	libgnome2-shlibs (>= 2.26.0-1),
	libgnomecanvas2-shlibs (>= 2.26.0-1),
	libgnomeui2-shlibs (>= 2.24.1-1),
	libgpg-error-shlibs,
	libhal1-shlibs (>= 0.5.11-1),
	libical-shlibs,
	libiconv,
	libpng3-shlibs,
	libsoup2.4.1-ssl-shlibs (>= 2.26.0-1),
	libtasn1-3-shlibs (>= 2.2-2),
	libxml2-shlibs (>= 2.6.30-1),
	libytnef-shlibs,
	openldap24-shlibs (>= 2.4.16-1),
	orbit2 (>= 2.14.17-1),
	orbit2-shlibs (>= 2.14.17-1),
	pango1-xft2-ft219-shlibs (>= 1.24.0-1),
	pilot-link09-shlibs (>= 0.12.3-2),
	pixman-shlibs (>= 0.14.0-1),
	popt-shlibs,
	rarian-compat,
	seamonkey (>= 1.1.17-1),
	seamonkey-shlibs (>= 1.1.17-1),
	sqlite3-shlibs (>= 3.6.13-1),
	x11-shlibs
<<
# don't have spam-assassin in fink
Recommends: bogofilter
BuildDepends: <<
	atk1 (>= 1.26.0-1),
	audiofile (>= 0.2.3-1),
	autoconf,
	automake1.11,
	libavahi-client3-dev, libavahi-common3-dev, libavahi-core6-dev,
	cairo (>= 1.8-1),
	db47-aes | db47,
	dbus-dev (>= 1.2.1-1),
	enchant1-dev (>= 1.4.2-2),
	esound (>= 0.2.38-1),
	expat1,
	fink (>= 0.24.12-1),
	fontconfig2-dev (>= 2.4.1-1),
	freetype219 (>= 2.3.8-2),
	gconf2-dev (>= 2.26.0-1),
	gettext-bin,
	gettext-tools (>= 0.17),
	glib2-dev (>= 2.20.0-1),
	glitz,
	gnome-doc-utils (>= 0.12.0-1),
	gnome-keyring-dev (>= 2.26.0-1),
	gnome-pilot-dev (>= 2.0.17-1),
	gnome-vfs2-unified-dev (>= 1:2.24.1-1),
	gnutls26 (>= 2.8.0-1),
	gstreamer-0.10-dev (>= 0.10.23-1),
	gtk+2-dev (>= 2.16.0-1),
	gtkhtml3.14-dev (>= 3.26.0-1),
	intltool40,
	libart2 (>= 2.3.16-2),
	libavahi-glib1-dev,
	libbonobo2-dev (>= 2.24.1-1),
	libbonoboui2-dev (>= 2.24.1-1),
	libcamel-1.2.14-dev (>= 2.26.0-1),
	libcamel-provider-1.2.14-dev (>= 2.26.0-1),
	libebackend-1.2.0-dev (>= 2.26.0-1),
	libebook-1.2.9-dev (>= 2.26.0-1),
	libecal-1.2.7-dev (>= 2.26.0-1),
	libedataserver-1.2.11-dev (>= 2.26.0-1),
	libedataserverui-1.2.8-dev (>= 2.26.0-1),
	libegroupwise-1.2.13-dev (>= 2.26.0-1),
	libexchange-storage-1.2.3-dev (>= 2.26.0-1),
	libgcrypt (>= 1.4.3-2),
	libgdata-1.2.1-dev (>= 2.26.0-1),
	libgdata-google-1.2.1-dev (>= 2.26.0-1),
	libgettext3-dev,
	libglade2 (>= 2.6.4-1),
	libgnome2-dev (>= 2.26.0-1),
	libgnomecanvas2-dev (>= 2.26.0-1),
	libgnomeui2-dev (>= 2.24.1-1),
	libgpg-error,
	libhal1-dev (>= 0.5.11-1),
	libical,
	libiconv-dev,
	libpng3,
	libsoup2.4.1-ssl (>= 2.26.0-1),
	libtasn1-3 (>= 2.2-2),
	libtool2,
	libxml2 (>= 2.6.30-1),
	libytnef-dev,
	openldap24-dev (>= 2.4.16-1),
	orbit2-dev (>= 2.14.17-1),
	pango1-xft2-ft219-dev (>= 1.24.0-1),
	pilot-link09 (>= 0.12.3-2),
	pixman (>= 0.14.0-1),
	pkgconfig (>= 0.23),
	popt,
	rarian-compat,
	seamonkey-dev (>= 1.1.17-1),
	sed,
	sqlite3 (>= 3.6.13-1),
	x11-dev,
	xft2-dev
<<
BuildConflicts: gtkhtml-dev, nspr
Source: mirror:gnome:sources/%n/2.26/%n-%v.tar.bz2
Source-MD5: fcc487503ab91b9e25fd529abc87fdae
Source2: mirror:master:evolution-missing-images-2.26.3.tar.bz2
Source2-MD5: f8d28c5fff8e275670a8175356f73cdf
PatchFile: %n-%v.patch
PatchFile-MD5: 8df13082eec47272ee0fd6b0e1820233
PatchScript: <<
#!/bin/sh -ev
	%{default_script}
	perl -pi -e 's,libpisock.so,libpisock.dylib,' acinclude.m4
	cp ../evolution-missing-images-2.26.3/*.png help/C/figures
<<
SetCPPFLAGS: -D__DARWIN_UNIX03=1 -I%p/lib/fontconfig2/include -I%p/include/seamonkey/nspr -I%p/include/seamonkey/nss
SetCFLAGS: -Os
SetLDFLAGS: -L%p/lib/fontconfig2/lib -L%p/lib/seamonkey
ConfigureParams: <<
	--disable-static --disable-scrollkeeper --disable-dependency-tracking --with-krb5 --with-krb4 --with-openldap=%p \
	--enable-exchange --enable-default-binary --disable-mono --without-weather \
	--enable-pilot-conduits --with-pisock=%p \
	--enable-nntp --enable-smime --enable-nss=yes --with-nspr-includes=%p/include/seamonkey/nspr \
	--with-nss-includes=%p/include/seamonkey/nss --with-nspr-libs=%p/lib/seamonkey --with-nss-libs=%p/lib/seamonkey \
	--disable-schemas-install --libexecdir=%p/sbin --mandir=%p/share/man F77=no \
	PKG_CONFIG_PATH=%p/lib/fontconfig2/lib/pkgconfig:$PKG_CONFIG_PATH \
	--enable-plugins=experimental
<<
CompileScript: <<
	autoreconf -fi
	./configure %c
	make
<<
InstallScript: <<
	make -j1 install DESTDIR="%d"
	mkdir -p %i/lib/evolution/2.26/plugins

	mv %i/bin/evolution %i/bin/evolution.bin
	echo '#!/bin/sh' > %i/bin/evolution
	echo 'exec %p/lib/seamonkey/run-mozilla.sh %p/bin/evolution.bin' >> %i/bin/evolution
	chmod 755 %i/bin/evolution
<<
ConfFiles: <<
	%p/etc/gconf/schemas/apps-evolution-external-editor.schemas 
	%p/etc/gconf/schemas/apps-evolution-mail-notification.schemas 
	%p/etc/gconf/schemas/apps_evolution_addressbook.schemas
	%p/etc/gconf/schemas/apps_evolution_calendar.schemas
	%p/etc/gconf/schemas/apps_evolution_shell.schemas
	%p/etc/gconf/schemas/bogo-junk-plugin.schemas 
	%p/etc/gconf/schemas/evolution-mail.schemas
<<
PostInstScript: <<
	if [ configure = "$1" ]; then
		scrollkeeper-update
		export GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source`
		for s in \
			apps-evolution-external-editor \
			apps-evolution-mail-notification \
			apps_evolution_addressbook \
			apps_evolution_calendar \
			apps_evolution_shell \
			bogo-junk-plugin \
			evolution-mail \
		; do
			gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/$s.schemas >/dev/null
		done
	fi
	gtk-update-icon-cache -f -t %p/share/icons/hicolor || :
<<
PostRmScript: <<
	if [ remove != "$1" ]; then
		scrollkeeper-update
	fi
	gtk-update-icon-cache -f -t %p/share/icons/hicolor || :
<<
SplitOff: <<
	Package: %N-2.26-shlibs
	Depends: <<
		atk1-shlibs (>= 1.26.0-1),
		audiofile-shlibs (>= 0.2.3-1),
		cairo-shlibs (>= 1.8-1),
		db47-aes-shlibs | db47-shlibs,
		dbus-shlibs (>= 1.2.1-1),
		enchant1-shlibs (>= 1.4.2-2),
		esound-shlibs (>= 0.2.38-1),
		expat1-shlibs,
		fontconfig2-shlibs (>= 2.4.1-1),
		freetype219-shlibs (>= 2.3.8-2),
		gconf2-shlibs (>= 2.26.0-1),
		glib2-shlibs (>= 2.20.0-1),
		glitz-shlibs,
		gnome-keyring-shlibs (>= 2.26.0-1),
		gnome-pilot-shlibs (>= 2.0.17-1),
		gnome-spell (>= 1.0.8-4),
		gnome-vfs2-unified-shlibs (>= 1:2.24.1-1),
		gnutls26-shlibs (>= 2.8.0-1),
		gtk+2-shlibs (>= 2.16.0-1),
		gtkhtml3.14-shlibs (>= 3.26.0-1),
		libart2-shlibs (>= 2.3.16-2),
		libavahi-client3-shlibs,
		libavahi-common3-shlibs,
		libavahi-glib1-shlibs,
		libbonobo2-shlibs (>= 2.24.1-1),
		libbonoboui2-shlibs (>= 2.24.1-1),
		libcamel-1.2.14-shlibs (>= 2.26.0-1),
		libcamel-provider-1.2.14-shlibs (>= 2.26.0-1),
		libebackend-1.2.0-shlibs (>= 2.26.0-1),
		libebook-1.2.9-shlibs (>= 2.26.0-1),
		libecal-1.2.7-shlibs (>= 2.26.0-1),
		libedataserver-1.2.11-shlibs (>= 2.26.0-1),
		libedataserverui-1.2.8-shlibs (>= 2.26.0-1),
		libgcrypt-shlibs (>= 1.4.3-2),
		libgdata-1.2.1-shlibs (>= 2.26.0-1),
		libgdata-google-1.2.1-shlibs (>= 2.26.0-1),
		libgettext3-shlibs,
		libglade2-shlibs (>= 2.6.4-1),
		libgnome2-shlibs (>= 2.26.0-1),
		libgnomecanvas2-shlibs (>= 2.26.0-1),
		libgnomeui2-shlibs (>= 2.24.1-1),
		libgpg-error-shlibs,
		libhal1-shlibs (>= 0.5.11-1),
		libical-shlibs,
		libiconv,
		libpng3-shlibs,
		libsoup2.4.1-ssl-shlibs (>= 2.26.0-1),
		libtasn1-3-shlibs (>= 2.2-2),
		libxml2-shlibs (>= 2.6.30-1),
		orbit2-shlibs (>= 2.14.17-1),
		pango1-xft2-ft219-shlibs (>= 1.24.0-1),
		pilot-link09-shlibs (>= 0.12.3-2),
		pixman-shlibs (>= 0.14.0-1),
		popt-shlibs,
		seamonkey-shlibs (>= 1.1.17-1),
		sqlite3-shlibs (>= 3.6.13-1),
		x11-shlibs
	<<
	Replaces: %N (<< %v-%r)
	Files: <<
		lib/evolution/2.26/lib*.0.dylib
	<<
	Shlibs: <<
		%p/lib/evolution/2.26/libeabutil.0.dylib                         1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libeconduit.0.dylib                        1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libecontacteditor.0.dylib                  1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libecontactlisteditor.0.dylib              1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libefilterbar.0.dylib                      1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libemiscwidgets.0.dylib                    1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libeshell.0.dylib                          1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libessmime.0.dylib                         1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libetable.0.dylib                          1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libetext.0.dylib                           1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libetimezonedialog.0.dylib                 1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libeutil.0.dylib                           1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libevolution-a11y.0.dylib                  1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libevolution-addressbook-a11y.0.dylib      1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libevolution-addressbook-importers.0.dylib 1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libevolution-calendar-a11y.0.dylib         1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libevolution-calendar-importers.0.dylib    1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libevolution-mail-importers.0.dylib        1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libevolution-smime.0.dylib                 1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libevolution-widgets-a11y.0.dylib          1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libfilter.0.dylib                          1.0.0 %n (>= 2.26.3-1)
		%p/lib/evolution/2.26/libmenus.0.dylib                           1.0.0 %n (>= 2.26.3-1)
	<<
<<
SplitOff2: <<
	Package: %N-2.26-dev
	BuildDependsOnly: true
	Depends: %N-2.26-shlibs (= %v-%r)
	Conflicts: %N-2.12-dev, %N-2.24-dev
	Replaces: %N-2.12-dev, %N-2.24-dev
	Files: <<
		include
		lib/evolution/2.26/lib*
		lib/pkgconfig
		share/idl
	<<
<<
DocFiles: AUTHORS COPYING COPYING-DOCS HACKING MAINTAINERS NEWS README
Description: Advanced email client
DescPort: <<
	Original package and port for evolution < 1.4 by Max Horn

	Fix configure test for libpisock to use darwin's
	shared-library extension

	Make calendar/conduits/common/libecalendar-common-conduit.la
	an internal-only convenience library (was a module but need to
	link against it) and scrap its headers. See:
	http://bugzilla.gnome.org/show_bug.cgi?id=571275

	Example solution as we get time to fix...
	#Link against calencar/libevolution-calendarprivate.la instead
	#of the modules calendar/gui/libevolution-calendar.la or
	#addressbook/gui/component/libevolution-addressbook.la or
	#mail/libevolution-mail.la for same reason.

	Enable as many plugins as compile. Disable (or patch out) ones
	that link-against-module (.so) problems:

		attachment-reminder/liborg-gnome-evolution-attachment-reminder.la
		calendar-weather/liborg-gnome-calendar-weather.la
		default-mailer/liborg-gnome-default-mailer.la
		email-custom-header/liborg-gnome-email-custom-header.la
		face/liborg-gnome-face.la
		folder-unsubscribe/liborg-gnome-mail-folder-unsubscribe.la
		groupwise-features/liborg-gnome-groupwise-features.la
		import-ics-attachments/liborg-gnome-evolution-mail-attachments-import-ics.la
		itip-formatter/liborg-gnome-itip-formatter.la
		mail-account-disable/libmail-account-disable.la
		mail-to-task/liborg-gnome-mail-to-task.la
		mailing-list-actions/liborg-gnome-mailing-list-actions.la
		mark-all-read/liborg-gnome-mark-all-read.la
		prefer-plain/liborg-gnome-prefer-plain.la
		publish-calendar/liborg-gnome-publish-calendar.la
		startup-wizard/liborg-gnome-evolution-startup-wizard.la
		templates/liborg-gnome-templates.la

	plugins/exchange-operations/liborg-gnome-exchange-operations.la
	links against several .so and seems critical to fix this
	plugin for even basic operations...try omitting the links and
	hope for the best (upstream already doesn't enforce
	-no-undefined).  Importing source blocks from dependent
	modules seems risky because they involve shared variable
	storage.

	Don't publish ELFish -R flags in *.pc. See:
	http://bugzilla.gnome.org/show_bug.cgi?id=350385

	Fix nested function bug in iconv autoconf test. See:
	http://bugzilla.gnome.org/show_bug.cgi?id=587374

	Avoid passing inappropriate -I/include and -L/lib flags. See:
	http://bugzilla.gnome.org/show_bug.cgi?id=588267
<<
DescPackaging: <<
	"experimental" plugins are disabled because shell/Evolution.h
	has syntax errors in the structs. Therefore don't care about
	hal (directly) or libytnef.

	Not fixing some omf entity mistakes. See:
	http://bugzilla.gnome.org/show_bug.cgi?id=587420

	Force non-detection of libnotify because fink's only works if
	its daemon is started manually after x11 (dbus issue?).

	Force non-detection of NetworkManager because fink doesn't
	have it (consistent build results if it were to get it).

	#Force non-detection of libpst because fink doesn't have it
	#(consistent build results if it were to get it).
	^--disable plugin that would use it for cleaner effect

	Seamonkey libary jungle does a lot of runtime loading but
	doesn't know its own lib paths...needs lots of DYLD_* and
	similar games, which is what run-mozilla.sh hanles. Evo needs
	seamonkey's libs to be able to load, so "evolution" is a
	wrapper that uses run-mozilla.sh to set the vars for seamonkey
	before spawning the actual "evolution.bin" program.

	Add some .png that were omitted from the source tarball (pull
	from git d11c3c7df839d8bed10c67621fd64613c0b1eb34). See:
	http://bugzilla.gnome.org/show_bug.cgi?id=552695

	Make sure to create plugins dir even if no plugins in this
	package so that it's obvious to others where the plugins
	*should* go.

	Fix dependent lib flag ordering (makefile bugs). See:
	http://bugzilla.gnome.org/show_bug.cgi?id=588106
	NB: doesn't matter until these plugins are activated.

	Make sure not to link to stand-alone libnspr because we're
	using seamonkey's component for it (headers are buried but lib
	is visible in -L paths). Some day could switch to stand-alone
	libnspr (if fink's were current and patched to have .pc) and
	libnss (if fink had it).

	Rely on PATH resolution of spamassassin and bogofilter
	executables instead of hardcoding (they're opened as
	command-line pipes so don't need hard Depends on them).
<<
Homepage: http://www.novell.com/products/evolution/
License: GPL
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
