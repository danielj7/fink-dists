--- gcc-4.2.0/libgomp/testsuite/libgomp.c++/pr30703.C.org	2007-02-07 08:37:29.000000000 -0500
+++ gcc-4.2.0/libgomp/testsuite/libgomp.c++/pr30703.C	2007-05-17 19:48:03.000000000 -0400
@@ -1,5 +1,6 @@
 // PR c++/30703
 // { dg-do run }
+// { dg-options "-shared-libgcc" { target *-*-darwin* } }
 
 #include <omp.h>
 
--- gcc-4.2-20060822/gcc/testsuite/lib/prune.exp.org	2006-08-23 18:33:56.000000000 -0400
+++ gcc-4.2-20060822/gcc/testsuite/lib/prune.exp	2006-08-23 18:41:28.000000000 -0400
@@ -43,6 +43,7 @@
     regsub -all "(^|\n)\[^\n\]*file path prefix \[^\n\]* never used" $text "" text
     regsub -all "(^|\n)\[^\n\]*linker input file unused since linking not done" $text "" text
 
+    regsub -all "(^|\n)can't find atom for N_GSYM stabs \[^\n\]* in \[^\n\]*" $text "" text
     #send_user "After:$text\n"
 
     return $text
--- gcc-4.2-20060825/libstdc++-v3/testsuite/lib/prune.exp.org   2006-08-26 11:22:52.000000000 -0400
+++ gcc-4.2-20060825/libstdc++-v3/testsuite/lib/prune.exp       2006-08-26 11:23:39.000000000 -0400
@@ -29,5 +29,7 @@
     regsub -all "(^|\n)\[^\n\]*: Additional NOP may be necessary to workaround Itanium processor A/B step errata" $text "" text
     regsub -all "(^|\n)\[^\n*\]*: Assembler messages:\[^\n\]*" $text "" text
 
+    regsub -all "(^|\n)can't find atom for N_GSYM stabs \[^\n\]* in \[^\n\]*" $text "" text
+
     return $text
 }
--- gcc-4.2-20061107/libjava/configure.ac.orig	2006-11-13 20:36:59.000000000 -0500
+++ gcc-4.2-20061107/libjava/configure.ac	2006-11-13 20:38:22.000000000 -0500
@@ -180,6 +180,10 @@
 TOOLKIT=
 AC_SUBST(TOOLKIT)
 
+if test -n "${with_multisubdir}"; then
+  peerlibs=no
+fi
+
 for peer in $peerlibs ; do
   case $peer in
     xlib)
