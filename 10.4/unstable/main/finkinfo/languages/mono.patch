diff -Nurd mono-2.6.1/configure mono-2.6.1-new/configure
--- mono-2.6.1/configure	2009-12-17 10:50:43.000000000 -0500
+++ mono-2.6.1-new/configure	2010-02-23 15:08:22.000000000 -0500
@@ -3239,7 +3239,7 @@
 		fi
 								case "$host" in
 			i*86-*-darwin10*)
-				BROKEN_DARWIN_FLAGS="-arch i386 -D_XOPEN_SOURCE -mmacosx-version-min=10.5"
+				BROKEN_DARWIN_FLAGS="-D_XOPEN_SOURCE -mmacosx-version-min=10.5"
 				CPPFLAGS="$CPPFLAGS $BROKEN_DARWIN_FLAGS"
 				CFLAGS="$CFLAGS $BROKEN_DARWIN_FLAGS"
 				CXXFLAGS="$CXXFLAGS $BROKEN_DARWIN_FLAGS"
@@ -18140,9 +18140,6 @@
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 #include <zlib.h>
-int
-main ()
-{
 
    void main () {
    #if defined(ZLIB_VERNUM) && (ZLIB_VERNUM >= 0x1230)
@@ -18150,10 +18147,6 @@
    #else
    #error No good zlib found
    #endif
-
-  ;
-  return 0;
-}
 _ACEOF
 rm -f conftest.$ac_objext
 if { (ac_try="$ac_compile"
@@ -36561,11 +36554,11 @@
 
 JIT_SUPPORTED=no
 INTERP_SUPPORTED=no
-LIBC="libc.so.6"
-INTL="libc.so.6"
-SQLITE="libsqlite.so.0"
-SQLITE3="libsqlite3.so.0"
-X11="libX11.so"
+LIBC="/usr/lib/libSystem.dylib"
+INTL="@FINKPREFIX@/lib/libintl.dylib"
+SQLITE="@FINKPREFIX@/lib/libsqlite.0.dylib"
+SQLITE3="@FINKPREFIX@/lib/libsqlite3.0.dylib"
+X11="/usr/X11R6/lib/libX11.6.dylib"
 
 sizeof_register="SIZEOF_VOID_P"
 
@@ -37047,11 +37040,11 @@
 case "$host" in
      *-*-darwin*)
 	libsuffix=".dylib"
-	LIBC="libc.dylib"
-	INTL="libintl.dylib"
-	SQLITE="libsqlite.0.dylib"
-	SQLITE3="libsqlite3.0.dylib"
-	X11="libX11.dylib"
+	LIBC="/usr/lib/libSystem.dylib"
+	INTL="@FINKPREFIX@/lib/libintl.dylib"
+	SQLITE="@FINKPREFIX@/lib/libsqlite.0.dylib"
+	SQLITE3="@FINKPREFIX@/lib/libsqlite3.0.dylib"
+	X11="/usr/X11R6/lib/libX11.6.dylib"
 	;;
      *-*-*netbsd*)
 	LIBC="libc.so.12"
diff -Nurd mono-2.6.1/data/config.in mono-2.6.1-new/data/config.in
--- mono-2.6.1/data/config.in	2009-09-25 10:58:13.000000000 -0400
+++ mono-2.6.1-new/data/config.in	2010-02-23 15:07:47.000000000 -0500
@@ -5,19 +5,19 @@
 	<dllmap dll="intl" name="bind_textdomain_codeset" target="@LIBC@" os="solaris"/>
 	<dllmap dll="libintl" name="bind_textdomain_codeset" target="@LIBC@" os="solaris"/>
 	<dllmap dll="libintl" target="@INTL@" os="!windows"/>
-	<dllmap dll="i:libxslt.dll" target="libxslt@libsuffix@" os="!windows"/>
-	<dllmap dll="i:odbc32.dll" target="libodbc@libsuffix@" os="!windows"/>
-	<dllmap dll="i:odbc32.dll" target="libiodbc.dylib" os="osx"/>
-	<dllmap dll="oci" target="libclntsh@libsuffix@" os="!windows"/>
-	<dllmap dll="db2cli" target="libdb2_36@libsuffix@" os="!windows"/>
-	<dllmap dll="MonoPosixHelper" target="libMonoPosixHelper@libsuffix@" os="!windows" />
+	<dllmap dll="i:libxslt.dll" target="@FINKPREFIX@/lib/libxslt.1@libsuffix@" os="!windows"/>
+	<dllmap dll="i:odbc32.dll" target="@FINKPREFIX@/lib/libodbc.1@libsuffix@" os="!windows"/>
+	<dllmap dll="i:odbc32.dll" target="/usr/lib/libiodbc.2.dylib" os="osx"/>
+	<dllmap dll="oci" target="@FINKPREFIX@/lib/libclntsh@libsuffix@" os="!windows"/>
+	<dllmap dll="db2cli" target="@FINKPREFIX@/lib/libdb2_36@libsuffix@" os="!windows"/>
+	<dllmap dll="MonoPosixHelper" target="@FINKPREFIX@/lib/libMonoPosixHelper@libsuffix@" os="!windows" />
 	<dllmap dll="i:msvcrt" target="@LIBC@" os="!windows"/>
 	<dllmap dll="i:msvcrt.dll" target="@LIBC@" os="!windows"/>
 	<dllmap dll="sqlite" target="@SQLITE@" os="!windows"/>
 	<dllmap dll="sqlite3" target="@SQLITE3@" os="!windows"/>
 	<dllmap dll="libX11" target="@X11@" os="!windows" />
-	<dllmap dll="libcairo-2.dll" target="libcairo.so.2" os="!windows"/>
-	<dllmap dll="libcups" target="libcups.so.2" os="!windows"/>
+	<dllmap dll="libcairo-2.dll" target="@FINKPREFIX@/lib/libcairo.2.dylib" os="!windows"/>
+	<dllmap dll="libcups" target="/usr/lib/libcups.2.dylib" os="!windows"/>
 	<dllmap dll="i:kernel32.dll">
 		<dllentry dll="__Internal" name="CopyMemory" target="mono_win32_compat_CopyMemory"/>
 		<dllentry dll="__Internal" name="FillMemory" target="mono_win32_compat_FillMemory"/>
diff -Nurd mono-2.6.1/mono/io-layer/shared.c mono-2.6.1-new/mono/io-layer/shared.c
--- mono-2.6.1/mono/io-layer/shared.c	2009-09-25 10:58:10.000000000 -0400
+++ mono-2.6.1-new/mono/io-layer/shared.c	2010-02-23 15:07:47.000000000 -0500
@@ -168,8 +168,8 @@
 		ubuf.machine[0] = '\0';
 		ubuf.sysname[0] = '\0';
 	} else {
-		g_strdelimit (ubuf.sysname, "/", '_');
-		g_strdelimit (ubuf.machine, "/", '_');
+		g_strdelimit (ubuf.sysname, NULL, '_');
+		g_strdelimit (ubuf.machine, NULL, '_');
 	}
 
 	fake_name = g_getenv ("MONO_SHARED_HOSTNAME");
diff -Nurd mono-2.6.1/mono/metadata/loader.c mono-2.6.1-new/mono/metadata/loader.c
--- mono-2.6.1/mono/metadata/loader.c	2009-12-14 15:16:11.000000000 -0500
+++ mono-2.6.1-new/mono/metadata/loader.c	2010-02-23 15:07:47.000000000 -0500
@@ -1269,6 +1269,24 @@
 
 		if (!module) {
 			void *iter = NULL;
+			while ((full_name = mono_dl_build_path ("@FINKPREFIX@/lib", file_name, &iter))) {
+				mono_trace (G_LOG_LEVEL_INFO, MONO_TRACE_DLLIMPORT,
+						"DllImport loading location: '%s'.", full_name);
+				module = cached_module_load (full_name, MONO_DL_LAZY, &error_msg);
+				if (!module) {
+					mono_trace (G_LOG_LEVEL_INFO, MONO_TRACE_DLLIMPORT,
+							"DllImport error loading library: '%s'.",
+							error_msg);
+					g_free (error_msg);
+				}
+				g_free (full_name);
+				if (module)
+					break;
+			}
+		}
+
+		if (!module) {
+			void *iter = NULL;
 			while ((full_name = mono_dl_build_path (NULL, file_name, &iter))) {
 				mono_trace (G_LOG_LEVEL_INFO, MONO_TRACE_DLLIMPORT,
 						"DllImport loading location: '%s'.", full_name);
