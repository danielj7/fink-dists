Package: scilab-atlas
Version: 2.6
Revision: 7
Maintainer: Jeffrey Whitaker <jsw@cdc.noaa.gov>
Depends: g77 (>= 3.1-20020420-1), atlas, xless, dlcompat
Conflicts: scilab
Replaces: scilab
Provides: scilab
Source: ftp://ftp.inria.fr/INRIA/Projects/Meta2/Scilab/distributions/scilab-%v.src.tar.gz
Source-MD5: 32719c686f154ca0ddb02157b00c897e
SourceDirectory: scilab-%v
Patch: %f.patch
PatchScript: cp config/Makefile.freebsd config/Makefile.darwin
UpdateLibtoolInDirs: config
UpdateConfigGuess: true
ConfigureParams: --with-g77
CompileScript: <<
 ./configure %c
 /bin/rm -f routines/calelm/unsfdcopy.f
 (cd routines/metanet; mv Makefile Makefile.orig; sed 's|FFLAGS = $(FC_OPTIONS)|FFLAGS = -O1|g' < Makefile.orig > Makefile)
 make BLAS='%p/lib/libcblas.a %p/lib/libf77blas.a %p/lib/libatlas.a' LAPACK='%p/lib/liblapack.a' all
<<
InstallScript: <<
 mkdir -p %i/lib
 mkdir -p %i/bin
 make install LIBPREFIX=%i/lib
 ln -fs %p/lib/scilab-%v/bin/scilab %i/bin/scilab
 ln -fs %p/lib/scilab-%v/bin/intersci %i/bin/intersci
 ln -fs %p/lib/scilab-%v/bin/intersci-n %i/bin/intersci-n
 ln -fs %p/bin/xless %i/lib/scilab-%v/bin/xless
 (cd %i/lib/scilab-%v/X11_defaults; mv XLess XLess.orig; sed '/^XLess.frame/d' < XLess.orig > XLess; echo "Xless*sizeToFit:        true" >> XLess)
<<
PostInstScript: (cd %p/lib/scilab-%v; make)
Description: Software package for numerical computations, with atlas libs
DescPort: <<
 Used instructions posted at http://homepage.mac.com/persquare/,
 but instead of making symlinks for malloc.h I created a (very large) patch
 which wraps "#ifndef __APPLE__" and "#end if" around all "#include <malloc.h>"
 statements. 
 Built-in xless (used for online help) doesn't work - it is replaced
 with a symlink to the fink installed xless.
 In OS X.1, only -O1 optimization can be used for fortran files in routines/metanet.
<<
License: OSI-Approved
Homepage: http://www-rocq.inria.fr/scilab/

