Package: caml-light
Version: 0.75
Revision: 1
Description: Strongly typed ML-style functional language
License: Restrictive/Distributable
Maintainer: Thomas Deniau <thomas@deniau.org>

CustomMirror: <<
eur-PL: ftp://sunsite.icm.edu.pl/pub/programming/caml
asi-JP: http://wwwfun.kurims.kyoto-u.ac.jp/soft/caml-light
Primary: ftp://ftp.inria.fr/INRIA/caml-light/
<<

Source: mirror:custom:cl75unix.tar.gz
Source-MD5: 6c236074e4487949ec22001c7a498057
SourceDirectory: cl75
DocFiles: COPYRIGHT README
PatchScript: patch --posix -p0 < %a/%n.patch

CompileScript: <<
#!/bin/sh -e
make -C src configure
make -C src CPP='/usr/bin/cpp3 -P -traditional -Dunix' LIBDIR='%p/lib/%n' world
make -C src CPP='/usr/bin/cpp3 -P -traditional -Dunix' LIBDIR='%p/lib/%n' bootstrap
<<

InstallScript: <<
#!/bin/sh -e
mkdir -p %i/bin
mkdir -p %i/lib/%n
mkdir -p %i/share/man/man1
make -C src/runtime BINDIR='%i/bin' LIBDIR='%i/lib/%n' MANDIR='%i/share/man/man1' install
make -C src/launch BINDIR='%i/bin' LIBDIR='%i/lib/%n' MANDIR='%i/share/man/man1' install
echo "#!%p/bin/camlrun" > %i/lib/%n/header
make -C src/lib BINDIR='%i/bin' LIBDIR='%i/lib/%n' MANDIR='%i/share/man/man1' install
make -C src/compiler BINDIR='%i/bin' LIBDIR='%i/lib/%n' MANDIR='%i/share/man/man1' install
make -C src/linker BINDIR='%i/bin' LIBDIR='%i/lib/%n' MANDIR='%i/share/man/man1' install
make -C src/librar BINDIR='%i/bin' LIBDIR='%i/lib/%n' MANDIR='%i/share/man/man1' install
make -C src/toplevel BINDIR='%i/bin' LIBDIR='%i/lib/%n' MANDIR='%i/share/man/man1' install
make -C src/lex BINDIR='%i/bin' LIBDIR='%i/lib/%n' MANDIR='%i/share/man/man1' install
make -C src/yacc BINDIR='%i/bin' LIBDIR='%i/lib/%n' MANDIR='%i/share/man/man1' install
make -C src/man BINDIR='%i/bin' LIBDIR='%i/lib/%n' MANDIR='%i/share/man/man1' install
cp src/camlmsgs.txt %i/lib/%n
<<

Homepage: http://caml.inria.fr
DescDetail: <<
Caml is a programming language, easy to learn, easy to use, and yet amazingly
powerful. It is developed and distributed by INRIA (the main French research
institute for computer science), since 1984. There exist two flavors of Caml:
Caml Light and Objective Caml. Caml Light is merely a subset of Objective
Caml, especially designed for teaching and learning the art of programming.
<<

DescUsage: <<
Run 'camllight' to start the top-level. Install the Tuareg emacs mode for 
convenient editing (package forthcoming). Install caml-light-plugins to add 
X11 graphics support.
<<

DescPackaging: <<
The caml-light sources are split in two : the compiler (caml-light package) 
and all the ``plugins'' found in the contrib/ directory (caml-light-plugins). 
Instead of doing 'make install' in src/ directory we make in all the dirs 
ourselves to override %i/lib/%n/header (if we don't do this caml bytecodes 
get installed with #!%i/bin/camlrun !)
<<

DescPort: <<
We have to use cpp3. cpp-3.3 inserts #pragmas (Distributed Builds support) in 
the caml source files!  We also patch the sources with a patch available at 
the INRIA web site (hence, we can distribute binaries; you can't distribute 
binaries compiled from modified source files according to the license, but 
this patch is distributed by INRIA so...)
<<


