Info2: <<
Package: socket-getaddrinfo-pm%type_pkg[perl]
Version: 0.20
Revision: 1
Distribution: (%type_pkg[perl] = 586) 10.4, (%type_pkg[perl] = 586) 10.5, (%type_pkg[perl] = 5100) 10.5, (%type_pkg[perl] = 5100) 10.6
License: Artistic/GPL
Description: Getaddrinfo and getnameinfo functions
Maintainer: Daniel Johnson <daniel@daniel-johnson.org>
Homepage: http://search.cpan.org/dist/Socket-GetAddrInfo/

Source: mirror:cpan:authors/id/P/PE/PEVANS/Socket-GetAddrInfo-%v.tar.gz
Source-MD5: 6fd3dc7f0ce9ca20a540372711533472

Type: perl (5.8.6 5.8.8 5.10.0)
UpdatePOD: false

DocFiles: Changes LICENSE README

Depends: perl%type_pkg[perl]-core, xsloader-pm%type_pkg[perl]
BuildDepends: fink (>= 0.20.3), module-build-pm%type_pkg[perl], extutils-cchecker-pm, extutils-cbuilder-pm

CompileScript: <<
#!/bin/sh -ex
	exec 2>&1
	perlversion=%type_raw[perl]
	perlcmd="perl$perlversion"
	if dpkg --compare-versions "$perlversion" ">=" "5.10.0" && [ "%m" != "powerpc" ]; then
		export ARCHFLAGS=""
		perlcmd="/usr/bin/arch -%m $perlcmd"
	fi
	eval "`$perlcmd -V:archname`"
	$perlcmd Build.PL \
		--install_path arch=%i/lib/perl5/$perlversion/$archname \
		--install_path bin=%i/bin \
		--install_path bindoc=%i/lib/perl5/$perlversion/man/man1 \
		--install_path lib=%i/lib/perl5/$perlversion \
		--install_path libdoc=%i/lib/perl5/$perlversion/man/man3 \
		--install_path script=%i/bin
	./Build
<<

InfoTest: TestScript: ./Build test || exit 2

InstallScript: <<
	./Build install
	mv %i/bin/getaddrinfo %i/bin/getaddrinfo-%type_raw[perl]
	mv %i/bin/getnameinfo %i/bin/getnameinfo-%type_raw[perl]
<<

PostInstScript: <<
if [ "$1" = configure ]; then
	update-alternatives \
	--install %p/bin/getaddrinfo getaddrinfo %p/bin/getaddrinfo-%type_raw[perl] %type_pkg[perl] \
  --slave   %p/bin/getnameinfo getnameinfo %p/bin/getnameinfo-%type_raw[perl]
fi
<<
PreRmScript: <<
if [ "$1" = remove ]; then
	update-alternatives --remove getaddrinfo %p/bin/getaddrinfo-%type_raw[perl]
fi
<<
<<
