--- xrmap-2.23/Makefile.noimake.orig	2002-10-09 22:48:38.000000000 -0700
+++ xrmap-2.23/Makefile.noimake	2002-10-09 23:01:39.000000000 -0700
@@ -5,9 +5,10 @@
 PRINT_CMD="lpr -Plocal"
 EDITOR="emx"
 MUSICPLAYER="timidity -ig"
+MANDIR=$(X11DIR)/man/man1
 
-CCOPTIONS=-O6 -g -Wall -DZLIB -DSHAREDIR=\"$(DESTDIR)$(SHAREDIR)\" -DPS_VIEWER=\"$(PS_VIEWER)\" -DIM_VIEWER=\"$(IM_VIEWER)\" -DPRINT_CMD=\"$(PRINT_CMD)\" -DEDITOR=\"$(EDITOR)\" -DMUSICPLAYER=\"$(MUSICPLAYER)\"
-LDOPTIONS=-O6 -g -Wall  -lXpm -lX11 -lz -lm -L/usr/X11R6/lib
+CCOPTIONS=-O6 -g -Wall -DZLIB -DSHAREDIR=\"$(DESTDIR)$(SHAREDIR)\" -DPS_VIEWER=\"$(PS_VIEWER)\" -DIM_VIEWER=\"$(IM_VIEWER)\" -DPRINT_CMD=\"$(PRINT_CMD)\" -DEDITOR=\"$(EDITOR)\" -DMUSICPLAYER=\"$(MUSICPLAYER)\" $(EXTRA_CFLAGS)
+LDOPTIONS=-O6 -g -Wall  -lXpm -lX11 -lz -lm -L/usr/X11R6/lib $(LDFLAGS)
 
 all: xrmap.o
 	gcc $(LDOPTIONS) -o xrmap xrmap.o  
@@ -20,10 +21,10 @@
 	gcc $(CCOPTIONS) -c xrmap.c
 
 install:
-	install -c -s xrmap $(X11DIR)/bin
+	install -c -s xrmap $(DESTDIR)$(X11DIR)/bin
 	cd editkit ; make install
-	mkdir -p $(SHAREDIR)
-	cp -f Xrmaprc Locations $(SHAREDIR)
+	mkdir -p $(DESTDIR)$(SHAREDIR)
+	cp -f Xrmaprc Locations $(DESTDIR)$(SHAREDIR)
 	if [ -d i18n ] ; then cp -fR i18n $(DESTDIR)$(SHAREDIR) ; fi
 	mkdir -p $(DESTDIR)$(SHAREDIR)/flags
 	if [ -d flags/small ] ; then cp -fR flags/small $(DESTDIR)$(SHAREDIR)/flags ; fi
@@ -35,8 +36,9 @@
 	if [ -d extra ] ; then cp -fR extra $(DESTDIR)$(SHAREDIR) ; fi
 	mkdir -p $(DESTDIR)$(SHAREDIR)/doc
 	cp -f CHANGES EXAMPLE.rc LICENSE MAPEDIT README TODO WARNING $(DESTDIR)$(SHAREDIR)/doc
-	cp -f xrmap.man $(X11DIR)/man/man1/xrmap.1x
-	if [ -r $(X11DIR)/xrmap.1x.gz ] ; \
+	mkdir -p $(DESTDIR)$(MANDIR)
+	cp -f xrmap.man $(DESTDIR)$(MANDIR)/xrmap.1x
+	if [ -r $(DESTDIR)$(X11DIR)/xrmap.1x.gz ] ; \
 	   then gzip -f $(DESTDIR)$(MANDIR)/xrmap.1x ; fi
 	cat WARNING
 
--- xrmap-2.23/editkit/Makefile.orig	2002-10-09 22:53:59.000000000 -0700
+++ xrmap-2.23/editkit/Makefile	2002-10-09 22:57:06.000000000 -0700
@@ -14,8 +14,10 @@
 # TLL for Terry Loveall personal settings
 
 SHARE_DIR=/usr/share/editkit
+BINDIR=/usr/bin
+XBINDIR=/usr/X11R6/bin
 
-CFLAGS = -O2 -fomit-frame-pointer -pipe -Wall -DTHREED -DNOEDIT -DGREEK -DJUSTIFY -DSHARE_DIR="\"$(SHARE_DIR)\""
+CFLAGS = -O2 -fomit-frame-pointer -pipe -Wall -DTHREED -DNOEDIT -DGREEK -DJUSTIFY -DSHARE_DIR="\"$(SHARE_DIR)\"" $(EXTRA_CFLAGS)
 
 #CFLAGS = -O2 -fomit-frame-pointer -pipe -Wall -DMINIMAL -DTWOBUTN -DVERTCURS -DTLL
 
@@ -60,19 +62,19 @@
 	gcc $(CFLAGS) -DEMACS -o emx.o -c x11.c
 
 install:
-	if [ -x edt ]; then cp -f edt /usr/bin; fi
-	if [ -x emt ]; then cp -f emt /usr/bin; fi
-	if [ -x edx ]; then cp -f edx /usr/X11R6/bin; fi
-	if [ -x emx ]; then cp -f emx /usr/X11R6/bin; fi
-	mkdir -p $(SHARE_DIR)
-	cp -f rc.example $(SHARE_DIR)/rc.common
-	cp -f README $(SHARE_DIR)
-	if [ -x edt ] || [ -x edx ]; then cp -f MANUAL.wo*ar $(SHARE_DIR); fi
-	if [ -x emt ] || [ -x emx ]; then cp -f MANUAL.emacs $(SHARE_DIR); fi
-	if [ -x edt ]; then cd $(SHARE_DIR); ln -sf rc.common edtrc; fi 
-	if [ -x emt ]; then cd $(SHARE_DIR); ln -sf rc.common emtrc; fi 
-	if [ -x edx ]; then cd $(SHARE_DIR); ln -sf rc.common edxrc; fi 
-	if [ -x emx ]; then cd $(SHARE_DIR); ln -sf rc.common emxrc; fi 
+	if [ -x edt ]; then cp -f edt $(DESTDIR)$(BINDIR); fi
+	if [ -x emt ]; then cp -f emt $(DESTDIR)$(BINDIR); fi
+	if [ -x edx ]; then cp -f edx $(DESTDIR)$(BINDIR); fi
+	if [ -x emx ]; then cp -f emx $(DESTDIR)$(BINDIR); fi
+	mkdir -p $(DESTDIR)$(SHARE_DIR)
+	cp -f rc.example $(DESTDIR)$(SHARE_DIR)/rc.common
+	cp -f README $(DESTDIR)$(SHARE_DIR)
+	if [ -x edt ] || [ -x edx ]; then cp -f MANUAL.wo*ar $(DESTDIR)$(SHARE_DIR); fi
+	if [ -x emt ] || [ -x emx ]; then cp -f MANUAL.emacs $(DESTDIR)$(SHARE_DIR); fi
+	if [ -x edt ]; then cd $(DESTDIR)$(SHARE_DIR); ln -sf rc.common edtrc; fi 
+	if [ -x emt ]; then cd $(DESTDIR)$(SHARE_DIR); ln -sf rc.common emtrc; fi 
+	if [ -x edx ]; then cd $(DESTDIR)$(SHARE_DIR); ln -sf rc.common edxrc; fi 
+	if [ -x emx ]; then cd $(DESTDIR)$(SHARE_DIR); ln -sf rc.common emxrc; fi 
 
 clean:
 	-rm -f *.o *~ edt emt edx emx
