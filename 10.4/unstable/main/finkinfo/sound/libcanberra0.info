Package: libcanberra0
Version: 0.10
Revision: 4
Source: http://0pointer.de/lennart/projects/libcanberra/libcanberra-%v.tar.gz
Source-MD5: 2623370bfcecaeecaeb85e5ec445f340
PatchFile: %n.patch
Patchfile-MD5: 15e727eb10de4c3653565e64e1b9d9dd

BuildDepends: <<
	autoconf,
	automake1.10,
	fink (>= 0.24.12-1),
	glib2-dev (>= 2.18.0-1),
	gstreamer-0.10-dev (>= 0.10.21-1),
	gtk-doc (>= 1.9-1),
	libgettext3-dev,
	libiconv-dev,
	libogg,
	libtool2,
	libvorbis0,
	libxml2 (>= 2.6.30-1),
	pkgconfig (>= 0.23)
<<
Depends: %n-shlibs (= %v-%r)
BuildDependsOnly: true


ConfigureParams: --disable-dependency-tracking --disable-static --disable-gtk --disable-lynx --disable-tdb --enable-gstreamer
CompileScript: <<
	autoreconf -fi
	./configure %c
	make
<<
InstallScript: <<
	make install DESTDIR=%d
	rm %i/share/doc/libcanberra/README
	rmdir %i/share/doc/libcanberra
<<
DocFiles: LGPL README

SplitOff: <<
	Package: %N-shlibs
	Depends: <<
		libogg-shlibs,
		libtool2-shlibs,
		libvorbis0-shlibs,
		xdg-base
	<<
	Recommends: canberra-plugins
	Files: lib/libcanberra.*.dylib
	Shlibs: %p/lib/libcanberra.0.dylib 2.0.0 %n (>= 0.6-1)
	DocFiles: LGPL README
<<

SplitOff2: <<
	Package: canberra-plugins
	Depends: <<
		%N-shlibs (>= %v-%r),
		glib2-shlibs (>= 2.18.0-1),
		gstreamer-0.10-shlibs (>= 0.10.21-1),
		libgettext3-shlibs,
		libiconv,
		libogg-shlibs,
		libtool2-shlibs,
		libvorbis0-shlibs,
		libxml2-shlibs (>= 2.6.30-1)
	<<
	Replaces: %N-shlibs (<< 0.10-2)
	Files: lib/libcanberra
	DocFiles: LGPL README
<<

DescPort: <<
	Scrap superfluous iconv tests. See:
	https://tango.0pointer.de/pipermail/libcanberra-discuss/2008-November/000133.html

	Scrap gconf tests if not doing gtk stuff. See:
	https://tango.0pointer.de/pipermail/libcanberra-discuss/2008-November/000134.html
<<
DescPackaging: <<
	Core lib doesn't use gtk and the gtk lib's libtool versioning
	is independent, so don't build as part of the main lib pkgs.

	Don't bother dragging in lynx just for .html -> .txt for the README

	tdb not in fink now--disable for consistency if we do get it.

	Plugins moved %N-shlibs -> canberra-plugins as of 0.10-2.
	They are loaded by %N-shlibs but not libversioned, so
	externalize in case install_name changes we can have a
	constant place to install these things. Stupid circular
	dependencies! Better would be to hack dso.c to look in a
	libversioned dir for standard plugins and then also a constant
	place for third-party-supplied ones. Some day...

	We do our own doc files our own ways and places.
<<

Description: Abstract interface for playing event sounds
DescDetail: <<
	XDG Sound Theme and Name Specifications:
	http://0pointer.de/public/sound-theme-spec.html

	The gtk lib is in the libcanberra-gtk* packages, which are
	not available at this time.
<<
DescUsage: <<
	Actual sound output is handled by various back-end modules.
	The default/standard ones are in the canberra-plugins package.
<<

Homepage: http://0pointer.de/lennart/projects/libcanberra
License: LGPL
Maintainer: Daniel Macks <dmacks@netspace.org>
