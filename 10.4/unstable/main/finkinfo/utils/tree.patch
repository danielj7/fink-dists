diff -ru tree-1.5.1.1/Makefile tree-1.5.1.1-patched/Makefile
--- tree-1.5.1.1/Makefile	2007-06-11 15:22:47.000000000 +0200
+++ tree-1.5.1.1-patched/Makefile	2007-10-26 22:05:14.000000000 +0200
@@ -6,10 +6,10 @@
 # warranties, including, without limitation, the implied warranties
 # of merchant-ability and fitness for a particular purpose.
 
-CC=gcc
+#CC=gcc
 #CFLAGS=-ggdb -Wall -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64
-CFLAGS=-O2 -Wall -fomit-frame-pointer -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64
-LDFLAGS=-s
+#CFLAGS=-O2 -Wall -fomit-frame-pointer -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64
+#LDFLAGS=-s
 
 # Uncomment for FreeBSD:
 #CC=gcc
@@ -24,9 +24,9 @@
 ## Comment out TREE_DEST definition below as well for Cygwin
 
 # Uncomment for OS X:
-#CC=cc
-#CFLAGS=-O2 -Wall -fomit-frame-pointer -no-cpp-precomp
-#LDFLAGS=
+CC=cc
+CFLAGS=-O2 -Wall -fomit-frame-pointer
+LDFLAGS=
 
 # Uncomment for HP/UX:
 #CC=cc
@@ -44,7 +44,7 @@
 TREE_DEST=tree
 BINDIR=${prefix}/bin
 MAN=tree.1
-MANDIR=${prefix}/man/man1
+MANDIR=${prefix}/share/man/man1
 
 all:	tree
 
diff -ru tree-1.5.1.1/tree.c tree-1.5.1.1-patched/tree.c
--- tree-1.5.1.1/tree.c	2007-06-11 15:22:06.000000000 +0200
+++ tree-1.5.1.1-patched/tree.c	2007-10-26 22:07:26.000000000 +0200
@@ -17,7 +17,6 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
 
-#include <features.h>
 #include <stdlib.h>
 #include <stdio.h>
 #include <time.h>
@@ -179,12 +178,6 @@
 FILE *outfile;
 int *dirs, maxdirs;
 
-#ifdef CYGWIN
-extern int MB_CUR_MAX;
-#else
-extern size_t MB_CUR_MAX;
-#endif
-
 int main(int argc, char **argv)
 {
   char **dirname = NULL;
