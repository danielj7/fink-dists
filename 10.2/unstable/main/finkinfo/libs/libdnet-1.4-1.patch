diff -ruN libdnet-1.3.orig/src/Makefile.in libdnet-1.3/src/Makefile.in
--- libdnet-1.3.orig/src/Makefile.in	Sun Mar 31 23:55:06 2002
+++ libdnet-1.3/src/Makefile.in	Mon Apr  8 15:31:11 2002
@@ -90,7 +90,7 @@
 libdnet_a_DEPENDENCIES =  @LIBOBJS@
 libdnet_a_OBJECTS =  addr.o ip-util.o rand.o
 AR = ar
-CFLAGS = @CFLAGS@
+CFLAGS = -fno-common @CFLAGS@
 COMPILE = $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 CCLD = $(CC)
 LINK = $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@
@@ -138,6 +138,18 @@
 	    $(INSTALL_DATA) $$p $(DESTDIR)$(libdir)/$$p; \
 	  else :; fi; \
 	done
+	if test -f libdnet.1.4.0.dylib; then \
+	  echo " $(INSTALL_DATA) libdnet.1.4.0.dylib $(DESTDIR)$(libdir)/libdnet.1.4.0.dylib"; \
+	  $(INSTALL_DATA) libdnet.1.4.0.dylib $(DESTDIR)$(libdir)/libdnet.1.4.0.dylib; \
+	fi 
+	if test -f libdnet.1.dylib; then \
+	  echo " $(INSTALL_DATA) libdnet.1.dylib $(DESTDIR)$(libdir)/libdnet.1.dylib"; \
+	  $(INSTALL_DATA) libdnet.1.dylib $(DESTDIR)$(libdir)/libdnet.1.dylib; \
+	fi 
+	if test -f libdnet.dylib; then \
+	  echo " $(INSTALL_DATA) libdnet.dylib $(DESTDIR)$(libdir)/libdnet.dylib"; \
+	  $(INSTALL_DATA) libdnet.dylib $(DESTDIR)$(libdir)/libdnet.dylib; \
+	fi 
 	@$(POST_INSTALL)
 	@list='$(lib_LIBRARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
@@ -175,6 +187,12 @@
 	-rm -f libdnet.a
 	$(AR) cru libdnet.a $(libdnet_a_OBJECTS) $(libdnet_a_LIBADD)
 	$(RANLIB) libdnet.a
+	$(CC) -dynamiclib -install_name $(prefix)/lib/libdnet.1.dylib \
+	-compatibility_version 1.0 -current_version 1.4 \
+	-o libdnet.1.4.0.dylib $(libdnet_a_OBJECTS) $(libdnet_a_LIBADD)
+	rm -f libdnet.1.dylib libdnet.dylib
+	ln -s libdnet.1.4.0.dylib libdnet.1.dylib
+	ln -s libdnet.1.4.0.dylib libdnet.dylib
 
 tags: TAGS
 
