Info2: <<
Package: gimp2%type_pkg[-svg]
Type: -svg (boolean)

Version: 2.6.4
Revision: 1
# This package has OS X version-specific differences!
# Do not blindly copy 10.3 <-> 10.4

Source: mirror:gimp:v2.6/gimp-%v.tar.bz2
Depends: %N-shlibs (= %v-%r), dbus-shlibs, libbabl0.0.0-shlibs, libgegl0.0.0-shlibs
Conflicts: <<
 gimp2,gimp2-svg,gimp2-noprint,gimp2-svg-noprint,gimp2-ghostscript,
 gimp2-svg-ghostscript,gimp2-noprint-ghostscript,gimp2-svg-noprint-ghostscript
<<
Replaces: <<
 gimp2,gimp2-svg,gimp2-noprint,gimp2-svg-noprint,gimp2-ghostscript,
 gimp2-svg-ghostscript,gimp2-noprint-ghostscript,gimp2-svg-noprint-ghostscript
<<
Recommends: %N-default (= %v-%r), gimp2-help
BuildDepends: <<
 pkgconfig (>= 0.21-1), xft2-dev, glitz, cairo (>= 1.6-1), libpng3, libjpeg, libtiff, 
 glib2-dev (>= 2.14.0-1), giflib, aalib (>= 1.4rc5-2), libgettext3-dev, gettext-bin, gettext-tools, 
 libiconv-dev, gtk-doc (>= 1.8-1), x11-dev, libexif12, gtk+2-dev (>= 2.12.0-1), libart2, libmng2,
 expat1, fontconfig2-dev (>= 2.4.1-1), lcms, libwmf, pango1-xft2-ft219-dev (>= 1.22.0-4),
 pixman (>= 0.10.0-1), atk1 (>= 1.20.0-1), intltool (>= 0.36.0-1) | intltool40, freetype219 (>= 2.3.7-7),
 dbus-dev (>= 1.0-1), gnome-vfs2-unified-dev (>= 1:2.20.0-1), libxslt (>= 1.1.22-1), libncurses5, 
 bzip2-dev, libbabl0.0.0-dev, libcurl4, libgegl0.0.0-dev, poppler4, webkit-1.0.1, libxml2-bin,
 libxslt-bin,
 (%type_raw[-svg] = -svg) librsvg2 (>= 2.18.0-1),
 (%type_raw[-svg] = -svg) audiofile,
 (%type_raw[-svg] = -svg) avahi-dev,
 (%type_raw[-svg] = -svg) esound,
 (%type_raw[-svg] = -svg) gconf2-dev (>= 2.20.0-1),
 (%type_raw[-svg] = -svg) gnome-keyring-dev,
 (%type_raw[-svg] = -svg) libavahi-glib1-dev,
 (%type_raw[-svg] = -svg) libbonobo2-dev (>= 2.20.0-1),
 (%type_raw[-svg] = -svg) libbonoboui2-dev (>= 2.20.0-1),
 (%type_raw[-svg] = -svg) libgnome2-dev (>= 2.20.0-1),
 (%type_raw[-svg] = -svg) libgnomecanvas2-dev (>= 2.20.0-1),
 (%type_raw[-svg] = -svg) libgnomeui2-dev (>= 2.20.0-1),
 (%type_raw[-svg] = -svg) libgsf1.114-dev (>= 1.14.5-1),
 (%type_raw[-svg] = -svg) libxml2 (>= 2.6.30-1),
 (%type_raw[-svg] = -svg) orbit2-dev (>= 2.14.9-1),
 (%type_raw[-svg] = -svg) libcroco3,
 (%type_raw[-svg] = -svg) popt
<<
Source-MD5: 4e8185e40ab06559ce6dd5ef61b3e83b
DocFiles: COPYING AUTHORS LICENSE NEWS* README*
SetCPPFLAGS: -I%p/lib/fontconfig2/include
SetLDFLAGS: -L%p/lib/fontconfig2/lib
ConfigureParams: --disable-python --disable-dependency-tracking --without-hal --enable-gimp-remote --mandir=%p/share/man --x-includes=/usr/X11R6/include --x-libraries=/usr/X11R6/lib PKG_CONFIG_PATH="%p/lib/fontconfig2/lib/pkgconfig:$PKG_CONFIG_PATH" 

PatchScript: <<
#!/bin/sh -ev
 if [ "%type_raw[-svg]" != "-svg" ]; then
  sed -i.bak -e 's;SVG = @SVG@;SVG = ;' plug-ins/common/Makefile.in
 fi
 sed -i.bak -e 's|# (web-browser "firefox|(web-browser "open|' etc/gimprc
 sed -i.bak -e 's|have_glib_2_19=yes|have_glib_2_19=no|' configure
 for po in po*/*.po; do echo '' > $po; done
<<

CompileScript: <<
#!/bin/sh -ev
 export F77=no
 ./configure %c
 make
<<

InstallScript: <<
#!/bin/sh -ev
  make install DESTDIR=%d

  if [ "%type_raw[-svg]" != "-svg" ]; then
   rm -f %i/lib/gimp/2.0/plug-ins/svg 
   rm -f %i/lib/gimp/2.0/plug-ins/helpbrowser
  fi
  
  rm -rf %i/share/locale

  strip -S %i/bin/gimp-2.6  %i/lib/libgimp*-2.0.0.600.4.dylib || true
  strip -S %i/lib/gimp/2.0/plug-ins/* || true
  strip -S %i/lib/gimp/2.0/modules/*so || true
<<

SplitOff2: <<
 Package: %N-dev
 Depends: %N-shlibs (= %v-%r), pkgconfig (>= 0.21-1)
 Conflicts: gimp2-dev,gimp2-svg-dev,gimp2-noprint-dev,gimp2-svg-noprint-dev, gimp-dev (<= 2.0.0-5)
 Replaces: gimp2-dev,gimp2-svg-dev,gimp2-noprint-dev,gimp2-svg-noprint-dev, gimp-dev (<= 2.0.0-5)
 BuildDependsOnly: true
 Files: <<
 include
 lib/*.la lib/libgimp*-2.0.dylib
 lib/pkgconfig share/aclocal share/gtk-doc bin/gimptool-2.0 
 <<
 DocFiles: COPYING AUTHORS LICENSE NEWS* README*
<<

SplitOff3: <<
 Package: %N-shlibs
 Depends: <<
 aalib-shlibs (>= 1.4rc5-1024), 
 cairo-shlibs (>= 1.8.6-1), 
 fontconfig2-shlibs (>= 2.4.1-1),
 freetype219-shlibs (>= 2.3.7-7),
 glib2-shlibs (>= 2.18.4-2), 
 gtk+2-shlibs (>= 2.14.7-2), 
 lcms-shlibs (>= 1.17-1), 
 libexif12-shlibs (>= 0.6.16-1), 
 libgettext3-shlibs (>= 0.14.5-2), 
 libjpeg-shlibs (>= 6b-17), 
 libmng2-shlibs (>= 1.0.9-10), 
 libpng3-shlibs (>= 1:1.2.33-1), 
 librsvg2-shlibs (>= 2.22.3-1), 
 libtiff-shlibs (>= 3.8.2-1002), 
 libwmf-shlibs (>= 0.2.8.2-9), 
 pango1-xft2-ft219-shlibs (>= 1.22.0-4), 
 poppler4-glib-shlibs (>= 0.10.2-1), 
 webkit-1.0.1-shlibs (>= r35788-1),
 iso-codes
 <<
 Conflicts: gimp2-shlibs,gimp2-svg-shlibs,gimp2-noprint-shlibs,gimp2-svg-noprint-shlibs
 Replaces: <<
   gimp2,gimp2-svg,gimp2-noprint,gimp2-svg-noprint,
   gimp2-shlibs,gimp2-svg-shlibs,gimp2-noprint-shlibs,gimp2-svg-noprint-shlibs
 <<
 Files: <<
 lib/gimp
 lib/libgimp*-2.0.0*.dylib
 share/gimp
 <<
 Shlibs: <<
 %p/lib/libgimp-2.0.0.dylib        601.0.0 %n (>= 2.6.4-1)
 %p/lib/libgimpbase-2.0.0.dylib    601.0.0 %n (>= 2.6.4-1)
 %p/lib/libgimpcolor-2.0.0.dylib   601.0.0 %n (>= 2.6.4-1)
 %p/lib/libgimpconfig-2.0.0.dylib  601.0.0 %n (>= 2.6.4-1)
 %p/lib/libgimpmath-2.0.0.dylib    601.0.0 %n (>= 2.6.4-1)
 %p/lib/libgimpmodule-2.0.0.dylib  601.0.0 %n (>= 2.6.4-1)
 %p/lib/libgimpthumb-2.0.0.dylib   601.0.0 %n (>= 2.6.4-1)
 %p/lib/libgimpui-2.0.0.dylib      601.0.0 %n (>= 2.6.4-1)
 %p/lib/libgimpwidgets-2.0.0.dylib 601.0.0 %n (>= 2.6.4-1)
 <<
 DocFiles: COPYING AUTHORS LICENSE NEWS* README*
 DescPackaging: <<
   libgimpbase was previously in %N
 <<
<<

SplitOff4: <<
 Package: %N-default
 Depends: %N (= %v-%r)
 Replaces: gimp-default, gimp2-default, gimp2-noprint-default, gimp2-svg-default, gimp2-svg-noprint-default, gimp (<= 1.2.5-4)
 Conflicts: gimp-default, gimp2-default, gimp2-noprint-default, gimp2-svg-default, gimp2-svg-noprint-default, gimp (<= 1.2.5-4)
 Files: bin/gimp bin/gimp-console bin/gimp-remote share/man/man1/gimp.1 share/man/man1/gimp-console.1 share/man/man1/gimp-remote.1 share/man/man5/gimprc.5
 DocFiles: COPYING AUTHORS LICENSE NEWS* README*
<<

ConfFiles: <<
 %p/etc/gimp/2.0/gimprc %p/etc/gimp/2.0/sessionrc
 %p/etc/gimp/2.0/gtkrc %p/etc/gimp/2.0/templaterc
 %p/etc/gimp/2.0/ps-menurc
 %p/etc/gimp/2.0/unitrc
 %p/etc/gimp/2.0/controllerrc
 %p/etc/gimp/2.0/menurc
<<
#
Description: The GNU Image Manipulation Program 2.0
DescUsage: <<
rsvg is disabled by default, as they are very large.
Compiling gimp2-svg will enable it.

The "gimp2-default" package contains the "gimp" binary.
<<
DescPackaging: <<
Localization files are not installed because they require a newer version of gettext-tools.
The check for glib 2.19 is disabled until we have it.
<<
License: GPL/LGPL
Homepage: http://www.gimp.org/
Maintainer: Alexander Strange <astrange@ithinksw.com>
<<
