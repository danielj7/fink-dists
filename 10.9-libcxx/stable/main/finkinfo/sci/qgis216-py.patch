diff -ruN qgis-2.16.3-orig/CMakeLists.txt qgis-2.16.3/CMakeLists.txt
--- qgis-2.16.3-orig/CMakeLists.txt	2016-11-02 15:46:11.000000000 +0900
+++ qgis-2.16.3/CMakeLists.txt	2016-11-02 15:48:38.000000000 +0900
@@ -582,9 +582,9 @@
     # need to find non-system frameworks
     # cmake bug #0007250 - CMAKE_SHARED_LINKER_FLAGS ignored when creating
     # a framework, so these need to be manually handled with LINK_FLAGS options
-    SET (CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -F/Library/Frameworks")
-    SET (CMAKE_MODULE_LINKER_FLAGS "${CMAKE_MODULE_LINKER_FLAGS} -F/Library/Frameworks")
-    SET (CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -F/Library/Frameworks")
+    # SET (CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -F/Library/Frameworks")
+    # SET (CMAKE_MODULE_LINKER_FLAGS "${CMAKE_MODULE_LINKER_FLAGS} -F/Library/Frameworks")
+    # SET (CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -F/Library/Frameworks")
 
   ELSE (APPLE)
     # UNIX
diff -ruN qgis-2.16.3-orig/cmake/FindOSGEARTH.cmake qgis-2.16.3/cmake/FindOSGEARTH.cmake
--- qgis-2.16.3-orig/cmake/FindOSGEARTH.cmake	2016-11-02 15:46:11.000000000 +0900
+++ qgis-2.16.3/cmake/FindOSGEARTH.cmake	2016-11-02 15:48:38.000000000 +0900
@@ -10,7 +10,7 @@
 # directory, and source directory, respectively
 # OSGEARTHDIR or OSGEARTH_SOURCE_DIR: osg source directory, typically OpenSceneGraph
 # OSGEARTH_DIR or OSGEARTH_BUILD_DIR: osg build directory, place in which you've
-#    built osg via cmake 
+#    built osg via cmake
 
 # Header files are presumed to be included like
 # #include <osgEarth/Common>
@@ -27,15 +27,7 @@
         $ENV{OSGEARTHDIR}
         $ENV{OSGEARTH_DIR}
         $ENV{OSGEO4W_ROOT}
-        /usr/local/
-        /usr/
-        /sw/ # Fink
-        /opt/local/ # DarwinPorts
-        /opt/csw/ # Blastwave
-        /opt/
-        [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session\ Manager\\Environment;OSGEARTH_ROOT]/
-        ~/Library/Frameworks
-        /Library/Frameworks
+        @PREFIX@/ # Fink
     PATH_SUFFIXES
         /include/
 )
@@ -111,7 +103,7 @@
     SET(CMAKE_REQUIRED_LIBRARIES ${CMAKE_REQUIRED_LIBRARIES} ${OSGEARTHUTIL_LIBRARY})
     IF(APPLE)
         # no extra LDFLAGS used in link test, may fail in OS X SDK
-        SET(CMAKE_REQUIRED_LIBRARIES "-F/Library/Frameworks" ${CMAKE_REQUIRED_LIBRARIES})
+        # SET(CMAKE_REQUIRED_LIBRARIES "-F/Library/Frameworks" ${CMAKE_REQUIRED_LIBRARIES})
     ENDIF(APPLE)
     CHECK_CXX_SOURCE_COMPILES("
 #include <osgEarthUtil/Controls>
diff -ruN qgis-2.16.3-orig/cmake/FindQScintilla.cmake qgis-2.16.3/cmake/FindQScintilla.cmake
--- qgis-2.16.3-orig/cmake/FindQScintilla.cmake	2016-11-02 15:46:11.000000000 +0900
+++ qgis-2.16.3/cmake/FindQScintilla.cmake	2016-11-02 15:48:38.000000000 +0900
@@ -25,7 +25,7 @@
 ELSE(EXISTS QSCINTILLA_VERSION_STR)
 
   FIND_PATH(QSCINTILLA_INCLUDE_DIR
-    NAMES Qsci/qsciglobal.h
+    NAMES qsciglobal.h
     PATHS
       ${Qt5Core_INCLUDE_DIRS}
       "${QT_INCLUDE_DIR}"
@@ -62,7 +62,7 @@
   IF(QSCINTILLA_INCLUDE_DIR AND NOT EXISTS QSCINTILLA_VERSION_STR)
     # get QScintilla2 version from header, is optinally retrieved via bindings
     # with Qsci PyQt4 module
-    FILE(READ ${QSCINTILLA_INCLUDE_DIR}/Qsci/qsciglobal.h qsci_header)
+    FILE(READ ${QSCINTILLA_INCLUDE_DIR}/qsciglobal.h qsci_header)
     STRING(REGEX REPLACE "^.*QSCINTILLA_VERSION_STR +\"([^\"]+)\".*$" "\\1" QSCINTILLA_VERSION_STR "${qsci_header}")
   ENDIF(QSCINTILLA_INCLUDE_DIR AND NOT EXISTS QSCINTILLA_VERSION_STR)
 
diff -ruN qgis-2.16.3-orig/images/icons/mac/browser/CMakeLists.txt qgis-2.16.3/images/icons/mac/browser/CMakeLists.txt
--- qgis-2.16.3-orig/images/icons/mac/browser/CMakeLists.txt	2016-11-02 15:46:20.000000000 +0900
+++ qgis-2.16.3/images/icons/mac/browser/CMakeLists.txt	2016-11-02 15:48:38.000000000 +0900
@@ -6,4 +6,4 @@
 # create alias now, so alias file gets correct icon, delete first if any exist
 SET (BROWSERNAME "QGIS Browser")
 INSTALL (CODE "EXECUTE_PROCESS(COMMAND /usr/bin/find \"$ENV{DESTDIR}${QGIS_INSTALL_PREFIX}\" -name \"${BROWSERNAME}*\" -maxdepth 1 -type f -delete)")
-INSTALL (CODE "EXECUTE_PROCESS(COMMAND /usr/bin/osascript -e \"tell application \\\"Finder\\\" to make alias file to POSIX file \\\"$ENV{DESTDIR}${CMAKE_INSTALL_PREFIX}/${QGIS_BIN_DIR}/${BROWSERNAME}.app\\\" at POSIX file \\\"$ENV{DESTDIR}${QGIS_INSTALL_PREFIX}/\\\"\")")
+#INSTALL (CODE "EXECUTE_PROCESS(COMMAND /usr/bin/osascript -e \"tell application \\\"Finder\\\" to make alias file to POSIX file \\\"$ENV{DESTDIR}${CMAKE_INSTALL_PREFIX}/${QGIS_BIN_DIR}/${BROWSERNAME}.app\\\" at POSIX file \\\"$ENV{DESTDIR}${QGIS_INSTALL_PREFIX}/\\\"\")")
Binary files qgis-2.16.3-orig/python/plugins/processing/.DS_Store and qgis-2.16.3/python/plugins/processing/.DS_Store differ
Binary files qgis-2.16.3-orig/python/plugins/processing/algs/.DS_Store and qgis-2.16.3/python/plugins/processing/algs/.DS_Store differ
diff -ruN qgis-2.16.3-orig/python/plugins/processing/algs/grass/GrassUtils.py qgis-2.16.3/python/plugins/processing/algs/grass/GrassUtils.py
--- qgis-2.16.3-orig/python/plugins/processing/algs/grass/GrassUtils.py	2016-11-02 15:46:24.000000000 +0900
+++ qgis-2.16.3/python/plugins/processing/algs/grass/GrassUtils.py	2016-11-03 13:49:08.000000000 +0900
@@ -83,28 +83,7 @@
 
     @staticmethod
     def grassPath():
-        if not isWindows() and not isMac():
-            return ''
-
-        folder = ProcessingConfig.getSetting(GrassUtils.GRASS_FOLDER) or ''
-        if not os.path.exists(folder):
-            folder = None
-        if folder is None:
-            if isWindows():
-                if "OSGEO4W_ROOT" in os.environ:
-                    testfolder = os.path.join(unicode(os.environ['OSGEO4W_ROOT']), "apps")
-                else:
-                    testfolder = unicode(QgsApplication.prefixPath())
-                testfolder = os.path.join(testfolder, 'grass')
-                if os.path.isdir(testfolder):
-                    for subfolder in os.listdir(testfolder):
-                        if subfolder.startswith('grass-6'):
-                            folder = os.path.join(testfolder, subfolder)
-                            break
-            else:
-                folder = os.path.join(QgsApplication.prefixPath(), 'grass')
-                if not os.path.isdir(folder):
-                    folder = '/Applications/GRASS-6.4.app/Contents/MacOS'
+        folder = '@PREFIX@/Applications/GRASS-6.4.app/Contents/MacOS'
 
         if folder:
             ProcessingConfig.setSettingValue(GrassUtils.GRASS_FOLDER, folder)
@@ -251,25 +230,17 @@
     def prepareGrassExecution(commands):
         env = os.environ.copy()
 
-        if isWindows():
-            GrassUtils.createGrassScript(commands)
-            command = ['cmd.exe', '/C ', GrassUtils.grassScriptFilename()]
-        else:
-            gisrc = userFolder() + os.sep + 'processing.gisrc'
-            env['GISRC'] = gisrc
-            env['GRASS_MESSAGE_FORMAT'] = 'gui'
-            env['GRASS_BATCH_JOB'] = GrassUtils.grassBatchJobFilename()
-            if 'GISBASE' in env:
-                del env['GISBASE']
-            GrassUtils.createGrassBatchJobFileFromGrassCommands(commands)
-            os.chmod(GrassUtils.grassBatchJobFilename(), stat.S_IEXEC
-                     | stat.S_IREAD | stat.S_IWRITE)
-            if isMac():
-                command = GrassUtils.grassPath() + os.sep + 'grass.sh ' \
+        gisrc = userFolder() + os.sep + 'processing.gisrc'
+        env['GISRC'] = gisrc
+        env['GRASS_MESSAGE_FORMAT'] = 'gui'
+        env['GRASS_BATCH_JOB'] = GrassUtils.grassBatchJobFilename()
+        if 'GISBASE' in env:
+            del env['GISBASE']
+        GrassUtils.createGrassBatchJobFileFromGrassCommands(commands)
+        os.chmod(GrassUtils.grassBatchJobFilename(), stat.S_IEXEC
+                  | stat.S_IREAD | stat.S_IWRITE)
+        command = GrassUtils.grassPath() + os.sep + 'grass.sh ' \
                     + GrassUtils.grassMapsetFolder() + '/PERMANENT'
-            else:
-                command = 'grass64 ' + GrassUtils.grassMapsetFolder() \
-                    + '/PERMANENT'
 
         return command, env
 
diff -ruN qgis-2.16.3-orig/python/plugins/processing/algs/grass7/Grass7Algorithm.py qgis-2.16.3/python/plugins/processing/algs/grass7/Grass7Algorithm.py
--- qgis-2.16.3-orig/python/plugins/processing/algs/grass7/Grass7Algorithm.py	2016-11-02 15:46:24.000000000 +0900
+++ qgis-2.16.3/python/plugins/processing/algs/grass7/Grass7Algorithm.py	2016-11-02 15:51:56.000000000 +0900
@@ -110,7 +110,7 @@
                 localDoc = os.path.abspath(localPath)
         elif system.isMac():
             # For MacOSX official package
-            localPath = os.path.join('/Applications/GRASS-7.0.app/Contents/MacOS/docs/html', html)
+            localPath = os.path.join('@PREFIX@/Applications/GRASS-7.0.app/Contents/MacOS/docs/html', html)
             if os.path.exists(localPath):
                 localDoc = os.path.abspath(localPath)
         else:
diff -ruN qgis-2.16.3-orig/python/plugins/processing/algs/grass7/Grass7Utils.py qgis-2.16.3/python/plugins/processing/algs/grass7/Grass7Utils.py
--- qgis-2.16.3-orig/python/plugins/processing/algs/grass7/Grass7Utils.py	2016-11-02 15:46:24.000000000 +0900
+++ qgis-2.16.3/python/plugins/processing/algs/grass7/Grass7Utils.py	2016-11-03 13:49:34.000000000 +0900
@@ -80,29 +80,10 @@
 
     @staticmethod
     def grassPath():
-        if not isWindows() and not isMac():
-            return ''
-
-        folder = ProcessingConfig.getSetting(Grass7Utils.GRASS_FOLDER) or ''
-        if not os.path.exists(folder):
-            folder = None
-        if folder is None:
-            if isWindows():
-                if "OSGEO4W_ROOT" in os.environ:
-                    testfolder = os.path.join(unicode(os.environ['OSGEO4W_ROOT']), "apps")
-                else:
-                    testfolder = unicode(QgsApplication.prefixPath())
-                testfolder = os.path.join(testfolder, 'grass')
-                if os.path.isdir(testfolder):
-                    for subfolder in os.listdir(testfolder):
-                        if subfolder.startswith('grass-7'):
-                            folder = os.path.join(testfolder, subfolder)
-                            break
-            else:
-                folder = os.path.join(unicode(QgsApplication.prefixPath()), 'grass7')
-                if not os.path.isdir(folder):
-                    folder = '/Applications/GRASS-7.0.app/Contents/MacOS'
+        folder = '@PREFIX@/Applications/GRASS-7.0.app/Contents/MacOS'
 
+        if folder:
+            ProcessingConfig.setSettingValue(Grass7Utils.GRASS_FOLDER, folder)
         return folder or ''
 
     @staticmethod
@@ -230,25 +211,17 @@
     def prepareGrass7Execution(commands):
         env = os.environ.copy()
 
-        if isWindows():
-            Grass7Utils.createGrass7Script(commands)
-            command = ['cmd.exe', '/C ', Grass7Utils.grassScriptFilename()]
-        else:
-            gisrc = userFolder() + os.sep + 'processing.gisrc7'
-            env['GISRC'] = gisrc
-            env['GRASS_MESSAGE_FORMAT'] = 'plain'
-            env['GRASS_BATCH_JOB'] = Grass7Utils.grassBatchJobFilename()
-            if 'GISBASE' in env:
-                del env['GISBASE']
-            Grass7Utils.createGrass7BatchJobFileFromGrass7Commands(commands)
-            os.chmod(Grass7Utils.grassBatchJobFilename(), stat.S_IEXEC
-                     | stat.S_IREAD | stat.S_IWRITE)
-            if isMac() and os.path.exists(Grass7Utils.grassPath() + os.sep + '*grass.sh*'):
-                command = Grass7Utils.grassPath() + os.sep + '*grass.sh* ' \
-                    + Grass7Utils.grassMapsetFolder() + '/PERMANENT'
-            else:
-                command = 'grass70 ' + Grass7Utils.grassMapsetFolder() \
-                    + '/PERMANENT'
+        gisrc = userFolder() + os.sep + 'processing.gisrc7'
+        env['GISRC'] = gisrc
+        env['GRASS_MESSAGE_FORMAT'] = 'plain'
+        env['GRASS_BATCH_JOB'] = Grass7Utils.grassBatchJobFilename()
+        if 'GISBASE' in env:
+            del env['GISBASE']
+        Grass7Utils.createGrass7BatchJobFileFromGrass7Commands(commands)
+        os.chmod(Grass7Utils.grassBatchJobFilename(), stat.S_IEXEC
+                 | stat.S_IREAD | stat.S_IWRITE)
+        command = Grass7Utils.grassPath() + os.sep + 'grass.sh ' \
+            + Grass7Utils.grassMapsetFolder() + '/PERMANENT'
 
         return command, env
 
diff -ruN qgis-2.16.3-orig/python/plugins/processing/tools/system.py qgis-2.16.3/python/plugins/processing/tools/system.py
--- qgis-2.16.3-orig/python/plugins/processing/tools/system.py	2016-11-02 15:46:27.000000000 +0900
+++ qgis-2.16.3/python/plugins/processing/tools/system.py	2016-11-03 10:24:09.000000000 +0900
@@ -54,7 +54,7 @@
 
 
 def isWindows():
-    return os.name == 'nt'
+    return False
 
 
 def isMac():
