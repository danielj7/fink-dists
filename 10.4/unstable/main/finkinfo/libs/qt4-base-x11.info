Info4: <<
Package: qt4-base-x11
Version: 4.7.3
Revision: 1
Description: Cross-Platform framework (Mac version)
Type: qt (x11)
License: LGPL
Maintainer: Benjamin Reed <qt4@fink.raccoonfink.com>

Depends: <<
	%N-qt3support-shlibs (>= %v-%r),
	%N-qtcore-shlibs (>= %v-%r),
	%N-qtdbus-shlibs (>= %v-%r),
	%N-qtdeclarative-shlibs (>= %v-%r),
	%N-qtdesigner-shlibs (>= %v-%r),
	%N-qtdesignercomponents-shlibs (>= %v-%r),
	%N-qtgui-shlibs (>= %v-%r),
	%N-qthelp-shlibs (>= %v-%r),
	%N-qtclucene-shlibs (>= %v-%r),
	%N-qtmultimedia-shlibs (>= %v-%r),
	%N-qtnetwork-shlibs (>= %v-%r),
	%N-qtopengl-shlibs (>= %v-%r),
	%N-qtscript-shlibs (>= %v-%r),
	%N-qtscripttools-shlibs (>= %v-%r),
	%N-qtsql-shlibs (>= %v-%r),
	%N-qtsvg-shlibs (>= %v-%r),
	%N-qttest-shlibs (>= %v-%r),
	%N-qtxml-shlibs (>= %v-%r),
	%N-qtxmlpatterns-shlibs (>= %v-%r),
	%N-assistant (>= %v-%r),
	%N-designer (>= %v-%r),
	%N-linguist (>= %v-%r)
<<
BuildDepends: <<
	cups-dev,
	dbus1.3-dev (>= 1.2.24-1),
	expat1,
	fink (>= 0.30.0-1),
	fontconfig2-dev (>= 2.8.0-6),
	freetype219 (>= 2.4.4-2),
	glib2-dev (>= 2.22.0-1),
	kde4-buildenv (>= 4.6.0-1),
	libgettext8-dev,
	libiconv-dev,
	libjpeg8,
	libmng2,
	libpng15 (>= 1.5.2-1),
	libtiff,
	macosx (>= 10.4.3-1),
	pkgconfig (>= 0.23-1),
	sqlite3-dev,
	system-openssl-dev,
	fontconfig2-dev (>= 2.8.0-6),
	freetype219 (>= 2.4.4-2),
	xft2-dev (>= 2.2.0-1),
	x11-dev
<<
BuildConflicts: kdelibs3-dev, kdelibs3-ssl-dev, kdelibs3-unified-dev, libevent1, clucene-core
Replaces: qt4-%type_pkg[qt] (<< 4.7.3-1)
BuildDependsOnly: true
GCC: 4.0

CustomMirror: <<
	Primary: http://www.finkproject.org/~ranger/distfiles
	eur-NL: http://www.finkproject.org/~ranger/distfiles
	nam-US: http://ranger.befunk.com/fink
<<
Source: mirror:custom:qt/qt-%v-mac-0cc7b7e.tar.gz
Source-MD5: 26281f4bab98f2600cbf71e10aad1e0c
SourceDirectory: qt-kde-qt-mac
PatchScript: <<
	sed -e 's,@FINKPREFIX@,%p,g' %{PatchFile} | patch -p1 --fuzz=4
	perl -pi -e 's,const char,char,g' config.tests/unix/*iconv/*.cpp
	perl -pi -e 's,CFG_MAC_XARCH=auto,CFG_MAC_XARCH=no,g' configure
<<
PatchFile: qt4-base.patch
PatchFile-MD5: d17c9da8c060e0093fa7e865c2d617d3

NoSetLDFLAGS: true
UseMaxBuildJobs: true
CompileScript: <<
	#!/bin/sh -ev
	
	EXTRA_ARGS="-confirm-license -verbose -no-separate-debug-info"
	for DBPLUGIN in db2 ibase mysql oci odbc psql sqlite2 sqlite_symbian tds; do
	rm -rf src/plugins/sqldrivers/$DBPLUGIN
	done
	
	if [ "%m" = "x86_64" ]; then
	EXTRA_ARGS="$EXTRA_ARGS -arch x86_64 -cocoa"
	fi
	find . -name ._\* -exec rm -rf {} \;
	sh ./configure-for-fink.sh "%p" "qt4-%type_pkg[qt]" $EXTRA_ARGS -make "libs tools docs"
	find . -name Makefile\* -print0 | xargs -0 perl -pi -e 's,-I%p/include,-isystem %p/include,g'
	
	make
<<

InstallScript: <<
#!/bin/sh -ev

	#### MAIN INSTALL ####

	make -j1 install INSTALL_ROOT="%d"

	install -d -m 755 %i/bin

	# add the WS_X11 stuff
	cat <<END >%i/lib/qt4-%type_pkg[qt]/include/QtCore/qglobal.h.new
#ifndef __USE_WS_X11__
#define __USE_WS_X11__ 1
#endif

END
	cat %i/lib/qt4-%type_pkg[qt]/include/QtCore/qglobal.h >>%i/lib/qt4-%type_pkg[qt]/include/QtCore/qglobal.h.new
	/bin/mv %i/lib/qt4-%type_pkg[qt]/include/QtCore/qglobal.h.new %i/lib/qt4-%type_pkg[qt]/include/QtCore/qglobal.h

	for bin in linguist designer qtconfig; do
		ln -sf %p/lib/qt4-%type_pkg[qt]/bin/$bin %i/bin/${bin}4-%type_pkg[qt]
	done

	#### FIX LA, PRL and PC FILES ####

	if [ "%m" = "x86_64" ]; then
		find %i/lib/qt4-%type_pkg[qt]/lib -name \*.prl -o -name \*.pc -o -name \*.la | xargs \
			perl -pi -e 's,%b/lib,%p/lib/qt4-%type_pkg[qt]/lib,g; s/-framework /-Wl,-framework,/g; s/^(QMAKE_PRL_LIBS.*)$/\1 -Wl,-framework,Cocoa -Wl,-framework,AppKit -Wl,-framework,ApplicationServices -Wl,-framework,SystemConfiguration -lcrypto -lpng -lresolv -lssl -lz/;'
	else
		find %i/lib/qt4-%type_pkg[qt]/lib -name \*.prl -o -name \*.pc -o -name \*.la | xargs \
			perl -pi -e 's,%b/lib,%p/lib/qt4-%type_pkg[qt]/lib,g; s/-framework /-Wl,-framework,/g; s/^(QMAKE_PRL_LIBS.*)$/\1 -Wl,-framework,Carbon -Wl,-framework,AppKit -Wl,-framework,ApplicationServices -Wl,-framework,SystemConfiguration -lcrypto -lpng -lresolv -lssl -lz/;'
	fi

	#### TUTORIALS AND EXAMPLES ####

	# clean up the makefiles
	perl -pi -e "s,^DEPENDPATH.*,,g;s,^REQUIRES.*,,g" `/usr/bin/find demos examples -name "*.pro"`

	install -d -m 0755 %i/share/doc/%N/examples
	install -d -m 0755 %i/share/doc/%N/demos
	/bin/cp -fRL examples/* %i/share/doc/%N/examples/
	/bin/cp -fRL demos/* %i/share/doc/%N/demos/

	/usr/bin/find %i/share/doc/%N/ -name \*.moc -print0 | xargs -0 rm -rf {} >/dev/null 2>&1 || :
	/usr/bin/find %i/share/doc/%N/ -name \*.obj -print0 | xargs -0 rm -rf {} >/dev/null 2>&1 || :
	/usr/bin/find %i/share/doc/%N/examples -name Makefile -print0 | xargs -0 rm -rf >/dev/null 2>&1 || :

	perl -pi -e 's/-framework ApplicationServices/-Wl,-framework,ApplicationServices/g' %i/lib/qt4-%type_pkg[qt]/lib/pkgconfig/*.pc

	%p/sbin/normalize-filenames.sh "%i/lib/qt4-%type_pkg[qt]/include"
	if [ -d "%i/lib/qt4-%type_pkg[qt]/include/Phonon" -a ! -d "%i/lib/qt4-%type_pkg[qt]/include/phonon" ]; then
		/bin/rm -f "%i/lib/qt4-%type_pkg[qt]/include/phonon"
		/bin/mv "%i/lib/qt4-%type_pkg[qt]/include/Phonon" "%i/lib/qt4-%type_pkg[qt]/include/phonon"
	fi

  if [ -f "%i/lib/qt4-%type_pkg[qt]/lib/phonon.framework/Headers/Phonon" ]; then
    /bin/mv "%i/lib/qt4-%type_pkg[qt]/lib/phonon.framework/Headers/Phonon" \
            "%i/lib/qt4-%type_pkg[qt]/lib/phonon.framework/Headers/phonon"
  fi

  if [ -f "%i/lib/qt4-%type_pkg[qt]/include/phonon/phonon" -a -d "%i/lib/qt4-%type_pkg[qt]/include/phonon/Phonon" ]; then
    # Building on case sensitive FS means there's both a phonon file and
    # a Phonon dir - rename the file, or the package can't be used on
    # case insensitive file systems
    # also rename the directory so this package matches with the old one;
    # the PostInst script will create symlinks if needed so it works anyway
    /bin/mv "%i/lib/qt4-%type_pkg[qt]/include/phonon/phonon" "%i/lib/qt4-%type_pkg[qt]/include/phonon/phonon.h"
    /bin/mv "%i/lib/qt4-%type_pkg[qt]/include/phonon/Phonon" "%i/lib/qt4-%type_pkg[qt]/include/phonon/phonon"
  fi

	install -d -m 755 %i/share/doc/installed-packages
	touch %i/share/doc/installed-packages/%N
<<
DocFiles: LGPL* LICENSE* README*
SplitOff: <<
	Package: %N-qtcore-shlibs
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/lib/libQtCore.4*.dylib
		lib/qt4-%type_pkg[qt]/plugins/codecs
	<<
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtCore.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff2: <<
	Package: %N-qt3support-shlibs
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtgui-shlibs (>= %v-%r),
		%N-qtnetwork-shlibs (>= %v-%r),
		%N-qtsql-shlibs (>= %v-%r),
		%N-qtxml-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/lib/libQt3Support.4*.dylib
		lib/qt4-%type_pkg[qt]/plugins/accessible/libqtaccessiblecompatwidgets*
	<<
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQt3Support.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff3: <<
	Package: %N-qtdbus-shlibs
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtscript-shlibs (>= %v-%r),
		%N-qtxml-shlibs (>= %v-%r),
		dbus1.3-shlibs (>= 1.2.24-1)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/lib/libQtDBus.4*.dylib
		lib/qt4-%type_pkg[qt]/plugins/script/*dbus*
	<<
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtDBus.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff4: <<
	Package: %N-qtdeclarative-shlibs
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtgui-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/lib/libQtDeclarative.4*.dylib
		lib/qt4-%type_pkg[qt]/imports
		lib/qt4-%type_pkg[qt]/plugins/qmltooling
	<<
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtDeclarative.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff5: <<
	Package: %N-qtdesigner-shlibs
	Depends: <<
		%N-qt3support-shlibs (>= %v-%r),
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtdeclarative-shlibs (>= %v-%r),
		%N-qtgui-shlibs (>= %v-%r),
		%N-qtscript-shlibs (>= %v-%r),
		%N-qtxml-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-designer-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/lib/libQtDesigner.4*.dylib
		lib/qt4-%type_pkg[qt]/plugins/designer
	<<
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtDesigner.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff6: <<
	Package: %N-qtdesignercomponents-shlibs
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtdesigner-shlibs (>= %v-%r),
		%N-qtgui-shlibs (>= %v-%r),
		%N-qtxml-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-designer-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: lib/qt4-%type_pkg[qt]/lib/libQtDesignerComponents.4*.dylib
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtDesignerComponents.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff7: <<
	Package: %N-qtgui-shlibs
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		libjpeg8-shlibs (>= 8-1),
		libmng2-shlibs (>= 1.0-1),
		libpng15-shlibs (>= 1.5.2-1),
		libtiff-shlibs (>= 1.0-1)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/lib/libQtGui.4*.dylib
		lib/qt4-%type_pkg[qt]/plugins/inputmethods
		lib/qt4-%type_pkg[qt]/plugins/accessible/libqtaccessiblewidgets*
		lib/qt4-%type_pkg[qt]/plugins/graphicssystems/libqtrace*
		lib/qt4-%type_pkg[qt]/plugins/imageformats
	<<
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtGui.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff8: <<
	Package: %N-qthelp-shlibs
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtgui-shlibs (>= %v-%r),
		%N-qtclucene-shlibs (>= %v-%r),
		%N-qtnetwork-shlibs (>= %v-%r),
		%N-qtsql-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: lib/qt4-%type_pkg[qt]/lib/libQtHelp.4*.dylib
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtHelp.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff9: <<
	Package: %N-qtclucene-shlibs
	Depends: %N-qtcore-shlibs (>= %v-%r)
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: lib/qt4-%type_pkg[qt]/lib/libQtCLucene.4*.dylib
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtCLucene.4.dylib       4.7.0 %n (>= 4.7.0-1)
<<
SplitOff10: <<
	Package: %N-qtmultimedia-shlibs
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtgui-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: lib/qt4-%type_pkg[qt]/lib/libQtMultimedia.4*.dylib
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtMultimedia.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff11: <<
	Package: %N-qtnetwork-shlibs
	Depends: %N-qtcore-shlibs (>= %v-%r)
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/lib/libQtNetwork.4*.dylib
		lib/qt4-%type_pkg[qt]/plugins/bearer
	<<
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtNetwork.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff12: <<
	Package: %N-qtopengl-shlibs
	Depends: %N-qtcore-shlibs (>= %v-%r)
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/lib/libQtOpenGL.4*.dylib
		lib/qt4-%type_pkg[qt]/plugins/graphicssystems/libqgl*
	<<
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtOpenGL.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff13: <<
	Package: %N-qtscript-shlibs
	Depends: %N-qtcore-shlibs (>= %v-%r)
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: lib/qt4-%type_pkg[qt]/lib/libQtScript.4*.dylib
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtScript.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff14: <<
	Package: %N-qtscripttools-shlibs
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtgui-shlibs (>= %v-%r),
		%N-qtscript-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: lib/qt4-%type_pkg[qt]/lib/libQtScriptTools.4*.dylib
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtScriptTools.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff15: <<
	Package: %N-qtsql-shlibs
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		sqlite3-shlibs (>= 3.7.6.2-1)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/lib/libQtSql.4*.dylib
		lib/qt4-%type_pkg[qt]/plugins/sqldrivers
	<<
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtSql.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff16: <<
	Package: %N-qtsvg-shlibs
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtgui-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/lib/libQtSvg.4*.dylib
		lib/qt4-%type_pkg[qt]/plugins/iconengines/libqsvg*
	<<
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtSvg.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff17: <<
	Package: %N-qttest-shlibs
	Depends: %N-qtcore-shlibs (>= %v-%r)
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: lib/qt4-%type_pkg[qt]/lib/libQtTest.4*.dylib
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtTest.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff18: <<
	Package: %N-qtxml-shlibs
	Depends: %N-qtcore-shlibs (>= %v-%r)
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: lib/qt4-%type_pkg[qt]/lib/libQtXml.4*.dylib
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtXml.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff19: <<
	Package: %N-qtxmlpatterns-shlibs
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtnetwork-shlibs (>= %v-%r),
		%N-qtxml-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-core-shlibs (<< 4.7.3-1),
		qt4-%type_pkg[qt]-gui-shlibs (<< 4.7.3-1)
	<<
	Files: lib/qt4-%type_pkg[qt]/lib/libQtXmlPatterns.4*.dylib
	Shlibs: %p/lib/qt4-%type_pkg[qt]/lib/libQtXmlPatterns.4.dylib 4.7.0 %n (>= 4.7.0-1)
<<
SplitOff20: <<
	Package: %N-assistant
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qthelp-shlibs (>= %v-%r),
		%N-qtsql-shlibs (>= %v-%r),
		%N-qtgui-shlibs (>= %v-%r),
		%N-qtnetwork-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-assistant (<< 4.7.3-1)
	<<
	Files: lib/qt4-%type_pkg[qt]/bin/assistant*
<<
SplitOff21: <<
	Package: %N-designer
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtdesigner-shlibs (>= %v-%r),
		%N-qtdesignercomponents-shlibs (>= %v-%r),
		%N-qtxml-shlibs (>= %v-%r),
		%N-qtgui-shlibs (>= %v-%r),
		%N-qtnetwork-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-designer (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/bin/designer*
		bin/designer4-%type_pkg[qt]
	<<
<<
SplitOff22: <<
	Package: %N-linguist
	Depends: <<
		%N-qtcore-shlibs (>= %v-%r),
		%N-qtxml-shlibs (>= %v-%r),
		%N-qtgui-shlibs (>= %v-%r)
	<<
	Replaces: <<
		qt4-%type_pkg[qt] (<< 4.7.3-1),
		qt4-%type_pkg[qt]-linguist (<< 4.7.3-1)
	<<
	Files: <<
		lib/qt4-%type_pkg[qt]/bin/l*
		bin/linguist4-%type_pkg[qt]
		lib/qt4-%type_pkg[qt]/phrasebooks
	<<
<<
SplitOff23: <<
	Package: %N-doc
	Replaces: qt4-%type_pkg[qt]-doc
	Files: share/doc/qt4-%type_pkg[qt]
<<

Homepage: http://www.trolltech.com/
DescUsage: <<
To compile against this package, you need to make sure that
%p/lib/qt4-%type_pkg[qt]/bin is first in your PATH.

$QTDIR is no longer necessary; instead, qmake contains the information
necessary to find your Qt environment, and when you generate a project
using qmake it knows what to do.

If you need to manually find this package for whatever reason, you
need your compiler flags to contain:

	-I%p/lib/qt4-%type_pkg[qt]/include

...and your linker flags to contain:

	-L%p/lib/qt4-%type_pkg[qt]/lib

In this case, it's still a good idea to set your PATH to contain
"%p/lib/qt4-%type_pkg[qt]/bin" as well.

To build the demos and examples, it's enough to just run qmake on
the .pro file in the %p/share/doc/%N directory in the %N-doc
package:

	mkdir /tmp/build-examples
	cd /tmp/build-examples
	%p/lib/qt4-%type_pkg[qt]/bin/qmake %p/share/doc/%N/examples/examples.pro
	make
<<
DescPackaging: This package is dedicated to Boo Fulbright.
<<

