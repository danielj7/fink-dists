Package: bochs
Version: 1.4
Revision: 11
Maintainer: Sylvain Cuaz <zauc@users.sf.net>
#
BuildDepends: readline (>= 4.3-5), sdl
Depends: readline-shlibs (>= 4.3-5), sdl-shlibs, wget
Source: mirror:sourceforge:bochs/bochs-%v.tar.gz
GCC: 3.1
PatchScript: <<
  mv Makefile.in Makefile.in.old
  sed -e 's;BOCHSDIR=$(prefix)/bochs;BOCHSDIR=$(prefix)/lib/bochs;' -e 's; $(BOCHSDIR); $(DESTDIR)$(BOCHSDIR);g' -e 's;-srcdir=$(srcdir) $(VERSIONDIR)/install-x11-fonts;-srcdir=$(srcdir) $(DESTDIR)$(VERSIONDIR)/install-x11-fonts;' -e 's;s,/usr/local,$(prefix),;s,/usr/local,$(prefix)/lib,;'  < Makefile.in.old > Makefile.in
  mv iodev/cdrom_osx.cc iodev/cdrom_osx.cc.old
  sed 's;insert_cdrom();insert_cdrom(char *dev);' < iodev/cdrom_osx.cc.old > iodev/cdrom_osx.cc
  mv gui/Makefile.in gui/Makefile.in.old
  sed 's;^LOCAL_CXXFLAGS =;LOCAL_CXXFLAGS = $(X_CFLAGS);' < gui/Makefile.in.old > gui/Makefile.in
<<
SetCPPFLAGS: -no-cpp-precomp
ConfigureParams: --mandir=%p/share/man --enable-readline --enable-cdrom --with-x11 --with-sdl
InstallScript: <<
  make install DESTDIR=%d
<<
#
Description: Cross platform IA-32 emulator
DescUsage: <<
  To launch dlxlinux :
    cd /sw/lib/bochs/dlxlinux
    sudo gunzip hd10meg.img.gz
    sudo bochs
    [press return 3 times]
<<
DescPackaging: <<
  - add $DESTDIR where it's missing
  - replace /sw/bochs by /sw/lib/bochs
  - add missing x includes
  - doesn't build bochsdbg
<<
Homepage: http://bochs.sourceforge.net
License: LGPL
