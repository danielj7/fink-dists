Package: djvulibre

# qt3 viewer dropped as of 3.5.25 in this upstream pkg (just the
# library remains)--qt4 viewer is separate upstream pkg
Version: 3.5.24

Revision: 1002
GCC: 4.0
Source: mirror:sourceforge:djvu/%n-%v.tar.gz
Source-MD5: af83d27af5083198432a178d22b259c5
BuildDepends: <<
	fink-package-precedence,
	glib2-dev (>= 2.22.0-1),
	libiconv-dev,
	libjpeg9,
	libtiff5,
	qt3 (>= 3.3.5-1023),
	x11-dev
<<
BuildConflicts: djvulibre-dev
Depends: <<
	libdjvulibre21-shlibs (>= %v-%r),
	glib2-shlibs (>= 2.22.0-1),
	libiconv,
	libjpeg9-shlibs,
	libtiff5-shlibs,
	qt3-shlibs (>= 3.3.5-1023),
	x11
<<
PatchFile: %n.patch
PatchFile-MD5: 564e5f588682a1412d5ab8b88050c423
PatchScript: <<
 %{default_script}
 perl -pi -e 's|/sw|%p|g' configure
 perl -pi -e 's|/opt/local|%p|g' configure
 perl -pi -e 's/__powerpc__./__powerpc__) || defined(__POWERPC__)/' gui/npsdk/prcpucfg.h
<<
ConfigureParams: --mandir='${prefix}/share/man' -enable-djview 
NoSetCPPFLAGS: true
SetCPPFLAGS: -I%p/include -I/usr/X11R6/include -MD
# autoconf doesn't test this flag but the .dylib can use it if avail
SetLIBS: -liconv
UseMaxBuildJobs: false
DocFiles: NEWS README COPYING TODO COPYRIGHT INSTALL 
CompileScript: <<
	%{default_script}
	fink-package-precedence --depfile-ext='\.d' --prohibit-bdep=libdjvulibre21-dev .
<<
SplitOff: <<
 Package: libdjvulibre21-shlibs
 Depends: libjpeg9-shlibs, libiconv
 Files: lib/libdjvulibre.*.dylib
 Shlibs: %p/lib/libdjvulibre.21.dylib 25.0.0 %n (>= 3.5.21-1)
 DocFiles: NEWS README COPYING TODO COPYRIGHT INSTALL
 <<
SplitOff2: <<
 Package: libdjvulibre21-dev
 Depends: libdjvulibre21-shlibs (= %v-%r)
 Conflicts: djvulibre, djvulibre-dev, libdjvulibre15-dev, libdjvulibre21-dev
 Replaces: djvulibre, djvulibre-dev, libdjvulibre15-dev, libdjvulibre21-dev
 BuildDependsOnly: True
 Files: include lib/libdjvulibre.dylib lib/libdjvulibre.la lib/pkgconfig
 DocFiles: NEWS README COPYING TODO COPYRIGHT INSTALL 
<<
Description: Free viewer for DjVu files
Maintainer:  Dave Morrison <drm@finkproject.org>
License: GPL
Homepage: http://www.djvuzone.org
DescPort: <<
	dmacks: made sure local -I come before global

	dmacks: make sure loadable module links against all its dep
	libs so that all symbols are defined (good idea even not on
	windows)

	Patched for clang by Jack Howarth.

	dmacks: clear printf type-mismatch warnings in tiff2pdf.c
<<
