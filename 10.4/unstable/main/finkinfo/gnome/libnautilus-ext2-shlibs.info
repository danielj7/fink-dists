Package: libnautilus-ext2-shlibs
Version: 2.24.1
Revision: 1

Depends: <<
	atk1-shlibs (>= 1.24.0-1),
	cairo-shlibs (>= 1.8-1),
	dbus-shlibs (>= 1.2.1-1),
	gconf2-shlibs (>= 2.24.0-1),
	expat1-shlibs,
	fontconfig2-shlibs (>= 2.4.1-1),
	freetype219-shlibs (>= 2.3.7-7),
	glib2-shlibs (>= 2.18.0-1),
	glitz-shlibs,
	gnome-vfs2-unified-shlibs (>= 1:2.24.0-1),
	gtk+2 (>= 2.14.0-1),
	libgettext3-shlibs,
	libiconv,
	libpng3-shlibs,
	libxml2-shlibs (>= 2.6.30-1),
	orbit2 (>= 2.14.16-1),
	pango1-xft2-ft219 (>= 1.22.0-4),
	pixman-shlibs (>= 0.12.0-1),
	popt-shlibs,
	x11-shlibs
<<
BuildDepends: <<
	atk1 (>= 1.24.0-1),
	audiofile (>= 0.2.5-1),
	avahi-dev,
	bzip2-dev,
	cairo (>= 1.8-1),
	dbus-dev (>= 1.2.1-1),
	docbook-utils,
	eel2.24-dev,
	esound (>= 0.2.38-1),
	expat1,
	fink (>= 0.24.12-1),
	fontconfig2-dev (>= 2.4.1-1),
	freetype219 (>= 2.3.7-7),
	gconf2-dev (>= 2.24.0-1),
	gettext-bin,
	gettext-tools,
	glib2-dev (>= 2.18.0-1),
	glitz,
	gnome-desktop2.7-dev,
	gnome-icon-theme (>= 2.24.0-1),
	gnome-keyring-dev (>= 0.8.1-1),
	gnome-menus2-dev (>= 2.24.0-1),
	gnome-vfs2-unified-dev (>= 1:2.24.0-1),
	gtk-doc (>= 1.8-1),
	gtk+2-dev (>= 2.14.0-1),
	intltool40,
	libart2 (>= 2.3.16-1),
	libavahi-glib1-dev,
	libbonobo2-dev (>= 2.24.0-1),
	libbonoboui2-dev (>= 2.24.0-1),
	libcroco3 (>= 0.6.1-1002),
	libexif12,
	libgettext3-dev,
	libglade2 (>= 2.6.3-1),
	libgnome2-dev (>= 2.24.0-1),
	libgnomecanvas2-dev (>= 2.20.1.1-1),
	libgnomeui2-dev (>= 2.24.0-1),
	libgsf1.114-dev (>= 1.14.10-1),
	libiconv-dev,
	libpng3,
	librsvg2 (>= 2.22.3-1),
	libxml2 (>= 2.6.30-1),
	orbit2-dev (>= 2.14.16-1),
	pango1-xft2-ft219-dev (>= 1.22.0-4),
	pixman (>= 0.12.0-1),
	pkgconfig (>= 0.23),
	popt,
	startup-notification-dev (>= 0.8-1),
	x11-dev,
	xft2-dev
<<

Source: mirror:gnome:sources/nautilus/2.24/nautilus-%v.tar.bz2
Source-MD5: ccb5497397dfba46569b6dd1d2f41cef

#PatchFile: %n.patch
#PatchFile-MD5: 27e4db0665bd3a7984ae04c5d4f9d905
ConfigureParams: <<
	--disable-dependency-tracking --disable-static \
	--libdir=%p/lib/libnautilus-ext2 \
	--disable-schemas-install --disable-update-mimedb \
	PKG_CONFIG_PATH="%p/lib/fontconfig2/lib/pkgconfig:$PKG_CONFIG_PATH" \
	--x-includes=/usr/X11R6/include --x-libraries=/usr/X11R6/lib \
	--disable-beagle --disable-tracker
<<
SetCPPFLAGS: -I%p/lib/fontconfig2/include
SetLDFLAGS: -L%p/lib/fontconfig2/lib
SetCFLAGS: -Os
InstallScript: <<
	make -j1 install DESTDIR=%d pkgconfigdir=%p/lib/pkgconfig
	/bin/mv %i/lib/libnautilus-ext2/bonobo %i/lib
	/bin/ln -s libnautilus-ext2/libnautilus-extension.{dylib,la} %i/lib
	mkdir -p %i/lib/libnautilus-ext2/nautilus/extensions-2.0
<<

DocFiles: HACKING TODO THANKS MAINTAINERS README COPYING* ChangeLog po/ChangeLog:ChangeLog.po AUTHORS NEWS

Shlibs: <<
	%p/lib/libnautilus-ext2/libnautilus-extension.1.dylib 3.0.0 %n (>= 2.24.1-1)
<< 

SplitOff: <<
	Package: nautilus
	Depends: <<
		audiofile-shlibs (>= 0.2.5-1),
		bzip2-shlibs,
		eel2.24-shlibs,
		esound-bin (>= 0.2.38-1),
		esound-shlibs (>= 0.2.38-1),
		gconf2 (>= 2.24.0-1),
		gnome-desktop (>= 2.24.0-1),
		gnome-desktop2.7-shlibs,
		gnome-keyring-shlibs (>= 0.8.1-1),
		gnome-menus2-shlibs (>= 2.24.0-1),
		gtk+2 (>= 2.14.0-1),
		libart2-shlibs (>= 2.3.16-1),
		libbonobo2 (>= 2.24.0-1),
		libbonoboui2 (>= 2.24.0-1),
		libcroco3-shlibs (>= 0.6.1-1002),
		libexif12-shlibs,
		libglade2-shlibs (>= 2.6.3-1),
		libgnome2 (>= 2.24.0-1),
		libgnomecanvas2 (>= 2.20.1.1-1),
		libgnomeui2-shlibs (>= 2.24.0-1),
		libgsf1.114-shlibs (>= 1.14.10-1),
		libnautilus-ext2-shlibs (>= %v-%r),
		librsvg2-shlibs (>= 2.22.3-1),
		shared-mime-info,
		startup-notification-shlibs
	<<
	
	Files: <<
		bin
		etc
		lib/bonobo
		lib/libnautilus-ext2/nautilus
		share/applications
		share/icons
		share/locale
		share/mime
		share/nautilus
		share/pixmaps
	<<
	Replaces: libnautilus-ext1-shlibs
	ConfFiles: %p/etc/gconf/schemas/apps_nautilus_preferences.schemas
	DocFiles: HACKING TODO THANKS MAINTAINERS README COPYING* ChangeLog po/ChangeLog:ChangeLog.po AUTHORS NEWS
	
	PostInstScript: <<
		if [ configure = "$1" ]; then
			export GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source`
			gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/apps_nautilus_preferences.schemas >/dev/null
		fi
		[ -x %p/bin/update-mime-database ] && update-mime-database %p/share/mime > /dev/null 2>&1 || :
		gtk-update-icon-cache -f -t %p/share/icons/hicolor || :
	<<
	PostRmScript: <<
		[ -x %p/bin/update-mime-database ] && update-mime-database %p/share/mime > /dev/null 2>&1 || :
		gtk-update-icon-cache -f -t %p/share/icons/hicolor || :
	<<
	DescUsage: <<
		If you are running X rootless, launch Nautilus with
		'--no-desktop' flag, so it doesn't take over root
		window.
		
		Known bugs:
		Not really a bug, but Nautilus knows nothing about
		resource forks, Mac applications, bundles, etc. So
		beware! Certain actions (like moving a file with a
		rsource fork to another disk) may damage your data.
	<<
<<

SplitOff2: <<
	Package: libnautilus-ext2-dev
	Depends: libnautilus-ext2-shlibs (= %v-%r)
	Conflicts: nautilus-dev, libnautilus-ext1-dev
	Replaces: nautilus-dev, libnautilus-ext1-dev
	BuildDependsOnly: true
	Files: <<
		lib/libnautilus-ext2/libnautilus-extension.{dylib,la}
		lib/libnautilus-extension.{dylib,la}
		lib/pkgconfig include
	<<
	DocFiles: HACKING TODO THANKS MAINTAINERS README COPYING* ChangeLog po/ChangeLog:ChangeLog.po AUTHORS NEWS
<<

Description: Next-generation GNOME 2 file manager
DescDetail: <<
	Nautilus is an open-source file manager and graphical shell
	being developed by Eazel, Inc. and others.

	libnautilus-ext1-(dev,shlibs) is a modern replacement
	for nautilus-(dev,shlibs), which is no longer part of
	recent versions of nautilus.
<<
DescPort: <<
	Remove inappropriate flag from libnautilus-private/Makefile.
	See: http://bugzilla.gnome.org/show_bug.cgi?id=348301
<<
DescPackaging: <<
	Old nautilus-shlibs had libnautilus-extension.1.dylib library in
	%p/lib. But it also had other libraries that are no longer present,
	so can't keep the same fink packagename. to avoid conflicts or
	breaking things that need nautilus-shlibs libs, we rename package
	and move libs to libnautilus-ext1. API/ABI silently broke again in
	2.20 -> 2.24 (also changed loc of third-party extensions), so
	rename/move to libnautilus-ext2
<<

License: GPL
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
Homepage: http://nautilus.eazel.com
