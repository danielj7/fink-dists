Package: sbcl
Version: 0.8.9
Revision: 1
Description: Steel Bank Common Lisp
License: BSD
Maintainer: Lars Rosengreen <lars@margay.org>

# Dependencies
Depends: gnupg
BuildDepends: libxslt (>= 1.1.2-2), docbook-dtd (>= 4.2.0-2), docbook-xsl (>= 1.64.1-1)

# Unpack Phase
Source: mirror:sourceforge:%n/%n-%v-source.tar.bz2
Source2: mirror:sourceforge:%n/%n-%v-ppc-darwin-binary.tar.bz2

SourceDirectory: %n-%v

Source-MD5: 97ca1a5dac091f61943325a3d689a8e3
Source2-MD5: 11035de9d5c82a0fde4e610198c6d2e1

# Patch Phase

# Compile Phase
CompileScript: <<
  unset LD_PREBIND ; sh make.sh "../%n-%v-ppc-darwin/src/runtime/sbcl --core ../%n-%v-ppc-darwin/output/sbcl.core --disable-debugger --sysinit /dev/null --userinit /dev/null"
  cd doc ; sh make-doc.sh
<<

# Install Phase
InstallScript: <<
  find . -type d -name CVS -depth -exec rm -rf {} \;
  unset SBCL_HOME ; INSTALL_ROOT=%i sh install.sh
  mkdir -p %i/share/doc/%n
  cp -R doc/html %i/share/doc/%n/
<<

DocFiles: BUGS COPYING CREDITS NEWS README

RuntimeVars: <<
  SBCL_HOME: %p/lib/%n/
<<

PostInstScript: <<
  echo "**"
  echo "** IMPORTANT: the environmental variable SBCL_HOME must be set to" 
  echo "** %p/lib/%n/ for SBCL to function correctly.  Fink will take care of" 
  echo "** this for you in new shell sessions, but if you want to run SBCL"
  echo "** right now from this shell session, you need to type the following" 
  echo "** at the shell prompt first: export SBCL_HOME=%p/lib/%n/"
  echo "**"
<<

# Additional Data

Homepage: http://www.sbcl.org/

DescDetail: <<
Steel Bank Common Lisp (SBCL) is an open source development system for
ANSI Common Lisp.  It provides an interactive environment including an
integrated high quality native compiler, interpreter, and debugger.
SBCL is derived from Carnegie-Mellon University Common Lisp (CMUCL).
<< 

DescUsage: <<
IMPORTANT: The environmental variable SBCL_HOME must be set to
'finkroot/lib/sbcl/' where 'finkroot' is the root directory of you
fink installation (in most cases '/sw') for SBCL to function
correctly.  Fink should take care of this for you in terminal
sessions, but you may also want to set this variable in your
.MacOSX/environment.plist file, if you have one, so SBCL can be
run from carbon Emacs and other Mac applications that are not
launched via the terminal.  For more information about setting up a
~/.MacOSX/environment.plist file, see the following Apple tech note:
http://developer.apple.com/qa/qa2001/qa1067.html
<<

DescPort: << 
Uses a binary version of SBCL for bootstrapping.  gnupg is needed to
validate common lisp packages downloaded with asdf-install.  libxslt,
docbook-dtd, and docbook-xsl are used for generating the user manual.
<<
