diff -Nurd -x'*~' gdm-2.8.0.5.orig/daemon/auth.c gdm-2.8.0.5/daemon/auth.c
--- gdm-2.8.0.5.orig/daemon/auth.c	2005-05-16 22:52:51.000000000 -0400
+++ gdm-2.8.0.5/daemon/auth.c	2005-11-03 02:13:17.000000000 -0500
@@ -24,6 +24,7 @@
 #include <sys/types.h>
 #include <sys/socket.h>
 #include <unistd.h>
+#include <stdlib.h>
 #include <sys/stat.h>
 #include <fcntl.h>
 #include <netdb.h> 
diff -Nurd -x'*~' gdm-2.8.0.5.orig/daemon/xdmcp.c gdm-2.8.0.5/daemon/xdmcp.c
--- gdm-2.8.0.5.orig/daemon/xdmcp.c	2005-09-14 21:51:18.000000000 -0400
+++ gdm-2.8.0.5/daemon/xdmcp.c	2005-11-03 02:16:29.000000000 -0500
@@ -2467,6 +2467,13 @@
     }
 }
 
+#ifdef HAVE_TCPWRAPPERS
+	
+/* avoids a warning, my tcpd.h file doesn't include this prototype, even
+ * though the library does include the function and the manpage mentions it
+ */
+extern int hosts_ctl (char *daemon, char *client_name, char *client_addr, char *client_user);
+#endif
 
 static gboolean
 gdm_xdmcp_host_allow (
@@ -2478,12 +2485,6 @@
 		     )
 {
 #ifdef HAVE_TCPWRAPPERS
-	
-    /* avoids a warning, my tcpd.h file doesn't include this prototype, even
-     * though the library does include the function and the manpage mentions it
-     */
-    extern int hosts_ctl (char *daemon, char *client_name, char *client_addr, char *client_user);
-
     GdmHostent *client_he;
     char *client;
     gboolean ret;
diff -Nurd -x'*~' gdm-2.8.0.5.orig/vicious-extensions/glade-helper.c gdm-2.8.0.5/vicious-extensions/glade-helper.c
--- gdm-2.8.0.5.orig/vicious-extensions/glade-helper.c	2005-04-25 15:01:16.000000000 -0400
+++ gdm-2.8.0.5/vicious-extensions/glade-helper.c	2005-11-03 02:11:57.000000000 -0500
@@ -21,6 +21,7 @@
  */
 
 #include <config.h>
+#include <stdlib.h>
 
 /* For clist */
 #undef GTK_DISABLE_DEPRECATED
diff -Nurd -x'*~' gdm-2.8.0.5.orig/vicious-extensions/ve-misc.c gdm-2.8.0.5/vicious-extensions/ve-misc.c
--- gdm-2.8.0.5.orig/vicious-extensions/ve-misc.c	2004-05-28 15:22:56.000000000 -0400
+++ gdm-2.8.0.5/vicious-extensions/ve-misc.c	2005-11-03 02:06:14.000000000 -0500
@@ -400,7 +400,8 @@
 #if defined (HAVE_SETENV)
 	unsetenv (name);
 #else
-	extern char **environ;
+#include <crt_externs.h>
+#define environ (*_NSGetEnviron())
 	int i, len;
 
 	if (environ == NULL)
@@ -440,7 +441,8 @@
 #ifdef HAVE_CLEARENV
 	clearenv ();
 #else
-	extern char **environ;
+#include <crt_externs.h>
+#define environ (*_NSGetEnviron())
 	if (environ != NULL)
 		environ[0] = NULL;
 #endif
