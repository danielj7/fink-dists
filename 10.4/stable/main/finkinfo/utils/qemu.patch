diff -ru qemu-0.15.1/ui/cocoa.m qemu-0.15.1-patched/ui/cocoa.m
--- qemu-0.15.1/ui/cocoa.m
+++ qemu-0.15.1-patched/ui/cocoa.m
@@ -811,6 +811,8 @@ QemuCocoaView *cocoaView;
 
         char **argv = (char**)malloc( sizeof(char*)*3 );
 
+       [sheet close];
+
         asprintf(&argv[0], "%s", bin);
         asprintf(&argv[1], "-hda");
         asprintf(&argv[2], "%s", img);
--- qemu-1.0.1/fpu/softfloat.h.orig	2012-03-18 13:24:01.000000000 -0400
+++ qemu-1.0.1/fpu/softfloat.h	2012-03-18 13:26:01.000000000 -0400
@@ -57,7 +57,9 @@
 typedef uint8_t uint8;
 typedef int8_t int8;
 #ifndef _AIX
+#if !(defined(__APPLE__) && defined(_UINT16))
 typedef int uint16;
+#endif
 typedef int int16;
 #endif
 typedef unsigned int uint32;
--- qemu-1.0.1/ui/cocoa.m.orig	2012-03-18 13:24:56.000000000 -0400
+++ qemu-1.0.1/ui/cocoa.m	2012-03-18 13:25:42.000000000 -0400
@@ -22,13 +22,14 @@
  * THE SOFTWARE.
  */
 
-#import <Cocoa/Cocoa.h>
-#include <crt_externs.h>
-
 #include "qemu-common.h"
 #include "console.h"
 #include "sysemu.h"
 
+#define _UINT16
+#import <Cocoa/Cocoa.h>
+#include <crt_externs.h>
+
 #ifndef MAC_OS_X_VERSION_10_4
 #define MAC_OS_X_VERSION_10_4 1040
 #endif
