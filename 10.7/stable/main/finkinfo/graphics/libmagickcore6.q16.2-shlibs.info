Info2: <<
Package: libmagickcore%type_pkg[-nox]6.q16.2-shlibs
# qdepth can be 16, 32, 64, but currently only q16 passes tests
# When working, q32 and q64 should be in a separate .info to avoid
# defining the pkg "imagemagick" more than once in the same .info.
Type: -nox ., vers (6.8.8), patch (10), qdepth (16)
Version: 6.8.8.10
Revision: 1
Description: ImageMagick core library (q%type_raw[qdepth])
License: OSI-Approved
Maintainer: Hanspeter Niederstrasser <nieder@users.sourceforge.net>
Depends: <<
	imagemagick6.q%type_raw[qdepth]-common (>= %v-%r),
	bzip2-shlibs,
	fftw3-shlibs,
	fontconfig2-shlibs,
	freetype219-shlibs,
	lcms2-shlibs,
	libjasper.1-shlibs,
	libjbig-shlibs,
	libjpeg9-shlibs,
	liblzma5-shlibs,
	libpng16-shlibs,
	libtiff5-shlibs,
	libtool2-shlibs,
	libwebp5-shlibs,
	libxml2-shlibs,
	x11-shlibs
<<
BuildDepends: <<
	bzip2-dev,
	cairo (>= 1.12.14-1),
	fftw3,
	fink (>= 0.34),
	fink-package-precedence,
	fontconfig2-dev,
	freetype219,
	glib2-dev,
	gtk+2-dev,
	ilmbase,
	lcms2,
	libdjvulibre21-dev,
	libgettext8-dev,
	libiconv-dev,
	libjasper.1,
	libjbig,
	libjpeg9,
	liblzma5,
	libopenexr6,
	libpng16,
	librsvg2,
	libtiff5,
	libtool2,
	libwebp5,
	libwmf,
	libxml2,
	pkgconfig,
	x11-dev
<<
Recommends: <<
	ghostscript,
	ghostscript-fonts
<<
Suggests: <<
	libmagickcore%type_pkg[-nox]6.q%type_raw[qdepth].2-extra
<<
CustomMirror: <<
	Primary: http://www.imagemagick.org/download
	nam-US: http://www.imagemagick.org/download/releases
<<
Source: mirror:custom:ImageMagick-%type_raw[vers]-%type_raw[patch].tar.xz
Source-MD5: ab9b397c1d4798a9f6ae6cc94aa292fe
Source-Checksum: SHA1(ad47ada2544c33ef2f643b3a409a441e2b3b9302)
### OpenMP needs not-clang
### frozenpaths hardcodes the full path to 3rd party tools.  Needed.
### perl turned off because perlmagick-pm is the package that provides that
### pango needs >= 1.28.1
### --with-openjp2 needs libopenjpeg-2.0.0
ConfigureParams: <<
	--disable-silent-rules \
	--enable-dependency-tracking \
	--x-includes=/usr/X11/include \
	--x-libraries=/usr/X11/lib \
	--disable-openmp \
	--disable-opencl \
	--enable-shared \
	--disable-static \
	--enable-hdri \
	--with-modules \
	--with-quantum-depth=%type_raw[qdepth] \
	--with-frozenpaths \
	--with-magick-plus-plus \
	--without-perl \
	--with-bzlib \
	--with-x \
	--without-autotrace \
	--without-dps \
	--with-djvu \
	--with-fftw \
	--without-fpx \
	--without-gslib \
	--with-gs-font-dir=%p/share/ghostscript/fonts \
	--without-gvc \
	--with-jbig \
	--with-jpeg \
	--without-openjp2 \
	--without-lcms \
	--with-lcms2 \
	--without-lqr \
	--with-lzma \
	--with-openexr \
	--without-pango \
	--with-png \
	--with-rsvg \
	--with-tiff \
	--with-webp \
	--with-windows-font-dir=/Library/Fonts \
	--with-wmf \
	--with-xml
<<
GCC: 4.0
CompileScript: <<
	#!/bin/sh -ev
	./configure %c
	make -w
	fink-package-precedence --prohibit-bdep=imagemagick-nox2-dev,imagemagick2-dev,imagemagick5-dev,imagemagick5-nox-dev,imagemagick7-dev,libmagickcore%type_pkg[-nox]6.q%type_raw[qdepth].2-dev,libmagickwand%type_pkg[-nox]6.q%type_raw[qdepth].2-dev,libmagick++%type_pkg[-nox]6.q%type_raw[qdepth].3-dev .
<<
InfoTest: <<
	TestScript: make check || exit 2
<<
InstallScript: <<
	#!/bin/sh -ev
	make install DESTDIR=%d
	# Rename binaries (except *-config) into qdepth variantized names
	for FILE in animate compare composite conjure convert display identify import mogrify montage stream; do
		mv %i/bin/$FILE %i/bin/$FILE-Q%type_raw[qdepth]
	done
	# Rename manpages (except *-config) into qdepth variantized names
	for FILE in ImageMagick animate compare composite conjure convert display identify import mogrify montage stream; do
		mv %i/share/man/man1/$FILE.1 %i/share/man/man1/$FILE-Q%type_raw[qdepth].1
	done
<<
DocFiles: AUTHORS.txt ChangeLog LICENSE NEWS.txt NOTICE README.txt
Shlibs: <<
	%p/lib/libMagickCore-6.Q%type_raw[qdepth]HDRI.2.dylib 3.0.0 %n (>= 6.8.8.2-1)
<<
SplitOff: <<
	Package: libmagickcore%type_pkg[-nox]6.q%type_raw[qdepth].2-dev
	Description: ImageMagick core library (q%type_raw[qdepth]) dev files
	Depends: %N (= %v-%r)
	BuildDependsOnly: true
	Files: <<
		bin/Magick-config
		bin/MagickCore-config
		include/ImageMagick-6/magick
		lib/libMagickCore-6.Q%type_raw[qdepth]HDRI.dylib
		lib/libMagickCore-6.Q%type_raw[qdepth]HDRI.la
		lib/pkgconfig/ImageMagick-6.Q%type_raw[qdepth]HDRI.pc
		lib/pkgconfig/ImageMagick.pc
		lib/pkgconfig/MagickCore-6.Q%type_raw[qdepth]HDRI.pc
		lib/pkgconfig/MagickCore.pc
		share/man/man1/Magick-config.1
		share/man/man1/MagickCore-config.1
	<<
	Conflicts: <<
		imagemagick2-dev,
		imagemagick-nox2-dev,
		imagemagick5-dev,
		imagemagick-nox5-dev,
		imagemagick7-dev,
		libmagickcore6.q16.2-dev,
		libmagickcore6.q32.2-dev,
		libmagickcore6.q64.2-dev,
		libmagickwand6.q32.2-dev,
		libmagickwand6.q64.2-dev,
		libmagick++6.q32.3-dev,
		libmagick++6.q64.3-dev
	<<
	Replaces: <<
		imagemagick,
		imagemagick-nox,
		imagemagick2-dev,
		imagemagick-nox2-dev,
		imagemagick5-dev,
		imagemagick-nox5-dev,
		imagemagick7-dev,
		libmagickcore6.q16.2-dev,
		libmagickcore6.q32.2-dev,
		libmagickcore6.q64.2-dev,
		libmagickwand6.q32.2-dev,
		libmagickwand6.q64.2-dev,
		libmagick++6.q32.3-dev,
		libmagick++6.q64.3-dev
	<<
	DocFiles: AUTHORS.txt ChangeLog LICENSE NEWS.txt NOTICE README.txt
<<
SplitOff2: <<
	Package: libmagickwand%type_pkg[-nox]6.q%type_raw[qdepth].2-shlibs
	Description: MagickWand library (q%type_raw[qdepth])
	Depends: <<
		imagemagick6.q%type_raw[qdepth]-common (>= %v-%r),
		%N (= %v-%r),
		bzip2-shlibs,
		fftw3-shlibs,
		fontconfig2-shlibs,
		freetype219-shlibs,
		lcms2-shlibs,
		liblzma5-shlibs,
		libtool2-shlibs,
		x11-shlibs
	<<
	Files: <<
		lib/libMagickWand-6.Q%type_raw[qdepth]HDRI.2.dylib
	<<
	Shlibs: <<
		%p/lib/libMagickWand-6.Q%type_raw[qdepth]HDRI.2.dylib 3.0.0 %n (>= 6.8.8.2-1)
	<<
<<
SplitOff3: <<
	Package: libmagickwand%type_pkg[-nox]6.q%type_raw[qdepth].2-dev
	Description: MagickWand library (q%type_raw[qdepth]) dev files
	Depends: libmagickwand%type_pkg[-nox]6.q%type_raw[qdepth].2-shlibs (= %v-%r)
	BuildDependsOnly: true
	Files: <<
		bin/MagickWand-config
		bin/Wand-config
		include/ImageMagick-6/wand
		lib/libMagickWand-6.Q%type_raw[qdepth]HDRI.dylib
		lib/libMagickWand-6.Q%type_raw[qdepth]HDRI.la
		lib/pkgconfig/MagickWand-6.Q%type_raw[qdepth]HDRI.pc
		lib/pkgconfig/MagickWand.pc
		lib/pkgconfig/Wand-6.Q%type_raw[qdepth]HDRI.pc
		lib/pkgconfig/Wand.pc
		share/man/man1/MagickWand-config.1
		share/man/man1/Wand-config.1
	<<
	Conflicts: <<
		imagemagick2-dev,
		imagemagick-nox2-dev,
		imagemagick5-dev,
		imagemagick-nox5-dev,
		imagemagick7-dev,
		libmagickcore6.q32.2-dev,
		libmagickcore6.q64.2-dev,
		libmagickwand6.q16.2-dev,
		libmagickwand6.q32.2-dev,
		libmagickwand6.q64.2-dev,
		libmagick++6.q32.3-dev,
		libmagick++6.q64.3-dev
	<<
	Replaces: <<
		imagemagick,
		imagemagick-nox,
		imagemagick2-dev,
		imagemagick-nox2-dev,
		imagemagick5-dev,
		imagemagick-nox5-dev,
		imagemagick7-dev,
		libmagickcore6.q32.2-dev,
		libmagickcore6.q64.2-dev,
		libmagickwand6.q16.2-dev,
		libmagickwand6.q32.2-dev,
		libmagickwand6.q64.2-dev,
		libmagick++6.q32.3-dev,
		libmagick++6.q64.3-dev
	<<
	DocFiles: AUTHORS.txt ChangeLog LICENSE NEWS.txt NOTICE README.txt
<<
SplitOff4: <<
	Package: libmagick++%type_pkg[-nox]6.q%type_raw[qdepth].3-shlibs
	Description: Magick++ library (q%type_raw[qdepth])
	Depends: <<
		imagemagick6.q%type_raw[qdepth]-common (>= %v-%r),
		%N (= %v-%r),
		libmagickwand%type_pkg[-nox]6.q%type_raw[qdepth].2-shlibs (= %v-%r),
		bzip2-shlibs,
		fftw3-shlibs,
		fontconfig2-shlibs,
		freetype219-shlibs,
		lcms2-shlibs,
		liblzma5-shlibs,
		libtool2-shlibs,
		x11-shlibs
	<<
	Files: <<
		lib/libMagick++-6.Q%type_raw[qdepth]HDRI.3.dylib
	<<
	Shlibs: <<
		%p/lib/libMagick++-6.Q%type_raw[qdepth]HDRI.3.dylib 4.0.0 %n (>= 6.8.8.0-1)
	<<
<<
SplitOff5: <<
	Package: libmagick++%type_pkg[-nox]6.q%type_raw[qdepth].3-dev
	Description: Magick++ library (q%type_raw[qdepth]) dev files
	Depends: libmagick++%type_pkg[-nox]6.q%type_raw[qdepth].3-shlibs (= %v-%r)
	BuildDependsOnly: true
	Files: <<
		bin/Magick++-config
		include/ImageMagick-6/Magick++
		include/ImageMagick-6/Magick++.h
		lib/libMagick++-6.Q%type_raw[qdepth]HDRI.dylib
		lib/libMagick++-6.Q%type_raw[qdepth]HDRI.la
		lib/pkgconfig/ImageMagick++-6.Q%type_raw[qdepth]HDRI.pc
		lib/pkgconfig/ImageMagick++.pc
		lib/pkgconfig/Magick++-6.Q%type_raw[qdepth]HDRI.pc
		lib/pkgconfig/Magick++.pc
		share/man/man1/Magick++-config.1
	<<
	Conflicts: <<
		imagemagick2-dev,
		imagemagick-nox2-dev,
		imagemagick5-dev,
		imagemagick-nox5-dev,
		imagemagick7-dev,
		libmagickcore6.q32.2-dev,
		libmagickcore6.q64.2-dev,
		libmagickwand6.q32.2-dev,
		libmagickwand6.q64.2-dev,
		libmagick++6.q16.3-dev,
		libmagick++6.q32.3-dev,
		libmagick++6.q64.3-dev
	<<
	Replaces: <<
		imagemagick,
		imagemagick-nox,
		imagemagick2-dev,
		imagemagick-nox2-dev,
		imagemagick5-dev,
		imagemagick-nox5-dev,
		imagemagick7-dev,
		libmagickcore6.q32.2-dev,
		libmagickcore6.q64.2-dev,
		libmagickwand6.q32.2-dev,
		libmagickwand6.q64.2-dev,
		libmagick++6.q16.3-dev,
		libmagick++6.q32.3-dev,
		libmagick++6.q64.3-dev
	<<
	DocFiles: AUTHORS.txt ChangeLog LICENSE NEWS.txt NOTICE README.txt
<<
SplitOff6: <<
	Package: imagemagick6.q%type_raw[qdepth]-common
	Description: Infrastructure for ImageMagick (q%type_raw[qdepth])
	Files: <<
		etc/ImageMagick-6/coder.xml
		etc/ImageMagick-6/colors.xml
		etc/ImageMagick-6/delegates.xml
		etc/ImageMagick-6/log.xml
		etc/ImageMagick-6/magic.xml
		etc/ImageMagick-6/mime.xml
		etc/ImageMagick-6/policy.xml
		etc/ImageMagick-6/quantization-table.xml
		etc/ImageMagick-6/thresholds.xml
		etc/ImageMagick-6/type-dejavu.xml
		etc/ImageMagick-6/type-ghostscript.xml
		etc/ImageMagick-6/type-windows.xml
		etc/ImageMagick-6/type.xml
	<<
<<
SplitOff7: <<
	Package: imagemagick6.q%type_raw[qdepth]-doc
	Description: ImageMagick documentation
	Files: <<
		share/doc/ImageMagick-6
	<<
<<
SplitOff8: <<
	# The modules in this SplitOff depend on both IMCore and IMWand, so offload
	# here to avoid circular dependencies in IMCore.
	# http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=524613
	Package: libmagickcore%type_pkg[-nox]6.q%type_raw[qdepth].2-extra
	Description: Extra libmagickcore%type_pkg[-nox]6.q%type_raw[qdepth].2 modules
	Depends: <<
		%N (>= %v-%r),
		libmagickwand%type_pkg[-nox]6.q%type_raw[qdepth].2-shlibs (>= %v-%r),
		bzip2-shlibs,
		cairo-shlibs (>= 1.12.14-1),
		fftw3-shlibs,
		fontconfig2-shlibs,
		freetype219-shlibs,
		glib2-shlibs,
		gtk+2-shlibs,
		ilmbase-shlibs,
		lcms2-shlibs,
		libdjvulibre21-shlibs,
		libgettext8-shlibs,
		libjpeg9-shlibs,
		liblzma5-shlibs,
		libopenexr6-shlibs,
		librsvg2-shlibs,
		libtool2-shlibs,
		libwmf-shlibs,
		libxml2-shlibs,
		x11-shlibs
	<<
	Enhances: %N
	Files: <<
		lib/ImageMagick-%type_raw[vers]/modules-Q%type_raw[qdepth]HDRI/coders/djvu.{la,so}
		lib/ImageMagick-%type_raw[vers]/modules-Q%type_raw[qdepth]HDRI/coders/dot.{la,so}
		lib/ImageMagick-%type_raw[vers]/modules-Q%type_raw[qdepth]HDRI/coders/exr.{la,so}
		lib/ImageMagick-%type_raw[vers]/modules-Q%type_raw[qdepth]HDRI/coders/pango.{la,so}
		lib/ImageMagick-%type_raw[vers]/modules-Q%type_raw[qdepth]HDRI/coders/svg.{la,so}
		lib/ImageMagick-%type_raw[vers]/modules-Q%type_raw[qdepth]HDRI/coders/wmf.{la,so}
	<<
<<
SplitOff9: <<
	Package: imagemagick%type_pkg[-nox]
	Description: Image manipulation tools (q%type_raw[qdepth])
	Depends: <<
		%N (>= %v-%r),
		bzip2-shlibs,
		fftw3-shlibs,
		fontconfig2-shlibs,
		freetype219-shlibs,
		lcms2-shlibs,
		liblzma5-shlibs,
		libmagickwand%type_pkg[-nox]6.q%type_raw[qdepth].2-shlibs,
		libtool2-shlibs,
		x11-shlibs
	<<
	# R/S from debian
	Recommends: <<
		ghostscript,
		libmagickcore%type_pkg[-nox]6.q%type_raw[qdepth].2-extra,
		netpbm-bin
	<<
	Suggests: <<
		autotrace,
		curl,
		enscript,
		ffmpeg,
		gimp2-svg,
		gnuplot-bin,
		grads,
		graphviz,
		libwmf-bin,
		mplayer,
		povray,
		transfig
	<<
	Files: <<
		bin
		share/man
	<<
	DocFiles: AUTHORS.txt ChangeLog LICENSE NEWS.txt NOTICE README.txt
	Conflicts: <<
		imagemagick,
		imagemagick-nox,
		graphicsmagick-imagemagick-compat
	<<
	Replaces: <<
		imagemagick,
		imagemagick-nox,
		imagemagick10-shlibs,
		imagemagick-nox10-shlibs,
		imagemagick10-dev (<= 1:6.3.5-1006),
		graphicsmagick-imagemagick-compat
	<<
	PostInstScript: <<
	# qdepth=16 has the highest priority (16 > 64 > 32)
	if [ "%type_raw[qdepth]" -eq "16" ]; then
		QDEPTH=100
	else
		QDEPTH=%type_raw[qdepth]
	fi
	# Add unvarianted binaries in %p/bin
	for FILE in animate compare composite conjure convert display identify import mogrify montage stream; do
		update-alternatives --install %p/bin/$FILE $FILE %p/bin/$FILE-Q%type_raw[qdepth] $QDEPTH
	done
	# Add unvarianted manpages
	for FILE in ImageMagick animate compare composite conjure convert display identify import mogrify montage stream; do
		update-alternatives --install %p/share/man/man1/$FILE.1 $FILE.1 %p/share/man/man1/$FILE-Q%type_raw[qdepth].1 $QDEPTH
	done
	<<
	PreRmScript: <<
	if [ $1 != "upgrade" ]; then
		for FILE in animate compare composite conjure convert display identify import mogrify montage stream; do
			update-alternatives --remove $FILE %p/lib/ImageMagick-%type_raw[vers]/bin-Q%type_raw[qdepth]/$FILE
		done
		for FILE in ImageMagick animate compare composite conjure convert display identify import mogrify montage stream; do
			update-alternatives --remove $FILE.1 %p/share/man/man1/$FILE-Q%type_raw[qdepth].1
		done
	fi
	<<
<<
Homepage: http://www.imagemagick.org
DescDetail: <<
ImageMagick is a robust collection of tools and libraries to read, 
write, and manipulate an image in many image formats (over 68 major formats)
including popular formats like TIFF, JPEG, PNG, PDF, PhotoCD, and GIF.
With ImageMagick you can create images dynamically, making it 
suitable for Web applications. You can also resize, rotate, sharpen,
color reduce, or add special effects to an image and save your
completed work in the same or a different image format.

The "imagemagick" package installs the standard quantum-depth=16 suite.
<<
DescPackaging: <<
As of version 6.8, the imagemagick-nox package is no longer provided. The 
Type: field is kept for ease of maintenance, esp. in case it is ever
decided to revive imagemagick-nox as a real package.

The various runtime qdepth variants coexist with each other. The -dev
packages all C/R with -dev packages from other variants. However, packagers
must make sure that all the necessary -dev packages are installed as 
needed since there is no way to enforce inherited BuildDepends through 
the .info file.
<<
<<
