Package: automake1.12
Version: 1.12.2
Revision: 1
Source: mirror:gnu:automake/automake-%v.tar.xz
Source-MD5: 56c3ab38a5ed8f2b825341b4e007372a
# versions of dpkg < 1.10.21-1233 have a buggy install-info command
BuildDepends: fink (>= 0.32), dpkg (>= 1.10.21-1233)
Depends: autoconf (>= 1:2.63-1) | autoconf2.6
Conflicts: automake, automake1.4, automake15, automake1.5, automake1.6, automake1.7, automake1.8, automake1.9, automake1.10, automake1.11, automake1.12
Replaces: automake, automake1.4, automake15, automake1.5, automake1.6, automake1.7, automake1.8, automake1.9, automake1.10, automake1.11, automake1.12
Provides: automaken

# The patch fixes the following issues:
# * Incorrect test failure in t/aclocal7.sh;
#   See <http://debbugs.gnu.org/cgi/bugreport.cgi?bug=11896>
# * Incorrect test failure in t/suffix8.tap and t/suffix10.tap
#   This test failure is caused by a problem in libtool2, which
#   has been resolved in libtool2 2.4.2-2.
#   See <http://debbugs.gnu.org/cgi/bugreport.cgi?bug=11897>
#   and <http://debbugs.gnu.org/cgi/bugreport.cgi?bug=11895>
# * Incorrect test failure in t/self-check-exit.tap 
#   See <http://debbugs.gnu.org/cgi/bugreport.cgi?bug=11898>
# * Incorrect test failure in t/self-check-explicit-skips.sh
#   See <http://debbugs.gnu.org/cgi/bugreport.cgi?bug=11909>
PatchFile: %n.patch
PatchFile-MD5: aa4a03ee01cba5260b62e16e1b6d334f

PatchScript: <<
  #!/bin/sh -ev
  
  patch -p1 < %{PatchFile}

  # Fix incorrect C++ compiler detection: Since HFS+ ignores case by
  # default, the configure test would pick "CC" as C++ compiler.
  # Avoiding this fixes t/silent-many-gcc.sh and t/silentcxx-gcc.sh
  # See <http://debbugs.gnu.org/cgi/bugreport.cgi?bug=11893>
  /usr/bin/sed -i.orig -e 's|aCC CC FCC KCC RCC xlC_r xlC|xlC_r xlC|g' configure
  # Disable some tests that fail due to our buggy %p/sbin/install-info
  #/usr/bin/sed -i.orig -e 's|t/instfail-info\.sh||g' Makefile.in
  #/usr/bin/sed -i.orig -e 's|t/txinfo19\.sh||g' Makefile.in
  #/usr/bin/sed -i.orig -e 's|t/txinfo26\.sh||g' Makefile.in
<<

ConfigureParams: --infodir=%p/share/info PERL=/usr/bin/perl
InstallScript: make install DESTDIR=%d

InfoTest: <<
  TestScript: make check || exit 2
  TestDepends: libtool2
<<
DocFiles: COPYING README AUTHORS NEWS THANKS
InfoDocs: automake.info

Description: GNU Standards-compliant Makefile generator
DescDetail: <<
Automake is a tool for automatically generating `Makefile.in's from files 
called `Makefile.am'.

The goal of Automake is to remove the burden of Makefile maintenance from the 
back of the individual GNU maintainer (and put it on the back of the Automake 
maintainer).

The `Makefile.am' is basically a series of `make' macro definitions (with 
rules being thrown in occasionally). The generated `Makefile.in's are 
compliant with the GNU Makefile standards.
<<
DescPackaging: <<
Previous versions by Christoph Pfisterer, Max Horn.
Desc adapted from debian :-)
<<
License: GPL
Maintainer: Chris Zubrzycki <beren12@users.sourceforge.net>
Homepage: http://www.gnu.org/software/automake/
