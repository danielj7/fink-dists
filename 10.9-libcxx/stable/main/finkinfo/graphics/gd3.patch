--- libgd-2.1.0-orig/config/gdlib-config.in	2013-06-25 05:58:23.000000000 -0400
+++ libgd-2.1.0/config/gdlib-config.in	2013-07-11 09:24:44.000000000 -0400
@@ -68,10 +68,10 @@
 	echo @GDLIB_REVISION@
 	;;
     --ldflags)
-	echo @LDFLAGS@
+	echo -L@libdir@
 	;;
     --libs)
-	echo -lgd @LIBS@ @LIBICONV@
+	echo 
 	;;
     --cflags|--includes)
 	echo -I@includedir@
@@ -83,8 +83,8 @@
 	echo "GD library  @VERSION@"
 	echo "includedir: $includedir"
 	echo "cflags:     -I@includedir@"
-	echo "ldflags:    @LDFLAGS@"
-	echo "libs:       @LIBS@ @LIBICONV@"
+	echo "ldflags:    -L@libdir@"
+	echo "libs:       "
 	echo "libdir:     $libdir"
 	echo "features:   @FEATURES@"
 	;;
From 4a03b38ca98654fcb7d1d080dc6e07be4e85c555 Mon Sep 17 00:00:00 2001
From: "Christoph M. Becker" <cmbecker69@gmx.de>
Date: Tue, 11 Oct 2016 18:11:13 +0200
Subject: [PATCH] Fix #304: test suite failure in gif/bug00006 [2.2.3]

gdImageGif() converts to palette using GD_QUANT_DEFAULT which is
configuration dependend. To circumvent this we're converting to palette
ourselves, explicitly setting the desired quantization method.
---
 tests/gif/bug00006.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/tests/gif/bug00006.c b/tests/gif/bug00006.c
index f1a7fe8..c80d387 100644
--- a/tests/gif/bug00006.c
+++ b/tests/gif/bug00006.c
@@ -27,6 +27,10 @@ int main()
 		gdTestErrorMsg("Cannot open <%s> for writing\n", file);
 		return 1;
 	}
+
+	gdImageTrueColorToPaletteSetMethod(im, GD_QUANT_JQUANT, 0);
+	gdImageTrueColorToPalette(im, 1, 256);
+
 	gdImageGif(im,fp);
 	fclose(fp);
 
