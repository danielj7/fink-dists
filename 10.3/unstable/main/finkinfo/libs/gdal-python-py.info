Info2: <<
Package: gdal-python-py%type_pkg[python]
Type: python (2.3)
Version: 1.2.6
Revision: 5
Description: GDAL Python Module
License: BSD
Homepage: http://www.gdal.org
Maintainer: BABA Yoshihiko <babayoshihiko@mac.com>
DescDetail: <<

<<

# Dependencies.
Depends: <<
	gdal-shlibs (=%v-%r) | gdal-nopgsql-shlibs (=%v-%r) ,
	libogdi3-shlibs,
	postgresql80 (>= 8.0.2-13) | postgresql80-ssl (>= 8.0.2-13),
	(%type_raw[python] = 2.3) python%type_pkg[python], python%type_pkg[python]-shlibs, numeric-py%type_pkg[python]
<<

BuildDepends: <<
	libiconv-dev, cfitsio,
	libgeos2,
	libogdi3,
	postgresql80-dev (>= 8.0.2-13) | postgresql80-ssl-dev (>= 8.0.2-13)
<<

Conflicts: 
Replaces: 

# Unpack Phase.
Source: mirror:custom:gdal-%v.tar.gz
Source-MD5: 410e581874ce2b94bfa00deb9f2087f6
CustomMirror: <<
  nam-US: http://www.gdal.org/dl
  nam-US: ftp://ftp.remotesensing.org/gdal
  nam-CA: http://gdal.maptools.org/dl
<<

# Patch Phase.
Patch: gdal.patch

# Compile Phase.
GCC: 3.3
SetCFLAGS: -Os -I%p/include
SetCXXFLAGS: -Os -I%p/include
SetCPPFLAGS: -Os -I%p/include
ConfigureParams: --mandir='${prefix}/share/man' --with-local=%p --with-grass=no --with-python --with-geotiff=internal --with-hdf4=no --with-ogdi=%p --with-pg=%p/bin/pg_config  --without-mysql --with-geos --with-static-proj4=%p
CompileScript: <<
#!/bin/sh -xe
  
    perl -pi.bak -e 's,^PYTHON_INCLUDES = \@PYTHON_INCLUDES\@,PYTHON_INCLUDES = -I%p/include/python%type_raw[python] -I%p/include/python%type_raw[python]/Numeric -DHAVE_NUMPY,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON_LIBS = \@PYTHON_LIBS\@,PYTHON_LIBS = -bind_at_load -L%p/lib/python%type_raw[python]/config -lpython%type_raw[python] ,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON_CFLAGS = \@PYTHON_CFLAGS\@ \@NUMPY_FLAG\@,PYTHON_CFLAGS =  -I%p/include/python%type_raw[python] -I%p/include/python%type_raw[python]/Numeric,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON = \@PYTHON\@,PYTHON = %p/bin/python%type_raw[python],' GDALmake.opt.in
    perl -pi.bak -e 's,^PY_LD_SHARED = \@PY_LD_SHARED\@,PY_LD_SHARED = ,' GDALmake.opt.in
    perl -pi.bak -e 's,^INST_PYMOD      =       \@pymoddir\@,INST_PYMOD      = %i/lib/python2.3/site-packages,' GDALmake.opt.in
  
  export MACOSX_DEPLOYMENT_TARGET=10.3
  ./configure %c
  
  make
  
  pushd pymod
  g++ -Wl,-bind_at_load  -o .libs/_gdalmodule.so -bundle .libs/gdal_wrap.o .libs/numpydataset.o .libs/gdalnumeric.o ../.libs/libgdal.dylib -bundle -undefined dynamic_lookup
  popd
<<

# Install Phase.
InstallScript: <<
#!/bin/sh -xe
  pushd pymod
  make install prefix=%i
  popd
  rm -rf %i/bin
<<

DocFiles: ChangeLog LICENSE NEWS

DescPackaging: <<
--with-ogdi is enabled since 1.2.6-5.

The python is Fink version of python.
<<

# End of Info2
<<
