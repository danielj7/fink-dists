Package: libxpm
Version: 4.7
Revision: 2
Maintainer: Sylvain Cuaz <zauc@users.sf.net>
#
Source: ftp://ftp.x.org/contrib/libraries/libXpm-%v.tar.gz
SourceDirectory: xpm-3.4g
Depends: %n-shlibs (= %v-%r), x11
PatchScript: <<
  for i in `find . -name 'Imakefile'` ; do mv $i $i.old ; sed -e 's:$(USRLIBDIR):%p/lib:' -e 's:$(INCDIR):%p/include:' < $i.old > $i ; done
  xmkmf -a
  mv lib/Makefile lib/Makefile.orig
  sed -e '900,1000s|$(USRLIBDIR)|$(XPMLIBDIR)|g' -e 's|$(INCDIR)|$(XPMINCDIR)|g' -e 's|SHLIBDIR = .*$|SHLIBDIR = %p/lib|g' -e 's|$(REQUIREDLIBS)|-L/usr/X11R6/lib -lX11|' < lib/Makefile.orig > lib/Makefile
<<
CompileScript: <<
 make
<<
InstallScript: <<
  make -k install DESTDIR=%d BINDIR=%p/bin CONFDIR=%p/etc
  make install.man  DESTDIR=%d MANPATH=%p/share/man DOCDIR=%p/share/doc/%n
<<
DocFiles: CHANGES COPYRIGHT FAQ FILES README
#
BuildDependsOnly: True
SplitOff: <<
 Package: %N-shlibs
 Replaces: %N
 Files: lib/libXpm.4.7.dylib lib/libXpm.4.dylib
 DocFiles: COPYRIGHT
<<
#
Description: Format for storing/retrieving X pixmaps to/from files
Homepage: http://www-sop.inria.fr/koala/lehors/xpm.html
License: OSI-Approved
