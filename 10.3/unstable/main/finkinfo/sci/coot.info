Package:coot
Version: 0.0.3
Revision: 1
BuildDepends: clipper, glib, gtk-canvas, gtk+2, glut, gtkglarea, guile16, guile16-dev, gsl, libglade2
# scientificpython-py23
Depends: clipper, guile16-shlibs, gtkglarea, gsl-shlibs, libglade2-shlibs, guile16-gtk, guile16-www, guile16-gui, guile16-goosh, libssm
# scientificpython-py23, 
Source: http://www.ysbl.york.ac.uk/~emsley/software/%n-%v.tar.gz
Source-MD5: 9532e4a1128e93a970e3104002b57148 
Source2: http://www.ysbl.york.ac.uk/~emsley/software/mapview-scheme-0.3.1.tar.gz
Source2-MD5: 43fc01cee50c8143b0f3de9fc79b67bc
Source3: http://www.ysbl.york.ac.uk/~emsley/software/extras/syminfo.lib
Source3-MD5: ee0781efc2874c601441078d76c03cb9
Source4: http://www.ysbl.york.ac.uk/~emsley/software/extras/refmac-lib-data-monomers.tar.gz
Source4-MD5: c7aa4ee8861d7e82df985fe2eb39c289
Source5: http://www.ysbl.york.ac.uk/~emsley/software/extras/reference-structures.tar.gz
Source5-MD5: c09bb6b5524901cb0fde14589546224e
DocFiles: README AUTHORS NEWS COPYING ABOUT-NLS BUGS TODO
Description: Crystallographic molecular graphics
DescDetail: <<
Coot stands for Crystallograhic Object Oriented Toolkit.  
It is a testbest toolkit for (Protein) Crystallography.  Coot used to
be called MapView.  Coot uses professional (and free) widgets (with
the gui builder glade), mmdb, clipper, and OpenGL, together with a new
approach to map contouring and importing/creation and other
(modelling) operations.
<<
PatchScript:  <<
#!/bin/zsh -f
perl -pi -e 's/include <malloc.h>//g' **/*.c
perl -pi -e 's|core -L\$clipper_prefix/mccp4 -lmccp4 \$MMDB_LIBS -L\$clipper_prefix/fftw/lib -lrfftw -lfftw -lz -lm|core  -lmccp4 \$MMDB_LIBS  -lsrfftw -lsfftw -lz -lm|g' configure
<<
CompileScript: <<
#!/bin/zsh -f
  export PATH=%p/share/guile/1.6/scripts/binoverride:$PATH
./configure --prefix=%i --with-mmdb-prefix=%p --with-clipper-prefix=%p --with-glut-prefix=%p --with-gl-prefix=/usr/X11R6 --with-gtkcanvas-prefix=%p --with-guile=%p --with-fftw=%p --with-mmdbssm-prefix=%p --with-imlib-prefix=%p --with-gtkgl-prefix=%p --with-glib-prefix=%p --with-gsl-prefix=%p
# --with-python=%p
#
  export GUILE_LOAD_PATH=%p/share/guile/1.6
#
make
<<
InstallScript: <<
#!/bin/zsh -f
make install
/bin/rm -rf %i/setup
#
# Add ancillary files to %i/share/coot:
#
mkdir -p %i/share/coot
cp -R ../scheme %i/share/coot/.
cp -R ../lib %i/share/coot/.
cp -R ../reference-structures %i/share/coot/.

if [[ -d %p/share/xtal/ccp4-4.2.2/lib/data ]];then
 mkdir -p %i/share/xtal/ccp4-4.2.2/lib/data
 cp ../syminfo.lib %i/share/xtal/ccp4-4.2.2/lib/data/.
elif [[ -z $CLIBD ]];then
 mkdir -p %i/share/coot/lib/data
 cp ../syminfo.lib %i/share/coot/lib/data/.
else 
 print "########################################################################"
 print "  You must copy %p/share/coot/lib/data/syminfo.lib to $CLIBD manually"
 print "########################################################################"
 mkdir -p %i/share/coot/lib/data
 cp ../syminfo.lib %i/share/coot/lib/data/.
 sleep 10
fi
#
#  Add this to coot.sh
mkdir -p %i/etc/profile.d
#
echo   " export COOT_PREFIX=%p  "                                           >>| %i/etc/profile.d/coot.sh
echo   ' if [ -z "$DYLD_LIBRARY_PATH" ] ;  then '                           >>| %i/etc/profile.d/coot.sh
echo   '      DYLD_LIBRARY_PATH=$COOT_PREFIX/lib '                          >>| %i/etc/profile.d/coot.sh
echo   ' else                                    '                          >>| %i/etc/profile.d/coot.sh
echo   '      DYLD_LIBRARY_PATH=$COOT_PREFIX/lib:${DYLD_LIBRARY_PATH} '     >>| %i/etc/profile.d/coot.sh
echo   ' fi '                                                               >>| %i/etc/profile.d/coot.sh
echo   ' '                                                                  >>| %i/etc/profile.d/coot.sh
echo   ' export DYLD_LIBRARY_PATH '                                         >>| %i/etc/profile.d/coot.sh
#
echo   ' if [ -z "$CLIBD" ] ;  then '                                       >>| %i/etc/profile.d/coot.sh
echo   '      CLIBD=$COOT_PREFIX/share/coot/lib '                           >>| %i/etc/profile.d/coot.sh
echo   ' fi '                                                               >>| %i/etc/profile.d/coot.sh
echo   ' export  CLIBD '                                                    >>| %i/etc/profile.d/coot.sh
# 
#  Add this to coot.csh
#
echo   " setenv COOT_PREFIX %p  "                                           >>| %i/etc/profile.d/coot.csh
echo   ' if (! $?DYLD_LIBRARY_PATH) then '                                  >>| %i/etc/profile.d/coot.csh
echo   ' 	setenv DYLD_LIBRARY_PATH $COOT_PREFIX/lib'                      >>| %i/etc/profile.d/coot.csh
echo   ' else '                                                             >>| %i/etc/profile.d/coot.csh
echo   ' 	setenv DYLD_LIBRARY_PATH $COOT_PREFIX/lib:${DYLD_LIBRARY_PATH}' >>| %i/etc/profile.d/coot.csh
echo   ' endif '                                                            >>| %i/etc/profile.d/coot.csh
echo   ' '                                                                  >>| %i/etc/profile.d/coot.csh
echo   ' if (! $?CLIBD) then '                                              >>| %i/etc/profile.d/coot.csh
echo   ' 	setenv CLIBD $COOT_PREFIX/share/coot/lib'                       >>| %i/etc/profile.d/coot.csh
echo   ' endif '                                                            >>| %i/etc/profile.d/coot.csh
echo   ' '                                                                  >>| %i/etc/profile.d/coot.csh
chmod a+x,a+r  %i/etc/profile.d/coot.*sh
<<
RunTimeVars: <<
MAPVIEW_SCHEME_DIR: %p/share/%n/scheme
COOT_SCHEME_DIR: %p/share/%n/scheme
COOT_REFMAC_LIB_DIR: %p/share/coot/lib
COOT_STANDARD_RESIDUES: %p/share/%n/standard-residues.pdb
GUILE_LOAD_PATH: %p/share/guile/1.6:%p/share/guile:%p/share/guile/1.6/gtk-1.2:%p/share/guile/1.6/gui:%p/share/guile/1.6/goosh:%p/share/guile/1.6/www
COOT_REF_STRUCTS: %p/share/coot/reference-structures
COOT_RESOURCES_FILE: %p/share/coot/cootrc
COOT_RESOURCES_DIR: %p/share/coot/pixmaps
<<
License: GPL
Maintainer: W. G. Scott <wgscott@users.sourceforge.net> 
Homepage: http://www.ysbl.york.ac.uk/~emsley/coot/
