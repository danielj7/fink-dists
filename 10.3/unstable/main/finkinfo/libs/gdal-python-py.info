Info2: <<
Package: gdal-python%type_pkg[python]
Type: -nopgsql (boolean), python (-py23)
Version: 1.2.6
Revision: 3
Description: GDAL Python Module
License: BSD
Homepage: http://www.gdal.org
Maintainer: BABA Yoshihiko <babayoshihiko@mac.com>
DescDetail: <<

<<

# Dependencies.
Depends: <<
	gdal-shlibs (=%v-%r) | gdal-nopgsql-shlibs (=%v-%r) ,
	(%type_raw[-nopgsql] = .) postgresql80 (>= 8.0.2-13) | (%type_raw[-nopgsql] = .) postgresql80-ssl (>= 8.0.2-13),
	(%type_raw[python] = -py22) python22, (%type_raw[python] = -py22) python22-shlibs, (%type_raw[python] = -py22) numeric-py22,
	(%type_raw[python] = -py23) python23, (%type_raw[python] = -py23) python23-shlibs, (%type_raw[python] = -py23) numeric-py23,
	(%type_raw[python] = -py24) python24, (%type_raw[python] = -py24) python24-shlibs, (%type_raw[python] = -py24) numeric-py24
<<

BuildDepends: <<
	libiconv-dev, cfitsio,
	libgeos2,
	(%type_raw[-nopgsql] = .) postgresql80-dev (>= 8.0.2-13) | (%type_raw[-nopgsql] = .) postgresql80-ssl-dev (>= 8.0.2-13)
<<

Conflicts: 
Replaces: 

# Unpack Phase.
Source: mirror:custom:gdal-%v.tar.gz
Source-MD5: 410e581874ce2b94bfa00deb9f2087f6
CustomMirror: <<
  nam-US: http://www.gdal.org/dl
  nam-US: ftp://ftp.remotesensing.org/gdal
  nam-CA: http://gdal.maptools.org/dl
<<

# Patch Phase.
Patch: gdal.patch

# Compile Phase.
GCC: 3.3
SetCFLAGS: -Os -I%p/include
SetCXXFLAGS: -Os -I%p/include
SetCPPFLAGS: -Os -I%p/include
ConfigureParams: --mandir='${prefix}/share/man' --with-local=%p --with-grass=no --with-python --with-geotiff=internal --with-hdf4=no --without-ogdi --with-pg=%p/bin/pg_config  --without-mysql --with-geos --with-static-proj4=%p
CompileScript: <<
#!/bin/sh -xe
  
  #if [ "%type_raw[python]" == "-pysystem" ]; then
  #  perl -pi.bak -e 's,PYTHON_INCLUDES = \@PYTHON_INCLUDES\@,PYTHON_INCLUDES = -I/System/Library/Frameworks/Python.framework/Versions/2.3/include/python2.3 -DHAVE_NUMPY,' GDALmake.opt.in
  #  perl -pi.bak -e 's,PYTHON_LIBS = \@PYTHON_LIBS\@,PYTHON_LIBS = -framework Python,' GDALmake.opt.in
  #  perl -pi.bak -e 's,^PYTHON_CFLAGS = \@PYTHON_CFLAGS\@ \@NUMPY_FLAG\@,PYTHON_CFLAGS = ,' GDALmake.opt.in
  #  perl -pi.bak -e 's,^PYTHON = \@PYTHON\@,PYTHON = /usr/bin/python,' GDALmake.opt.in
  #  perl -pi.bak -e 's,^PY_LD_SHARED = \@PY_LD_SHARED\@,PY_LD_SHARED = ,' GDALmake.opt.in
  #  perl -pi.bak -e 's,^INST_PYMOD      =       \@pymoddir\@,INST_PYMOD      = %i/lib/python,' GDALmake.opt.in
  #fi
  if [ "%type_raw[python]" == "-py22" ]; then
    perl -pi.bak -e 's,^PYTHON_INCLUDES = \@PYTHON_INCLUDES\@,PYTHON_INCLUDES = -I%p/include/python2.2 -I%p/include/python2.2/Numeric -DHAVE_NUMPY,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON_LIBS = \@PYTHON_LIBS\@,PYTHON_LIBS = -bind_at_load -L/sw/lib/python2.2/config -lpython2.3 ,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON_CFLAGS = \@PYTHON_CFLAGS\@ \@NUMPY_FLAG\@,PYTHON_CFLAGS =  -I%p/include/python2.3 -I%p/include/python2.2/Numeric,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON = \@PYTHON\@,PYTHON = %p/bin/python2.2,' GDALmake.opt.in
  fi
  if [ "%type_raw[python]" == "-py23" ]; then
    perl -pi.bak -e 's,^PYTHON_INCLUDES = \@PYTHON_INCLUDES\@,PYTHON_INCLUDES = -I%p/include/python2.3 -I%p/include/python2.3/Numeric -DHAVE_NUMPY,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON_LIBS = \@PYTHON_LIBS\@,PYTHON_LIBS = -bind_at_load -L/sw/lib/python2.3/config -lpython2.3 ,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON_CFLAGS = \@PYTHON_CFLAGS\@ \@NUMPY_FLAG\@,PYTHON_CFLAGS =  -I%p/include/python2.3 -I%p/include/python2.3/Numeric,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON = \@PYTHON\@,PYTHON = %p/bin/python2.3,' GDALmake.opt.in
  fi
  if [ "%type_raw[python]" == "-py24" ]; then
    perl -pi.bak -e 's,^PYTHON_INCLUDES = \@PYTHON_INCLUDES\@,PYTHON_INCLUDES = -I%p/include/python2.4 -I%p/include/python2.4/Numeric -DHAVE_NUMPY,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON_LIBS = \@PYTHON_LIBS\@,PYTHON_LIBS = -bind_at_load -L/sw/lib/python2.4/config -lpython2.4 ,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON_CFLAGS = \@PYTHON_CFLAGS\@ \@NUMPY_FLAG\@,PYTHON_CFLAGS =  -I%p/include/python2.4 -I%p/include/python2.4/Numeric,' GDALmake.opt.in
    perl -pi.bak -e 's,^PYTHON = \@PYTHON\@,PYTHON = %p/bin/python2.4,' GDALmake.opt.in
  fi
    perl -pi.bak -e 's,^PY_LD_SHARED = \@PY_LD_SHARED\@,PY_LD_SHARED = ,' GDALmake.opt.in
    perl -pi.bak -e 's,^INST_PYMOD      =       \@pymoddir\@,INST_PYMOD      = %i/lib/python2.3/site-packages,' GDALmake.opt.in
  
  export MACOSX_DEPLOYMENT_TARGET=10.3
  ./configure %c
  
  make
  
  pushd pymod
  g++ -Wl,-bind_at_load  -o .libs/_gdalmodule.so -bundle .libs/gdal_wrap.o .libs/numpydataset.o .libs/gdalnumeric.o ../.libs/libgdal.dylib -bundle -undefined dynamic_lookup
  popd
<<

# Install Phase.
InstallScript: <<
#!/bin/sh -xe
  pushd pymod
  make install prefix=%i
  popd
  rm -rf %i/bin
<<

DocFiles: ChangeLog LICENSE NEWS

DescPort: <<
The python is Fink version of python.
<<

# End of Info2
<<
