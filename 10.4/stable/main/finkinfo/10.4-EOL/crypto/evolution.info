Package: evolution
Version: 2.28.3.1
Revision: 4
Depends: <<
	%N-2.28-shlibs (>= %v-%r),
	atk1-shlibs (>= 1.28.0-1),
	cairo-shlibs (>= 1.8.8-3),
	dbus-glib1.2-shlibs,
	dbus1.3-shlibs,
	dpkg-base-files,
	evolution-data-server (>= 2.28.0-1),
	fontconfig2-shlibs (>= 2.8.0-4),
	freetype219-shlibs (>= 2.3.12-1),
	gconf2 (>= 2.28.0-1),
	gconf2-shlibs (>= 2.28.0-1),
	glib2-shlibs (>= 2.22.0-1),
	gnome-desktop2.11-shlibs (>= 2.28.0-1),
	gnome-icon-theme (>= 2.28.0-1),
	gnome-pilot (>= 2.0.17-2),
	gnome-pilot-shlibs (>= 2.0.17-2),
	gnome-spell (>= 1.0.8-4),
	gnome-vfs2-unified (>= 1:2.24.2-1),
	gnome-vfs2-unified-shlibs (>= 1:2.24.2-1),
	gtk+2 (>= 2.18.0-1),
	gtk+2-shlibs (>= 2.18.0-1),
	gtkhtml3.14-shlibs (>= 3.28.0-1),
	libart2-shlibs (>= 2.3.16-2),
	libbonobo2 (>= 2.24.2-1),
	libbonobo2-shlibs (>= 2.24.2-1),
	libbonoboui2 (>= 2.24.2-1),
	libbonoboui2-shlibs (>= 2.24.2-1),
	libcamel-1.2.14-shlibs (>= 2.28.0-1),
	libcamel-provider-1.2.14-shlibs (>= 2.28.0-1),
	libebackend-1.2.0-shlibs (>= 2.28.0-1),
	libebook-1.2.9-shlibs (>= 2.28.0-1),
	libecal-1.2.7-shlibs (>= 2.28.0-1),
	libedataserver-1.2.11-shlibs (>= 2.28.0-1),
	libedataserverui-1.2.8-shlibs (>= 2.28.0-1),
	libexchange-storage-1.2.3-shlibs (>= 2.28.0-1),
	libgdata-1.2.1-shlibs (>= 2.28.0-1),
	libgdata-google-1.2.1-shlibs (>= 2.28.0-1),
	libgettext8-shlibs,
	libglade2-shlibs (>= 2.6.4-7),
	libgnome2-shlibs (>= 2.28.0-1),
	libgnomecanvas2-shlibs (>= 2.26.0-2),
	libgnomeui2-shlibs (>= 2.24.2-1),
	libhal1-shlibs (>= 0.5.11-4),
	libical-shlibs,
	libiconv,
	libsoup2.4.1-ssl-shlibs (>= 2.28.0-1),
	libxml2-shlibs (>= 2.6.30-1),
	libytnef-shlibs,
	nspr.0d-shlibs (>= 4.8.4-4),
	libnss.1d-shlibs,
	openldap24-shlibs (>= 2.4.17-1),
	orbit2 (>= 2.14.17-2),
	orbit2-shlibs (>= 2.14.17-2),
	pango1-xft2-ft219-shlibs (>= 1.24.5-4),
	pilot-link09-shlibs (>= 0.12.3-2),
	popt-shlibs,
	rarian-compat,
	sqlite3-shlibs (>= 3.6.13-1),
	startup-notification-shlibs,
	x11-shlibs
<<
# don't have spam-assassin in fink
Recommends: bogofilter
BuildDepends: <<
	atk1 (>= 1.28.0-1),
	autoconf2.6,
	automake1.11,
	cairo (>= 1.8.8-3),
	dbus-glib1.2-dev,
	dbus1.3-dev,
	docbook-dtd,
	fink (>= 0.24.12-1),
	fink-package-precedence,
	fontconfig2-dev (>= 2.8.0-4),
	freetype219 (>= 2.3.12-1),
	gconf2-dev (>= 2.28.0-1),
	gettext-bin,
	gettext-tools (>= 0.17),
	glib2-dev (>= 2.22.0-1),
	glitz,
	gnome-desktop2.11-dev (>= 2.28.0-1),
	gnome-doc-utils (>= 0.12.0-1),
	gnome-pilot-dev (>= 2.0.17-2),
	gnome-vfs2-unified-dev (>= 1:2.24.2-1),
	gtk+2-dev (>= 2.18.0-1),
	gtkhtml3.14-dev (>= 3.28.0-1),
	intltool40,
	libart2 (>= 2.3.16-2),
	libbonobo2-dev (>= 2.24.2-1),
	libbonoboui2-dev (>= 2.24.2-1),
	libcamel-1.2.14-dev (>= 2.28.0-1),
	libcamel-provider-1.2.14-dev (>= 2.28.0-1),
	libebackend-1.2.0-dev (>= 2.28.0-1),
	libebook-1.2.9-dev (>= 2.28.0-1),
	libecal-1.2.7-dev (>= 2.28.0-1),
	libedataserver-1.2.11-dev (>= 2.28.0-1),
	libedataserverui-1.2.8-dev (>= 2.28.0-1),
	libegroupwise-1.2.13-dev (>= 2.28.0-1),
	libexchange-storage-1.2.3-dev (>= 2.28.0-1),
	libgdata-1.2.1-dev (>= 2.28.0-1),
	libgdata-google-1.2.1-dev (>= 2.28.0-1),
	libgettext8-dev,
	libglade2 (>= 2.6.4-7),
	libgnome2-dev (>= 2.28.0-1),
	libgnomecanvas2-dev (>= 2.26.0-2),
	libgnomeui2-dev (>= 2.24.2-1),
	libhal1-dev (>= 0.5.11-4),
	libical,
	libiconv-dev,
	libsoup2.4.1-ssl (>= 2.28.0-1),
	libtool2,
	libxml2 (>= 2.6.30-1),
	libytnef-dev,
	nspr.0d (>= 4.8.4-4),
	libnss.1d,
	openldap24-dev (>= 2.4.17-1),
	orbit2-dev (>= 2.14.17-2),
	pango1-xft2-ft219-dev (>= 1.24.5-4),
	pilot-link09 (>= 0.12.3-2),
	pixman (>= 0.16.0-1),
	popt,
	sed,
	sqlite3 (>= 3.6.13-1),
	sqlite3-dev (>= 3.6.13-1),
	startup-notification-dev,
	x11-dev
<<
BuildConflicts: gtkhtml-dev, nspr
Source: mirror:gnome:sources/%n/2.28/%n-%v.tar.bz2
Source-MD5: 3ddcefdcbcb04055393c547992c2f3da
PatchFile: %n.patch
PatchFile-MD5: 1d913c044d9ea2739c5624bc05e2a813
PatchScript: <<
#!/bin/sh -ev
	%{default_script}
	perl -pi -e 's,libpisock.so,libpisock.dylib,' m4/evo_pilot_link_check.m4
<<
SetCPPFLAGS: -D__DARWIN_UNIX03=1 -I%p/lib/fontconfig2/include
SetCFLAGS: -Os
SetLDFLAGS: -L%p/lib/fontconfig2/lib
ConfigureParams: <<
	--disable-static --disable-scrollkeeper --enable-dependency-tracking --with-krb5 --with-krb4 --with-openldap=%p \
	--enable-exchange --enable-default-binary --disable-mono --without-weather --disable-nm \
	--enable-pilot-conduits --with-pisock=%p \
	--enable-nntp --enable-smime --enable-nss=yes --with-nspr-includes=%p/include/nspr \
	--with-nss-includes=%p/include/nss.1d --with-nspr-libs=%p/lib/nspr --with-nss-libs=%p/lib/nss.1d \
	--disable-schemas-install --libexecdir=%p/sbin --mandir=%p/share/man F77=no \
	PKG_CONFIG_PATH=%p/lib/glib-2.0/pkgconfig-strict:%p/lib/fontconfig2/lib/pkgconfig:$PKG_CONFIG_PATH \
	--enable-plugins=experimental
<<
CompileScript: <<
	autoreconf -fi
	./configure %c
	make
	fink-package-precedence --prohibit-bdep %N-2.28-dev .
<<
InstallScript: <<
	make -j1 install DESTDIR="%d"
	mkdir -p %i/lib/evolution/2.28/plugins
<<
ConfFiles: <<
	%p/etc/gconf/schemas/apps-evolution-external-editor.schemas 
	%p/etc/gconf/schemas/apps-evolution-mail-notification.schemas 
	%p/etc/gconf/schemas/apps_evolution_addressbook.schemas
	%p/etc/gconf/schemas/apps_evolution_calendar.schemas
	%p/etc/gconf/schemas/apps_evolution_shell.schemas
	%p/etc/gconf/schemas/bogo-junk-plugin.schemas 
	%p/etc/gconf/schemas/evolution-mail.schemas
<<
PostInstScript: <<
	if [ configure = "$1" ]; then
		scrollkeeper-update
		export GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source`
		for s in \
			apps-evolution-external-editor \
			apps-evolution-mail-notification \
			apps_evolution_addressbook \
			apps_evolution_calendar \
			apps_evolution_shell \
			bogo-junk-plugin \
			evolution-mail \
		; do
			gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/$s.schemas >/dev/null
		done
	fi
	gtk-update-icon-cache -f -t %p/share/icons/hicolor || :
<<
PostRmScript: <<
	if [ remove != "$1" ]; then
		scrollkeeper-update
	fi
	gtk-update-icon-cache -f -t %p/share/icons/hicolor || :
<<
SplitOff: <<
	Package: %N-2.28-shlibs
	Depends: <<
		atk1-shlibs (>= 1.28.0-1),
		cairo-shlibs (>= 1.8.8-3),
		dbus1.3-shlibs,
		fontconfig2-shlibs (>= 2.8.0-4),
		freetype219-shlibs (>= 2.3.12-1),
		gconf2-shlibs (>= 2.28.0-1),
		glib2-shlibs (>= 2.22.0-1),
		gnome-desktop2.11-shlibs (>= 2.28.0-1),
		gnome-pilot-shlibs (>= 2.0.17-2),
		gnome-vfs2-unified-shlibs (>= 1:2.24.2-1),
		gtk+2-shlibs (>= 2.18.0-1),
		gtkhtml3.14-shlibs (>= 3.28.0-1),
		libart2-shlibs (>= 2.3.16-2),
		libbonobo2-shlibs (>= 2.24.2-1),
		libbonoboui2-shlibs (>= 2.24.2-1),
		libcamel-1.2.14-shlibs (>= 2.28.0-1),
		libcamel-provider-1.2.14-shlibs (>= 2.28.0-1),
		libebackend-1.2.0-shlibs (>= 2.28.0-1),
		libebook-1.2.9-shlibs (>= 2.28.0-1),
		libecal-1.2.7-shlibs (>= 2.28.0-1),
		libedataserver-1.2.11-shlibs (>= 2.28.0-1),
		libedataserverui-1.2.8-shlibs (>= 2.28.0-1),
		libgdata-1.2.1-shlibs (>= 2.28.0-1),
		libgdata-google-1.2.1-shlibs (>= 2.28.0-1),
		libgettext8-shlibs,
		libglade2-shlibs (>= 2.6.4-7),
		libgnome2-shlibs (>= 2.28.0-1),
		libgnomecanvas2-shlibs (>= 2.26.0-3),
		libgnomeui2-shlibs (>= 2.24.2-1),
		libhal1-shlibs (>= 0.5.11-4),
		libical-shlibs,
		libiconv,
		libsoup2.4.1-ssl-shlibs (>= 2.28.0-1),
		libxml2-shlibs (>= 2.6.30-1),
		nspr.0d-shlibs (>= 4.8.4-4),
		libnss.1d-shlibs,
		orbit2-shlibs (>= 2.14.17-2),
		pango1-xft2-ft219-shlibs (>= 1.24.5-4),
		pilot-link09-shlibs (>= 0.12.3-2),
		popt-shlibs,
		sqlite3-shlibs (>= 3.6.13-1),
		startup-notification-shlibs,
		x11-shlibs
	<<
	Replaces: %N (<< %v-%r)
	Files: <<
		lib/evolution/2.28/lib*.0.dylib
	<<
	Shlibs: <<
		%p/lib/evolution/2.28/libeabutil.0.dylib                         1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libeconduit.0.dylib                        1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libecontacteditor.0.dylib                  1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libecontactlisteditor.0.dylib              1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libefilterbar.0.dylib                      1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libemiscwidgets.0.dylib                    1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libeshell.0.dylib                          1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libessmime.0.dylib                         1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libetable.0.dylib                          1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libetext.0.dylib                           1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libetimezonedialog.0.dylib                 1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libeutil.0.dylib                           1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libevolution-a11y.0.dylib                  1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libevolution-addressbook-a11y.0.dylib      1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libevolution-addressbook-importers.0.dylib 1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libevolution-cal-shared.0.dylib            1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libevolution-calendar-a11y.0.dylib         1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libevolution-calendar-importers.0.dylib    1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libevolution-mail-importers.0.dylib        1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libevolution-mail-shared.0.dylib           1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libevolution-smime.0.dylib                 1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libevolution-widgets-a11y.0.dylib          1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libfilter.0.dylib                          1.0.0 %n (>= 2.28.3.1-1)
		%p/lib/evolution/2.28/libmenus.0.dylib                           1.0.0 %n (>= 2.28.3.1-1)
	<<
	DocFiles: AUTHORS COPYING COPYING-DOCS HACKING MAINTAINERS NEWS README
<<
SplitOff2: <<
	Package: %N-2.28-dev
	BuildDependsOnly: true
	Depends: %N-2.28-shlibs (= %v-%r)
	Conflicts: %N-2.12-dev, %N-2.24-dev, %N-2.26-dev
	Replaces: %N-2.12-dev, %N-2.24-dev, %N-2.26-dev
	Files: <<
		include
		lib/evolution/2.28/lib*
		lib/pkgconfig
		share/idl
	<<
	DocFiles: AUTHORS COPYING COPYING-DOCS HACKING MAINTAINERS NEWS README
<<
DocFiles: AUTHORS COPYING COPYING-DOCS HACKING MAINTAINERS NEWS README
Description: Advanced email client
DescPort: <<
	Original package and port for evolution < 1.4 by Max Horn

	Fix configure test for libpisock to use darwin's
	shared-library extension

	Make calendar/conduits/common/libecalendar-common-conduit.la
	an internal-only convenience library (was a module but need to
	link against it) and scrap its headers. See:
	http://bugzilla.gnome.org/show_bug.cgi?id=571275

	Example solution as we get time to fix...
	#Link against calencar/libevolution-calendarprivate.la instead
	#of the modules calendar/gui/libevolution-calendar.la or
	#addressbook/gui/component/libevolution-addressbook.la or
	#mail/libevolution-mail.la for same reason.

	Enable as many plugins as compile. Disable (or patch out) ones
	that link-against-module (.so) problems:

		attachment-reminder/liborg-gnome-evolution-attachment-reminder.la
		calendar-weather/liborg-gnome-calendar-weather.la
		default-mailer/liborg-gnome-default-mailer.la
		email-custom-header/liborg-gnome-email-custom-header.la
		face/liborg-gnome-face.la
		folder-unsubscribe/liborg-gnome-mail-folder-unsubscribe.la
		google-account-setup/liborg-gnome-evolution-google.la
		groupwise-features/liborg-gnome-groupwise-features.la
?		import-ics-attachments/liborg-gnome-evolution-mail-attachments-import-ics.la
		itip-formatter/liborg-gnome-itip-formatter.la
		mail-account-disable/libmail-account-disable.la
		mail-to-task/liborg-gnome-mail-to-task.la
		mailing-list-actions/liborg-gnome-mailing-list-actions.la
		mark-all-read/liborg-gnome-mark-all-read.la
		prefer-plain/liborg-gnome-prefer-plain.la
		publish-calendar/liborg-gnome-publish-calendar.la
		startup-wizard/liborg-gnome-evolution-startup-wizard.la
		templates/liborg-gnome-templates.la

	plugins/exchange-operations/liborg-gnome-exchange-operations.la
	links against several .so and seems critical to fix this
	plugin for even basic operations...try omitting the links and
	hope for the best (upstream already doesn't enforce
	-no-undefined).  Importing source blocks from dependent
	modules seems risky because they involve shared variable
	storage.

	Don't publish ELFish -R flags in *.pc. See:
	http://bugzilla.gnome.org/show_bug.cgi?id=350385

	Avoid passing inappropriate -I/include and -L/lib flags. See:
	http://bugzilla.gnome.org/show_bug.cgi?id=588267

	Recent glib doesn't publish -lintl, so pass it directly.
<<
DescPackaging: <<
	"experimental" plugins are disabled because shell/Evolution.h
	has syntax errors in the structs. Therefore don't care about
	hal (directly) or libytnef.

	Not fixing some omf entity mistakes. See:
	http://bugzilla.gnome.org/show_bug.cgi?id=587420

	Force non-detection of libnotify because fink's only works if
	its daemon is started manually after x11 (dbus issue?).

	Force non-detection of NetworkManager because fink doesn't
	have it (consistent build results if it were to get it).

	#Force non-detection of libpst because fink doesn't have it
	#(consistent build results if it were to get it).
	^--disable plugin that would use it for cleaner effect

	Make sure to create plugins dir even if no plugins in this
	package so that it's obvious to others where the plugins
	*should* go.

	Fix dependent lib flag ordering (makefile bugs). See:
	http://bugzilla.gnome.org/show_bug.cgi?id=588106
	NB: doesn't matter until these plugins are activated.

	Rely on PATH resolution of spamassassin and bogofilter
	executables instead of hardcoding (they're opened as
	command-line pipes so don't need hard Depends on them).

	Knock down libxml version requirement. Just import the
	functions we need from libxml2-2.7.6 source (they are thin
	functions): xmlFirstElementChild() and xmlNextElementSibling()
	See: https://bugzilla.gnome.org/show_bug.cgi?id=587138
<<
Homepage: http://www.novell.com/products/evolution/
License: GPL
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
