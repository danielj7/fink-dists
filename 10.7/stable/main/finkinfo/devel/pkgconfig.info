Package: pkgconfig
Version: 0.25
Revision: 3
Source: http://pkgconfig.freedesktop.org/releases/pkg-config-%v.tar.gz
Source-MD5: a3270bab3f4b69b7dc6dbdacbcae9745
BuildDepends: pkgconfig-common (= 1-1)
PatchFile: %n.patch
PatchFile-MD5: 6e3a9c47b40abfc371070d6823e5e2bf
SetCFLAGS: -Os
ConfigureParams: --mandir=%p/share/man --with-pc-path="$pc_path" --enable-dependency-tracking --disable-shared
# --enable-indirect-deps
CompileScript: <<
#!/bin/sh -evx
	pc_path=`cat %p/share/pkgconfig-common/pc-path`
	./configure %c
	make
<<
InfoTest: TestScript: make check || exit 2
InstallScript: <<
	make install DESTDIR=%d
	mv %i/bin/pkg-config %i/bin/pkg-config.real
	install -m 755 %p/share/pkgconfig-common/pc-resort %i/bin/pkg-config
<<
DocFiles: AUTHORS COPYING ChangeLog NEWS README
Description: Manager for library compile/link flags
DescDetail: <<
pkg-config is a script to make putting together all the build
flags when compiling/linking a lot easier.
<<
DescUsage: <<
Version 0.20 adds support for *.private fields in .pc files. Older
versions ignore them and most fink packages that use pkg-config do not
need them. However, packages supplying .pc that have them should take
steps to ensure users who might need them don't accidentally use a
lower version of pkgconfig and thus get deficient flags.

Fink only adds support for the %p/share/pkgconfig directory in 0.20.
Packages supplying .pc there should take steps to ensure users don't
accidentally use a lower version of pkgconfig.

pkg-config uses a strict "first match" search scheme to find .pc
files. The default search-path list is hardcoded into the pkg-config
binary at compile-time using data from the 'pkgconfig-common' package.
See the pkg-config manpage for env vars that can alter the default.
TODO: make this data runtime-loadable so we don't have to rev-up %n
every time pkgconfig-common is updated.

As of 0.22-4, lists of -I and -L flags are re-sorted to place all
fink paths before any system (/usr or X11) paths; other paths come
first, so PKG_CONFIG_PATH should allow users to over-ride fink, but fink
always over-rides system-supplied paths). This operation is controlled
by a wrapper script supplied by the 'pkgconfig-common' package.
<<
DescPort: <<
  As of 0.23-2, go back to included static glib1, since glib1 is no
  longer supplied by fink (as of distribution:10.7)

  Omitting --enable-indirect-deps gives a binary that gives identical
  results for --libs and --cflags for the fink-supplied pkgconfig/*.pc
  collection as 0.17.2-2 (with --enable-indirect-deps), including ones
  that have Requires and ones that have .private fields. The binary
  still fails some tests (appears to do depth-first recursing through
  Requires but expects breadth-first), so we disable those.

  Not bothering to fix autodetection of indirect-deps (failure to
  generate ./libool) because we get the same results even if file
  existed, so why bother regenerating the autotools? See:
  https://bugs.freedesktop.org/show_bug.cgi?id=31699

  Using onboard popt because that's the default mode and may as well
  use the one presumably matched to the same source tarball. Using
  fink's supplied libpopt has prototype mismatch warnings. See:
  https://bugs.freedesktop.org/show_bug.cgi?id=31700

	Make sure we get correct inline function semantics (glib1
	doesn't know about modern compiler toolchains)
<<
License: GPL
Maintainer: Daniel Macks <dmacks@netspace.org>
DescPackaging: <<
  Originally packaged by Masanori Sekino (until 0.15.0).
<<
Homepage: http://pkgconfig.freedesktop.org
