Package: lbdb
Version: 0.36
Revision: 1
Distribution: 10.4, 10.5
Description: The Little Brother's Database
License: GPL
Source: http://www.spinnaker.de/debian/%n_%v.tar.gz
Source-MD5: 12d9bf7ef3ef526f0d82604a8f9add9c
SourceDirectory: %n-%v
DocFiles: COPYING NEWS README TODO
ConfFiles: %p/etc/lbdb.rc %p/etc/lbdb_ldap.rc
Suggests: abook, evolution, gnupg

ConfigureParams: --libdir=%p/lib/lbdb --mandir=%p/share/man --sysconfdir=%p/etc PATH=/bin:/usr/bin:$PATH --with-abook=%p/bin/abook --with-gpg=%p/bin/gpg --with-evolution-addressbook-export=%p/bin/evolution-addressbook-export

CompileScript: <<
#!/bin/sh -ev
# Remove any non-Apple dependencies configure may have found

cfgoverride () {
  sed -e "/s,@$1@,/c\\
s,@$1@,|#_!!_#|$2,g" -i.bak config.status
}

./configure CFLAGS=-I%p/include %c

cfgoverride AWK /usr/bin/awk
cfgoverride TACTARGET tac
cfgoverride TAC '${exec_prefix}/lib/tac'
cfgoverride DOTLOCK_TARGET lbdb_dotlock
cfgoverride DOTLOCK '${exec_prefix}/bin/lbdb_dotlock'
cfgoverride DOTLOCKBASE lbdb_dotlock

./config.status
make
<<
InstallScript: make install_prefix=%d install

DescDetail: <<
 This package was inspired by the Big Brother Database package available for
 various Emacs mailers. It provides a command-line interface to various
 address books, and is designed to work with mutt's external query feature.
<<
DescUsage: <<
 lbdb depends on a number of external tools for some of the more obscure
 plugins. You'll have to install them separately if you want to use them.
<<
Homepage: http://www.spinnaker.de/lbdb/
Maintainer: Brendan Cully <brendan@finkproject.org>
