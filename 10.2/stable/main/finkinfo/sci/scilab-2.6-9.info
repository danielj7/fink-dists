Package: scilab
Version: 2.6
Revision: 9
Maintainer: Jeffrey Whitaker <jsw@cdc.noaa.gov>
BuildDepends: dlcompat-dev
Depends: g77 (>= 3.1-20020420-1), xless, dlcompat
Conflicts: scilab-atlas
Replaces: scilab-atlas
#Source: ftp://ftp.inria.fr/INRIA/Projects/Meta2/Scilab/distributions/%n-%v.src.tar.gz
Source: mirror:sourceforge:fink/direct_download/source/%n-%v.src.tar.gz
SourceDirectory: scilab-%v
Source-MD5: 32719c686f154ca0ddb02157b00c897e
Patch: %f.patch
PatchScript: cp config/Makefile.freebsd config/Makefile.darwin
UpdateLibtoolInDirs: config
UpdateConfigGuess: True
ConfigureParams: --with-g77
CompileScript: <<
 ./configure %c
 (cd routines/metanet; mv Makefile Makefile.orig; sed 's|FFLAGS = $(FC_OPTIONS)|FFLAGS = -O1|g' < Makefile.orig > Makefile)
 make all
<<
InstallScript: <<
 mkdir -p %i/lib
 mkdir -p %i/bin
 make install LIBPREFIX=%i/lib
 ln -fs %p/lib/%n-%v/bin/scilab %i/bin/scilab
 ln -fs %p/lib/%n-%v/bin/intersci %i/bin/intersci
 ln -fs %p/lib/%n-%v/bin/intersci-n %i/bin/intersci-n
 ln -fs %p/bin/xless %i/lib/%n-%v/bin/xless
 (cd %i/lib/%n-%v/X11_defaults; mv XLess XLess.orig; sed '/^XLess.frame/d' < XLess.orig > XLess; echo "Xless*sizeToFit:        true" >> XLess)
<<
PostInstScript: (cd %p/lib/%n-%v; make)
Docfiles: license.txt README CHANGES
Description: Software package for numerical computations
DescPort: <<
 Used instructions posted at http://homepage.mac.com/persquare/,
 but instead of making symlinks for malloc.h I created a (very large) patch
 which wraps "#ifndef __APPLE__" and "#end if" around all "#include <malloc.h>"
 statements. 
 Built-in xless (used for online help) doesn't work - it is replaced
 with a symlink to the fink installed xless.
 In OS X.1, only -O1 optimization can be used for fortran files in routines/metanet.
 Uses -force_flat_namespace to avoid problems with two-level namespace libs
 in XFree86 4.2.
<<
License: OSI-Approved
Homepage: http://www-rocq.inria.fr/scilab/
