diff -urN Singular-3-0-1.orig/kernel/feread.cc Singular-3-0-1/kernel/feread.cc
--- Singular-3-0-1.orig/kernel/feread.cc	2005-05-21 11:16:24.000000000 +0200
+++ Singular-3-0-1/kernel/feread.cc	2006-07-18 12:01:37.000000000 +0200
@@ -1,7 +1,7 @@
 /****************************************
 *  Computer Algebra System SINGULAR     *
 ****************************************/
-/* $Id: feread.cc,v 1.6 2005/05/21 09:16:24 Singular Exp $ */
+/* $Id: feread.cc,v 1.7 2006/01/13 18:10:04 wienand Exp $ */
 /*
 * ABSTRACT: input from ttys, simulating fgets
 */
@@ -25,6 +25,9 @@
 #ifdef ppcMac_darwin
 #define OM_NO_MALLOC_MACROS
 #endif
+#ifdef ix86Mac_darwin
+#define OM_NO_MALLOC_MACROS
+#endif
 #include "omalloc.h"
 
 #include "../Singular/static.h"
@@ -309,6 +312,9 @@
   if (BVERBOSE(V_PROMPT))
   {
     fprintf(stdout,pr);
+#ifdef DEFECT_SINGULAR
+    fprintf(stdout,"\n");
+#endif
   }
   mflush();
   return fgets(s,size,stdin);
diff -urN Singular-3-0-1.orig/kernel/mmstd.c Singular-3-0-1/kernel/mmstd.c
--- Singular-3-0-1.orig/kernel/mmstd.c	2004-07-16 10:43:00.000000000 +0200
+++ Singular-3-0-1/kernel/mmstd.c	2006-07-18 12:01:25.000000000 +0200
@@ -16,6 +16,9 @@
 #ifdef ppcMac_darwin
 #define OMALLOC_USES_MALLOC
 #endif
+#ifdef ix86Mac_darwin
+#define OMALLOC_USES_MALLOC
+#endif
 #include "omalloc.h"
 
 // we provide these functions, so that the settings of OM_CHECK
diff -urN Singular-3-0-1.orig/kernel/mod_raw.cc Singular-3-0-1/kernel/mod_raw.cc
--- Singular-3-0-1.orig/kernel/mod_raw.cc	2005-09-13 21:15:23.000000000 +0200
+++ Singular-3-0-1/kernel/mod_raw.cc	2006-07-18 12:01:01.000000000 +0200
@@ -1,7 +1,7 @@
 /****************************************
 *  Computer Algebra System SINGULAR     *
 ****************************************/
-/* $Id: mod_raw.cc,v 1.8 2005/09/13 19:15:23 bricken Exp $ */
+/* $Id: mod_raw.cc,v 1.11 2006/06/07 10:47:25 Singular Exp $ */
 /*
  * ABSTRACT: machine depend code for dynamic modules
  *
@@ -180,6 +180,10 @@
 #define HAVE_ELF_SYSTEM
 #endif
 
+#if defined(hppa_Linux)
+#define HAVE_ELF_SYSTEM
+#endif
+
 #if defined(SunOS_5)
 #define HAVE_ELF_SYSTEM
 #endif
@@ -192,10 +196,18 @@
 #define HAVE_ELF_SYSTEM
 #endif
 
+#ifdef ix86Mac_darwin
+#define HAVE_ELF_SYSTEM
+#endif
+
 #ifdef ix86_freebsd
 #define HAVE_ELF_SYSTEM
 #endif
 
+#ifdef sparc64_Linux
+#define HAVE_ELF_SYSTEM
+#endif
+
 #if defined(HAVE_ELF_SYSTEM)
 #include <dlfcn.h>
 
diff -urN Singular-3-0-1.orig/ntl/include/NTL/new.h Singular-3-0-1/ntl/include/NTL/new.h
--- Singular-3-0-1.orig/ntl/include/NTL/new.h	2003-11-03 18:33:24.000000000 +0100
+++ Singular-3-0-1/ntl/include/NTL/new.h	2006-07-13 11:32:01.000000000 +0200
@@ -12,7 +12,7 @@
 
 #include <new>
 
-#define NTL_NEW_OP new (std::nothrow)
+#define NTL_NEW_OP ::new //(std::nothrow)
 
 
 #else
diff -urN Singular-3-0-1.orig/singuname.sh Singular-3-0-1/singuname.sh
--- Singular-3-0-1.orig/singuname.sh	2005-02-23 16:43:10.000000000 +0100
+++ Singular-3-0-1/singuname.sh	2006-07-13 11:31:33.000000000 +0200
@@ -73,6 +73,38 @@
             echo ${prefix}
         fi
         exit 0
+    elif (echo $uname_a | $egrep "Darwin" >$devnull)
+    then
+        echo ix86Mac-darwin
+        exit 0
+    elif (echo $uname_a | $egrep "SunOS" >$devnull)
+    then
+        echo ix86-SunOS
+        exit 0
+    else
+        echo ${prefix}-Unknown
+        exit 1
+    fi
+# AMD-Opteron ########################################################
+elif (echo $uname_a | $egrep "x86_64" > $devnull)
+then
+    prefix=x86_64
+    if (echo $uname_a | $egrep "Linux" > $devnull)
+    then
+        echo ${prefix}-Linux
+        exit 0
+    else
+        echo ${prefix}-Unknown
+        exit 1
+    fi
+# HPPA ################################################################
+elif (echo $uname_a | $egrep "hppa" > $devnull)
+then
+    prefix=hppa
+    if (echo $uname_a | $egrep "Linux" > $devnull)
+    then
+        echo ${prefix}-Linux
+        exit 0
     else
         echo ${prefix}-Unknown
         exit 1
@@ -180,10 +212,10 @@
         echo ${prefix}-Unknown
         exit 1
     fi
-# AMD-Opteron ########################################################
-elif (echo $uname_a | $egrep "x86_64" > $devnull)
+# sparc64-Linux ############################################
+elif (echo $uname_a | $egrep "sparc64" >$devnull)
 then
-    prefix=x86_64
+    prefix=sparc64
     if (echo $uname_a | $egrep "Linux" > $devnull)
     then
         echo ${prefix}-Linux
@@ -192,6 +224,7 @@
         echo ${prefix}-Unknown
         exit 1
     fi
+
 else # Unknown ########################################################
     echo Unknown
     exit 2
