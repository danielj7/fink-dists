--- Python-2.3a2/Lib/distutils/util.py.orig	Thu Feb 20 06:07:01 2003
+++ Python-2.3a2/Lib/distutils/util.py	Thu Feb 20 06:07:37 2003
@@ -39,6 +39,12 @@
     # Try to distinguish various flavours of Unix
 
     (osname, host, release, version, machine) = os.uname()
+ 
+    # On MacOS X, remove space from machine name
+ 
+    if machine == "Power Macintosh":
+    	machine = "PowerMacintosh"
+
 
     # Convert the OS name to lowercase, remove '/' characters
     # (to accommodate BSD/OS), and translate spaces (for "Power Macintosh")
--- Python-2.3a2/Makefile.pre.in.orig	Thu Feb 20 06:07:50 2003
+++ Python-2.3a2/Makefile.pre.in	Thu Feb 20 06:08:33 2003
@@ -56,7 +56,7 @@
 OPT=		@OPT@
 BASECFLAGS=	@BASECFLAGS@
 CFLAGS=		$(BASECFLAGS) $(OPT)
-CPPFLAGS=	-I. -I$(srcdir)/Include
+CPPFLAGS=	-I. -I$(srcdir)/Include -I@PREFIX@/include
 LDFLAGS=	@LDFLAGS@
 LDLAST=		@LDLAST@
 SGI_ABI=	@SGI_ABI@
@@ -430,7 +430,7 @@
 		-$(PGEN) $(GRAMMAR_INPUT) $(GRAMMAR_H) $(GRAMMAR_C)
 
 $(PGEN):	$(PGENOBJS)
-		$(CC) $(OPT) $(PGENOBJS) $(LIBS) -o $(PGEN)
+		$(CC) $(OPT) $(PGENOBJS) $(LDFLAGS) $(LIBS) -o $(PGEN)
 
 Parser/grammar.o:	$(srcdir)/Parser/grammar.c \
 				$(srcdir)/Include/token.h \
--- Python-2.3a2/Misc/setuid-prog.c.orig	Thu Feb 20 06:08:53 2003
+++ Python-2.3a2/Misc/setuid-prog.c	Thu Feb 20 06:09:50 2003
@@ -70,6 +70,12 @@
 #define environ _environ
 #endif
 
+#if defined(__APPLE__)
+# include <sys/time.h>
+# include <crt_externs.h>
+# define environ (*_NSGetEnviron())
+#endif /* __APPLE__ */
+
 /* don't change def_IFS */
 char def_IFS[] = "IFS= \t\n";
 /* you may want to change def_PATH, but you should really change it in */
--- Python-2.3a2/Modules/posixmodule.c.orig	Thu Feb 20 06:10:18 2003
+++ Python-2.3a2/Modules/posixmodule.c	Thu Feb 20 06:10:39 2003
@@ -325,7 +325,7 @@
 #endif
 
 /* Return a dictionary corresponding to the POSIX environment table */
-#ifdef WITH_NEXT_FRAMEWORK
+#ifdef __APPLE__
 /* On Darwin/MacOSX a shared library or framework has no access to
 ** environ directly, we must obtain it with _NSGetEnviron().
 */
@@ -535,7 +535,7 @@
 	d = PyDict_New();
 	if (d == NULL)
 		return NULL;
-#ifdef WITH_NEXT_FRAMEWORK
+#ifdef __APPLE__
 	if (environ == NULL)
 		environ = *_NSGetEnviron();
 #endif
--- Python-2.3a2/configure.orig	Thu Feb 20 06:13:05 2003
+++ Python-2.3a2/configure	Thu Feb 20 06:13:59 2003
@@ -3620,7 +3620,7 @@
 	    ;;
 	# is there any other compiler on Darwin besides gcc?
 	Darwin*)
-	    BASECFLAGS="$BASECFLAGS -Wno-long-double -no-cpp-precomp"
+	    BASECFLAGS="$BASECFLAGS -fno-common -Wno-long-double -no-cpp-precomp"
 	    ;;
     esac
     ;;
@@ -9362,7 +9362,7 @@
 			LDSHARED="$LDSHARED "'-framework $(PYTHONFRAMEWORK)'
 		else
 			# No framework. Ignore undefined symbols, assuming they come from Python
-			LDSHARED="$LDSHARED -undefined suppress"
+			LDSHARED="$LDSHARED -flat_namespace -undefined suppress"
 		fi ;;
 	Darwin/*)
 		LDSHARED='$(CC) $(LDFLAGS) -bundle'
@@ -9371,8 +9371,8 @@
 			LDSHARED="$LDSHARED "'-framework $(PYTHONFRAMEWORK)'
 		else
 			# No framework, use the Python app as bundle-loader
-			BLDSHARED="$LDSHARED "'-bundle_loader $(BUILDPYTHON)'
-			LDSHARED="$LDSHARED "'-bundle_loader $(BINDIR)/python$(VERSION)$(EXE)'
+			BLDSHARED="$LDSHARED "'-flat_namespace -undefined suppress'
+			LDSHARED="$LDSHARED "'-flat_namespace -undefined suppress'
 		fi ;;
 	Linux*|GNU*) LDSHARED='$(CC) -shared';;
 	dgux*) LDSHARED="ld -G";;
--- Python-2.3a2/setup.py.orig	Thu Feb 20 06:11:12 2003
+++ Python-2.3a2/setup.py	Thu Feb 20 06:12:47 2003
@@ -335,7 +335,7 @@
         if have_unicode:
             exts.append( Extension('unicodedata', ['unicodedata.c']) )
         # access to ISO C locale support
-        if platform in ['cygwin', 'aix4']:
+        if platform in ['cygwin', 'aix4', 'darwin']:
             locale_libs = ['intl']
         else:
             locale_libs = []
@@ -452,6 +452,7 @@
                                       '/usr/contrib/ssl/lib/'
                                      ] )
 
+	ssl_incs = None
         if (ssl_incs is not None and
             ssl_libs is not None):
             exts.append( Extension('_ssl', ['_ssl.c'],
@@ -841,7 +842,7 @@
         self.extensions.extend(exts)
 
         # Call the method for detecting whether _tkinter can be compiled
-        self.detect_tkinter(inc_dirs, lib_dirs)
+#       self.detect_tkinter(inc_dirs, lib_dirs)
 
     def detect_tkinter_darwin(self, inc_dirs, lib_dirs):
         # The _tkinter module, using frameworks. Since frameworks are quite
@@ -905,9 +906,9 @@
         # Darwin - either AquaTk, if it is found, or X11 based Tk.
 	return # don't use tkinter
         platform = self.get_platform()
-        if platform == 'darwin' and \
-           self.detect_tkinter_darwin(inc_dirs, lib_dirs):
-            return
+#       if platform == 'darwin' and \
+#          self.detect_tkinter_darwin(inc_dirs, lib_dirs):
+#           return
 
         # Assume we haven't found any of the libraries or include files
         # The versions with dots are used on Unix, and the versions without
