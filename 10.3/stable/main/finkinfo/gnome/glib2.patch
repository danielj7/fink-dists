diff -Naur glib-2.2.3-old/Makefile.in glib-2.2.3/Makefile.in
--- glib-2.2.3-old/Makefile.in	Tue Aug 26 12:45:11 2003
+++ glib-2.2.3/Makefile.in	Mon Oct 13 11:07:17 2003
@@ -145,7 +145,7 @@
 
 AUTOMAKE_OPTIONS = 1.4
 
-SUBDIRS = . m4macros glib gobject gmodule gthread tests build po docs
+SUBDIRS = . m4macros glib gobject gmodule gthread build po docs
 
 bin_SCRIPTS = glib-gettextize
 
diff -Naur glib-2.2.3-old/configure glib-2.2.3/configure
--- glib-2.2.3-old/configure	Tue Aug 26 12:42:14 2003
+++ glib-2.2.3/configure	Mon Oct 13 11:07:18 2003
@@ -27714,10 +27714,11 @@
 echo "$as_me:$LINENO: result: $glib_cv___va_copy" >&5
 echo "${ECHO_T}$glib_cv___va_copy" >&6
 
-if test "x$glib_cv_va_copy" = "xyes"; then
-  g_va_copy_func=va_copy
-else if test "x$glib_cv___va_copy" = "xyes"; then
+# Prefer __va_copy, available on both gcc2 and gcc3.
+if test "x$glib_cv___va_copy" = "xyes"; then
   g_va_copy_func=__va_copy
+else if test "x$glib_cv_va_copy" = "xyes"; then
+  g_va_copy_func=va_copy
 fi
 fi
 
@@ -28920,9 +28921,9 @@
     # both CPPFLAG and LIBS.
     # One of them does for most gcc versions and some other platforms/compilers
     # too and could be considered as the canonical way to go.
-    for flag in pthread pthreads; do
+    for flag in '-pthread' '-pthreads' ''; do
       glib_save_CFLAGS="$CFLAGS"
-      CFLAGS="$CFLAGS -$flag"
+      CFLAGS="$CFLAGS $flag"
       if test "$cross_compiling" = yes; then
   cat >conftest.$ac_ext <<_ACEOF
 
@@ -29001,8 +29002,8 @@
 fi
       CFLAGS="$glib_save_CFLAGS"
       if test $glib_flag_works = yes ; then
-         G_THREAD_CFLAGS=-$flag
-	 G_THREAD_LIBS=-$flag
+         G_THREAD_CFLAGS=$flag
+	 G_THREAD_LIBS=$flag
       fi
     done
   fi
@@ -29030,6 +29031,9 @@
 			G_THREAD_CFLAGS="-D_THREAD_SAFE"
 		fi
 		;;
+	*-darwin*)
+		# Nothing needed.
+		;;
 	*-dg-dgux*)  # DG/UX
 		G_THREAD_CFLAGS="-D_REENTRANT -D_POSIX4A_DRAFT10_SOURCE"
 		;;
@@ -34395,9 +34399,10 @@
 #define GLIB_MICRO_VERSION $GLIB_MICRO_VERSION
 "
 
+# Prefer __va_copy, available on both gcc2 and gcc3.
 case xyes in
-x$glib_cv_va_copy)	glib_vacopy='#define G_VA_COPY	va_copy' ;;
 x$glib_cv___va_copy)	glib_vacopy='#define G_VA_COPY	__va_copy' ;;
+x$glib_cv_va_copy)	glib_vacopy='#define G_VA_COPY	va_copy' ;;
 *)			glib_vacopy=''
 esac
 
@@ -35430,8 +35435,11 @@
 /* gcc-2.95.x supports both gnu style and ISO varargs, but if -ansi
  * is passed ISO vararg support is turned off, and there is no work
  * around to turn it on, so we unconditionally turn it off.
+ *
+ * On darwin, use gcc macro to avoid incompatibility between gcc2
+ * and gcc3.
  */
-#if __GNUC__ == 2 && __GNUC_MINOR__ == 95
+#if (__GNUC__ == 2 && __GNUC_MINOR__ == 95) || defined (__APPLE__)
 #  undef G_HAVE_ISO_VARARGS
 #endif
 
diff -Naur glib-2.2.3-old/ltmain.sh glib-2.2.3/ltmain.sh
--- glib-2.2.3-old/ltmain.sh	Thu Jul 17 00:47:23 2003
+++ glib-2.2.3/ltmain.sh	Mon Oct 13 11:38:16 2003
@@ -5145,10 +5145,10 @@
 
 # Directory that this library needs to be installed in:
 libdir='$install_libdir'"
-	  if test "$installed" = no && test "$need_relink" = yes; then
-	    $echo >> $output "\
-relink_command=\"$relink_command\""
-	  fi
+#	  if test "$installed" = no && test "$need_relink" = yes; then
+#	    $echo >> $output "\
+#relink_command=\"$relink_command\""
+#	  fi
 	done
       fi
 
diff -Naur glib-2.2.3-old/po/Makefile.in.in glib-2.2.3/po/Makefile.in.in
--- glib-2.2.3-old/po/Makefile.in.in	Wed Mar  5 19:26:35 2003
+++ glib-2.2.3/po/Makefile.in.in	Mon Oct 13 11:07:18 2003
@@ -27,7 +27,7 @@
 exec_prefix = @exec_prefix@
 datadir = @datadir@
 libdir = @libdir@
-localedir = $(libdir)/locale
+localedir = $(datadir)/locale
 gnulocaledir = $(datadir)/locale
 gettextsrcdir = $(datadir)/glib-2.0/gettext/po
 subdir = po
