Package: gdk-pixbuf
Version: 0.22.0
Revision: 13
Depends: %N-shlibs (= %v-%r)
BuildDepends: libtiff, libjpeg, libpng3, glib, gtk+ (>= 1.2.10-20), gnome-libs-dev, imlib (>= 1.9.14-2), esound, audiofile, libgettext3-dev, gettext-bin, gettext-tools, x11-dev, libiconv-dev, autoconf, libtool14
BuildDependsOnly: True
Source: mirror:gnome:sources/%n/0.22/%n-%v.tar.bz2
Source-MD5: 05fcb68ceaa338614ab650c775efc2f2
Patch: %n.patch
PatchScript: <<
  # disable demos
  perl -pi -e 's,demo\S*,,,g' Makefile.am configure.in

  # clean up syntax weirdness
  perl -ni -e 'print unless /^#.*\\/' doc/Makefile.am

  # "libexec" appears to be a reserved or magical name in new automake
  perl -pi -e 's/libexec/loader/g' gdk-pixbuf/Makefile.am

  # fix .m4 syntax for use by modern automake in other packages
  perl -pi -e 's/(AC_DEFUN\()(\S+)(,)/\1\[\2]\3/' gdk-pixbuf.m4
<<
SetCPPFLAGS: -no-cpp-precomp
ConfigureParams: --disable-gtk-doc 
CompileScript: <<
  autoreconf -f -i
  ./configure %c
  make
<<
InstallScript: make install DESTDIR=%d
SplitOff: <<
  Package: %N-shlibs
  Replaces: gdk-pixbuf (<< 0.16.0-2)
  Depends: libtiff-shlibs, libjpeg-shlibs, libpng3-shlibs, glib-shlibs, gtk+-shlibs (>= 1.2.10-20), gnome-libs-shlibs, imlib-shlibs (>= 1.9.14-2), esound-shlibs, audiofile-shlibs, libgettext3-shlibs, x11, libiconv
  Files: <<
    lib/gdk-pixbuf/loaders/*.so
    lib/libgdk_pixbuf.2.0.0.dylib
    lib/libgdk_pixbuf.2.dylib
    lib/libgdk_pixbuf_xlib.2.0.0.dylib
    lib/libgdk_pixbuf_xlib.2.dylib
    lib/libgnomecanvaspixbuf.1.0.0.dylib
    lib/libgnomecanvaspixbuf.1.dylib
  <<
  Shlibs: <<
    %p/lib/libgdk_pixbuf.2.dylib 3.0.0 %n (>= 0.18.0-1)
    %p/lib/libgdk_pixbuf_xlib.2.dylib 3.0.0 %n (>= 0.18.0-1)
    %p/lib/libgnomecanvaspixbuf.1.dylib 2.0.0 %n (>= 0.18.0-1)
  <<
  DocFiles: README COPYING* AUTHORS NEWS
<<
DocFiles: README COPYING* AUTHORS NEWS
Description: Image loading and manipulation library
DescDetail: <<
gdk-pixbuf is a generic image handling library for Gtk+ programs. It
can read a wide range of image file formats. Images can be manipulated
in memory, operations include scaling, compositing and
filtering. gdk-pixbuf is intended to eventually replace Imlib.
<<
License: GPL/LGPL
Homepage: http://www.gnome.org/
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
DescPackaging: <<
 Originally packaged by Masanori Sekino.

 Easier to just modernize the autotool template files and rerun
 autoconf than to patch a lot of flags in the distributed files
 generated by an ancient autotools.
<<
