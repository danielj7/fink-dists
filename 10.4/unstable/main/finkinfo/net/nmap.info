Info2: <<
Package: nmap
Version: 4.85beta9
Revision: 1
GCC: 4.0
Maintainer: Daniel Johnson <daniel@daniel-johnson.org>

BuildDepends: <<
	fink (>= 0.24.12),
	libpcap,
	lua51-dev,
	pcre,
	system-openssl-dev
<<
Depends: <<
	libpcap-shlibs,
	lua51-shlibs,
	pcre-shlibs
<<
Conflicts: nmap-nox (<< 4.76-2), nmap (<< 4.76-2)
Replaces: nmap-nox (<< 4.76-2), nmap (<< 4.76-2)
Recommends: zenmap

Source: http://nmap.org/dist/%n-4.85BETA9.tar.bz2
Source-MD5: 51bcb77a524a0646d1f5fbe2bdf9e073
SourceDirectory: %n-4.85BETA9

PatchScript: <<
	# Don't use -no-cpp-precomp as it's a no-op.
	perl -pi -e 's/needs_cpp_precomp=yes/needs_cpp_precomp=no/g' configure
<<

SetCFLAGS: -Os
SetCPPFLAGS: -I%p/lib/system-openssl/include
SetCXXFLAGS: -I%p/lib/system-openssl/include -I%p/include -Os
SetLDFLAGS: -L%p/lib/system-openssl/lib
NoSetMAKEFLAGS: true
SetMAKEFLAGS: -j1
ConfigureParams: <<
	--mandir='$(prefix)/share/man' \
	--libexecdir='$(prefix)/lib' \
	--with-libpcap=%p \
	--with-openssl=%p/lib/system-openssl \
	--with-libpcre=%p \
	--with-libdnet=included \
	--with-liblua=yes \
	--without-zenmap
<<
CompileScript: <<
	./configure %c
	
	# This hack is necessary to ensure that the system's openssl is always used.
	make LDFLAGS='-L%p/lib/system-openssl/lib -L%b/libdnet-stripped -L%p/lib -L%b/nbase -L%b/nsock/src/ $(STATIC)'
<<
InstallScript: <<
	make install DESTDIR=%d
<<

DocFiles: CHANGELOG COPYING HACKING docs/README docs/*.txt
Description: Network exploration utility
DescDetail: <<
	nmap, a utility for network exploration or auditing, supporting ping scanning,
	port scanning and TCP/IP fingerprinting. It also offers decoy scanning, sunRPC
	scanning, reverse-identd scanning and others.
	
	Version 3.46 thanks to Alex Barclay <prozac@utulsa.edu>.
	
	The GUI is now included in the 'zenmap' package.
<<
DescPackaging: <<
	Use Fink-installed libpcre and libpcap  instead of building our own.
	Now scriptable with lua!
	
	Switch to included libdnet as it's newer.
	
	Previously maintained by Jeremy Higgs <fink@higgs-family.net>
<<
License: GPL
Homepage: http://nmap.org/

SplitOff: <<
	Package: nmap-nox
	
	Description: OBSOLETE use nmap instead
	
	Depends: nmap (>= 4.76-2), fink-obsolete-packages
	
	DocFiles: COPYING
<<
<<
