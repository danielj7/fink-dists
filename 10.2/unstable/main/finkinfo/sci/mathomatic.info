Package: mathomatic
Version: 10.6
Revision: 1
Description: Symbolic algebra program
DescDetail: <<
Mathomatic is a small, portable symbolic math program that can
automatically solve, simplify, differentiate, combine, and compare
algebraic equations, perform polynomial and complex arithmetic, etc.
<<
DescPackaging: <<
All files in source .zip are all-uppercase names and have DOS
line-endings, and are not in a directory.
<<
DescPort: <<
Solving the mess noted in DescPackaging using the fink-extracted dist
got compilcated, so so just scrap the build dir and manually extract
the .zip with flags, then manually apply the .patch.

The makefile uses non-canonical *FLAGS so set the standard ones as
usual and then stuff them into what makefile uses.

Compile with readline support (following instructions in makefile).

Compiling using the linux instructions (source.txt) seems to work.

The makefile install target forces prefix=/usr/local and man1 loose in
share/man, so do it manually. It would also install as both bin/ac and
bin/am but there is already something called ac (in /usr/sbin) and
these names sound like parts of the GNU auto* toolchain so install as
"mathomatic". This causes the program to start in color mode. Correct
all docs as necessary (executable name and -c usage).

This is *very* noisy with -Wall (implicit function prototypes; not
going to fix that) but did add missing #includes.

The copyright (in readme.txt) is quite restrictive. The author has
given explicit permission to include this package in Fink.
<<
Homepage: http://www.mathomatic.com
License: Restrictive
Maintainer: Daniel Macks <dmacks@netspace.org>
BuildDepends: readline
Depends: readline-shlibs
Source: ftp://ftp.lightlink.com/pub/computer/math/am.zip
SourceRename: am-%v.zip
Source-MD5: 3410f00a1bceeafb6e6306005e419f5d
NoSourceDirectory: true
#  for f in `ls [A-Z]*`; {mv -f $f `echo $f | tr '[A-Z]' '[a-z]'`}
#  perl -pi -e 's/\r//g' *
PatchScript: <<
  rm *
  unzip -La %p/src/am-%v.zip
  patch -p1 < %a/%n.patch
  mv am.htm mathomatic.htm
<<
SetCPPFLAGS: -c -DUNIX -DREADLINE
SetLDFLAGS: -s -lreadline -lncurses
SetMACOSX_DEPLOYMENT_TARGET: 10.2
CompileScript: <<
  make CFLAGS="$CPPFLAGS" LFLAGS="$LDFLAGS"
<<
InstallScript: <<
  mkdir -p -m 0755 %i/bin %i/share/man/man1
  install -m 0755 ac %i/bin/mathomatic
  install -m 0644 am.1 %i/share/man/man1/mathomatic.1
<<
DocFiles: changes.txt manual.htm mathomatic.htm readme.txt
