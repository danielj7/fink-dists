diff -urP Macaulay2-0.9.2/Macaulay2/README.MacOSX Macaulay2-0.9.2-patched/Macaulay2/README.MacOSX
--- Macaulay2-0.9.2/Macaulay2/README.MacOSX	Wed Dec 31 19:00:00 1969
+++ Macaulay2-0.9.2-patched/Macaulay2/README.MacOSX	Tue Feb  5 14:49:50 2002
@@ -0,0 +1,42 @@
+
+
+           Macaulay2 on Mac OS X
+
+
+1. Installation
+
+The easiest way to install Macaulay2 under Mac OS X is to use the Fink
+system <http://fink.sourceforge.net>.  Follow the instructions at the
+Fink website to install Fink itself, and then install Fink's "macaulay2"
+package.  You can choose the binary installation method, or the source
+installation method (which will download the source files and compile
+them on your machine).  You may also wish to install emacs or xemacs
+using Fink, for the best interface to Macaulay2.
+
+Fink can also be used to install other software of interest to
+mathematicians.  In most cases, you simply install the relevant Fink
+package.  In two special cases -- the X11 windowing system, and TeX --
+it is possible to install the software using another method, and then
+tell Fink about it (by installing Fink's packages "system-xfree86" and
+"system-tetex", respectively).
+
+
+2. Running Macaulay2
+
+The best way to run Macaulay2 is under emacs or xemacs.  Before running
+Macaulay2 for the first time, edit the .emacs file in your home directory
+to include the line
+
+ (load "/sw/lib/Macaulay2-0.9.2/emacs/M2-init.el")
+
+For further information about running Macaulay2 under emacs, please consult
+the file
+
+  /sw/lib/Macaulay2-0.9.2/emacs/emacs-hlp.txt
+
+
+  The stacksize under Mac OS X is not always large enough to handle 
+computations in Macaulay2.  (The symptom is a segmentation fault when you try
+a large calculation.)  The cure is to run the command "limit stacksize 5m"
+prior to the command "M2".  (You can experiment with different values of
+the stacksize to find a suitable one for your computation.)
diff -u -r1.19 dumpdata.c
--- Macaulay2-0.9.2/Macaulay2/dumpdata/dumpdata.c	2000/08/10 19:56:42	1.19
+++ Macaulay2-0.9.2/Macaulay2/dumpdata/dumpdata.c	2002/07/04 12:08:11
@@ -137,8 +137,8 @@
   n = ((pos + PAGESIZE - 1)/PAGESIZE) * PAGESIZE - pos;
   {
     char buf[n];
-    int i;
-    for (i=0; i<n; i++) buf[i] = '\n';
+    int k;
+    for (k=0; k<n; k++) buf[k] = '\n';
     write(fd,buf,n);
   }
   for (i=0; i<nmaps; i++) {
@@ -165,7 +165,7 @@
   if (fd == ERROR || f == NULL) { warning("loaddata: can't open file '%s'\n", filename); return ERROR; }
   while (TRUE) {
     char fbuf[200];
-    int n, f_end, ret;
+    int n=0, f_end, ret;
     char r, w, x;
     fbuf[0]=0;
     f_end = NULL == fgets(fbuf,sizeof fbuf,f) || fbuf[0]=='\n';
@@ -180,6 +180,7 @@
     }
     if (f_end) break;
     trim(fbuf);
+    n++;
     ret = sscanf(fbuf, mapfmt, &dumpedmap.from, &dumpedmap.to, &r, &w, &x, &dumpedmap.checksum);
     if (6 != ret) {
       warning("loaddata: in data file %s: invalid map: %s\n", filename, fbuf, n);
diff -u -r1.2 map-linux.c
--- Macaulay2-0.9.2/Macaulay2/dumpdata/map-linux.c	1999/01/17 01:36:51	1.2
+++ Macaulay2-0.9.2/Macaulay2/dumpdata/map-linux.c	2002/07/04 12:08:11
@@ -1,3 +1,4 @@
+#include <string.h>
 #include <unistd.h>
 #include <stdio.h>
 #include <sys/param.h>
@@ -17,7 +18,7 @@
   return fnumlines(mapfilename);
 }
 
-int getmaps(int nmaps, struct MAP map[nmaps]) {
+int getmaps(int nmaps, struct MAP maps[nmaps]) {
   int mlen = filelen(mapfilename);
   if (mlen == ERROR) return ERROR;
   else {
@@ -30,18 +31,18 @@
       int ret;
       char r, w, x;
       int len = linelen(line[i]);
-      char buf[len + 1];
-      memcpy(buf,line[i],len);
-      buf[len]=0;
-      ret = sscanf(buf, mapfmt, &map[i].from, &map[i].to, &r, &w, &x);
+      char buf2[len + 1];
+      memcpy(buf2,line[i],len);
+      buf2[len]=0;
+      ret = sscanf(buf2, mapfmt, &maps[i].from, &maps[i].to, &r, &w, &x);
       if (5 != ret) {
-	warning("can't parse map '%s' from file '%s'\n", buf, mapfilename);
+	warning("can't parse map '%s' from file '%s'\n", buf2, mapfilename);
 	return ERROR;
       }
-      map[i].r = r == 'r';
-      map[i].w = w == 'w';
-      map[i].x = x == 'x';
-      map[i].checksum = 0;
+      maps[i].r = r == 'r';
+      maps[i].w = w == 'w';
+      maps[i].x = x == 'x';
+      maps[i].checksum = 0;
     }
     return OKAY;
   }
diff -u -r1.12 style.hpp
--- Macaulay2-0.9.2/Macaulay2/e/style.hpp	2001/08/08 03:16:19	1.12
+++ Macaulay2-0.9.2/Macaulay2/e/style.hpp	2002/07/24 19:05:10
@@ -3,7 +3,6 @@
 #define _style_hh_
 
 #include <cmath>    // to get fabs(), gcc 3.0
-#include <vector.h> // just to get swap(), which is included from algobase.h by vector.h, gcc 3.0
 #include <stdio.h>
 #include <stddef.h>
 #include <stdlib.h>
@@ -12,6 +11,16 @@
 #include <string.h>
 
 #include <gmp.h>
+
+
+
+// 'swap' is defined here, perhaps in namespace std
+#include <algorithm>
+using namespace std;
+
+
+
+
 
 extern "C" char newline[];


diff -u -r1.11 configure.ac
--- Macaulay2-0.9.2/configure.ac	2002/04/12 22:28:26	1.11
+++ Macaulay2-0.9.2/configure.ac	2002/07/23 22:08:03
@@ -26,7 +26,7 @@
   sed -e '/^$/d' -e 's/^/   /' confdefs.h >&6
   ])
 
-AC_DEFUN(M2_CONFIGURED_FILES,m4_patsubst(m4_include(config/files),[
+AC_DEFUN(M2_CONFIGURED_FILES,patsubst(m4_include(config/files),[
 ],[ ]))
 
 echo "any environment variables set:"
@@ -164,9 +164,10 @@
     GC_FOR_NEW="$enableval",
     GC_FOR_NEW=no)
 
-AC_CHECK_FUNC(__finite,,AC_DEFINE(__finite,finite,whether __finite is missing))
-AC_CHECK_FUNC(__isnan,,AC_DEFINE(__isnan,isnan,whether __isnan is missing))
-AC_CHECK_FUNC(__isinf,,AC_DEFINE(__isinf,isinf,whether __isinf is missing))
+AC_CHECK_DECL(__finite,,AC_DEFINE(__finite,finite,whether __finite is missing),[#include <math.h>])
+AC_CHECK_DECL(__isnan,,AC_DEFINE(__isnan,isnan,whether __isnan is missing),[#include <math.h>])
+AC_CHECK_DECL(__isinf,,AC_DEFINE(__isinf,isinf,whether __isinf is missing),[#include <math.h>])
+AC_CHECK_DECLS(sys_nerr)
 
 OLIBS="$LIBS"
 LIBS="$LIBS -lgmp -lgc -lgdbm -lcf -lfac"

diff -u -r1.63 scclib.c
--- Macaulay2-0.9.2/Macaulay2/d/scclib.c	2001/08/09 21:01:44	1.63
+++ Macaulay2-0.9.2-patched/Macaulay2/d/scclib.c	2002/07/23 22:08:05
@@ -658,7 +658,10 @@
      return sd;
      }
 
-extern int errno, sys_nerr;
+extern int errno;
+#if defined HAVE_DECL_SYS_NERR && !HAVE_DECL_SYS_NERR
+extern int sys_nerr;
+#endif
 
 #ifdef __CYGWIN__
 #define NO_HERROR
