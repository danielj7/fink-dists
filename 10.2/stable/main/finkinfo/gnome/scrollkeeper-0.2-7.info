Package: scrollkeeper
Version: 0.2
Revision: 7
Source: gnome
Source-MD5: a10cb1fae040525e50b1b05dc06dc9a7
BuildDepends: readline
Depends: libxml
PatchScript: sed -e 's|@PREFIX@|%p|g' <%a/%f.patch | patch -p1
UpdateLibtool: true
SetLIBS: -lintl
ConfigureParams: --mandir='${prefix}/share/man'
InstallScript: <<
make install DESTDIR=%d scrollkeeperdocdir=%p/share/doc/%n
install -c -m 644 AUTHORS COPYING COPYING-DOCS ChangeLog NEWS README %i/share/doc/%n
(cd %i/share/doc/%n && ln -s ../../%n/doc/scrollkeeper_manual html)
mv %i/share/scrollkeeper/doc/scrollkeeper_manual %i/share/doc/%n/
rm -rf %i/share/scrollkeeper/doc
rm -rf %i/var/lib/scrollkeeper/*
(cd %i/share/scrollkeeper/Templates && ln -fns bg bg_BG)
(cd %i/share/scrollkeeper/Templates && ln -fns bg bg_BG.cp1251)
(cd %i/share/scrollkeeper/Templates && ln -fns de de_AT)
(cd %i/share/scrollkeeper/Templates && ln -fns C en)
(cd %i/share/scrollkeeper/Templates && ln -fns en en_AU)
(cd %i/share/scrollkeeper/Templates && ln -fns en en_GB)
(cd %i/share/scrollkeeper/Templates && ln -fns en en_SE)
(cd %i/share/scrollkeeper/Templates && ln -fns en en_UK)
(cd %i/share/scrollkeeper/Templates && ln -fns en en_US)
(cd %i/share/scrollkeeper/Templates && ln -fns es es_DO)
(cd %i/share/scrollkeeper/Templates && ln -fns es es_ES)
(cd %i/share/scrollkeeper/Templates && ln -fns es es_GT)
(cd %i/share/scrollkeeper/Templates && ln -fns es es_HN)
(cd %i/share/scrollkeeper/Templates && ln -fns es es_MX)
(cd %i/share/scrollkeeper/Templates && ln -fns es es_PA)
(cd %i/share/scrollkeeper/Templates && ln -fns es es_PE)
(cd %i/share/scrollkeeper/Templates && ln -fns es es_SV)
(cd %i/share/scrollkeeper/Templates && ln -fns ja ja_JP.eucJP)
(cd %i/share/scrollkeeper/Templates && ln -fns nb no)
(cd %i/share/scrollkeeper/Templates && ln -fns nn no_NY)
(cd %i/share/scrollkeeper/Templates && ln -fns pt pt_PT)
(cd %i/share/scrollkeeper/Templates && ln -fns sr sr_YU)
(cd %i/share/scrollkeeper/Templates && ln -fns sv sv_SE)
(cd %i/share/scrollkeeper/Templates && ln -fns zh zh_CN)
(cd %i/share/scrollkeeper/Templates && ln -fns zh zh_CN.GB2312)
(cd %i/share/scrollkeeper/Templates && ln -fns zh zh_TW)
(cd %i/share/scrollkeeper/Templates && ln -fns zh zh_TW.Big5)
<<
Shlibs: %p/lib/libscrollkeeper.0.dylib 1.0.0 %n (>= 0.2-7)
PostInstScript: <<
scrollkeeper-rebuilddb
<<
PostRmScript: <<
if [ "$1" = "purge" ]; then
	rm -rf %p/var/lib/scrollkeeper
fi
<<
Description: Cataloging system for documentation on open systems
DescDetail: <<
ScrollKeeper is a cataloging system for documentation. It manages
documentation metadata (as specified by the Open Source Metadata
Framework (OMF)) and provides a simple API to allow help browsers to
find, sort, and search the document catalog. It will also be able to
communicate with catalog servers on the Net to search for documents
which are not on the local system.
<<
DescPackaging: <<
Re-created some symbolic links to be relative.
Files under %p/var/lib/scrollkeeper is created dynamically. PostInst/PostRm
script handles them.
<<
DescPort: <<
Problems solved by the patch:
 - BUG: calling realpath() with too small buffer in cl/src/install.c
 - BUG: does not see errno after stat() in cl/src/install.c
 - BUG: does not check return value of find_first_element().
 - BUG: memory leak in toc_extract_end_element().
 - Include <limits.h> for PATH_MAX in cl/src/install.c
 - Add strtok_r().
 - Changes /var/log to @PREFIX@/var/log
<<
License: GPL
Maintainer: Masanori Sekino <msek@users.sourceforge.net>
Homepage: http://www.gnome.org/
