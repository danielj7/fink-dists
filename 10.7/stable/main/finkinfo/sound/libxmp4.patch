diff -ru libxmp-4.0.0.orig/Makefile.in libxmp-4.0.0/Makefile.in
--- libxmp-4.0.0.orig/Makefile.in	2013-02-13 18:09:09.000000000 -0500
+++ libxmp-4.0.0/Makefile.in	2013-02-15 21:11:09.000000000 -0500
@@ -106,7 +106,7 @@
 
 lib/$(DYLIB): $(LOBJS)
 	@mkdir -p lib
-	@CMD='$(CC) -dynamiclib -Wl,-headerpad_max_install_names,-undefined,dynamic_lookup,-compatibility_version,$(COMPAT_VERSION),-current_version,$(VERSION),-install_name,$(prefix)/lib/$(DYLIB) -o $@ $(LOBJS) $(LIBS)'; \
+	@CMD='$(CC) -dynamiclib -Wl,-compatibility_version,$(COMPAT_VERSION),-current_version,$(VERSION),-install_name,$(prefix)/lib/libxmp.$(VERSION_MAJOR).dylib -o $@ $(LOBJS) $(LIBS)'; \
 	if [ "$(V)" -gt 0 ]; then echo $$CMD; else echo LD $@ ; fi; \
 	eval $$CMD
 	ln -sf $(DYLIB) lib/libxmp.$(VERSION_MAJOR).dylib
diff -ru libxmp-4.0.0.orig/configure libxmp-4.0.0/configure
--- libxmp-4.0.0.orig/configure	2012-09-22 10:17:48.000000000 -0400
+++ libxmp-4.0.0/configure	2013-02-15 21:18:46.000000000 -0500
@@ -3058,7 +3058,7 @@
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_flag_w_unused_but_set_variable" >&5
 $as_echo "$ac_cv_c_flag_w_unused_but_set_variable" >&6; }
   if test "x$ac_cv_c_flag_w_unused_but_set_variable" = xyes; then :
-  CFLAGS="${CFLAGS} -Wno-unused-but-set-variable"
+  CFLAGS="${CFLAGS} -Wno-unused-variable"
 fi
 
 
diff -ru libxmp-4.0.0.orig/libxmp.pc.in libxmp-4.0.0/libxmp.pc.in
--- libxmp-4.0.0.orig/libxmp.pc.in	2013-02-14 19:11:53.000000000 -0500
+++ libxmp-4.0.0/libxmp.pc.in	2013-02-15 21:05:48.000000000 -0500
@@ -8,6 +8,6 @@
 Version: 4.0.0
 
 Requires:
-Libs: -L${libdir}
+Libs: -L${libdir} -lxmp
 Cflags: -I${includedir}
 Libs.private: -lm
