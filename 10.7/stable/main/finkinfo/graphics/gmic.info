Package: gmic
Version: 1.5.2.0
Revision: 1
Description: GREYC's Magic Image Converter
License: DFSG-Approved
Maintainer: Hanspeter Niederstrasser <nieder@users.sourceforge.net>
Depends: <<
	atk1-shlibs,
	cairo-shlibs,
	fftw3-shlibs,
	fontconfig2-shlibs,
	freetype219-shlibs,
	gimp2-shlibs,
	glib2-shlibs,
	gtk+2-shlibs,
	ilmbase-shlibs,
	libgettext8-shlibs,
	libjpeg8-shlibs,
	libopenexr6-shlibs,
	libpng15-shlibs,
	libtiff-shlibs,
	pango1-xft2-ft219-shlibs,
	x11-shlibs
<<
BuildDepends: <<
	atk1,
	cairo,
	fink-package-precedence,
	fftw3,
	fontconfig2-dev,
	freetype219,
	gimp2-dev,
	glib2-dev,
	gtk+2-dev,
	ilmbase,
	libjpeg8,
	libopenexr6,
	libpng15,
	libtiff,
	pango1-xft2-ft219-dev,
	system-openssl-dev,
	x11-dev,
	xcode (>= 4.5)
<<
Source: mirror:sourceforge:%n/%n_%v.tar.gz
Source-MD5: 441defe4c8a2fd81c8c48c873494979e
SourceDirectory: %n-%v
PatchFile: %n.patch
PatchFile-MD5: 15f2059aa782d3bfd8337c9e0cf749c6
PatchScript: <<
	sed 's|@FINKPREFIX@|%p|g' < %{PatchFile} | patch -p1
<<
### super memory intensive to compile, so only use 1 job to build
UseMaxBuildJobs: false
GCC: 4.0
CompileScript: <<
	#!/bin/sh -ev
	pushd src
		### 'make' also builds the zart test frontend that uses qt4, 
		### so let's not use it for now
		#export PATH=%p/lib/qt4-x11/bin:$PATH
		#make
		make macosx
		make gimp
		fink-package-precedence --depfile-ext='\.d' .
	popd
<<
InstallScript: <<
	#!/bin/sh -ev
	pushd src
		make install DESTDIR=%d
	popd
<<
DocFiles: COPYING README
Homepage: http://gmic.sourceforge.net/
DescDetail: <<
 G'MIC is focused on the design of possibly complex pipelines for converting,
 manipulating, filtering and visualizing generic 1d/2d/3d multi-spectral image
 datasets. This includes of course color images, but also more complex data
 as image sequences or 3d(+t) volumetric float-valued datasets.

 G'MIC is an open framework : the default language can be extended with
 custom G'MIC-written commands, defining thus new image available filters or
 effects. By the way, it already contains a substantial set of pre-defined
 image processing algorithms and pipelines (more than 1000).

 Includes these two binary tools:
   - The command-line executable 'gmic' to use the G'MIC framework from a
     shell.
   - The interactive and extensible plug-in 'gmic_gimp' to bring G'MIC
     capabilities to the image retouching software GIMP.
   - The ZArt real-time interface for webcams is currently not included in 
     the Fink package.
<<
DescPort: <<
o Needs clang >= 3.1, so force use of xcode 4.5 (clang 4).  Also, doesn't honor
  env 'CXX' or 'CXXFLAGS', so must set inside Makefile.

o Be consistent in the use of $prefix to avoid installing outside %p

o The OpenCV parts of zart were created for an older version, and OpenCV
  changed their library names after 2.2, so make sure we use current names
<<
DescUsage: <<
This package installs a command line utility and Gimp-2.0 plugin.
<<
