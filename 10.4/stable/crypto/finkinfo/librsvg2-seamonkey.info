Package: librsvg2-seamonkey
Version: 2.20.0
Revision: 3

License: GPL/LGPL
Maintainer: Dave Vasilevsky <vasi@users.sourceforge.net>
Description: Mozilla plugin for SVG files
Homepage: http://www.gnome.org/

Source: mirror:gnome:sources/librsvg/2.20/librsvg-%v.tar.bz2
Source-MD5: 14cc098b68e72ee6a8cdd55edc1ea1b4


PatchFile: %n.patch
PatchFile-MD5: b42332b2d21c54f15a708092ddc3dccc
PatchScript: <<
	%{default_script}
	perl -pi -e 's,in mozilla-config,$& seamonkey-config,' configure
<<
SetLDFLAGS: -L/usr/X11R6/lib

ConfigureParams: --enable-mozilla-plugin --with-svgz --enable-gnome-vfs --with-croco --enable-gtk-theme --enable-pixbuf-loader --enable-gtk-doc --disable-dependency-tracking --mandir=%p/share/man --with-html-dir=%p/share/doc/%n/html PKG_CONFIG_PATH="%p/lib/pango-ft219/lib/pkgconfig:%p/lib/fontconfig2/lib/pkgconfig:%p/lib/freetype219/lib/pkgconfig:$PKG_CONFIG_PATH" FREETYPE_CONFIG=%p/lib/freetype219/bin/freetype-config

InstallScript: <<
	make install DESTDIR=%d
	mkdir -p %i/lib/seamonkey
	mv %i/lib/mozilla/plugins %i/lib/seamonkey
<<

DocFiles: COPYING*

BuildDepends: <<
	pkgconfig		(>= 0.21-1),
	
	gtk+2-dev		(>= 2.12.0-1),
	atk1			(>= 1.20.0-1),
	cairo			(>= 1.6-1),
	expat1,
	fink (>= 0.24.12),
	fontconfig2-dev		(>= 2.4.1-1),
	freetype219		(>= 2.3.5-1),
	glib2-dev		(>= 2.14.0-1),
	glitz,
	libart2			(>= 2.3.10-1),
	libpng3,
	pango1-xft2-ft219-dev	(>= 1.18.4-4),
	pixman			(>= 0.10.0-1),
	
	popt			(>= 1.5-1),
	
	libgsf1.114-dev		(>= 1.14.5-1),
	libxml2			(>= 2.6.30-1),
	
	dbus-dev (>= 1.0-1), gnome-vfs2-unified-dev (>= 1:2.20.0-1),
	libbonobo2-dev (>= 2.20.0-1),
	orbit2-dev (>= 2.14.9-1),
	gconf2-dev (>= 2.20.0-1),
	
	libcroco3,
	
	libgnomeprint2.2-dev (>= 2.18.2-1),
	
	libgnomeprintui2.2-dev (>= 2.18.1-1),
	libgnomecanvas2-dev (>= 2.20.0-1),
	
	x11-dev,
	xft2-dev,
		
	libgettext3-dev,
	libiconv-dev,	
	
	librsvg2		(>= %v-%r),
	seamonkey-dev
<<

Depends: <<
	librsvg2-bin (>= %v-%r)
<<

SplitOff: <<
	Package: %N-dev
	Depends: %N (= %v-%r)
	BuildDependsOnly: true
	Files: lib/seamonkey/plugins/libmozsvgdec.*a
	DocFiles: COPYING*
<<

SplitOff2: <<
	Package: librsvg2-mozilla
	Depends: %N, fink-obsolete-packages 
	Conflicts: librsvg2-mozilla-dev
	Replaces: librsvg2-mozilla-dev
	InstallScript: <<
		mkdir -p %i/share/doc/installed-packages
		touch %i/share/doc/installed-packages/%n
	<<
<<

DescPort: <<
	- Build this plugin separately so users don't have to have mozilla to 
	build the rest of rsvg. Disable everything else in this build, since it's
	already in librsvg2.
<<
