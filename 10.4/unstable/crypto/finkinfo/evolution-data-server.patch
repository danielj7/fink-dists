diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/Makefile.am evolution-data-server-2.24.4.1/Makefile.am
--- evolution-data-server-2.24.4.1.orig/Makefile.am	2008-10-13 04:11:19.000000000 -0400
+++ evolution-data-server-2.24.4.1/Makefile.am	2009-02-24 04:38:01.000000000 -0500
@@ -1,9 +1,6 @@
 AUTOMAKE_OPTIONS = 1.6
 DISTCHECK_CONFIGURE_FLAGS = --enable-gtk-doc
 
-if ! WITH_LIBDB
-LIBDB = libdb
-endif
 
 if ENABLE_CALENDAR
 CALENDAR_DIR = calendar
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/acinclude.m4 evolution-data-server-2.24.4.1/acinclude.m4
--- evolution-data-server-2.24.4.1.orig/acinclude.m4	2008-10-13 04:11:19.000000000 -0400
+++ evolution-data-server-2.24.4.1/acinclude.m4	2009-02-24 04:12:42.000000000 -0500
@@ -233,11 +233,10 @@
 ])
 dnl -*- mode: autoconf -*-
 
-# serial 1
 
 dnl Usage:
 dnl   GTK_DOC_CHECK([minimum-gtk-doc-version])
-AC_DEFUN([GTK_DOC_CHECK],
+AC_DEFUN([GTK_DOC_CHECK__DISABLED],
 [
   AC_BEFORE([AC_PROG_LIBTOOL],[$0])dnl setup libtool first
   AC_BEFORE([AM_PROG_LIBTOOL],[$0])dnl setup libtool first
@@ -296,7 +295,7 @@
 dnl Optionally, copy this file into acinclude.m4, to avoid the need to have it
 dnl installed when running autoconf on your project.
 
-AC_DEFUN([DOLT], [
+AC_DEFUN([DOLT__DISABLED], [
 AC_REQUIRE([AC_CANONICAL_HOST])
 # dolt, a replacement for libtool
 # Josh Triplett <josh@freedesktop.org>
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/calendar/backends/caldav/Makefile.am evolution-data-server-2.24.4.1/calendar/backends/caldav/Makefile.am
--- evolution-data-server-2.24.4.1.orig/calendar/backends/caldav/Makefile.am	2008-10-13 04:08:29.000000000 -0400
+++ evolution-data-server-2.24.4.1/calendar/backends/caldav/Makefile.am	2009-02-24 03:38:07.000000000 -0500
@@ -1,5 +1,4 @@
 INCLUDES =                                                      \
-	$(EVOLUTION_CALENDAR_CFLAGS)				\
 	-I$(top_srcdir)						\
 	-I$(top_srcdir)/calendar                                \
 	-I$(top_builddir)/calendar                              \
@@ -7,6 +6,7 @@
 	-I$(top_builddir)/calendar/libical/src		        \
 	-I$(top_srcdir)/calendar/libical/src/libical	        \
 	-I$(top_builddir)/calendar/libical/src/libical	        \
+	$(EVOLUTION_CALENDAR_CFLAGS)				\
 	$(SOUP_CFLAGS)					        \
 	-DG_LOG_DOMAIN=\"e-cal-backend-caldav\"
 
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/calendar/libical/src/libical/icaltz-util.c evolution-data-server-2.24.4.1/calendar/libical/src/libical/icaltz-util.c
--- evolution-data-server-2.24.4.1.orig/calendar/libical/src/libical/icaltz-util.c	2009-01-19 22:28:34.000000000 -0500
+++ evolution-data-server-2.24.4.1/calendar/libical/src/libical/icaltz-util.c	2009-02-24 03:42:44.000000000 -0500
@@ -31,6 +31,8 @@
 #elif defined(__linux__)
 #include <byteswap.h>
 #include <endian.h>
+#elif defined(__APPLE__)
+#include <architecture/byte_order.h>
 #else
 #include <sys/endian.h>
 #endif
@@ -98,6 +100,8 @@
     else if (BYTE_ORDER == LITTLE_ENDIAN && sizeof (int) == 4)
 #ifdef __linux__
         return bswap_32 (*(const int *) ptr);
+#elif defined(__APPLE__)
+        return OSSwapBigToHostInt32(*(const int *) ptr);
 #else
          return bswap32 (*(const uint32_t *) ptr);
 #endif
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/configure.in evolution-data-server-2.24.4.1/configure.in
--- evolution-data-server-2.24.4.1.orig/configure.in	2009-02-02 10:12:19.000000000 -0500
+++ evolution-data-server-2.24.4.1/configure.in	2009-02-24 04:37:24.000000000 -0500
@@ -189,7 +189,6 @@
 AM_DISABLE_STATIC
 AC_LIBTOOL_WIN32_DLL
 AM_PROG_LIBTOOL
-DOLT
 
 PKG_PROG_PKG_CONFIG
 
@@ -275,16 +274,6 @@
         LIBS=$save_libs
 
         msg_libdb="dynamically linked"
-else
-        DB_CFLAGS="-I\$(top_builddir)/libdb/dist"
-        DB_LIBS="\$(top_builddir)/libdb/dist/libdb-4.1.la"
-	if test $os_win32 = yes; then
-		# Don't pointlessly auto-export the global symbols
-		# from the static libdb
-		DB_LIBS="$DB_LIBS -Wl,--exclude-libs=libdb-4.1.a"
-	fi
-        AC_MSG_NOTICE(Using local libdb)
-        msg_libdb="statically linked to local copy"
 fi
 AM_CONDITIONAL(WITH_LIBDB, test "x$dynamic_libdb" != "xno")
 AC_SUBST(DB_CFLAGS)
@@ -342,7 +331,7 @@
 #include <iconv.h>
 #include <stdlib.h>
 #include <string.h>
-#ifdef HAVE_GNU_GET_LIBC_VERSION
+#if 0
 #include <gnu/libc-version.h>
 #endif
 
@@ -355,7 +344,7 @@
 	size_t from_len = strlen (from), utf8_len = 20;
 	size_t utf8_real_len = strlen (utf8);
 
-#ifdef HAVE_GNU_GET_LIBC_VERSION
+#if 0
 	/* glibc 2.1.2's iconv is broken in hard to test ways. */
 	if (!strcmp (gnu_get_libc_version (), "2.1.2"))
 		exit (1);
@@ -1199,7 +1188,8 @@
 				msg_krb5="yes (Sun)"
 			fi
 		fi
-		KRB5_LDFLAGS="-L$with_krb5_libs $ac_cv_lib_kerberos5"
+		KRB5_CFLAGS=""
+		KRB5_LDFLAGS="$ac_cv_lib_kerberos5"
 		AC_MSG_RESULT(msg_krb5)
 	else
 		dnl AC_MSG_CHECKING([for Kerberos 5])
@@ -1249,15 +1239,15 @@
 
 		if test -z "$with_krb4_includes"; then
 			if test -f "$with_krb4/include/krb.h" -o -f "$with_krb4/include/port-sockets.h"; then
-				KRB4_CFLAGS="-I$with_krb4/include"
+				KRB4_CFLAGS=""
 			fi
 			if test -d "$with_krb4/include/kerberosIV"; then
 				KRB4_CFLAGS="$KRB4_CFLAGS -I$with_krb4/include/kerberosIV"
 			fi
 		else
-			KRB4_CFLAGS="-I$with_krb4_includes"
+			KRB4_CFLAGS=""
 		fi
-		KRB4_LDFLAGS="-L$with_krb4_libs $ac_cv_lib_kerberos4"
+		KRB4_LDFLAGS="$ac_cv_lib_kerberos4"
 		
 		CFLAGS_save="$CFLAGS"
 		CFLAGS="$CFLAGS $KRB4_CFLAGS"
@@ -1442,10 +1432,7 @@
 AC_MSG_RESULT($IDL_INCLUDES)
 AC_SUBST(IDL_INCLUDES)
 
-AC_MSG_CHECKING(for libgnomeui server directory)
-GNOMEUI_SERVERDIR="`$PKG_CONFIG --variable=libgnomeui_serverdir libgnomeui-2.0`"
-AC_MSG_RESULT($GNOMEUI_SERVERDIR)
-AC_DEFINE_UNQUOTED(GNOMEUI_SERVERDIR, "$GNOMEUI_SERVERDIR", [Path where we can find gnome_segv2])
+echo "Disabling check for libgnomeui-2.0: gnome_segv2 removed as of GNOME2.20"
 
 dnl Utility macro to set compiler flags for a specific lib.
 dnl  EVO_SET_COMPILE_FLAGS(VAR-PREFIX, DEPS, EXTRA-CFLAGS, EXTRA-LIBS)
@@ -1666,9 +1653,6 @@
 if test $enable_calendar = yes; then
         AC_CONFIG_SUBDIRS(calendar/libical)
 fi
-if test $dynamic_libdb = no; then
-        AC_CONFIG_SUBDIRS(libdb/dist)
-fi
 AC_OUTPUT([
 Makefile
 evolution-data-server-zip
@@ -1728,7 +1712,6 @@
 camel/tests/stream/Makefile
 camel/camel.pc
 camel/camel-provider.pc
-libdb/Makefile
 libebackend/Makefile
 libebackend/libebackend.pc
 libedataserver/Makefile
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/exchange/lib/Makefile.am evolution-data-server-2.24.4.1/servers/exchange/lib/Makefile.am
--- evolution-data-server-2.24.4.1.orig/servers/exchange/lib/Makefile.am	2008-10-13 04:08:12.000000000 -0400
+++ evolution-data-server-2.24.4.1/servers/exchange/lib/Makefile.am	2009-02-24 03:45:36.000000000 -0500
@@ -2,13 +2,13 @@
 
 INCLUDES =                                                      \
 	-DCONNECTOR_PREFIX=\""$(prefix)"\"			\
+	-I$(top_srcdir)						\
+	-I$(top_srcdir)/servers/exchange/xntlm			\
 	$(LDAP_CFLAGS)						\
 	$(KRB5_CFLAGS)						\
 	$(SOUP_CFLAGS)						\
 	$(E_DATA_SERVER_CFLAGS)					\
-	$(E_DATA_SERVER_UI_CFLAGS)				\
-	-I$(top_srcdir)						\
-	-I$(top_srcdir)/servers/exchange/xntlm
+	$(E_DATA_SERVER_UI_CFLAGS)
 
 noinst_LTLIBRARIES =						\
 	libexchange.la
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/exchange/storage/Makefile.am evolution-data-server-2.24.4.1/servers/exchange/storage/Makefile.am
--- evolution-data-server-2.24.4.1.orig/servers/exchange/storage/Makefile.am	2008-10-13 04:08:08.000000000 -0400
+++ evolution-data-server-2.24.4.1/servers/exchange/storage/Makefile.am	2009-02-24 03:46:04.000000000 -0500
@@ -13,15 +13,15 @@
 	-DLIBDIR=\""$(datadir)"\"	 			\
 	-DCONNECTOR_LOCALEDIR=\""$(localedir)\""		\
 	-DCONNECTOR_GLADEDIR=\""$(gladedir)"\"			\
+	-I$(top_builddir)/servers/exchange/lib			\
+	-I$(top_srcdir)						\
+	-I$(top_srcdir)/servers/exchange/lib			\
+	-I$(top_srcdir)/servers/exchange/xntlm			\
 	$(KRB5_CFLAGS)						\
 	$(LDAP_CFLAGS)						\
 	$(SOUP_CFLAGS)						\
 	$(E_DATA_SERVER_CFLAGS)					\
-	$(E_DATA_SERVER_UI_CFLAGS)				\
-	-I$(top_builddir)/servers/exchange/lib			\
-	-I$(top_srcdir)						\
-	-I$(top_srcdir)/servers/exchange/lib			\
-	-I$(top_srcdir)/servers/exchange/xntlm
+	$(E_DATA_SERVER_UI_CFLAGS)
 
 lib_LTLIBRARIES =						\
 	libexchange-storage-1.2.la
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/google/libgdata/Makefile.am evolution-data-server-2.24.4.1/servers/google/libgdata/Makefile.am
--- evolution-data-server-2.24.4.1.orig/servers/google/libgdata/Makefile.am	2008-10-13 04:08:15.000000000 -0400
+++ evolution-data-server-2.24.4.1/servers/google/libgdata/Makefile.am	2009-02-24 03:46:55.000000000 -0500
@@ -2,8 +2,7 @@
 	-DG_LOG_DOMAIN=\"libgdata\"			\
 	-I$(top_srcdir)					\
 	-I$(top_builddir)				\
-	$(SOUP_CFLAGS)					\
-	$(E_DATA_SERVER_CFLAGS)
+	$(SOUP_CFLAGS)
 
 lib_LTLIBRARIES = libgdata-1.2.la
 
@@ -16,7 +15,6 @@
 	gdata-service-iface.h			
 
 libgdata_1_2_la_LIBADD =			\
-	$(E_DATA_SERVER_LIBS)			\
 	$(SOUP_LIBS)
 
 libgdata_1_2_la_LDFLAGS =                       \
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/google/libgdata/libgdata.pc.in evolution-data-server-2.24.4.1/servers/google/libgdata/libgdata.pc.in
--- evolution-data-server-2.24.4.1.orig/servers/google/libgdata/libgdata.pc.in	2008-10-13 04:08:15.000000000 -0400
+++ evolution-data-server-2.24.4.1/servers/google/libgdata/libgdata.pc.in	2009-02-24 03:46:30.000000000 -0500
@@ -5,9 +5,6 @@
 datarootdir=@datarootdir@
 datadir=@datadir@
 
-idldir=@idldir@
-IDL_INCLUDES=-I${idldir} @IDL_INCLUDES@
-
 privincludedir=@privincludedir@
 
 Name: libgdata
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/google/libgdata-google/Makefile.am evolution-data-server-2.24.4.1/servers/google/libgdata-google/Makefile.am
--- evolution-data-server-2.24.4.1.orig/servers/google/libgdata-google/Makefile.am	2008-10-13 04:08:14.000000000 -0400
+++ evolution-data-server-2.24.4.1/servers/google/libgdata-google/Makefile.am	2009-02-24 03:47:23.000000000 -0500
@@ -3,8 +3,7 @@
 	-I$(top_srcdir)						\
 	-I$(top_builddir)					\
 	-I$(top_srcdir)/servers/google/libgdata			\
-	$(SOUP_CFLAGS)						\
-	$(E_DATA_SERVER_CFLAGS)
+	$(SOUP_CFLAGS)
 
 lib_LTLIBRARIES = libgdata-google-1.2.la
 
@@ -14,7 +13,6 @@
 
 libgdata_google_1_2_la_LIBADD =					\
 	$(top_builddir)/servers/google/libgdata/libgdata-1.2.la	\
-	$(E_DATA_SERVER_LIBS)					\
 	$(SOUP_LIBS)
 
 libgdata_google_1_2_la_LDFLAGS =	                       \
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/servers/google/libgdata-google/libgdata-google.pc.in evolution-data-server-2.24.4.1/servers/google/libgdata-google/libgdata-google.pc.in
--- evolution-data-server-2.24.4.1.orig/servers/google/libgdata-google/libgdata-google.pc.in	2008-10-13 04:08:14.000000000 -0400
+++ evolution-data-server-2.24.4.1/servers/google/libgdata-google/libgdata-google.pc.in	2009-02-24 03:48:08.000000000 -0500
@@ -5,14 +5,12 @@
 datarootdir=@datarootdir@
 datadir=@datadir@
 
-idldir=@idldir@
-IDL_INCLUDES=-I${idldir} @IDL_INCLUDES@
-
 privincludedir=@privincludedir@
 
 Name: libgdata-google
 Description: Client library for accessing google POA through SOAP interface
 Version: @VERSION@
 Requires: libsoup-2.4 >= @LIBSOUP_REQUIRED@ 
+Requires.private: libgdata-1.2
 Libs: -L${libdir} -lgdata-google-1.2
-Cflags: -I${privincludedir}/google/libgdata -I${privincludedir}/google/libgdata-google
+Cflags: -I${privincludedir}/google/libgdata-google
diff -Nurd -x'*~' evolution-data-server-2.24.4.1.orig/src/server.c evolution-data-server-2.24.4.1/src/server.c
--- evolution-data-server-2.24.4.1.orig/src/server.c	2008-10-13 04:07:57.000000000 -0400
+++ evolution-data-server-2.24.4.1/src/server.c	2009-02-24 03:48:41.000000000 -0500
@@ -90,9 +90,7 @@
 static void
 gnome_segv_handler (int signo)
 {
-	const char *gnome_segv_path;
 	static int in_segv = 0;
-	char *exec;
 
 	if (pthread_self() != main_thread) {
 		/* deadlock intentionally in the sub-threads */
@@ -110,12 +108,7 @@
                 _exit (1);
         }
 
-	gnome_segv_path = GNOMEUI_SERVERDIR "/gnome_segv2";
-
-	exec = g_strdup_printf ("%s \"" PACKAGE "-" BASE_VERSION "\" %d \"" VERSION "\"",
-				gnome_segv_path, signo);
-	system (exec);
-	g_free (exec);
+	fprintf (stderr, "Going down on segv (signo=%d)\n", signo);
 
 	_exit(1);
 }
