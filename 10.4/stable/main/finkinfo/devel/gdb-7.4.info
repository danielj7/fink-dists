Package: gdb
Version: 7.4
Revision: 1
Maintainer: Jack Howarth <howarth@bromo.med.uc.edu>
License: GPL3
Source: http://ftp.gnu.org/gnu/gdb/gdb-%v.tar.bz2
Source-MD5: 95a9a8305fed4d30a30a6dc28ff9d060
SourceDirectory: gdb-%v
Depends: python27, expat1-shlibs, libncurses5-shlibs, libiconv, libgettext8-shlibs, python27-shlibs
BuildDepends: expat1, gettext-tools, libgettext8-dev, python27, libncurses5, libiconv-dev, fink (>= 0.24.12)
SetLDFLAGS: -L%p/lib/python2.7/config
ConfigureParams: --program-prefix=fsf- --with-expat --with-python --disable-gdbtk --enable-tui python_prog_path=%p/bin/python2.7
SetCFLAGS: -O2 -g -Wno-unused-value
Architecture: x86_64
DocFiles: COPYING COPYING3 README
InfoDocs: gdb.info gdbint.info
Homepage: http://www.gnu.org/software/gdb/
Description: The GNU Project Debugger
DescDetail: <<
GDB, the GNU Project debugger, allows you to see what is going on
`inside' another program while it executes -- or what another program
was doing at the moment it crashed.
<<
DescUsage: <<
The programs in this package are prefixed with fsf- (gdb is "fsf-gdb",
etc.) to avoid conflicting with Xcode's programs of the same name.
<<
InstallScript:<<
#!/bin/bash -ev
make install DESTDIR=%d
cd %i/share/info
rm annotate.info configure.info stabs.info standards.info bfd.info

# It seems likely that the libbfd, libopcodes, libiberty and their headers may
# also exist in some other packages
rm -rf %i/lib %i/include
<<
PostInstScript: <<
# Make the executables sgid procmod
chgrp procmod %p/bin/fsf-%n
chgrp procmod %p/bin/fsf-%ntui
chmod g+s %p/bin/fsf-%n
chmod g+s %p/bin/fsf-%ntui
<<
DescPort: <<
Why no i386 Architecture?
Unfortunately i386 fink builds a broken fsf-gdb...

gdb) break main
Breakpoint 1 at 0x1e60: file himenoBMTxpa.c, line 78.
(gdb) r
Starting program: /Users/howarth/a.out 
darwin_set_sstep: unknown flavour: 4
Error calling thread_get_state for GP registers for thread 0x8451lxwarning: Mach error at "i386-darwin-nat.c:118" in function "i386_darwin_fetch_inferior_registers": (os/kern) invalid argument (0x4)
(gdb) quit
A debugging session is active.

Inferior 1 [process 34004] will be killed.

However both i386 and x86_64 debugging works fine on x86_64 fink so I have limited gdb-7.4-1 to that architecture for now. Will bring the i386 kernel breakage to the attention of upstream.
<<
