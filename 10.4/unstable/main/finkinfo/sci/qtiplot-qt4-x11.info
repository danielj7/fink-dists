Package: qtiplot-qt4-x11
Version: 0.9.3
Revision: 2

Maintainer: Murali Vadivelu <murali1080@users.sf.net>

Depends: x11, qt4-x11-core-shlibs, gsl-shlibs, qwtplot3d-qt4-x11-shlibs, qwt-qt4-x11-shlibs, muparser-shlibs, python25, python25-shlibs, pyqt4-py25, pyqt4-py25-bin
BuildDepends: x11-dev, qt4-x11, gsl, qwtplot3d-qt4-x11, qwt-qt4-x11, muparser, sip-py25, sip-py25-bin, fink (>= 0.28) 
BuildConflicts: labplot, labplot-shlibs

Description: Data analysis and scientific plotting
Homepage: http://soft.proindependent.com/qtiplot.html
License: GPL

Source: http://soft.proindependent.com/src/qtiplot-%v.tar.bz2
SourceDirectory: qtiplot-%v
Source-MD5: 6216c76dc191552be6602af40c53ff6e

GCC: 4.0

PatchScript: sed 's,@PREFIX@,%p,g' < %a/%n.patch | patch -p1

CompileScript: <<
#!/bin/sh -ev
unset QMAKESPEC
export QTDIR=%p/lib/qt4-x11
export PATH="$QTDIR/bin:%p/lib/freetype219/bin:$PATH"
cd 3rdparty/liborigin
g++ -dynamiclib -single_module -Wl,-x -dead_strip -fno-rtti -fno-exceptions -current_version 0.0.1 -compatibility_version 0.0.1 -install_name %p/lib/qt4-x11/qtiplot/liborigin.0.dylib -fPIC OPJFile.cpp -Os -s -o liborigin.0.0.1.dylib
ln -sf  liborigin.0.0.1.dylib liborigin.0.0.dylib
ln -sf  liborigin.0.0.1.dylib liborigin.0.dylib
ln -sf  liborigin.0.0.1.dylib liborigin.dylib
cd ../../
%p/lib/qt4-x11/bin/qmake qtiplot.pro
make
<<

InstallScript: <<
mkdir -p %i/bin
cp qtiplot/qtiplot %i/bin/

mkdir -p %i/lib/qt4-x11/qtiplot
cp -R fitPlugins/*.dylib %i/lib/qt4-x11/qtiplot/
cp -R 3rdparty/liborigin/*.dylib %i/lib/qt4-x11/qtiplot/

mkdir -p %i/share/doc/qtiplot
#cp -R manual/* %i/share/doc/qtiplot/
install_name_tool -id %p/lib/qt4-x11/qtiplot/libfitRational0.1.dylib %i/lib/qt4-x11/qtiplot/libfitRational0.1.0.0.dylib
install_name_tool -id %p/lib/qt4-x11/qtiplot/libfitRational1.1.dylib %i/lib/qt4-x11/qtiplot/libfitRational1.1.0.0.dylib
<<

Shlibs: <<
!%p/lib/qt4-x11/qtiplot/libfitRational0.1.dylib
!%p/lib/qt4-x11/qtiplot/libfitRational1.1.dylib
!%p/lib/qt4-x11/qtiplot/liborigin.0.dylib
<<

DocFiles: gpl_licence.txt README.html qtiplot.css qtiplot_logo.png

DescDetail: <<
Data analysis and scientific plotting 
<<
