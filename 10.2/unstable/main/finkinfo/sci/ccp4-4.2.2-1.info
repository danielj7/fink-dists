Package: ccp4
Version: 4.2.2
Revision: 1
Source: ftp://ftp.ccp4.ac.uk/pub/%n/%v/packed/%n-%v.tar.gz  
SourceDirectory: %n-%v
Source-MD5: 5494bd30c02be678aa28e9d82f739e9d
Depends: x11, tcltk, blt, mozilla
BuildDepends: g77, f2c, fort77, tcltk-dev, blt-dev
PatchScript: <<
 sed  s/"\/xtal"/"\%p\/src\/%f"/g include/ccp4.setup-dist > include/ccp4.setup-junk1
 sed  s/"CCP4I_TCLTK\ \/usr\/local\/bin"/"CCP4I_TCLTK\ \%p\/bin"/g include/ccp4.setup-junk1 > include/ccp4.setup-junk2
 sed  s/"netscape"/"\%p\/bin\/mozilla"/g include/ccp4.setup-junk2 > include/ccp4.setup-initial
 sed  s/"\%p\/src\/%f"/"\%p\/share\/xtal"/g include/ccp4.setup-initial > include/ccp4.setup-csh
 sed  s/"\/xtal"/"\%p\/share\/xtal"/g include/ccp4.setup-bash > include/ccp4.setup-junk11
 sed  s/"CCP4I_TCLTK\ \/usr\/local\/bin"/"CCP4I_TCLTK\ \%p\/bin"/g include/ccp4.setup-junk11 > include/ccp4.setup-junk12
 sed  s/"netscape"/"\%p\/bin\/mozilla"/g include/ccp4.setup-junk12 > include/ccp4.setup-sh
 rm -f include/*junk*
 cp %p/include/f2c.h lib/ccif/f2c.h   
 cp %p/include/f2c.h lib/src/f2c.h
 cp %p/include/f2c.h lib/f2c.h
 cp %p/include/f2c.h lib/ccif/g2c.h   
 cp %p/include/f2c.h lib/src/g2c.h
 cp %p/include/f2c.h lib/g2c.h
 echo "Additional documentation under fink's %p/shared/xtal/ccp4-4.2.2 directory." > README-DOCUMENTATION
<<
CompileScript: <<
#!/bin/csh
source include/ccp4.setup-initial
./configure --with-x Darwin
cp  %b/x-windows/XCCPJIFFY/Imakefile %b/x-windows/XCCPJIFFY/Imakefile-junk
grep -v "EXTRA_LOAD_FLAGS = -lg2c" %b/x-windows/XCCPJIFFY/Imakefile-junk > %b/x-windows/XCCPJIFFY/Imakefile
make 
make install
make clean
<<
InstallScript: <<
#!/bin/csh
 mkdir -p %i/share
 mkdir -p %i/share/xtal
 mkdir -p %i/share/xtal/%n-%v
 mkdir -p %i/share/man/
 source include/ccp4.setup-csh
# setup links in in cat1 directory so that `man` will operate correctly
 rm -f %b/man/cat1/*.1
foreach i (`ls ${CDOC}/*.doc`)
  set basenam = `basename ${i} .doc`
  rm -f ${CCP4}/man/cat1/${basenam}.* >& /dev/null
  ln -f -s ${i} ${CCP4}/man/cat1/${basenam}.1
end
ln -f -s %p/share/xtal/%n-%v/man/cat1 %i/share/man/cat1
 cp -R * %i/share/xtal/%n-%v/.
 mkdir -p %i/etc
 mkdir -p %i/etc/profile.d
 echo "source %p/share/xtal/%n-%v/include/ccp4.setup-csh" > %i/etc/profile.d/ccp4.csh
 echo ". %p/share/xtal/%n-%v/include/ccp4.setup-sh" > %i/etc/profile.d/ccp4.sh
 chmod a+x %i/etc/profile.d/ccp4.*
<<
Description:  CCP4 macromolecular crystallography package
DescDetail: <<
CCP4 macromolecular crystallography program suite
http://www.ccp4.ac.uk
http://www.ccp4.ac.uk/problems/mac_4_2.html
License agreement is part of configure file -- print out form and send in 

CCP4 files will be installed under %p/share/xtal/ccp4-4.x.x   
<<
DocFiles: README CHANGES COPYING PROBLEMS ccp4i_installation.html licence.txt README-DOCUMENTATION
Homepage: http://www.ccp4.ac.uk
License: Restrictive
Maintainer: W. G. Scott <wgscott@chemistry.ucsc.edu>
