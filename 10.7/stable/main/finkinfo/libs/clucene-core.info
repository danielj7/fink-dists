Package: clucene-core
Version: 0.9.21b
Revision: 1004
Source: mirror:sourceforge:clucene/%n-%v.tar.bz2
Depends: %N-shlibs (= %v-%r)
Replaces: %N-shlibs (<< 0.9.21b-1003)
GCC: 4.0
Maintainer: Jack Fink <jackfink@users.sourceforge.net>
Homepage: http://clucene.sourceforge.net
License: LGPL
Description: Full-featured C++ search engine
Source-MD5: ba1a8f764a2ca19c66ad907dddd88352
BuildDependsOnly: True
PatchFile: clucene-core.patch
PatchFile-MD5: 3b061438e10c55320973053a71933105 
PatchScript: <<
#!/bin/sh -ev
# Fix libc++ build per ports/169872: [patch] textproc/qt4-clucene: unbreak with libc++
%{default_script}
perl -pi -e "s/-g -O/-O/g;s/-O2/-Os/g" configure
if [ "`uname -r | cut -d. -f1`" -ge "13" ]; then
# take noise off build for debugging libc++ testsuite compilaton
echo "#pragma clang diagnostic push" >> src/CLucene/config/compiler.h
echo '#pragma clang diagnostic ignored "-Wdeprecated-writable-strings"' >> src/CLucene/config/compiler.h
echo '#pragma clang diagnostic ignored "-Wstrncat-size"' >> src/CLucene/config/compiler.h
echo '#pragma clang diagnostic ignored "-Wc++11-long-long"' >> src/CLucene/config/compiler.h
echo '#pragma clang diagnostic ignored "-Wswitch"' >> src/CLucene/config/compiler.h
echo '#pragma clang diagnostic ignored "-W#warnings"' >> src/CLucene/config/compiler.h
echo '#pragma clang diagnostic ignored "-Wlogical-not-parentheses"' >> src/CLucene/config/compiler.h
echo '#pragma clang diagnostic ignored "-Wtautological-compare"' >> src/CLucene/config/compiler.h
echo '#pragma clang diagnostic ignored "-Wpedantic"' >> src/CLucene/config/compiler.h
echo '#pragma clang diagnostic ignored "-Wformat"' >> src/CLucene/config/compiler.h
fi
<<
ConfigureParams: --mandir=%p/share/man --with-extra-libs=%p/lib --with-extra-includes=%p/include --disable-dependency-tracking
UseMaxBuildJobs: false
InstallScript: make install DESTDIR=%d
InfoTest: <<
	TestScript: make -j 1 test || exit 2
<<
DocFiles: A* COPYING ChangeLog HACKING LGPL.license NEWS README REQUESTS
Splitoff: <<
  Package: %N-shlibs
  Description: Full-featured C++ search engine, shared libs
  Files: <<
    lib/libclucene.0.dylib
    lib/libclucene.0.0.0.dylib
  <<
  Shlibs: <<
    %p/lib/libclucene.0.dylib 1.0.0 %n (>= 0.9.20-1002)
  <<
  DocFiles: COPYING
<<
