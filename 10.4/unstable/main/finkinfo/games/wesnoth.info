Package: wesnoth
Version: 1.4
Revision: 11
Description: Fantasy turn-based strategy game
GCC: 4.0
Source-MD5: a2e8e4b32292f16842453e4c836429b2
Source: mirror:sourceforge:wesnoth/wesnoth-%v.tar.bz2
BuildDepends: <<
  sdl,
  sdl-mixer,
  sdl-image,
  sdl-ttf (>= 2.0.6-1017),
  sdl-net,
  sdl-sound,
  fribidi-dev,
  fribidi,
  libpng3,
  freetype219,
  libiconv-dev,
  libgettext3-dev,
  gettext-tools,
  boost1.33
<<
Conflicts: wesnoth-devel, wesnoth-devel-campaign-server, wesnoth-devel-editor, wesnoth-devel-server
Replaces: wesnoth-devel, wesnoth-devel-campaign-server, wesnoth-devel-editor, wesnoth-devel-server
Depends: <<
  sdl-mixer-shlibs,
  sdl-shlibs,
  sdl-image-shlibs,
  sdl-ttf-shlibs (>= 2.0.6-1017),
  sdl-net-shlibs,
  sdl-sound-shlibs,
  fribidi-shlibs,
  libpng3-shlibs,
  freetype219-shlibs,
  libiconv,
  libgettext3-shlibs,
  boost1.33-shlibs
<<
DocFiles: <<
  ABOUT-NLS
  COPYING
  copyright
  changelog
  players_changelog
<<
ConfigureParams: <<
  --with-libintl-prefix=%p \
  --enable-editor \
  --enable-tools \
  --enable-server \
  --enable-campaign-server \
  --with-freetype-prefix=%p/lib/freetype219 \
  --with-freetype-exec-prefix=%p/lib/freetype219 \
  --disable-dependency-tracking \
  --without-x \
  --without-zipios \
  --disable-sdltest \
  --with-server-gid=admin \
  --with-server-uid=root \
  --disable-python \
  --disable-python-install \
  --with-boost=%p
<<
Patch: %n.patch
PatchScript: <<
  perl -pi -e 's/-L. -l(wesnoth-core)/lib\1.a/' src/Makefile.in
<<
InstallScript: <<
  make install DESTDIR=%d
  mkdir %i/etc
  touch %i/etc/wesnothd.conf
<<
DescDetail: <<
Battle for Wesnoth is a fantasy turn-based strategy game.
Battle for control of villages, using variety of units 
which have advantages and disadvantages in different types 
of terrains and against different types of attacks. Units 
gain experience and advance levels, and are carried over 
from one scenario to the next.

Features:

* Build a Hero, and lead your army.

* Different races, with distinctive abilities, weapons and spells.

* GNU/Linux, Windows, MacOSX, BeOS, Solaris, FreeBSD and 
  OpenBSD compatible.

The purpose of this package is to track the latest development version of
wesnoth.  The package `wesnoth' tracks the stable branch.      

See %p/share/doc/wesnoth/changelog to find out what's new; the
player's changelog (%p/share/doc/wesnoth/players_changelog) shows
what's new from a player's perspective.
<<
DescPackaging: <<
 dmacks added --disable-sdltest and patched support for it in all
 SDL_* tests so that can build on GUI-less machine.
  dmacks hacked around under-use of libtool in Makefile in order to
 assure that local convenince libs are used in preference to
  installed ones of the same name.
<<
License: GPL
Maintainer: Jesse Alama <alama@stanford.edu>
Homepage: http://www.wesnoth.org/
SplitOff: <<
  Package: wesnoth-server
  Description: Battle for Wesnoth multiplayer network daemon
  Depends: %N, daemonic
  Files: <<
    bin/wesnothd:sbin/wesnothd
    etc/wesnothd.conf
    share/man/de/man6/wesnothd.6
    share/man/man6/wesnothd.6 
<<
  ConfFiles: %p/etc/wesnothd.conf
  DaemonicName: wesnothd
  DaemonicFile: <<
<service>
        <description>
                Battle for Wesnoth Multiplayer Server
        </description>
        <message>
                Starting Battle for Wesnoth Multiplayer Server
        </message>
        <daemon name="wesnothd">
                <executable background="true">%p/sbin/wesnothd</executable>
                <parameters>-c %p/etc/wesnothd.conf -d</parameters>
                <configfile>%p/etc/wesnothd.conf</configfile>
        </daemon>
</service>
<<
  PreRmScript: <<
if [ $1 != "upgrade" ]; then
  daemonic remove wesnothd
fi
<<
  PostInstScript: <<
daemonic install wesnothd  
<<
DescUsage: <<
To create a startupitem that starts the wesnoth daemon after restart,
just run, as root, the command 'daemonic enable wesnothd'. To remove
the wesnothd startupitem just run, again as root, the command
'daemonic disable wesnothd'.
<<
<<

SplitOff2: <<
  Package: wesnoth-editor
  Replaces: wesnoth-editor (>= 1.2.3)
  Conflicts: wesnoth-editor (>= 1.2.3)
  Description: Battle for Wesnoth map editor
  Files: <<
    bin/wesnoth_editor
    share/man/de/man6/wesnoth_editor.6
    share/man/man6/wesnoth_editor.6 
<<
<<
SplitOff3: <<
  Package: wesnoth-campaign-server
  Conflicts: wesnoth-campaign-server (>= 1.2.3)
  Replaces: wesnoth-campaign-server (>= 1.2.3)
  Description: Battle for Wesnoth campaign server
  Files: bin/campaignd:sbin/campaignd
<<
