diff -ruN proftpd-1.2.6.orig/README.PAM proftpd-1.2.6/README.PAM
--- proftpd-1.2.6.orig/README.PAM	2000-08-18 14:16:40.000000000 -0600
+++ proftpd-1.2.6/README.PAM	2002-10-25 13:06:07.000000000 -0600
@@ -49,6 +49,15 @@
 These settings are valid for RedHat and SuSE Linux systems.  Other Linux
 distributions may differ.
 
+For Mac OS X:
+
+To use PAM with ProFTPD, you must edit /etc/pam.d/ftp and add  the
+following lines:
+
+auth       required    pam_unix.so try_first_pass
+account    required    pam_unix.so try_first_pass
+session    required    pam_permit.so
+
 PAM Configuration Options
 -------------------------
 1. AuthPAM
diff -ruN proftpd-1.2.6.orig/config.h.in proftpd-1.2.6/config.h.in
--- proftpd-1.2.6.orig/config.h.in	2002-06-27 16:36:25.000000000 -0600
+++ proftpd-1.2.6/config.h.in	2002-10-25 13:07:38.000000000 -0600
@@ -354,6 +354,9 @@
 /* Define if you have the <security/pam_appl.h> header file.  */
 #undef HAVE_SECURITY_PAM_APPL_H
 
+/* Define if you have the <pam/pam_appl.h> header file.  */
+#undef HAVE_PAM_PAM_APPL_H
+
 /* Define if you have the <shadow.h> header file.  */
 #undef HAVE_SHADOW_H
 
diff -ruN proftpd-1.2.6.orig/configure proftpd-1.2.6/configure
--- proftpd-1.2.6.orig/configure	2002-07-02 18:30:37.000000000 -0600
+++ proftpd-1.2.6/configure	2002-10-25 13:08:50.000000000 -0600
@@ -5293,7 +5293,7 @@
 
 if test x"$enable_pam" != xno ; then
 
-for ac_header in security/pam_appl.h
+for ac_header in security/pam_appl.h pam/pam_appl.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
diff -ruN proftpd-1.2.6.orig/configure.in proftpd-1.2.6/configure.in
--- proftpd-1.2.6.orig/configure.in	2002-07-02 18:25:28.000000000 -0600
+++ proftpd-1.2.6/configure.in	2002-10-25 13:10:42.000000000 -0600
@@ -293,7 +293,7 @@
 dnl really shouldn't have anything to do with force_shadow or use_shadow.
 dnl jss - 2/22/2001
 if test x"$enable_pam" != xno ; then
-  AC_CHECK_HEADERS(security/pam_appl.h,
+  AC_CHECK_HEADERS(security/pam_appl.h pam/pam_appl.h,
     [ if test `echo $ac_addl_modules | grep -c mod_pam` = "0"; then
         ac_addl_modules="mod_pam.o $ac_addl_modules"
         ac_build_addl_modules="modules/mod_pam.o $ac_build_addl_modules"
diff -ruN proftpd-1.2.6.orig/include/default_paths.h proftpd-1.2.6/include/default_paths.h
--- proftpd-1.2.6.orig/include/default_paths.h	2002-06-23 13:03:22.000000000 -0600
+++ proftpd-1.2.6/include/default_paths.h	2002-10-25 13:15:54.000000000 -0600
@@ -36,7 +36,7 @@
  * ftpcount, ftpwho, etc.
  */
 #ifndef RUN_DIR
-#define RUN_DIR			"/var/run/proftpd"
+#define RUN_DIR			"@FINKPREFIX@/var/run/proftpd"
 #endif
 
 /* The location you wish to place any core files produced as a result of
@@ -50,14 +50,14 @@
  * when run in standalone daemon mode.
  */
 #ifndef PID_FILE_PATH
-#define PID_FILE_PATH		"/var/run/proftpd.pid"
+#define PID_FILE_PATH		"@FINKPREFIX@/var/run/proftpd.pid"
 #endif
 
 /* The default location of the proftpd configuration file.  Can be
  * overriden at runtime with the '-c' switch
  */
 #ifndef CONFIG_FILE_PATH
-#define	CONFIG_FILE_PATH	"/etc/proftpd.conf"
+#define	CONFIG_FILE_PATH	"@FINKPREFIX@/etc/proftpd.conf"
 #endif
 
 /* The location of your `shells' file; a newline delimited list of
@@ -70,17 +70,17 @@
  * log files.  These can be overridden in the configuration file via
  * "TransferLog" and "ExtendedLog".  (note ExtendedLog does not work yet)
  */
-#define XFERLOG_PATH		"/var/log/xferlog"
-#define EXTLOG_PATH		"/var/log/proftpd-log"
+#define XFERLOG_PATH		"@FINKPREFIX@/var/log/xferlog"
+#define EXTLOG_PATH		"@FINKPREFIX@/var/log/proftpd-log"
 
 /* Location of the file that tells proftpd to discontinue servicing
  * requests.
  */
-#define SHUTMSG_PATH		"/etc/shutmsg"
+#define SHUTMSG_PATH		"@FINKPREFIX@/etc/shutmsg"
 
 /* Location of the file containing users that *cannot* use ftp
  * services (odd, eh?)
  */
-#define FTPUSERS_PATH		"/etc/ftpusers"
+#define FTPUSERS_PATH		"@FINKPREFIX@/etc/ftpusers"
 
 #endif /* PROFTPD_PATHS_H */
diff -ruN proftpd-1.2.6.orig/modules/mod_pam.c proftpd-1.2.6/modules/mod_pam.c
--- proftpd-1.2.6.orig/modules/mod_pam.c	2002-07-18 17:01:44.000000000 -0600
+++ proftpd-1.2.6/modules/mod_pam.c	2002-10-25 13:13:52.000000000 -0600
@@ -47,6 +47,10 @@
 #include <security/pam_appl.h>
 #endif /* HAVE_SECURITY_PAM_APPL_H */
 
+#ifdef HAVE_PAM_PAM_APPL_H
+#include <pam/pam_appl.h>
+#endif /* HAVE_PAM_PAM_APPL_H */
+
 static pam_handle_t *	pamh			= NULL;
 static char *		pamconfig		= "ftp";
 static char *		pam_user 		= (char *)0;
diff -ruN proftpd-1.2.6.orig/src/dirtree.c proftpd-1.2.6/src/dirtree.c
--- proftpd-1.2.6.orig/src/dirtree.c	2002-08-28 10:00:22.000000000 -0600
+++ proftpd-1.2.6/src/dirtree.c	2002-10-25 13:15:54.000000000 -0600
@@ -376,10 +376,10 @@
 
     /* Perform a fixup on configuration directives so that:
      * -argv[0]--  -argv[1]-- ----argv[2]-----
-     * <Option     /etc/adir  /etc/anotherdir>
+     * <Option     @FINKPREFIX@/etc/adir  @FINKPREFIX@/etc/anotherdir>
      *   .. becomes ..
      * -argv[0]--  -argv[1]-  ----argv[2]----
-     * <Option>    /etc/adir  /etc/anotherdir
+     * <Option>    @FINKPREFIX@/etc/adir  @FINKPREFIX@/etc/anotherdir
      */
 
     if(new_cmd->argc && *(new_cmd->argv[0]) == '<') {
@@ -1961,11 +1961,11 @@
        * Just a partial match on the pathname does not mean that the longer
        * path is the subdirectory of the other -- they might just be sharing
        * the last path component! 
-       * /var/www/.1
-       * /var/www/.14
+       * @FINKPREFIX@/var/www/.1
+       * @FINKPREFIX@/var/www/.14
        *            ^ -- not /, not subdir
-       * /var/www/.1
-       * /var/www/.1/images
+       * @FINKPREFIX@/var/www/.1
+       * @FINKPREFIX@/var/www/.1/images
        *            ^ -- /, is subdir
        */
       if (strlen(path) > len && path[len] != '/')
diff -ruN proftpd-1.2.6.orig/src/ftpcount.1 proftpd-1.2.6/src/ftpcount.1
--- proftpd-1.2.6.orig/src/ftpcount.1	2002-06-22 01:02:29.000000000 -0600
+++ proftpd-1.2.6/src/ftpcount.1	2002-10-25 13:15:54.000000000 -0600
@@ -29,11 +29,11 @@
 proftpd's scoreboard.
 .SH FILES
 .PD 0
-.B /usr/bin/ftpcount
+.B @FINKPREFIX@/usr/bin/ftpcount
 .br
-.B /var/run/proftpd-[pid]
+.B @FINKPREFIX@/var/run/proftpd-[pid]
 .br
-.B /var/run/proftpd-inetd
+.B @FINKPREFIX@/var/run/proftpd-inetd
 .PD
 .SH AUTHORS
 .PP
diff -ruN proftpd-1.2.6.orig/src/ftpcount.c proftpd-1.2.6/src/ftpcount.c
--- proftpd-1.2.6.orig/src/ftpcount.c	2002-06-23 13:03:24.000000000 -0600
+++ proftpd-1.2.6/src/ftpcount.c	2002-10-25 13:15:54.000000000 -0600
@@ -24,7 +24,7 @@
  * the source code for OpenSSL in the source distribution.
  */
 
-/* Shows a count of "who" is online via proftpd.  Uses the /var/run/proftpd*
+/* Shows a count of "who" is online via proftpd.  Uses the @FINKPREFIX@/var/run/proftpd*
  * log files.
  *
  * $Id: ftpcount.c,v 1.14 2002/06/23 19:03:24 castaglia Exp $
diff -ruN proftpd-1.2.6.orig/src/ftpshut.8 proftpd-1.2.6/src/ftpshut.8
--- proftpd-1.2.6.orig/src/ftpshut.8	2002-06-22 01:02:29.000000000 -0600
+++ proftpd-1.2.6/src/ftpshut.8	2002-10-25 13:15:54.000000000 -0600
@@ -21,7 +21,7 @@
 command provides an automated shutdown procedure that a superuser
 can use to automagically disconnect current proftpd connections,
 and deny new connections.  The command creates a control file as
-.B /etc/shutmsg
+.B @FINKPREFIX@/etc/shutmsg
 to inform proftpd processes about an impending shutdown.
 .SH OPTIONS
 .TP 10
@@ -97,9 +97,9 @@
 until the indicated time on the following day.
 .SH FILES
 .PD 0
-.B /usr/sbin/ftpshut
+.B @FINKPREFIX@/usr/sbin/ftpshut
 .br
-.B /etc/shutmsg
+.B @FINKPREFIX@/etc/shutmsg
 .PD
 .SH AUTHORS
 .PP
diff -ruN proftpd-1.2.6.orig/src/ftpwho.1 proftpd-1.2.6/src/ftpwho.1
--- proftpd-1.2.6.orig/src/ftpwho.1	2002-06-22 01:02:30.000000000 -0600
+++ proftpd-1.2.6/src/ftpwho.1	2002-10-25 13:15:54.000000000 -0600
@@ -32,11 +32,11 @@
 host and current working directory.
 .SH FILES
 .PD 0
-.B /usr/bin/ftpwho
+.B @FINKPREFIX@/usr/bin/ftpwho
 .br
-.B /var/run/proftpd-[pid]
+.B @FINKPREFIX@/var/run/proftpd-[pid]
 .br
-.B /var/run/proftpd-inetd
+.B @FINKPREFIX@/var/run/proftpd-inetd
 .PD
 .SH AUTHORS
 .PP
diff -ruN proftpd-1.2.6.orig/src/ftpwho.c proftpd-1.2.6/src/ftpwho.c
--- proftpd-1.2.6.orig/src/ftpwho.c	2002-06-23 13:03:24.000000000 -0600
+++ proftpd-1.2.6/src/ftpwho.c	2002-10-25 13:15:54.000000000 -0600
@@ -24,7 +24,7 @@
  * the source code for OpenSSL in the source distribution.
  */
 
-/* Shows "who" is online via proftpd.  Uses the /var/run/proftpd* log files.
+/* Shows "who" is online via proftpd.  Uses the @FINKPREFIX@/var/run/proftpd* log files.
  * 
  * $Id: ftpwho.c,v 1.3 2002/06/23 19:03:24 castaglia Exp $
  */
diff -ruN proftpd-1.2.6.orig/src/main.c proftpd-1.2.6/src/main.c
--- proftpd-1.2.6.orig/src/main.c	2002-08-30 18:08:39.000000000 -0600
+++ proftpd-1.2.6/src/main.c	2002-10-25 13:15:54.000000000 -0600
@@ -1634,7 +1634,7 @@
     }
 
     /* If running (a flag signaling whether proftpd is just starting up)
-     * AND shutdownp (a flag signalling the present of /etc/shutmsg) are
+     * AND shutdownp (a flag signalling the present of @FINKPREFIX@/etc/shutmsg) are
      * true, then log an error stating this -- but don't stop the server.
      */
     if(shutdownp && !running) {
diff -ruN proftpd-1.2.6.orig/src/proftpd.8 proftpd-1.2.6/src/proftpd.8
--- proftpd-1.2.6.orig/src/proftpd.8	2002-06-22 01:02:30.000000000 -0600
+++ proftpd-1.2.6/src/proftpd.8	2002-10-25 13:15:54.000000000 -0600
@@ -30,7 +30,7 @@
 option, the main
 .B proftpd
 daemon writes its process ID to
-.B /var/run/proftpd.pid
+.B @FINKPREFIX@/var/run/proftpd.pid
 to make it easy to know which process to SIGHUP.
 .SH OPTIONS
 .TP 12
@@ -61,7 +61,7 @@
 .TP
 .BI \-c,\--config " config\-file"
 Specifies an alternate \fIconfig\-file\fP to be parsed at startup, rather
-than the default (typically found in \fB/etc/proftpd.conf\fP).
+than the default (typically found in \fB@FINKPREFIX@/etc/proftpd.conf\fP).
 .TP
 .BI \-t,\--configtest
 Read the configuration file, report any syntax errors, and exit.
@@ -76,21 +76,21 @@
 Lists all modules compiled into proftpd.
 .SH FILES
 .PD 0
-.B /usr/sbin/proftpd
+.B @FINKPREFIX@/usr/sbin/proftpd
 .br
-.B /usr/bin/ftpwho
+.B @FINKPREFIX@/usr/bin/ftpwho
 .br
-.B /usr/bin/ftpcount
+.B @FINKPREFIX@/usr/bin/ftpcount
 .br
-.B /usr/sbin/ftpshut
+.B @FINKPREFIX@/usr/sbin/ftpshut
 .br
-.B /var/log/xferlog
+.B @FINKPREFIX@/var/log/xferlog
 .br
-.B /var/run/proftpd-[pid]
+.B @FINKPREFIX@/var/run/proftpd-[pid]
 .br
-.B /var/run/proftpd.pid
+.B @FINKPREFIX@/var/run/proftpd.pid
 .br
-.B /var/run/proftpd-inetd
+.B @FINKPREFIX@/var/run/proftpd-inetd
 .PD
 .SH AUTHORS
 .PP
diff -ruN proftpd-1.2.6.orig/src/xferlog.5 proftpd-1.2.6/src/xferlog.5
--- proftpd-1.2.6.orig/src/xferlog.5	2001-08-01 09:17:07.000000000 -0600
+++ proftpd-1.2.6/src/xferlog.5	2002-10-25 13:15:54.000000000 -0600
@@ -7,7 +7,7 @@
 .B xferlog
 file contains logging information from the FTP server daemon,
 .BR proftpd (8).
-This file usually is found in /var/log, but can be located anywhere by
+This file usually is found in @FINKPREFIX@/var/log, but can be located anywhere by
 using a
 .BR proftpd (8)
 configuration directive.
@@ -154,7 +154,7 @@
 .SH FILES
 .PD 0
 .TP 20
-.B /var/log/xferlog
+.B @FINKPREFIX@/var/log/xferlog
 .PP
 .PD
 .SH AUTHORS
