diff -Nurd kdepim-4.2.4/akonadi/agents/nepomuk_contact_feeder/CMakeLists.txt kdepim-4.2.4-new/akonadi/agents/nepomuk_contact_feeder/CMakeLists.txt
--- kdepim-4.2.4/akonadi/agents/nepomuk_contact_feeder/CMakeLists.txt	2009-01-06 12:26:18.000000000 -0500
+++ kdepim-4.2.4-new/akonadi/agents/nepomuk_contact_feeder/CMakeLists.txt	2009-06-08 08:13:55.000000000 -0400
@@ -3,6 +3,7 @@
   ${Boost_INCLUDE_DIR}
   ${CMAKE_CURRENT_BINARY_DIR}/../nie
   ${NEPOMUK_INCLUDES}
+  ${SOPRANO_INCLUDE_DIR}
   )
 
 set( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${KDE4_ENABLE_EXCEPTIONS}" )
diff -Nurd kdepim-4.2.4/akonadi/agents/nepomuk_email_feeder/CMakeLists.txt kdepim-4.2.4-new/akonadi/agents/nepomuk_email_feeder/CMakeLists.txt
--- kdepim-4.2.4/akonadi/agents/nepomuk_email_feeder/CMakeLists.txt	2009-01-06 12:26:17.000000000 -0500
+++ kdepim-4.2.4-new/akonadi/agents/nepomuk_email_feeder/CMakeLists.txt	2009-06-08 08:14:14.000000000 -0400
@@ -2,6 +2,7 @@
   ${CMAKE_SOURCE_DIR}/akonadi
   ${CMAKE_CURRENT_BINARY_DIR}/../nie
   ${Boost_INCLUDE_DIR}
+  ${SOPRANO_INCLUDE_DIR}
   )
 
 set( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${KDE4_ENABLE_EXCEPTIONS}" )
diff -Nurd kdepim-4.2.4/akonadi/agents/nie/CMakeLists.txt kdepim-4.2.4-new/akonadi/agents/nie/CMakeLists.txt
--- kdepim-4.2.4/akonadi/agents/nie/CMakeLists.txt	2008-08-14 06:46:07.000000000 -0400
+++ kdepim-4.2.4-new/akonadi/agents/nie/CMakeLists.txt	2009-06-08 08:13:34.000000000 -0400
@@ -90,6 +90,8 @@
   ${CMAKE_CURRENT_BINARY_DIR}/website.cpp
 )
 
+include_directories( ${SOPRANO_INCLUDE_DIR} )
+
 # finds nepomuk-rcgen in BIN_INSTALL_DIR, then in the others
 find_program(_rcgen nepomuk-rcgen PATHS ${BIN_INSTALL_DIR} NO_DEFAULT_PATH)
 find_program(_rcgen nepomuk-rcgen)
diff -Nurd kdepim-4.2.4/kleopatra/kwatchgnupg/CMakeLists.txt kdepim-4.2.4-new/kleopatra/kwatchgnupg/CMakeLists.txt
--- kdepim-4.2.4/kleopatra/kwatchgnupg/CMakeLists.txt	2008-11-04 12:12:56.000000000 -0500
+++ kdepim-4.2.4-new/kleopatra/kwatchgnupg/CMakeLists.txt	2009-06-08 08:09:45.000000000 -0400
@@ -26,7 +26,7 @@
    set ( KDE4_KCMUTILS_LIBS ${KDE4_KUTILS_LIBS} )
 endif ( NOT KDE4_KCMUTILS_LIBS )
 
-target_link_libraries(kwatchgnupg ${KDE4_KDEUI_LIBS} kleo ${KDE4_GPGMEPP_LIBS})
+target_link_libraries(kwatchgnupg ${KDE4_KDEUI_LIBS} kleo ${QGPGME_LIBRARIES})
 
 install(TARGETS kwatchgnupg ${INSTALL_TARGETS_DEFAULT_ARGS})
 
diff -Nurd kdepim-4.2.4/kpilot/conduits/calendar/CMakeLists.txt kdepim-4.2.4-new/kpilot/conduits/calendar/CMakeLists.txt
--- kdepim-4.2.4/kpilot/conduits/calendar/CMakeLists.txt	2009-01-21 05:28:32.000000000 -0500
+++ kdepim-4.2.4-new/kpilot/conduits/calendar/CMakeLists.txt	2009-06-08 08:09:45.000000000 -0400
@@ -21,7 +21,7 @@
 
 kde4_add_ui_files( calendar_SRCS settingswidget.ui )
 kde4_add_kcfg_files( calendar_SRCS calendarsettings.kcfgc )
-kde4_add_library( kpilot_conduit_calendar SHARED ${calendar_SRCS} )
+kde4_add_library( kpilot_conduit_calendar MODULE ${calendar_SRCS} )
 
 target_link_libraries( kpilot_conduit_calendar
 	${KDE4_KCAL_LIBS} ${KDE4_AKONADI_LIBS}
diff -Nurd kdepim-4.2.4/kpilot/conduits/contacts/CMakeLists.txt kdepim-4.2.4-new/kpilot/conduits/contacts/CMakeLists.txt
--- kdepim-4.2.4/kpilot/conduits/contacts/CMakeLists.txt	2008-08-28 12:13:23.000000000 -0400
+++ kdepim-4.2.4-new/kpilot/conduits/contacts/CMakeLists.txt	2009-06-08 08:09:45.000000000 -0400
@@ -20,7 +20,7 @@
 
 kde4_add_ui_files( contacts_SRCS settingswidget.ui )
 kde4_add_kcfg_files( contacts_SRCS contactssettings.kcfgc )
-kde4_add_library( kpilot_conduit_contacts SHARED ${contacts_SRCS} )
+kde4_add_library( kpilot_conduit_contacts MODULE ${contacts_SRCS} )
 
 target_link_libraries( kpilot_conduit_contacts
 	${KDE4_KCAL_LIBS} ${KDE4_AKONADI_LIBS}
diff -Nurd kdepim-4.2.4/kpilot/conduits/keyringconduit/CMakeLists.txt kdepim-4.2.4-new/kpilot/conduits/keyringconduit/CMakeLists.txt
--- kdepim-4.2.4/kpilot/conduits/keyringconduit/CMakeLists.txt	2008-09-13 04:16:13.000000000 -0400
+++ kdepim-4.2.4-new/kpilot/conduits/keyringconduit/CMakeLists.txt	2009-06-08 08:09:45.000000000 -0400
@@ -23,7 +23,7 @@
 
 kde4_add_kcfg_files(keyring_SRCS ${keyring_KCFGS})
 kde4_add_ui_files(keyring_SRCS keyringwidget.ui)
-kde4_add_library(kpilot_conduit_keyring SHARED ${keyring_SRCS})
+kde4_add_library(kpilot_conduit_keyring MODULE ${keyring_SRCS})
 
 target_link_libraries(kpilot_conduit_keyring
 	kpilot_conduit_base kpilot
diff -Nurd kdepim-4.2.4/kpilot/conduits/memofile/CMakeLists.txt kdepim-4.2.4-new/kpilot/conduits/memofile/CMakeLists.txt
--- kdepim-4.2.4/kpilot/conduits/memofile/CMakeLists.txt	2008-10-17 07:01:15.000000000 -0400
+++ kdepim-4.2.4-new/kpilot/conduits/memofile/CMakeLists.txt	2009-06-08 08:09:45.000000000 -0400
@@ -18,7 +18,7 @@
 
 kde4_add_ui_files( memofile_SRCS settingswidget.ui )
 kde4_add_kcfg_files( memofile_SRCS settings.kcfgc )
-kde4_add_library( kpilot_conduit_memofile SHARED ${memofile_SRCS} )
+kde4_add_library( kpilot_conduit_memofile MODULE ${memofile_SRCS} )
 
 target_link_libraries( kpilot_conduit_memofile
 	kpilot_conduit_base kpilot
diff -Nurd kdepim-4.2.4/kpilot/conduits/todo/CMakeLists.txt kdepim-4.2.4-new/kpilot/conduits/todo/CMakeLists.txt
--- kdepim-4.2.4/kpilot/conduits/todo/CMakeLists.txt	2009-01-21 05:28:32.000000000 -0500
+++ kdepim-4.2.4-new/kpilot/conduits/todo/CMakeLists.txt	2009-06-08 08:09:45.000000000 -0400
@@ -21,7 +21,7 @@
 
 kde4_add_ui_files( todo_SRCS settingswidget.ui )
 kde4_add_kcfg_files( todo_SRCS todosettings.kcfgc )
-kde4_add_library( kpilot_conduit_todo SHARED ${todo_SRCS} )
+kde4_add_library( kpilot_conduit_todo MODULE ${todo_SRCS} )
 
 target_link_libraries( kpilot_conduit_todo
 	${KDE4_KCAL_LIBS} ${KDE4_AKONADI_LIBS}
