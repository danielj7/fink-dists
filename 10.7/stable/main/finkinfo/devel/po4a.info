Package: po4a
Version: 0.42
Revision: 2
###
BuildDepends: docbook-dtd, docbook-xsl, docbook-utils, gettext-tools, sgmls-pm, module-build-pm, term-readkey-pm5123, libxslt-bin
Depends: gettext-tools, sgmls-pm, locale-gettext-pm5123, term-readkey-pm5123, text-wrapi18n-pm5123, opensp-bin
###
Source: mirror:debian:/pool/main/p/%n/%n_%v.orig.tar.gz
Source-MD5: cf2d342f4831490cc17524fd6c40ca75
SourceDirectory: %n-%v
###
DocFiles: changelog COPYING NEWS README* TODO
###
PatchScript: <<
# OpenJade instead of Jade
perl -pi -e 's,nsgmls,onsgmls,g' lib/Locale/Po4a/Sgml.pm

# Show %p/bin not /usr/bin
for i in %b/po/bin/*.po; do \
  perl -pi -e 's,/usr/bin,%p/bin,g' $i; \
  perl -pi -e 's,nsgmls,onsgmls,g' $i; \
done 
perl -pi -e 's,/usr/local,%p,g' po/bin/Makefile;
perl -pi -e 's,/usr,%p,g' po/bin/Makefile;
perl -pi -e 's,/etc,%p/etc,g' po/bin/Makefile;
perl -pi -e 's,/usr,%p,g' share/po4a-build;
perl -pi -e 's,/etc,%p/etc,g' share/po4a-build;
perl -pi -e 's,/usr,%p,g' share/po4a-build.make;
perl -pi -e 's,/usr,%p,g' share/doc/po4a-build.xml;
perl -pi -e 's,/usr,%p,g' doc/po4a.7.pod
perl -pi -e 's,/usr,%p,g' doc/po4a-build.conf.5.pod
perl -pi -e 's,/usr,%p,g' doc/po4a-runtime.7.pod
perl -pi -e 's,/usr,%p,g' doc/po4a-runtime.7.pod

### Fix for msgmerge 0.17 
# http://subcommanderblog.wordpress.com/2009/05/16/msgmerge-on-macosx-and-no-such-file-or-directory/
perl -pi -e 's,msgmerge \$msgmerge_opt,msgmerge --backup=off \$msgmerge_opt,g' po4a-updatepo
<<
###
CompileScript: <<
perl Build.PL PREFIX=%p create_packlist=0
./Build
<<
###
InfoTest: <<
  TestScript: <<
./Build test
  <<
<<
###
InstallScript: <<
./Build install --install_path lib=%p/lib/perl5 --install_path arch=%p/lib/perl5/darwin-thread-multi-2level --install_path script=%p/bin --install_path bin=%p/bin --install_path bindoc=%p/share/man/man1 --install_path libdoc=%p/share/man/man3 --install_path binhtml=%p/share/man/man1 --install_path libhtml=%p/share/man/man3 destdir=%d
sed -i -e '1s|^#! /usr/bin/env perl|#! /usr/bin/perl|' %i/bin/*
### Can't figure out why it installs to /usr/local/share/man/<po>
mv %d/usr/local/* %i
rm -rf %d/usr
<<
###
Description: Tools for helping translation of docs
DescDetail: <<
The po4a (PO for anything) project goal is to ease translations (and more
interestingly, the maintenance of translations) using gettext tools on areas
where they were not expected like documentation.
.
This package contains the main libraries of po4a, and the following
sub-modules:
.
  - Dia: uncompressed Dia diagrams.
  - INI: the INI format
  - KernelHelp: Help messages of each kernel compilation option.
  - LaTeX: generic TeX or LaTeX format.
  - Man: either roff or mdoc format.
  - POD: Perl documentation format.
  - SGML: either DebianDoc or DocBook DTD.
  - Texinfo: the info page format.
  - XML: very configurable (preconfigured for DocBook, XHTML, Guide, WML).
<<
License: GPL
Homepage: http://po4a.alioth.debian.org/
Maintainer: Justin F. Hallett <thesin@users.sourceforge.net>
