Package: dsocks
Version: 1.5
Revision: 2
Source: http://monkey.org/~dugsong/dsocks/%n-%v.tar.gz
Source-MD5: b2e9f65b747fbf1f4ff05d5fd4a76de7
Depends: %n-shlibs (= %v-%r)
PatchScript: sed 's|@PREFIX@|%p|g' <%a/%n.patch | patch -p1

CompileScript: bsdmake
InstallScript: <<
   #!/bin/sh -ev
   install -d -m 755 %i/lib
#  "install -C" is not-portable _ and not needed here
   install -o root -g admin -m 644 -p libdsocks.a %i/lib
   ranlib %i/lib/libdsocks.a
   install -o root -g admin -m 755 -p libdsocks.1.dylib %i/lib
   true -x %i/lib/libdsocks.1.dylib
   ln -fs libdsocks.1.dylib %i/lib/libdsocks.dylib

   install -d -m 755 %i/bin
   install -o root -g admin -m 755 -p dsocks.sh %i/bin
   install -o root -g admin -m 755 -p dsocks-torify.sh %i/bin
<<
Description: SOCKS client wrapper for *BSD / MacOS X
DescDetail: <<
   SOCKS client wrapper for *BSD / MacOS X.  Only enough of SOCKS4, SOCKS5 
   supported to use the built-in OpenSSH or Tor local SOCKS proxy)
<<
SplitOff: <<
  Package: %n-shlibs
  Description: SOCKS client wrapper for *BSD / MacOS X (Shared libraries)
# The static lib shouldn't be in the shlibs splitoff (+ shlibs field...)
  Files: lib/libdsocks.1.dylib
  DocFiles: LICENSE
<<
DocFiles: LICENSE README
DescPort: <<
 bsdmake seems to call the first "sort" in $PATH, with a non-portable syntax..
 Causes errors when eg coreutils-default is installed, but only the order
 of the archive-members is affected. So, not worth a buildconflict.
<<
Maintainer: elcepi <elcepi@users.sourceforge.net>
HomePage: http://monkey.org/~dugsong/dsocks/
License: GPL
