Info3: <<
Package: phonon-%type_pkg[phonon]
Version: 4.3.0
Revision: 2
Type: phonon (x11 mac)
Description: Audio API for Qt
License: LGPL
Maintainer: Benjamin Reed <phonon@fink.racoonfink.com>

Depends: <<
	%N-shlibs (= %v-%r)
<<
BuildDepends: <<
	fink (>= 0.24.12-1),
	(%type_pkg[phonon] = x11) libxine1 (>= 1.1.13-1),
	(%type_pkg[phonon] = x11) libxml2,
	(%type_pkg[phonon] = x11) x11-dev,
	automoc-%type_pkg[phonon],
	cmake (>= 2.6.2-1),
	kde4-buildenv (>= 4.2-2),
	system-openssl-dev,
	qt4-%type_pkg[phonon] (>= 4.4.0-1)
<<
GCC: 4.0

CustomMirror: <<
	Primary: http://ranger.users.finkproject.org/distfiles
	eur-NL: http://ranger.users.finkproject.org/distfiles
	nam-US: http://ranger.befunk.com/fink
	nam-US: http://astrange.ithinksw.net/~astrange/ranger-fink
	nam-CA: http://www.southofheaven.net/befunk
<<

Source: mirror:kde:stable/phonon/%v/phonon-%v.tar.bz2
Source-MD5: f851219ec1fb4eadc7904f053b6b498d
Source2: mirror:custom:qt/qt-copy-921759.tar.bz2
Source2-MD5: 8d6daa4db97e21ea4d27521f3d81c2ea

PatchFile: phonon.patch
PatchFile-MD5: c11727df24501d0f98f6e7151eb9507c

CompileScript: <<
#!/bin/sh -ev

	export KDE4_PREFIX="%p" KDE4_TYPE="%type_pkg[phonon]"
	. %p/sbin/kde4-buildenv.sh
	export CMAKE_INCLUDE_PATH="%b/../qt-copy/include:$CMAKE_INCLUDE_PATH"

	mkdir -p build
	pushd build
		cmake -DBUILD_PHONON_QT7:BOOL=TRUE $KDE4_CMAKE_ARGS ..
		make VERBOSE=1
	popd
<<

InstallScript: <<
#!/bin/sh -ev

	pushd build
		make -j1 install DESTDIR="%d"
	popd
<<

DocFiles: COPYING*

SplitOff: <<
	Package: %N-shlibs
	Description: Shared libraries for Phonon
	Depends: <<
		(%type_pkg[phonon] = x11) libxine1-shlibs (>= 1.1.13-1),
		qt4-%type_pkg[phonon]-gui-shlibs (>= 4.4.0-1)
	<<
	DocFiles: COPYING*
	Recommends: %N (>= %v-%r)
	Files: <<
		lib/%type_pkg[phonon]/lib/libphonon.4*.dylib
		lib/%type_pkg[phonon]/lib/libphononexperimental.4*.dylib
		lib/%type_pkg[phonon]/lib/kde4
		lib/%type_pkg[phonon]/share
	<<
	Shlibs: <<
		%p/lib/%type_pkg[phonon]/lib/libphonon.4.dylib             4.0.0 %n (>= 4.2.0-1)
		%p/lib/%type_pkg[phonon]/lib/libphononexperimental.4.dylib 4.0.0 %n (>= 4.2.0-1)
	<<
<<

DescDetail: <<
Phonon is the multimedia API for KDE 4.  Phonon was created to allow
KDE 4 to be independent of any single multimedia framework such as
GStreamer or Xine and to provide a stable API for KDE 4's lifetime.
It was done to fix problems of frameworks becoming unmaintained, API
instability, and to create a simple multimedia API.
<<
<<
