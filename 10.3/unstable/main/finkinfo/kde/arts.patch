diff -uNr arts-1.4.2/flow/audioioesd.cc arts-1.4.2-new/flow/audioioesd.cc
--- arts-1.4.2/flow/audioioesd.cc	Wed Jul 20 13:18:10 2005
+++ arts-1.4.2-new/flow/audioioesd.cc	Thu Sep  8 09:42:43 2005
@@ -213,6 +213,9 @@
 		// of any portable way to peek at the socket's send or receive
 		// buffers.
 
+	case autoDetect:
+		return 12;
+
 	default:
 		return param(p);
 	}
diff -uNr arts-1.4.2/flow/gsl/Makefile.am arts-1.4.2-new/flow/gsl/Makefile.am
--- arts-1.4.2/flow/gsl/Makefile.am	Wed Jul 20 13:18:10 2005
+++ arts-1.4.2-new/flow/gsl/Makefile.am	Thu Sep  8 09:42:43 2005
@@ -15,7 +15,7 @@
 libgsl_la_LIBADD = $(top_builddir)/mcop/libmcop.la -lm $(LIBPOSIX4) $(GSL_LIBS) $(LIB_POLL) $(GLIB_LIBADD)
 libgsl_la_LDFLAGS = -no-undefined $(all_libraries)
 
-#noinst_PROGRAMS = $(GSL_NOINST_PROGS)
+noinst_PROGRAMS = $(GSL_NOINST_PROGS)
 
 GSL_progs_ldadd = libgsl.la -lm $(LIBPTHREAD)
 
diff -uNr arts-1.4.2/libltdl/ltdl.c arts-1.4.2-new/libltdl/ltdl.c
--- arts-1.4.2/libltdl/ltdl.c	Wed Jul 20 13:17:14 2005
+++ arts-1.4.2-new/libltdl/ltdl.c	Thu Sep  8 09:42:43 2005
@@ -643,7 +643,20 @@
      lt_module module;
      const char *symbol;
 {
+#ifdef TIGER_DLSYM_HACK
+  lt_ptr address = NULL;
+  char* u_symbol = NULL;
+  int val=asprintf(&u_symbol,"_%s",symbol);
+  address = NSAddressOfSymbol(NSLookupSymbolInModule(module,u_symbol));
+  if (((!strcmp("__kde_do_not_unload",symbol)) && (!strcmp("__kde_do_unload",symbol)))) {
+    if ((NULL == address) && NSIsSymbolNameDefined(u_symbol)) {
+      address = dlsym (module, symbol);
+    }
+  }
+  free(u_symbol);
+#else
   lt_ptr address = dlsym (module, symbol);
+#endif
 
   if (!address)
     {
diff -uNr arts-1.4.2/soundserver/Makefile.am arts-1.4.2-new/soundserver/Makefile.am
--- arts-1.4.2/soundserver/Makefile.am	Wed Jul 20 13:17:14 2005
+++ arts-1.4.2-new/soundserver/Makefile.am	Thu Sep  8 09:59:58 2005
@@ -51,37 +51,39 @@
 
 ###### "real" programs
 
-bin_PROGRAMS = artsd artsplay artscat artswrapper artsshell artsrec
+bin_PROGRAMS = artswrapper
+kdeinit_LTLIBRARIES = artsd.la artsplay.la artscat.la artsshell.la artsrec.la
+kdeinitdir = @FINKPREFIX@/lib
 
-artsd_LDADD = libsoundserver_idl.la $(FLOWLIBS) \
+artsd_la_LIBADD = libsoundserver_idl.la $(FLOWLIBS) \
               $(top_builddir)/mcop_mt/libmcop_mt.la
-artsd_LDFLAGS = $(USE_THREADS)
-artsd_SOURCES = soundserverv2_impl.cc soundserver_impl.cc simplesoundserver_impl.cc artsd.cc cpuusage.cc samplestorage_impl.cc crashhandler.cc soundserverstartup_impl.cc
-artsd_COMPILE_FIRST = soundserver.h artsversion.h
-
-artscat_LDADD = libsoundserver_idl.la $(FLOWLIBS) $(LIBPTHREAD)
-artscat_LDFLAGS = $(USE_THREADS)
-artscat_SOURCES = artscat.cc
-artscat_COMPILE_FIRST = soundserver.h artsversion.h 
-
-artsrec_LDADD = libsoundserver_idl.la $(FLOWLIBS) $(LIBPTHREAD)
-artsrec_LDFLAGS = $(USE_THREADS)
-artsrec_SOURCES = artsrec.cc
-artsrec_COMPILE_FIRST = soundserver.h artsversion.h
-
-artsplay_LDADD = libsoundserver_idl.la $(LIBPTHREAD)
-artsplay_LDFLAGS = $(USE_THREADS)
-artsplay_SOURCES = artsplay.cc
-artsplay_COMPILE_FIRST = soundserver.h artsversion.h
+artsd_la_LDFLAGS = $(USE_THREADS) -module
+artsd_la_SOURCES = soundserverv2_impl.cc soundserver_impl.cc simplesoundserver_impl.cc artsd.cc cpuusage.cc samplestorage_impl.cc crashhandler.cc soundserverstartup_impl.cc
+artsd_la_COMPILE_FIRST = soundserver.h artsversion.h
+
+artscat_la_LIBADD = libsoundserver_idl.la $(FLOWLIBS) $(LIBPTHREAD)
+artscat_la_LDFLAGS = $(USE_THREADS) -module
+artscat_la_SOURCES = artscat.cc
+artscat_la_COMPILE_FIRST = soundserver.h artsversion.h 
+
+artsrec_la_LIBADD = libsoundserver_idl.la $(FLOWLIBS) $(LIBPTHREAD)
+artsrec_la_LDFLAGS = $(USE_THREADS) -module
+artsrec_la_SOURCES = artsrec.cc
+artsrec_la_COMPILE_FIRST = soundserver.h artsversion.h
+
+artsplay_la_LIBADD = libsoundserver_idl.la $(LIBPTHREAD)
+artsplay_la_LDFLAGS = $(USE_THREADS) -module
+artsplay_la_SOURCES = artsplay.cc
+artsplay_la_COMPILE_FIRST = soundserver.h artsversion.h
 
 artswrapper_SOURCES = artswrapper.c
 artswrapper_INCLUDES = -I$(top_builddir) -DEXECUTE=\"$(artsdpath)\"
 artswrapper_LDADD = $(LIBPOSIX4)
 
-artsshell_LDADD = libsoundserver_idl.la $(LIBPTHREAD)
-artsshell_LDFLAGS = $(USE_THREADS)
-artsshell_SOURCES = artsshell.cc tradercheck.cc
-artsshell_COMPILE_FIRST = soundserver.h artsversion.h ../flow/artsflow.h
+artsshell_la_LIBADD = libsoundserver_idl.la $(LIBPTHREAD)
+artsshell_la_LDFLAGS = $(USE_THREADS) -module
+artsshell_la_SOURCES = artsshell.cc tradercheck.cc
+artsshell_la_COMPILE_FIRST = soundserver.h artsversion.h ../flow/artsflow.h
 
 DISTCLEANFILES = soundserver.cc soundserver.h soundserver.mcopclass \
   soundserver.mcoptype kmedia2.h kmedia2.cc kmedia2.mcopclass kmedia2.mcoptype artsversion.h
diff -uNr arts-1.4.2/soundserver/artscat.cc arts-1.4.2-new/soundserver/artscat.cc
--- arts-1.4.2/soundserver/artscat.cc	Wed Jul 20 13:17:14 2005
+++ arts-1.4.2-new/soundserver/artscat.cc	Thu Sep  8 09:42:43 2005
@@ -178,7 +178,7 @@
 	exit(1);	
 }
 
-int main(int argc, char **argv)
+extern "C" int kdemain(int argc, char **argv)
 {
 	bool titleSetByUser = false;
 	int optch;
diff -uNr arts-1.4.2/soundserver/artsd.cc arts-1.4.2-new/soundserver/artsd.cc
--- arts-1.4.2/soundserver/artsd.cc	Wed Jul 20 13:17:14 2005
+++ arts-1.4.2-new/soundserver/artsd.cc	Thu Sep  8 09:42:43 2005
@@ -249,7 +249,7 @@
 	cerr << endl;
 }
 
-int main(int argc, char **argv)
+extern "C" int kdemain(int argc, char **argv)
 {
 	handleArgs(argc, argv);
 
diff -uNr arts-1.4.2/soundserver/artsplay.cc arts-1.4.2-new/soundserver/artsplay.cc
--- arts-1.4.2/soundserver/artsplay.cc	Wed Jul 20 13:17:14 2005
+++ arts-1.4.2-new/soundserver/artsplay.cc	Thu Sep  8 09:42:43 2005
@@ -50,7 +50,7 @@
 		return string(buffer) + '/' + path;
 }
 
-int main(int argc, char **argv)
+extern "C" int kdemain(int argc, char **argv)
 {
 	if(argc != 2)
 	{
diff -uNr arts-1.4.2/soundserver/artsrec.cc arts-1.4.2-new/soundserver/artsrec.cc
--- arts-1.4.2/soundserver/artsrec.cc	Wed Jul 20 13:17:14 2005
+++ arts-1.4.2-new/soundserver/artsrec.cc	Thu Sep  8 09:42:43 2005
@@ -136,7 +136,7 @@
 	exit(1);	
 }
 
-int main(int argc, char **argv)
+extern "C" int kdemain(int argc, char **argv)
 {
 	int optch;
 	while((optch = getopt(argc,argv,"r:b:c:hv")) > 0)
diff -uNr arts-1.4.2/soundserver/artsshell.cc arts-1.4.2-new/soundserver/artsshell.cc
--- arts-1.4.2/soundserver/artsshell.cc	Wed Jul 20 13:17:14 2005
+++ arts-1.4.2-new/soundserver/artsshell.cc	Thu Sep  8 09:42:43 2005
@@ -643,7 +643,7 @@
 	return 0;
 }
 
-int main(int argc, char *argv[])
+extern "C" int kdemain(int argc, char *argv[])
 {
 	Arts::Dispatcher dispatcher;
 	Arts::SoundServerV2 server(Arts::Reference("global:Arts_SoundServer"));
diff -uNr arts-1.4.2/x11/Makefile.am arts-1.4.2-new/x11/Makefile.am
--- arts-1.4.2/x11/Makefile.am	Wed Jul 20 13:18:10 2005
+++ arts-1.4.2-new/x11/Makefile.am	Thu Sep  8 09:42:44 2005
@@ -6,7 +6,7 @@
 
 libx11globalcomm_la_SOURCES = x11globalcomm.cc x11globalcomm_impl.cc
 libx11globalcomm_la_LIBADD = $(top_builddir)/mcop/libmcop.la $(LIB_X11)
-libx11globalcomm_la_LDFLAGS = -no-undefined -module -version-info 1:0 $(X_LDFLAGS) $(all_libraries)
+libx11globalcomm_la_LDFLAGS = -no-undefined -module -version-info 1:0 $(all_libraries) $(X_LDFLAGS)
 
 DISTCLEANFILES = x11globalcomm.cc x11globalcomm.h \
                  x11globalcomm.mcoptype x11globalcomm.mcopclass
