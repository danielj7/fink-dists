Package: pango1-xft1
Version: 1.0.5
Revision: 1
Depends: %N-shlibs (=%v-%r)
BuildDepends: system-xfree86 | xfree86-base (<< 4.3.0-1) | xfree86-base-threaded (<< 4.3.0-1), freetype2 (>= 2.1.3-1) | freetype2-hinting (>= 2.1.3-1), glib2-dev (>= 2.2.1-2), pkgconfig, dlcompat-dev
Provides: %N-bin, %N-common
Replaces: %N-bin, %N-common, pango1 (<< 1.2.1-2)
Source: mirror:gnome:sources/pango/1.0/pango-%v.tar.bz2
Source-MD5: e300e5c163bc28e180e45c8e20543b4b
PatchScript: sed 's|@PREFIX@|%p|' <%a/%f.patch | patch -p1
NoSetCPPFLAGS: true
NoSetLDFLAGS: true
SetCPPFLAGS: -no-cpp-precomp -isystem %p/include
SetCFLAGS: -O3 -fstrict-aliasing -funroll-loops
SetLDFLAGS: -no-undefined -L%p/lib
SetLIBRARY_PATH: %p/lib
SetMACOSX_DEPLOYMENT_TARGET: 10.2
ConfigureParams: --disable-gtk-doc
CompileScript: <<
#!/bin/sh

 XFT_H=/usr/X11R6/include/X11/Xft/Xft.h
 XFT_MAJOR=`grep XFT_MAJOR $XFT_H | head -1 | awk '{ print \$3 }'`
 if [ "$XFT_MAJOR" = "2" ]; then
  echo
  echo "  You have Xft2 installed. This usually means you have XFree86"
  echo "  (>= 4.3) installed. pango1(-shlibs|-dev) cannot be built with"
  echo "  Xft2. You should use pango1-xft2 package instead."
  echo
  exit 1
 fi

 FREETYPE_CONFIG=%p/bin/freetype-config
 export FREETYPE_CONFIG
 ./configure %c
 make -j2
<<
InstallScript: <<
 make install DESTDIR=%d
 install -d -m 755 %i/sbin %i/etc/pango
 install -c -m 755 update-pango-modules %i/sbin/
 install -c -m 644 examples/pangox.aliases %i/etc/pango/
<<
PostInstScript: <<
 case "$1" in
  configure)
   update-pango-modules
   ;;
 esac
<<
PostRmScript: <<
 case "$1" in
  purge)
   rm -f %p/etc/pango/pango.modules
   rmdir %p/etc/pango || true
   ;;
 esac
<<
SplitOff: <<
  Package: %N-shlibs
  Depends: x11, freetype2-shlibs (>= 2.1.3-1) | freetype2-hinting-shlibs (>= 2.1.3-1), glib2 (>= 2.2.1-2)
  Replaces: pango1-shlibs (<< 1.2.1-2)
  Files: <<
    lib/libpango-1.0.*.dylib
    lib/libpangoft2-1.0.*.dylib
    lib/libpangox-1.0.*.dylib
    lib/libpangoxft-1.0.*.dylib
    lib/pango
  <<
  Shlibs: <<
    %p/lib/libpango-1.0.0.dylib 1.0.0 %n (>= 1.0.4-3)
    %p/lib/libpangoft2-1.0.0.dylib 1.0.0 %n (>= 1.0.4-3)
    %p/lib/libpangox-1.0.0.dylib 1.0.0 %n (>= 1.0.4-3)
    %p/lib/libpangoxft-1.0.0.dylib 1.0.0 %n (>= 1.0.4-3)
  <<
  DocFiles: AUTHORS COPYING ChangeLog NEWS README TODO
<<
SplitOff2: <<
  Package: %N-dev
  Depends: %N-shlibs (=%v-%r)
  Provides: pango1-dev
  Replaces: pango1-dev, pango1 (<< 1.0.1-4)
  Conflicts: pango1-dev
  BuildDependsOnly: True
  Files: include lib/lib*-1.0.* lib/pkgconfig share/gtk-doc
  DocFiles: AUTHORS COPYING ChangeLog NEWS README TODO
<<
ConfFiles: %p/etc/pango/pangox.aliases
DocFiles: AUTHORS COPYING ChangeLog NEWS README TODO
Description: I18N text handling system: for XFree86 (<< 4.3)
DescDetail: System for layout and rendering of internationalized text.
DescPackaging: <<
Package which install pango module(s) should call update-pango-modules in it's
PostInst/PostRm script to update pango.modules file.

Currently, uses example pangox.aliases without modification. For future, it
should be managed by font managing system like defoma (Debian font manager).
<<
License: LGPL
Maintainer: Masanori Sekino <msek@users.sourceforge.net>
Homepage: http://www.pango.org
