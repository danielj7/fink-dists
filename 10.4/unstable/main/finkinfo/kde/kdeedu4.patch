diff -Nurd kdeedu-4.3.98/cantor/src/CMakeLists.txt kdeedu-4.3.98-new/cantor/src/CMakeLists.txt
--- kdeedu-4.3.98/cantor/src/CMakeLists.txt	2010-01-19 18:20:08.000000000 -0500
+++ kdeedu-4.3.98-new/cantor/src/CMakeLists.txt	2010-02-01 15:46:19.000000000 -0500
@@ -3,7 +3,10 @@
 #########################################################################
 add_subdirectory(lib)
 
-include_directories( lib ${CMAKE_CURRENT_BINARY_DIR}/lib)
+set(GENERIC_LIB_VERSION "0.0.1")
+set(GENERIC_LIB_SOVERSION "0")
+
+include_directories( lib ${CMAKE_CURRENT_BINARY_DIR}/lib ${LIBATTICA_INCLUDE_DIR} )
 if(LIBSPECTRE_FOUND)
    include_directories(${LIBSPECTRE_INCLUDE_DIR})
 endif(LIBSPECTRE_FOUND)
@@ -16,6 +19,8 @@
 target_link_libraries( cantor_config ${KDE4_KDEUI_LIBS} ${KDE4_KPARTS_LIBS} ${KDE4_KNEWSTUFF3_LIBS} )
 install( TARGETS cantor_config  ${INSTALL_TARGETS_DEFAULT_ARGS} )
 
+set_target_properties( cantor_config PROPERTIES VERSION ${GENERIC_LIB_VERSION} SOVERSION ${GENERIC_LIB_SOVERSION} )
+
 set(cantor_SRCS
    main.cpp
    cantor.cpp
diff -Nurd kdeedu-4.3.98/cantor/src/CMakeLists.txt.orig kdeedu-4.3.98-new/cantor/src/CMakeLists.txt.orig
--- kdeedu-4.3.98/cantor/src/CMakeLists.txt.orig	1969-12-31 19:00:00.000000000 -0500
+++ kdeedu-4.3.98-new/cantor/src/CMakeLists.txt.orig	2010-01-19 18:20:08.000000000 -0500
@@ -0,0 +1,78 @@
+#########################################################################
+# Subdirectories
+#########################################################################
+add_subdirectory(lib)
+
+include_directories( lib ${CMAKE_CURRENT_BINARY_DIR}/lib)
+if(LIBSPECTRE_FOUND)
+   include_directories(${LIBSPECTRE_INCLUDE_DIR})
+endif(LIBSPECTRE_FOUND)
+add_subdirectory(backends)
+add_subdirectory(assistants)
+
+#build the config object in a separate library, shared between shell and part
+kde4_add_kcfg_files(config_SRCS settings.kcfgc)
+kde4_add_library( cantor_config  SHARED ${config_SRCS} )
+target_link_libraries( cantor_config ${KDE4_KDEUI_LIBS} ${KDE4_KPARTS_LIBS} ${KDE4_KNEWSTUFF3_LIBS} )
+install( TARGETS cantor_config  ${INSTALL_TARGETS_DEFAULT_ARGS} )
+
+set(cantor_SRCS
+   main.cpp
+   cantor.cpp
+   backendchoosedialog.cpp
+ )
+
+install(FILES cantor.kcfg DESTINATION ${KCFG_INSTALL_DIR})
+
+kde4_add_ui_files(cantor_SRCS settings.ui)
+kde4_add_ui_files(cantor_SRCS backendchooser.ui)
+
+kde4_add_app_icon(cantor_SRCS
+   "${CMAKE_CURRENT_SOURCE_DIR}/../icons/hi*-app-cantor.png")
+kde4_add_executable(cantor ${cantor_SRCS})
+
+target_link_libraries(cantor ${KDE4_KDEUI_LIBS} ${KDE4_KPARTS_LIBS} ${KDE4_KNEWSTUFF3_LIBS} cantorlibs cantor_config)
+
+########### install files ###############
+install(TARGETS cantor ${INSTALL_TARGETS_DEFAULT_ARGS} )
+install( FILES cantor.desktop  DESTINATION  ${XDG_APPS_INSTALL_DIR} )
+install( FILES cantor_shell.rc  DESTINATION  ${DATA_INSTALL_DIR}/cantor )
+
+install( FILES cantor.knsrc  DESTINATION  ${CONFIG_INSTALL_DIR} )
+install( FILES cantor_maxima.knsrc  DESTINATION  ${CONFIG_INSTALL_DIR} )
+install( FILES cantor_sage.knsrc  DESTINATION  ${CONFIG_INSTALL_DIR} )
+install( FILES cantor_kalgebra.knsrc  DESTINATION  ${CONFIG_INSTALL_DIR} )
+install( FILES cantor_r.knsrc  DESTINATION  ${CONFIG_INSTALL_DIR} )
+
+
+#########################################################################
+# KPART SECTION
+#########################################################################
+#kde_module_LTLIBRARIES = libcantorpart.la
+set(cantor_PART_SRCS
+   cantor_part.cpp
+   worksheet.cpp
+   worksheetentry.cpp
+   scripteditorwidget.cpp
+   resultproxy.cpp
+   loadedexpression.cpp
+   animationhandler.cpp
+   animation.cpp
+   resultcontextmenu.cpp
+ )
+
+configure_file (config-cantor.h.cmake ${CMAKE_CURRENT_BINARY_DIR}/config-cantor.h )
+
+kde4_add_plugin(cantorpart WITH_PREFIX ${cantor_PART_SRCS})
+
+target_link_libraries(cantorpart ${KDE4_KDEUI_LIBS} ${KDE4_KPARTS_LIBS} ${KDE4_KNEWSTUFF3_LIBS}
+				     ${KDE4_KTEXTEDITOR_LIBS}
+				     cantorlibs cantor_config )
+if(LIBSPECTRE_FOUND)
+   target_link_libraries(cantorpart ${LIBSPECTRE_LIBRARY})
+endif(LIBSPECTRE_FOUND)
+
+install( FILES cantor_part.desktop  DESTINATION ${XDG_APPS_INSTALL_DIR} )
+install( FILES cantor_part.rc  DESTINATION  ${DATA_INSTALL_DIR}/cantorpart )
+
+install(TARGETS cantorpart  DESTINATION ${PLUGIN_INSTALL_DIR} )
diff -Nurd kdeedu-4.3.98/cantor/src/lib/CMakeLists.txt kdeedu-4.3.98-new/cantor/src/lib/CMakeLists.txt
--- kdeedu-4.3.98/cantor/src/lib/CMakeLists.txt	2009-10-26 05:15:03.000000000 -0400
+++ kdeedu-4.3.98-new/cantor/src/lib/CMakeLists.txt	2010-02-01 14:57:19.000000000 -0500
@@ -1,5 +1,5 @@
 set(GENERIC_LIB_VERSION "0.0.1")
-set(GENERIC_LIB_SOVERSION "1")
+set(GENERIC_LIB_SOVERSION "0")
 
 set( cantor_LIB_SRCS
   session.cpp
@@ -26,6 +26,8 @@
      backend_macros.h
 )
 
+include_directories( ${LIBATTICA_INCLUDE_DIR} )
+
 kde4_add_kcfg_files(cantor_LIB_SRCS settings.kcfgc)
 install(FILES cantor_libs.kcfg DESTINATION ${KCFG_INSTALL_DIR})
 
diff -Nurd kdeedu-4.3.98/marble/src/plugins/positionprovider/gpsd/CMakeLists.txt kdeedu-4.3.98-new/marble/src/plugins/positionprovider/gpsd/CMakeLists.txt
--- kdeedu-4.3.98/marble/src/plugins/positionprovider/gpsd/CMakeLists.txt	2009-05-27 15:53:49.000000000 -0400
+++ kdeedu-4.3.98-new/marble/src/plugins/positionprovider/gpsd/CMakeLists.txt	2010-02-01 14:54:16.000000000 -0500
@@ -5,6 +5,7 @@
  ${CMAKE_BINARY_DIR}/src/plugins/positionprovider/gpsd
  ${QT_INCLUDE_DIR}
  ${libgps_INCLUDE_DIRS}
+ ${libgps_INCLUDEDIR}
 )
 
 include(${QT_USE_FILE})
@@ -15,6 +16,6 @@
  GpsdThread.cpp
 )
 
-set( GpsdPositionProviderPlugin_LIBS ${libgps_LIBRARIES} )
+set( GpsdPositionProviderPlugin_LIBS ${libgps_LIBRARIES} ${libgps_LDFLAGS} )
 
 marble_add_plugin( GpsdPositionProviderPlugin ${gpsd_SRCS} )
diff -Nurd kdeedu-4.3.98/step/step/CMakeLists.txt kdeedu-4.3.98-new/step/step/CMakeLists.txt
--- kdeedu-4.3.98/step/step/CMakeLists.txt	2009-03-27 10:46:55.000000000 -0400
+++ kdeedu-4.3.98-new/step/step/CMakeLists.txt	2010-02-01 14:54:16.000000000 -0500
@@ -41,6 +41,7 @@
 
 if(STEPCORE_WITH_GSL)
     add_definitions(-DSTEPCORE_WITH_GSL)
+    include_directories(${GSL_INCLUDE_DIR} ${GSL_INCLUDE_DIR}/..)
 endif(STEPCORE_WITH_GSL)
 
 if(STEP_WITH_QALCULATE)
diff -Nurd kdeedu-4.3.98/step/stepcore/CMakeLists.txt kdeedu-4.3.98-new/step/stepcore/CMakeLists.txt
--- kdeedu-4.3.98/step/stepcore/CMakeLists.txt	2008-04-10 05:30:31.000000000 -0400
+++ kdeedu-4.3.98-new/step/stepcore/CMakeLists.txt	2010-02-01 14:54:16.000000000 -0500
@@ -23,7 +23,7 @@
 
 if(STEPCORE_WITH_GSL)
     add_definitions(-DSTEPCORE_WITH_GSL)
-    include_directories(${GSL_INCLUDE_DIR})
+    include_directories(${GSL_INCLUDE_DIR} ${GSL_INCLUDE_DIR}/..)
     set(stepcore_use_LIBS ${stepcore_use_LIBS} ${GSL_LIBRARIES})
     set(stepcore_SRCS ${stepcore_SRCS} gslsolver.cc)
 endif(STEPCORE_WITH_GSL)
