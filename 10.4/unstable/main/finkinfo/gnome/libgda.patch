diff -Nurd -x'*~' libgda-4.0.2.orig/configure.in libgda-4.0.2/configure.in
--- libgda-4.0.2.orig/configure.in	2009-04-18 08:03:50.000000000 -0400
+++ libgda-4.0.2/configure.in	2009-06-08 02:44:27.000000000 -0400
@@ -180,7 +180,7 @@
     LIBTOOL_EXPORT_OPTIONS=$EXPORT_SYM_REGEX
     LIBTOOL_PROV_EXPORT_OPTIONS=$EXPORT_PROV_SYM_REGEX
     AC_DEFINE(HAVE_CARBON)
-    LIBGDA_LIBS="$LIBGDA_LIBS -framework Carbon"
+    LIBGDA_LIBS="$LIBGDA_LIBS -Wl,-framework,Carbon"
     dnl SO_SUFFIX=dylib
   ;;
 *)
@@ -205,13 +205,6 @@
 dnl if GIO is not found, then see if FAM or gamin are found
 dnl *******************************************************
 
-GNOMEVFS_MODULES="gnome-vfs-2.0 >= 2.20"
-PKG_CHECK_MODULES(GNOMEVFS, $GNOMEVFS_MODULES, have_gnomevfs=yes, have_gnomevfs=no)
-if test x"$have_gnomevfs" = "xyes"
-then
-        GNOMEVFS_CFLAGS="$GNOMEVFS_CFLAGS -DHAVE_GNOMEVFS"
-fi
-
 GIO_MODULES="gio-2.0 >= 2.16"
 PKG_CHECK_MODULES(GIO, $GIO_MODULES, have_gio=yes, have_gio=no)
 AM_CONDITIONAL(HAVE_GIO, test x"$have_gio" = "xyes")
@@ -222,6 +215,13 @@
 	GNOMEVFS_LIBS=""
 	have_gnomevfs=no
 else
+	GNOMEVFS_MODULES="gnome-vfs-2.0 >= 2.20"
+	PKG_CHECK_MODULES(GNOMEVFS, $GNOMEVFS_MODULES, have_gnomevfs=yes, have_gnomevfs=no)
+	if test x"$have_gnomevfs" = "xyes"
+	then
+	        GNOMEVFS_CFLAGS="$GNOMEVFS_CFLAGS -DHAVE_GNOMEVFS"
+	fi
+
 	FAM_LIBS=
 	FAM_CFLAGS=
 	FAM_MISSING_WARNING="Libgda depends on FAM to provide notification when configuration files are changed, without FAM support any application using Libgda will have to be restarted when configuration files are changed to take into account those changes"
diff -Nurd -x'*~' libgda-4.0.2.orig/libgda-report/RML/trml2html/Makefile.am libgda-4.0.2/libgda-report/RML/trml2html/Makefile.am
--- libgda-4.0.2.orig/libgda-report/RML/trml2html/Makefile.am	2009-04-17 12:32:22.000000000 -0400
+++ libgda-4.0.2/libgda-report/RML/trml2html/Makefile.am	2009-06-07 23:59:17.000000000 -0400
@@ -1,12 +1,3 @@
-files = __init__.py  \
-	trml2html.py \
-	utils.py
-
-install-exec-local:
-	-mkdir -p $(bindir)/gda_trml2html
-	-cd $(top_srcdir)/libgda-report/RML/trml2html && $(INSTALL_PROGRAM) $(files) $(bindir)/gda_trml2html
-
-uninstall-local:
-	-rm -rf $(bindir)/gda_trml2html
-
-EXTRA_DIST = $(files)
+trml2html_SCRIPTS = trml2html.py
+trml2html_DATA = __init__.py utils.py
+trml2htmldir = $(bindir)/gda_trml2html
diff -Nurd -x'*~' libgda-4.0.2.orig/libgda-report/RML/trml2pdf/Makefile.am libgda-4.0.2/libgda-report/RML/trml2pdf/Makefile.am
--- libgda-4.0.2.orig/libgda-report/RML/trml2pdf/Makefile.am	2009-04-17 12:32:22.000000000 -0400
+++ libgda-4.0.2/libgda-report/RML/trml2pdf/Makefile.am	2009-06-08 02:26:33.000000000 -0400
@@ -1,13 +1,3 @@
-files = color.py \
-	__init__.py  \
-	trml2pdf.py \
-	utils.py
-
-install-exec-local:
-	-mkdir -p $(bindir)/gda_trml2pdf
-	-cd $(top_srcdir)/libgda-report/RML/trml2pdf && $(INSTALL_PROGRAM) $(files) $(bindir)/gda_trml2pdf
-
-uninstall-local:
-	-rm -rf $(bindir)/gda_trml2pdf
-
-EXTRA_DIST = $(files)
+trml2pdf_SCRIPTS = trml2pdf.py
+trml2pdf_DATA = __init__.py color.py utils.py
+trml2pdfdir = $(bindir)/gda_trml2pdf
diff -Nurd -x'*~' libgda-4.0.2.orig/libgda-report/engine/Makefile.am libgda-4.0.2/libgda-report/engine/Makefile.am
--- libgda-4.0.2.orig/libgda-report/engine/Makefile.am	2009-04-17 12:32:22.000000000 -0400
+++ libgda-4.0.2/libgda-report/engine/Makefile.am	2009-06-08 00:22:31.000000000 -0400
@@ -16,8 +16,8 @@
 	$(gda_report_headers)	\
 	gda-report-engine.c	
 
-libgda_report_engine_4_0_la_LIBADD = $(LIBGDA_LIBS) \
-	$(top_builddir)/libgda/libgda-4.0.la 
+libgda_report_engine_4_0_la_LIBADD = \
+	$(top_builddir)/libgda/libgda-4.0.la $(LIBGDA_LIBS)
 
 gdareportincludedir=$(includedir)/libgda-$(GDA_ABI_MAJOR_VERSION).$(GDA_ABI_MINOR_VERSION)/libgda-report
 gdareportinclude_HEADERS=$(gda_report_headers)
diff -Nurd -x'*~' libgda-4.0.2.orig/libgda-xslt/Makefile.am libgda-4.0.2/libgda-xslt/Makefile.am
--- libgda-4.0.2.orig/libgda-xslt/Makefile.am	2009-04-17 12:32:22.000000000 -0400
+++ libgda-4.0.2/libgda-xslt/Makefile.am	2009-06-08 00:22:50.000000000 -0400
@@ -20,8 +20,8 @@
 	sql_backend.c
 
 libgda_xslt_4_0_la_LDFLAGS = -version-info $(GDA_CURRENT):$(GDA_REVISION):$(GDA_AGE) $(NO_UNDEFINED)
-libgda_xslt_4_0_la_LIBADD = $(LIBGDA_LIBS) $(LIBXSLT_LIBS)\
-        $(top_builddir)/libgda/libgda-4.0.la
+libgda_xslt_4_0_la_LIBADD = \
+        $(top_builddir)/libgda/libgda-4.0.la $(LIBGDA_LIBS) $(LIBXSLT_LIBS)
 
 gdaxsltincludedir=$(includedir)/libgda-$(GDA_ABI_MAJOR_VERSION).$(GDA_ABI_MINOR_VERSION)/libgda-xslt
 gdaxsltinclude_HEADERS=$(gda_xslt_headers)
diff -Nurd -x'*~' libgda-4.0.2.orig/providers/bdb/Makefile.am libgda-4.0.2/providers/bdb/Makefile.am
--- libgda-4.0.2.orig/providers/bdb/Makefile.am	2009-04-17 12:32:23.000000000 -0400
+++ libgda-4.0.2/providers/bdb/Makefile.am	2009-06-08 00:23:25.000000000 -0400
@@ -24,9 +24,9 @@
 
 gda_bdb_test_SOURCES = gda-bdb-test.c
 gda_bdb_test_LDADD = \
+	$(top_builddir)/libgda/libgda-4.0.la \
 	$(LIBGDA_LIBS) \
-	$(BDB_LIBS) \
-	$(top_builddir)/libgda/libgda-4.0.la 
+	$(BDB_LIBS)
 
 xmldir   = $(datadir)/libgda-4.0
 xml_in_files = bdb_specs_dsn.xml.in
