diff -Naur mysql-5.0.13-rc/mysys/default.c mysql-5.0.13-rc.fink/mysys/default.c
--- mysql-5.0.13-rc/mysys/default.c	2005-09-23 04:39:57.000000000 +0900
+++ mysql-5.0.13-rc.fink/mysys/default.c	2005-10-16 02:13:52.000000000 +0900
@@ -980,6 +980,8 @@
 {
   const char *env, **ptr= default_directories;
 
+  *ptr++= "@PREFIX@/etc/";
+
 #ifdef __WIN__
   *ptr++= "C:/";
 
diff -Naur mysql-5.0.13-rc/scripts/mysqld_safe.sh mysql-5.0.13-rc.fink/scripts/mysqld_safe.sh
--- mysql-5.0.13-rc/scripts/mysqld_safe.sh	2005-09-23 04:40:24.000000000 +0900
+++ mysql-5.0.13-rc.fink/scripts/mysqld_safe.sh	2005-10-16 02:18:56.000000000 +0900
@@ -132,22 +132,24 @@
 # Second, try to find the data directory
 #
 
-# Try where the binary installs put it
-if test -d $MY_BASEDIR_VERSION/data/mysql
-then
-  DATADIR=$MY_BASEDIR_VERSION/data
-  if test -z "$defaults" -a -r "$DATADIR/my.cnf"
-  then
-    defaults="--defaults-extra-file=$DATADIR/my.cnf"
-  fi
-# Next try where the source installs put it
-elif test -d $MY_BASEDIR_VERSION/var/mysql
-then
-  DATADIR=$MY_BASEDIR_VERSION/var
-# Or just give up and use our compiled-in default
-else
+# Fink's MySQL uses @PREFIX@/var/lib by default..
+
+# # Try where the binary installs put it
+# if test -d $MY_BASEDIR_VERSION/data/mysql
+# then
+#   DATADIR=$MY_BASEDIR_VERSION/data
+#   if test -z "$defaults" -a -r "$DATADIR/my.cnf"
+#   then
+#     defaults="--defaults-extra-file=$DATADIR/my.cnf"
+#   fi
+# # Next try where the source installs put it
+# elif test -d $MY_BASEDIR_VERSION/var/mysql
+# then
+#   DATADIR=$MY_BASEDIR_VERSION/var
+# # Or just give up and use our compiled-in default
+# else
   DATADIR=@localstatedir@
-fi
+# fi
 
 if test -z "$MYSQL_HOME"
 then 

# Temporary work around for #25359 (http://bugs.mysql.com/25359)
#
# This is a BitKeeper patch.  What follows are the unified diffs for the
# set of deltas contained in the patch.  The rest of the patch, the part
# that BitKeeper cares about, is below these diffs.
# User:	kent
# Host:	kent-amd64.(none)
# Root:	/home/kent/bk/main/mysql-5.0

--- 1.184/mysql-test/r/view.result	2007-01-02 11:01:54 +01:00
+++ 1.185/mysql-test/r/view.result	2007-01-02 11:01:54 +01:00
@@ -2686,12 +2686,12 @@
 v1	CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v1` AS select (year(now()) - year(`t1`.`DOB`)) AS `Age` from `t1` having (`Age` < 75)
 SELECT (year(now())-year(DOB)) AS Age FROM t1 HAVING Age < 75;
 Age
-42
-38
+43
+39
 SELECT * FROM v1;
 Age
-42
-38
+43
+39
 DROP VIEW v1;
 DROP TABLE t1;
 CREATE TABLE t1 (id int NOT NULL PRIMARY KEY, a char(6) DEFAULT 'xxx');

