--- rxtx-2.0-7pre1/src/RXTXCommDriver.java	Fri Oct 17 13:30:37 2003
+++ rxtx-2.0-7pre1/src/RXTXCommDriver.java	Tue Jul 20 00:18:11 2004
@@ -69,7 +69,7 @@
 	static
 	{
 		if(debug ) System.out.println("RXTXCommDriver {}");
-		System.loadLibrary( "rxtxSerial" );
+		System.load( "/FINKPATH/lib/librxtxSerial.jnilib" );
 
 		/*
 		   Perform a crude check to make sure people don't mix
--- rxtx-2.0-7pre1/src/RXTXPort.java	Fri Oct 17 13:27:02 2003
+++ rxtx-2.0-7pre1-new/src/RXTXPort.java	Sat Dec 11 16:24:43 2004
@@ -80,7 +80,7 @@
 
 		if(debug ) 
 			z.reportln( "RXTXPort {}");
-		System.loadLibrary( "rxtxSerial" );
+		System.load( "/FINKPATH/lib/librxtxSerial.jnilib" );
 		Initialize();
 	}
 
--- rxtx-2.0-7pre1/src/SerialImp.c	Fri Oct 17 13:41:43 2003
+++ rxtx-2.0-7pre1-new/src/SerialImp.c	Tue May 18 14:20:12 2004
@@ -4328,12 +4328,12 @@
     } else {
 	jclass cls; /* dima */
 	jmethodID mid; /* dima */
-        cls = (*env)->FindClass(env,"javax.comm/CommPortIdentifier" ); /* dima */
+        cls = (*env)->FindClass(env,"javax/comm/CommPortIdentifier" ); /* dima */
         if (cls == 0) { /* dima */
-            report( "can't find class of javax.comm/CommPortIdentifier\n" ); /* dima */
+            report( "can't find class of javax/comm/CommPortIdentifier\n" ); /* dima */
             return numPorts; /* dima */
         } /* dima */
-        mid = (*env)->GetStaticMethodID(env, cls, "addPortName", "(Ljava/lang/String;ILjavax.comm/CommDriver;)V" ); /* dima */
+        mid = (*env)->GetStaticMethodID(env, cls, "addPortName", "(Ljava/lang/String;ILjavax/comm/CommDriver;)V" ); /* dima */
 
         if (mid == 0) {
             printf( "getMethodID of CommDriver.addPortName failed\n" );
--- rxtx-2.0-7pre1/src/SerialImp.h	Fri Oct 17 13:01:11 2003
+++ rxtx-2.0-7pre1-new/src/SerialImp.h	Sun Dec 12 18:24:43 2004
@@ -160,7 +160,7 @@
 #endif
 #if defined(__APPLE__)
 #	define DEVICEDIR "/dev/"
-#	define LOCKDIR "/var/spool/uucp"
+#	define LOCKDIR "FINKPATH/var/spool/uucp"
 #	define LOCKFILEPREFIX "LK."
 #	define UUCP
 #endif /* __FreeBSD__ */
@@ -364,7 +364,7 @@
 #define ARRAY_INDEX_OUT_OF_BOUNDS "java/lang/ArrayIndexOutOfBoundsException"
 #define OUT_OF_MEMORY "java/lang/OutOfMemoryError"
 #define IO_EXCEPTION "java/io/IOException"
-#define PORT_IN_USE_EXCEPTION "javax.comm/PortInUseException"
+#define PORT_IN_USE_EXCEPTION "javax/comm/PortInUseException"
 
 /* some popular releases of Slackware do not have SSIZE_MAX */
 
--- rxtx-2.0-7pre1/configure	Fri Oct 17 14:31:35 2003
+++ rxtx-2.0-7pre1-new/configure	Tue Jul 20 02:19:07 2004
@@ -9711,7 +9711,7 @@
 
  case $OS_NAME in
 	Mac\ OS\ X)
-        JAVAINCLUDEDIR=$JPATH/../../../Headers
+        JAVAINCLUDEDIR=/System/Library/Frameworks/JavaVM.framework/Headers/
         ;;
 	*)
         JAVAINCLUDEDIR=$JPATH/include
@@ -9743,15 +9743,15 @@
 		;;
 	esac
 fi
-if  test -d $JPATH/share/kaffe/
-	then fix_comm_jar $JPATH/share/kaffe/comm.jar
-elif  test -d $JPATH/jre/lib/ext
-	then fix_comm_jar $JPATH/jre/lib/ext/comm.jar
-elif  test -d $JPATH/lib/ext
-	then fix_comm_jar $JPATH/lib/ext/comm.jar
-elif  test -d $JPATH/lib
-	then fix_comm_jar $JPATH/lib/comm.jar
-fi
+#if  test -d $JPATH/share/kaffe/
+#	then fix_comm_jar $JPATH/share/kaffe/comm.jar
+#elif  test -d $JPATH/jre/lib/ext
+#	then fix_comm_jar $JPATH/jre/lib/ext/comm.jar
+#elif  test -d $JPATH/lib/ext
+#	then fix_comm_jar $JPATH/lib/ext/comm.jar
+#elif  test -d $JPATH/lib
+#	then fix_comm_jar $JPATH/lib/comm.jar
+#fi
 
 #  http://www.tolstoy.com/samizdat/sysprops.html
 
@@ -9995,18 +9995,18 @@
 ;;
 
 Mac\ OS\ X)
-	fix_parameters $JPATH/lib/javax.comm.properties
-	LINK="cc -bundle -framework CoreFoundation -framework IOKit -o lib\$*.jnilib "
-	OBJECT_EXTENSION="o"
+	# fix_parameters $JPATH/lib/javax.comm.properties
+	LINK="\$(TOP)/libtool --mode=link \$(CC) -bundle -framework CoreFoundation -framework IOKit -o librxtx\$*.jnilib "
+	OBJECT_EXTENSION="lo"
 	LIB_EXTENSION="jnilib"
 	TARGETLIB="\$(target_triplet)/librxtxSerial.jnilib"
-	RXTX_PATH="/usr/lib/java"
-	JHOME=$JPATH"/lib/ext"
-	CFLAGS=$CFLAGS" -bundle"
-	LDFLAGS="$LDFLAGS -module -framework JavaVM -framework IOKit -framework CoreFoundation"
+	RXTX_PATH="\$(prefix)/lib/java/"
+	JHOME="\$(prefix)/"
+	# CFLAGS=$CFLAGS" -bundle"
+	# LDFLAGS="$LDFLAGS -module -framework JavaVM -framework IOKit -framework CoreFoundation"
 	CLASSPATH=".:\$(TOP):\$(TOP)/src:\$(JPATH)/lib/ext/comm.jar:$CLASSPATH"
 	#  email taj@www.linux.org.uk if you know a nicer fix.  Needed anymore?
-	LIBTOOL_FIX="sed s/echo\ so/echo\ jnilib/g libtool > tmp; mv tmp libtool; chmod +x libtool;"
+	# LIBTOOL_FIX="sed s/echo\ so/echo\ jnilib/g libtool > tmp; mv tmp libtool; chmod +x libtool;"
 ;;
 
 Solaris*)
