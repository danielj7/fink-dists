--- src.orig/pawlib/paw/programs/Imakefile	2006-09-04 14:33:00.000000000 +0200
+++ src.new/pawlib/paw/programs/Imakefile	2011-09-01 10:56:05.000000000 +0200
@@ -51,6 +51,8 @@
 #endif
 
 
+CernlibCcProgramTarget(disableASLR,disableASLR.o,NullParameter,disableASLR.o,NullParameter)
+InstallProgram(disableASLR,$(CERN_BINDIR))
 
 #ifdef CERNLIB_VAXVMS
 NeedTcpipLib
--- src.orig/pawlib/paw/programs/disableASLR.c	1970-01-01 01:00:00.000000000 +0100
+++ src.new/pawlib/paw/programs/disableASLR.c	2011-09-01 10:09:13.000000000 +0200
@@ -0,0 +1,47 @@
+#include <stdio.h>
+#include <stdlib.h>
+#include <sys/types.h>
+#include <unistd.h>
+#include <spawn.h>
+#include <sys/wait.h>
+
+#ifndef _POSIX_SPAWN_DISABLE_ASLR
+#define _POSIX_SPAWN_DISABLE_ASLR       0x0100
+#endif
+
+int 
+main(int argc, char* argv[], char* env[])
+{
+  pid_t pid;
+  int err;
+  posix_spawnattr_t attr;
+
+  if ( argc == 0 )
+  {
+      printf("Please specify the full path to an executable.\n");
+      exit(1);
+  }
+
+  if ( posix_spawnattr_init(&attr) )
+  {
+      perror("Couldn't initialize attributes for posix_spawn");
+      exit(1);
+  }
+
+  if ( posix_spawnattr_setflags(&attr, _POSIX_SPAWN_DISABLE_ASLR) )
+  {
+      perror("Couldn't add _POSIX_SPAWN_DISABLE_ASLR to attributes");
+      exit(1);
+  }
+
+  if( posix_spawn(&pid, argv[1], NULL, &attr, argv, env) )
+  {
+      perror("posix_spawn failed");
+      exit(1);
+  }
+   
+  /* Wait for the spawned process to exit */
+  (void)wait(NULL);
+
+  return 0;
+}
--- src.orig/scripts/paw	1996-04-25 11:50:57.000000000 +0200
+++ src.new/scripts/paw	2011-09-01 10:57:42.000000000 +0200
@@ -56,5 +56,5 @@
      echo " Calling $ver version of paw-$drv"
      echo
   fi
-  $GDIR/paw$drv $*
+  $GDIR/disableASLR $GDIR/paw$drv $*
   [ ! -s paw.metafile ] && rm paw.metafile
