--- zimg-4.5.0/zimg.c.orig	Sat Dec 22 10:22:21 2001
+++ zimg-4.5.0/zimg.c	Sat Dec 22 10:27:49 2001
@@ -44,7 +44,7 @@
 #include <gdfontl.h>  /* large */
 #include <gdfontg.h>  /* giant */
 
-#if !defined(unix) && !defined(__unix) && !defined(__unix__)
+#if !defined(unix) && !defined(__unix) && !defined(__unix__) && !defined(__APPLE__)
 #   include <fcntl.h> /* for setmode() */
 #endif
 
@@ -677,7 +677,7 @@
 	    }
 	} else {
 	    z.ofp = stdout;
-#if !defined(unix) && !defined(__unix) && !defined(__unix__)
+#if !defined(unix) && !defined(__unix) && !defined(__unix__) && !defined(__APPLE__)
 	    setmode(fileno(stdout), O_BINARY);
 #endif
 	}
