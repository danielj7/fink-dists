diff -Nurd -x'*~' libgnomeui-2.12.0.orig/doc/reference/Makefile.in libgnomeui-2.12.0/doc/reference/Makefile.in
--- libgnomeui-2.12.0.orig/doc/reference/Makefile.in	2005-09-06 04:38:31.000000000 -0400
+++ libgnomeui-2.12.0/doc/reference/Makefile.in	2006-01-10 01:39:23.000000000 -0500
@@ -231,8 +231,8 @@
 
 # CFLAGS and LDFLAGS for compiling scan program. Only needed if your app/lib
 # contains GtkObjects/GObjects and you want to document signals and properties.
-INCLUDES = -I$(top_builddir) -I$(top_srcdir) $(LIBGNOMEUI_CFLAGS)
-GTKDOC_LIBS = $(top_builddir)/libgnomeui/libgnomeui-2.la
+INCLUDES = -I$(top_builddir) -I$(top_srcdir) $(LIBGNOMEUI_CFLAGS) $(CFLAGS) $(CPPFLAGS)
+GTKDOC_LIBS = $(top_builddir)/libgnomeui/libgnomeui-2.la $(LIBGNOMEUI_LIBS) $(SM_LIBS) $(LDFLAGS)
 
 # Extra options to supply to gtkdoc-mkdb.
 MKDB_OPTIONS = --output-format=xml
diff -Nurd -x'*~' libgnomeui-2.12.0.orig/file-chooser/sucky-desktop-item.c libgnomeui-2.12.0/file-chooser/sucky-desktop-item.c
--- libgnomeui-2.12.0.orig/file-chooser/sucky-desktop-item.c	2005-07-11 16:04:12.000000000 -0400
+++ libgnomeui-2.12.0/file-chooser/sucky-desktop-item.c	2006-01-10 02:00:55.000000000 -0500
@@ -67,7 +67,12 @@
 
 #define sure_string(s) ((s)!=NULL?(s):"")
 
+#if defined(__APPLE__) && defined(HAVE_NSGETENVIRON) && defined(HAVE_CRT_EXTERNS_H)
+  #include <crt_externs.h>
+  #define environ (*_NSGetEnviron())
+#else
 extern char **environ;
+#endif
 
 struct _SuckyDesktopItem {
 	int refcount;
diff -Nurd -x'*~' libgnomeui-2.12.0.orig/libgnomeui/Makefile.in libgnomeui-2.12.0/libgnomeui/Makefile.in
--- libgnomeui-2.12.0.orig/libgnomeui/Makefile.in	2005-09-06 04:38:32.000000000 -0400
+++ libgnomeui-2.12.0/libgnomeui/Makefile.in	2006-01-10 01:39:23.000000000 -0500
@@ -388,7 +388,7 @@
 
 
 LDADD = \
-	libgnomeui-2.la $(LIBGNOMEUI_LIBS)
+	libgnomeui-2.la $(LIBGNOMEUI_LIBS) $(SM_LIBS)
 
 
 pkgconfigdir = $(libdir)/pkgconfig
diff -Nurd -x'*~' libgnomeui-2.12.0.orig/ltmain.sh libgnomeui-2.12.0/ltmain.sh
--- libgnomeui-2.12.0.orig/ltmain.sh	2005-07-09 15:14:44.000000000 -0400
+++ libgnomeui-2.12.0/ltmain.sh	2006-01-10 01:39:23.000000000 -0500
@@ -3883,6 +3883,11 @@
 	  eval test_cmds=\"$archive_expsym_cmds\"
 	  cmds=$archive_expsym_cmds
 	else
+	  if test "x$verstring" = "x0.0"; then
+            tmp_verstring=
+          else
+            tmp_verstring="$verstring"
+          fi
 	  eval test_cmds=\"$archive_cmds\"
 	  cmds=$archive_cmds
 	  fi
@@ -5341,10 +5346,6 @@
 
 # Directory that this library needs to be installed in:
 libdir='$install_libdir'"
-	  if test "$installed" = no && test "$need_relink" = yes; then
-	    $echo >> $output "\
-relink_command=\"$relink_command\""
-	  fi
 	done
       fi
 
