diff -Nurd -x'*~' at-spi-1.20.1.orig/Makefile.in at-spi-1.20.1/Makefile.in
--- at-spi-1.20.1.orig/Makefile.in	2007-10-15 09:16:47.000000000 -0400
+++ at-spi-1.20.1/Makefile.in	2007-11-04 17:57:31.000000000 -0500
@@ -286,7 +286,7 @@
 sharedstatedir = @sharedstatedir@
 sysconfdir = @sysconfdir@
 target_alias = @target_alias@
-SUBDIRS = docs idl libspi login-helper registryd atk-bridge cspi pyatspi test po
+SUBDIRS = docs idl libspi login-helper registryd atk-bridge cspi test po
 pkgconfigdir = $(libdir)/pkgconfig
 pkgconfig_DATA = libspi-1.0.pc cspi-1.0.pc libloginhelper-1.0.pc
 DISTCHECK_CONFIGURE_FLAGS = --enable-gtk-doc
diff -Nurd -x'*~' at-spi-1.20.1.orig/atk-bridge/Makefile.in at-spi-1.20.1/atk-bridge/Makefile.in
--- at-spi-1.20.1.orig/atk-bridge/Makefile.in	2007-10-15 09:16:45.000000000 -0400
+++ at-spi-1.20.1/atk-bridge/Makefile.in	2007-12-01 16:37:25.000000000 -0500
@@ -289,6 +289,7 @@
 	   $(WARN_CFLAGS) \
 	   $(ATK_BRIDGE_CFLAGS) \
 	   -DG_LOG_DOMAIN=\"atk-bridge\" \
+	   $(X_CFLAGS) \
 	   $(NULL)
 
 DEPS = \
diff -Nurd -x'*~' at-spi-1.20.1.orig/configure at-spi-1.20.1/configure
--- at-spi-1.20.1.orig/configure	2007-10-15 09:16:44.000000000 -0400
+++ at-spi-1.20.1/configure	2007-11-04 17:57:31.000000000 -0500
@@ -5031,8 +5031,7 @@
 
   if test "$PYTHON" = :; then
       { { echo "$as_me:$LINENO: error: no suitable Python interpreter found" >&5
-echo "$as_me: error: no suitable Python interpreter found" >&2;}
-   { (exit 1); exit 1; }; }
+echo "$as_me: error: no suitable Python interpreter found" >&2;} }
   else
 
 
@@ -25787,125 +25786,6 @@
 
 
 
-{ echo "$as_me:$LINENO: checking for poptGetContext in -lpopt" >&5
-echo $ECHO_N "checking for poptGetContext in -lpopt... $ECHO_C" >&6; }
-if test "${ac_cv_lib_popt_poptGetContext+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpopt  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char poptGetContext ();
-int
-main ()
-{
-return poptGetContext ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
-  ac_cv_lib_popt_poptGetContext=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_lib_popt_poptGetContext=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_popt_poptGetContext" >&5
-echo "${ECHO_T}$ac_cv_lib_popt_poptGetContext" >&6; }
-if test $ac_cv_lib_popt_poptGetContext = yes; then
-  POPT_LIBS="-lpopt"
-else
-  { { echo "$as_me:$LINENO: error: popt is required to build at-spi.
-You can download the latest version from ftp://ftp.rpm.org/pub/rpm/dist/rpm-4.0.x/" >&5
-echo "$as_me: error: popt is required to build at-spi.
-You can download the latest version from ftp://ftp.rpm.org/pub/rpm/dist/rpm-4.0.x/" >&2;}
-   { (exit 1); exit 1; }; }
-fi
-
-
-{ echo "$as_me:$LINENO: checking for POPT_ARG_FLOAT in popt.h" >&5
-echo $ECHO_N "checking for POPT_ARG_FLOAT in popt.h... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <popt.h>
-#ifndef POPT_ARG_FLOAT
-#error popt too old
-#endif
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
-	{ echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
-	{ { echo "$as_me:$LINENO: error: A newer version of popt is required to build at-spi.
-You can download the latest version from ftp://ftp.rpm.org/pub/rpm/dist/rpm-4.0.x/" >&5
-echo "$as_me: error: A newer version of popt is required to build at-spi.
-You can download the latest version from ftp://ftp.rpm.org/pub/rpm/dist/rpm-4.0.x/" >&2;}
-   { (exit 1); exit 1; }; }
-
-fi
-
-rm -f conftest.err conftest.$ac_ext
 
 #libtool option to strip symbols starting with cspi
 #
diff -Nurd -x'*~' at-spi-1.20.1.orig/libspi/Makefile.in at-spi-1.20.1/libspi/Makefile.in
--- at-spi-1.20.1.orig/libspi/Makefile.in	2007-10-15 09:16:46.000000000 -0400
+++ at-spi-1.20.1/libspi/Makefile.in	2007-12-01 16:37:43.000000000 -0500
@@ -297,7 +297,8 @@
            -I$(top_builddir)	\
            $(LIBSPI_DEBUG_CFLAGS)	\
            $(WARN_CFLAGS)	\
-           $(LIBSPI_CFLAGS)
+           $(LIBSPI_CFLAGS)	\
+	   $(X_CFLAGS)
 
 libspi_la_LDFLAGS = @LT_VERSION_INFO@ -no-undefined
 libspi_la_LIBADD = $(LIBSPI_LIBS) $(XTST_LIBS)
