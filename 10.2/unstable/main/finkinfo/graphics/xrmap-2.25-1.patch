--- xrmap-2.25/Makefile.noimake.bak	2003-03-26 22:27:34.000000000 -0800
+++ xrmap-2.25/Makefile.noimake	2003-03-26 22:30:51.000000000 -0800
@@ -6,9 +6,10 @@
 PRINT_CMD="lpr -Plocal"
 EDITOR="emx"
 MUSICPLAYER="timidity -ig"
+MANDIR=$(X11DIR)/man/man1
 
-CCOPTIONS=-O6 -g -Wall -DZLIB -DSHAREDIR=\"$(DESTDIR)$(SHAREDIR)\" -DPS_VIEWER=\"$(PS_VIEWER)\" -DIM_VIEWER=\"$(IM_VIEWER)\" -DHTML_VIEWER=\"$(HTML_VIEWER)\" -DPRINT_CMD=\"$(PRINT_CMD)\" -DEDITOR=\"$(EDITOR)\" -DMUSICPLAYER=\"$(MUSICPLAYER)\"
-LDOPTIONS=-O6 -g -Wall  -lXpm -lX11 -lz -lm -L/usr/X11R6/lib
+CCOPTIONS=-O6 -g -Wall -DZLIB -DSHAREDIR=\"$(DESTDIR)$(SHAREDIR)\" -DPS_VIEWER=\"$(PS_VIEWER)\" -DIM_VIEWER=\"$(IM_VIEWER)\" -DHTML_VIEWER=\"$(HTML_VIEWER)\" -DPRINT_CMD=\"$(PRINT_CMD)\" -DEDITOR=\"$(EDITOR)\" -DMUSICPLAYER=\"$(MUSICPLAYER)\" $(EXTRA_CFLAGS)
+LDOPTIONS=-O6 -g -Wall  -lXpm -lX11 -lz -lm -L/usr/X11R6/lib $(LDFLAGS)
 
 all: xrmap.o
 	gcc $(LDOPTIONS) -o xrmap xrmap.o  
@@ -21,10 +22,10 @@
 	gcc $(CCOPTIONS) -c xrmap.c
 
 install:
-	install -c -s xrmap $(X11DIR)/bin
+	install -c -s xrmap $(DESTDIR)$(X11DIR)/bin
 	cd editkit ; make install
-	mkdir -p $(SHAREDIR)
-	cp -f Xrmaprc Locations $(SHAREDIR)
+	mkdir -p $(DESTDIR)$(SHAREDIR)
+	cp -f Xrmaprc Locations $(DESTDIR)$(SHAREDIR)
 	cd postscript ; rm -f *~
 	cp -fR postscript  $(DESTDIR)$(SHAREDIR)
 	if [ -d i18n ] ; then cd i18n ; rm -f *~ ; fi
@@ -33,8 +34,9 @@
 	mkdir -p $(DESTDIR)$(SHAREDIR)/doc
 	cp -f CHANGES EXAMPLE.rc INSTALL LICENSE MAPEDIT README \
 		midi_cfg/README.midi TODO WARNING $(DESTDIR)$(SHAREDIR)/doc
-	cp -f xrmap.man $(X11DIR)/man/man1/xrmap.1x
-	if [ -r $(X11DIR)/xrmap.1x.gz ] ; \
+	mkdir -p $(DESTDIR)$(MANDIR)
+	cp -f xrmap.man $(DESTDIR)$(MANDIR)/xrmap.1x
+	if [ -r $(DESTDIR)$(X11DIR)/xrmap.1x.gz ] ; \
 	   then gzip -f $(DESTDIR)$(MANDIR)/xrmap.1x ; fi
 	cat WARNING
 
--- xrmap-2.25/editkit/Makefile.bak	2003-03-26 22:31:05.000000000 -0800
+++ xrmap-2.25/editkit/Makefile	2003-03-26 22:32:44.000000000 -0800
@@ -14,8 +14,10 @@
 # TLL for Terry Loveall personal settings
 
 SHARE_DIR=/usr/share/editkit
+BINDIR=/usr/bin
+XBINDIR=/usr/X11R6/bin
 
-CFLAGS = -O2 -fomit-frame-pointer -pipe -Wall -DTHREED -DNOEDIT -DGREEK -DJUSTIFY -DSHARE_DIR="\"$(SHARE_DIR)\""
+CFLAGS = -O2 -fomit-frame-pointer -pipe -Wall -DTHREED -DNOEDIT -DGREEK -DJUSTIFY -DSHARE_DIR="\"$(SHARE_DIR)\"" $(EXTRA_CFLAGS)
 
 #CFLAGS = -O2 -fomit-frame-pointer -pipe -Wall -DMINIMAL -DTWOBUTN -DVERTCURS -DTLL
 
@@ -60,19 +62,19 @@
 	gcc $(CFLAGS) -DEMACS -o emx.o -c x11.c
 
 install:
-	if [ -x edt ]; then cp -f edt /usr/bin; fi
-	if [ -x emt ]; then cp -f emt /usr/bin; fi
-	if [ -x edx ]; then cp -f edx /usr/X11R6/bin; fi
-	if [ -x emx ]; then cp -f emx /usr/X11R6/bin; fi
-	mkdir -p $(SHARE_DIR)
-	cp -f rc.example $(SHARE_DIR)/rc.common
-	cp -f README $(SHARE_DIR)
-	if [ -x edt ] || [ -x edx ]; then cp -f MANUAL.wo*ar $(SHARE_DIR); fi
-	if [ -x emt ] || [ -x emx ]; then cp -f MANUAL.emacs $(SHARE_DIR); fi
-	if [ -x edt ]; then cd $(SHARE_DIR); ln -sf rc.common edtrc; fi 
-	if [ -x emt ]; then cd $(SHARE_DIR); ln -sf rc.common emtrc; fi 
-	if [ -x edx ]; then cd $(SHARE_DIR); ln -sf rc.common edxrc; fi 
-	if [ -x emx ]; then cd $(SHARE_DIR); ln -sf rc.common emxrc; fi 
+	if [ -x edt ]; then cp -f edt $(DESTDIR)$(BINDIR); fi
+	if [ -x emt ]; then cp -f emt $(DESTDIR)$(BINDIR); fi
+	if [ -x edx ]; then cp -f edx $(DESTDIR)$(XBINDIR); fi
+	if [ -x emx ]; then cp -f emx $(DESTDIR)$(XBINDIR); fi
+	mkdir -p $(DESTDIR)$(SHARE_DIR)
+	cp -f rc.example $(DESTDIR)$(SHARE_DIR)/rc.common
+	cp -f README $(DESTDIR)$(SHARE_DIR)
+	if [ -x edt ] || [ -x edx ]; then cp -f MANUAL.wo*ar $(DESTDIR)$(SHARE_DIR); fi
+	if [ -x emt ] || [ -x emx ]; then cp -f MANUAL.emacs $(DESTDIR)$(SHARE_DIR); fi
+	if [ -x edt ]; then cd $(DESTDIR)$(SHARE_DIR); ln -sf rc.common edtrc; fi 
+	if [ -x emt ]; then cd $(DESTDIR)$(SHARE_DIR); ln -sf rc.common emtrc; fi 
+	if [ -x edx ]; then cd $(DESTDIR)$(SHARE_DIR); ln -sf rc.common edxrc; fi 
+	if [ -x emx ]; then cd $(DESTDIR)$(SHARE_DIR); ln -sf rc.common emxrc; fi 
 
 clean:
 	-rm -f *.o *~ edt emt edx emx
