Package: gfortran
Version: 20050320
Revision: 1
Source: ftp://gcc.gnu.org/pub/gcc/snapshots/4.1-%v/gcc-4.1-%v.tar.bz2
Source-MD5: 4b761fee9250f511da22528b55cec69f
NoSetCPPFLAGS: True
NoSetLDFLAGS: True
SourceDirectory: gcc-4.1-%v
Depends: gmp-shlibs (>= 4.1.3-11), odcctools (>= 528-20041018), %N-shlibs
BuildDepends: gmp (>= 4.1.3-11)
BuildConflicts: autogen-dev
ConfigureParams: --prefix=%p/lib/gfortran --enable-languages=c,f95 --infodir='${prefix}/share/info' --with-gmp=%p --with-as=%p/lib/odcctools/bin/as --with-ld=%p/lib/odcctools/bin/ld --with-included-gettext
PatchScript: <<
 #!/bin/sh
 # make sure odcctools libtool being used.
 perl -pi -e 's,/usr/bin/libtool,%p/lib/odcctools/bin/libtool,;' gcc/config/darwin.h
<<
CompileScript: <<
 #!/bin/sh
 ulimit -S -s unlimited
 mkdir darwin 
 cd darwin
 ../configure %c
 make
<<
InstallScript: <<
 #!/bin/sh
 cd darwin
 make install DESTDIR=%d
 mkdir -p %i/bin
 darwinvers=`uname -r`
 cd %i/lib/gfortran/lib
 ln -s %p/lib/gfortran/lib/gcc/powerpc-apple-darwin${darwinvers}/const/crt2.o crt2.o
 cd %i/bin
 ln -s %p/lib/gfortran/bin/gfortran gfortran
<<
SplitOff: <<
  Package: %N-shlibs
  Replaces: gfortran (<= 20050320-1)
  Description: Shared libraries for gfortran
  DocFiles: gcc/COPYING gcc/COPYING.LIB
  Homepage: http://gcc.gnu.org/
  Files: <<
    lib/gfortran/lib/libgcc_s.1.0.dylib
    lib/gfortran/lib/libgfortran.0.dylib
    lib/gfortran/lib/libgfortran.0.0.0.dylib
  <<
  Shlibs: <<
    %p/lib/gfortran/lib/libgfortran.0.dylib 1.0.0 %n (>= 20050320-1)
    %p/lib/gfortran/lib/libgcc_s.1.0.dylib 1.0.0 %n (>= 20050320-1)
  <<
<<
License: GPL
Description: GNU Fortran 95 compiler for GCC version 4.1
DescDetail: <<
 The GNU Fortran 95 project, or gfortran, is developing a Fortran 95 
 compiler front end, as well as runtime libraries, for GCC,
 the GNU Compiler Collection.
<<
Homepage: http://gcc.gnu.org/
Maintainer: Jeffrey Whitaker <jswhit@fastmail.fm>
