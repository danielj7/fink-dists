Package: hercules 
Version: 3.02 
Revision: 10
###
Source: http://www.conmicro.cx/hercules/%n-%v.tar.gz
Source-MD5: d765ad315a1eba281bd816e63d854dc5 
Depends: pth-shlibs, libgpg-error-shlibs, libgcrypt-shlibs (>= 1.2.0-2), bzip2-shlibs, gzip, gettext, libiconv, %n-modules, %n-bin
BuildDepends: pth, gawk, libgpg-error-dev, libgcrypt (>= 1.2.0-2), bison (>= 2.0-11), bzip2-dev, gettext-dev, libiconv-dev 
###
###
DocFiles: INSTALL.txt ABOUT-NLS README* CHANGES hercules.cnf

###
###
SetLDFLAGS: -L%p/lib
ConfigureParams: --with-libgcrypt-prefix=%p --with-libiconv-prefix=%p --with-libintl-prefix=%p --with-pic --enable-multi-cpu=4 --enable-cckd-bzip2 --enable-het-bzip2 --disable-optimization --mandir=%p/share/man --infodir=%p/share/info --with-html-dir=%p/share/doc

PatchScript: <<
mv INSTALL INSTALL.txt
<<

CompileScript: <<
#! /bin/sh -ex
./configure %c
perl -pi.bak -e 's|-flat_namespace -undefined suppress|-twolevel_namespace -undefined dynamic_lookup|g' libtool 
perl -pi.bak -e 's|allow_undefined=no|allow_undefined=yes|g' libtool
perl -pi.bak -e 's|-no-undefined|-bind_at_load|g' Makefile
make
<<

InstallScript: <<
make install DESTDIR=%d
<<

SplitOff: <<
Package: %N-modules
Depends: pth-shlibs, libgpg-error-dev, libgcrypt-shlibs (>= 1.2.0-2), bzip2-shlibs, gzip, gettext, libiconv 
Files: <<
	lib/hercules/*.so
	lib/hercules/*.la
	<<
	
DocFiles: INSTALL.txt ABOUT-NLS README* CHANGES
Description: Hercules dynamic feature modules 
DescDetail: <<
	Dynamic modules that load up to simulate certain features
	<<
<<

SplitOff2: <<
Package: %N-bin
Depends: %N-modules
Files: <<
	bin/*
	<<

DocFiles: INSTALL.txt ABOUT-NLS README* CHANGES hercules.cnf
Description: Hercules binaries 

DescDetail: <<
	Everything needed to run Hercules.
	A sample hercules.cnf is provided in your doc directory for Hercules
	More can be read and found at:
	http://www.conmicro.cx/hercules/hercconf.html
<<

<<


Description: System/370, ESA/390, z/Architecture Emulator 
DescDetail: <<
Hercules is an open source software implementation of the mainframe 
System/370 and ESA/390 architectures, in addition to the new 
64-bit z/Architecture. Hercules runs under Linux, 
Windows 98, Windows NT, Windows 2000, Windows XP, 
and Mac OS X 10.2 and later.

Hercules was created by Roger Bowler and is maintained by Jay Maynard. 
Jan Jaeger designed and implemented many of the advanced features of
Hercules, including dynamic reconfiguration, integrated console, 
interpretive execution and z/Architecture support. 
<<
###
License: OSI-Approved 
Maintainer: Darian Lanx <dmalloc@users.sourceforge.net>
Homepage: http://www.conmicro.cx/hercules/ 
