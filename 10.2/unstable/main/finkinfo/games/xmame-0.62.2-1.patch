--- xmame-0.62.2/makefile.unix	Thu Nov 14 16:42:47 2002
+++ xmame-0.62.2-patched/makefile.unix	Fri Jan 17 16:09:22 2003
@@ -43,7 +43,7 @@
 
 # *** Choose your compiler
 # Use gcc if available
-CC	= gcc
+CC	= gcc2
 # otherwise try the default cc
 # CC    = cc
 # Support for the Intel C++ Compiler is new and experimental.  Be sure
@@ -88,7 +88,7 @@
 #   causing narc (and possibly other games) to segfault.
 #
 ### for normal optimization, full warnings
-CFLAGS    = -O -Wall
+# CFLAGS    = -O -Wall
 ### for common optimizations, full warnings except unused vars
 # CFLAGS    = -O2 -Wall -Wno-unused
 ### this should work with all compilers 
@@ -98,7 +98,7 @@
 #  -fstrength-reduce -fomit-frame-pointer -ffast-math -malign-functions=2 \
 #  -malign-jumps=2 -malign-loops=2
 ### for Linux/PowerPC use following opts
-# CFLAGS    = -O -Wall  -Wno-unused -funroll-loops\
+CFLAGS    = -O3 -Wall  -Wno-unused -funroll-loops -no-cpp-precomp\
 #  -fstrength-reduce -fomit-frame-pointer -ffast-math -fsigned-char
 ### for OpenStep/Intel use following opts
 # CFLAGS    = -O -Wall -Wno-unused -finline-functions -ffast-math \
@@ -138,13 +138,13 @@
 # *** Choose your linker & linker flags (some OSes need native linker
 # instead GNU one)
 # normal
-LD	= $(CC) -Wl,-s
+# LD	= $(CC) -Wl,-s
 # for the Intel C++ Compiler -- expect large link time due to -ipo optimization
 # LD	= $(CC) -Wl,-s -ipo -ipo_obj
 # to profile with gcc and gprof
 # LD	= $(CC) -pg
 # no profiling (less strace output), but with debug info
-# LD	= $(CC)
+LD	= $(CC)
 # for debugging only, only works with gnu-binutils !!
 # LD	= $(CC) -Wl,-warn-common
 # for IRIX R5+K MIPSpro, optimization at link time, takes nearly a gig of 
@@ -157,7 +157,7 @@
 # *** Does your platform have a separate libm?  Only comment this out if you
 # have maths libraries included within libc.  This is very rare; you will
 # probably only need it for OpenStep and BeOS systems.
-SEPARATE_LIBM = 1
+# SEPARATE_LIBM = 1
 
 # *** Does your platform have ranlib (leave this untouched unless you are
 # using irix or Unixware 7 or the Intel C++ Compiler)
@@ -182,8 +182,8 @@
 # *** Extra include and or library paths, sometimes needed for zlib,
 # with suse linux -L/usr/X11R6/lib is needed for example,
 # and with unixware7 -lsocket is needed
-# LIBS     = -L/usr/X11R6/lib -L/usr/local/lib
-# INCLUDES = -I/usr/X11R6/include -I/usr/local/include
+LIBS     = -L/usr/X11R6/lib -L@FINKPREFIX@/lib
+INCLUDES = -I/usr/X11R6/include -I@FINKPREFIX@/include
 
 # *** If your system doesn't have zlib, or your systems zlib is giving you
 # troubles, you can use the one distributed with xmame.
@@ -206,10 +206,10 @@
 # and binary distribution ( if you want to... )
 # ( only needed to install, not to compile... )
 ifndef PREFIX
-PREFIX = /usr/local
+PREFIX = @FINKPREFIX@
 endif
 BINDIR = $(PREFIX)/bin
-MANDIR = $(PREFIX)/man/man6
+MANDIR = $(PREFIX)/share/man/man6
 
 # *** xmameroot, this is the default rompath, place where the highscores are
 # stored, global rc location etc. Since most of these are configurable through
@@ -222,7 +222,7 @@
 ##############################################################################
 
 ### i386 + gnu-asm
-MY_CPU = i386
+# MY_CPU = i386
 ### i386 no asm -- needed for the Intel C++ Compiler which does not fully
 # understand gcc's inline assembly syntax (you may still enable X86_ASM_68000
 # etc. which are assembled by NASM).  You may also need to use this for BeOS.
@@ -234,7 +234,7 @@
 ### m68k
 # MY_CPU = m68k
 ### generic risc (powerpc, sparc, hppa, ibm)
-# MY_CPU = risc
+MY_CPU = risc
 ### generic risc, lsb-first (RISC (ultrix machines) & PlayStation2)
 # MY_CPU = risc_lsb
 ### mips (generic risc + SGI compiler bug workarounds)
@@ -245,7 +245,7 @@
 ##############################################################################
 
 ### Linux 
-ARCH  = linux
+# ARCH  = linux
 ### FreeBSD
 # ARCH  = freebsd
 ### NetBSD
@@ -269,7 +269,7 @@
 ### BeOS on Intel
 # ARCH = beos
 ### generic unix, no sound
-# ARCH  = generic
+ARCH  = generic
 
 # *) For IRIX 6.5 or higher add -DHAVE_SNPRINTF to CFLAGS.irix(_al) in
 # src/unix/Makefile
@@ -298,7 +298,7 @@
 
 # *** any additonal sound drivers you want to include, besided the native one
 # sound driver for your system
-# SOUND_ESOUND = 1
+SOUND_ESOUND = 1
 # SOUND_ALSA = 1
 # SOUND_ARTS_TEIRA = 1
 # SOUND_ARTS_SMOTEK = 1
@@ -338,7 +338,7 @@
 
 # *** uncomment any extensions you wish to use.
 # MIT-Shared Memory X Extensions, comment the
-X11_MITSHM = 1
+# X11_MITSHM = 1
 # Use Xv extension for hardware scaling
 # X11_XV = 1
 # XFree86 DGA
@@ -420,12 +420,12 @@
 # And choose elf / or aout
 # ELF settings: no leading underscores + elf object format Tested with
 # linux/i386. Also for e.g. Solaris/x86
-ASM_STRIP = src/unix/contrib/porting/strip_
-NASM_FMT  = -f elf
+# ASM_STRIP = src/unix/contrib/porting/strip_
+# NASM_FMT  = -f elf
 # aout settings: with leading underscores + aout object format. Tested with
 # netBSD i386. Also for older linux installs, freebsd and others.
-# ASM_STRIP = true  # no strip command
-# NASM_FMT  = -f aoutb
+ASM_STRIP = true  # no strip command
+NASM_FMT  = -f aoutb
 
 # Enable experimental network support.  See src/unix/doc/multiplayer-readme.txt
 # for more information.
