Package: grib-api
Version: 1.9.16
Revision: 1
Description: ECMWF GRIB API
Homepage: http://www.ecmwf.int/products/data/software/grib_api.html
License: LGPL
Maintainer: Remko Scharroo <remkos@users.sourceforge.net>

Source:  http://www.ecmwf.int/products/data/software/download/software_files/grib_api-%v.tar.gz
Source2: http://www.ecmwf.int/publications/manuals/grib_api/grib_api_ref.pdf
PatchFile: %n.patch
Source-MD5:  490cda08585e263d9f13daed4e7b688c
Source2-MD5: d5be15d4fd962ff3fc017ae88bc9a051
PatchFile-MD5: e4499f13de7e46c59cd6a7d5db3f707f

SourceDirectory: grib_api-%v
BuildDependsOnly: true
BuildDepends: libjasper.1, libpng15, fink-package-precedence, libopenjpeg
Depends: libjasper.1-shlibs, libpng15-shlibs, libopenjpeg-shlibs
NoSetCPPFLAGS: true
NoSetLDFLAGS: true

ConfigureParams: --prefix=%p --with-jasper=%p --with-png-support
CompileScript: <<
	%{default_script}	
	fink-package-precedence .
<<
InfoTest: <<
	TestScript: <<
		ln -s libgrib_api.dylib src/libgrib_api.1.dylib
		DYLD_LIBRARY_PATH=%b/src make check || exit 2
	<<
<<

InstallScript: <<
  cp -p ../grib_api_ref.pdf .
  rm -rf examples/F90
  %{default_script}
  mv %i/lib/libgrib_api{,.1}.dylib
  ln -s libgrib_api.1.dylib %i/lib/libgrib_api.dylib
<<
DocFiles: ChangeLog LICENSE README AUTHORS COPYING.LESSER NEWS examples html grib_api_ref.pdf

SplitOff: <<
  Package: %N-shlibs
  Suggests: %N-bin
  Files: lib/*.1.dylib share/grib-api
  DocFiles: ChangeLog LICENSE README AUTHORS COPYING.LESSER NEWS
  Description: ECMWF GRIB API, shared libraries and files
  Shlibs: <<
    %p/lib/libgrib_api.1.dylib 1.9.0 %n (>= 1.9.16-1)
  <<
<<
SplitOff2: <<
  Package: %N-bin
  Depends: %N-shlibs
  Files: bin
  DocFiles: ChangeLog LICENSE README AUTHORS COPYING.LESSER NEWS
  Description: ECMWF GRIB API, user programs
<<

DescDetail: <<
The ECMWF GRIB API is an application program interface accessible from
C and FORTRAN programs developed for encoding and decoding WMO FM-92
GRIB edition 1 and edition 2 messages. A useful set of command line
tools is also provided to give quick access to grib messages.
<<
