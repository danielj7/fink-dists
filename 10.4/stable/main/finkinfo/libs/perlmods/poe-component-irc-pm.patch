diff -Nurd -x'*~' POE-Component-IRC-6.70.orig/lib/POE/Component/IRC/State.pm POE-Component-IRC-6.70/lib/POE/Component/IRC/State.pm
--- POE-Component-IRC-6.70.orig/lib/POE/Component/IRC/State.pm	2011-08-01 23:39:06.000000000 -0400
+++ POE-Component-IRC-6.70/lib/POE/Component/IRC/State.pm	2011-09-08 13:05:59.000000000 -0400
@@ -469,7 +469,7 @@
         }
 
         my $unick    = uc_irc($nick, $map);
-        $status      = '' if !length $status;
+        $status      = '' if !defined $status;
         my $whatever = '';
         my $existing = $self->{STATE}{Nicks}{$unick}{CHANS}{$uchan} || '';
 
diff -Nurd -x'*~' POE-Component-IRC-6.70.orig/t/03_subclasses/06_state_nick_sync.t POE-Component-IRC-6.70/t/03_subclasses/06_state_nick_sync.t
--- POE-Component-IRC-6.70.orig/t/03_subclasses/06_state_nick_sync.t	2011-08-01 23:39:06.000000000 -0400
+++ POE-Component-IRC-6.70/t/03_subclasses/06_state_nick_sync.t	2011-09-08 13:07:42.000000000 -0400
@@ -98,11 +98,9 @@
         $bot2->yield(join => "#testchannel");
     }
 
-
     if ($irc == $bot2 && keys %{ $bot2->channels } == 1) {
         is($irc->nick_info($bot1->nick_name()), undef,
             $bot2->nick_name()." doesn't know about ".$bot1->nick_name." yet");
-        $bot2->yield(join => "#testchannel2");
     }
 }
 
@@ -126,6 +124,7 @@
         $heap->{nick_sync}++;
         if ($heap->{nick_sync} == 1) {
             is($chan, '#testchannel', 'Channel from irc_nick_sync is correct');
+            $bot2->yield(join => "#testchannel2");
         }
         if ($heap->{nick_sync} == 2) {
             is($chan, '#testchannel2', 'Channel from irc_nick_sync is correct');
