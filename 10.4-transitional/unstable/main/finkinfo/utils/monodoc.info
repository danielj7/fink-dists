Package: monodoc
Version: 1.0.7
Revision: 1

Source: http://go-mono.com/sources/%n/%n-%v.tar.gz
Source-MD5: 10689c70d273b56773fae216d96e6396

Depends: gtk-sharp (>= 1.0.10-1), mono (>= 1.1.8.3-1)
BuildDepends: fink (>= 0.22.2-1), gtk-sharp (>= 1.0.10-1), mono-dev (>= 1.1.8.3-1)
BuildConflicts: monodoc (<< 1.0.2-1)

SetMAKEFLAGS: -j1
NoSetMAKEFLAGS: true

ConfigureParams: --mandir=%p/share/man --disable-dependency-tracking
CompileScript: <<
#!/bin/sh -ex

  export lt_cv_sys_max_cmd_len=65536
  export MONO_PATH=%b/browser:$MONO_PATH
  ./configure %c
  make
<<
InstallScript: <<
#!/bin/sh -ex

  export DYLD_FALLBACK_LIBRARY_PATH="%i/lib:/usr/lib"
  make install DESTDIR="%d"
  rm -rf %i/lib/monodoc/sources/gtk-sharp*
  rm -rf %i/lib/monodoc/sources/gecko-sharp*
  sed -e 's,@prefix@,%p,g' -e 's,@exec_prefix@,%p/bin,g' -e 's,@monodocdir@,%p/lib/monodoc,g' monodoc.in > %i/bin/monodoc
  chmod 755 %i/bin/monodoc
<<

Description: Mono class documentation and browser
DescDetail: <<
This is the MonoDoc module.  It contains the documentation for
the Mono class libraries, tools to produce and edit the
documentation, and a documentation browser.

The documentation browser consists of a library and two
front-ends: a Gtk#-based one, and an ASP.NET-based version.

This set of tools is under heavy development, please report any bugs 
in the Mono/Doctools module of Ximian Bugzilla (bugzilla.ximian.com)
<<
PreInstScript: <<
  if [ -f "%p/var/lib/dpkg/info/monodoc.postrm" ] && [ `grep -c upgrade "%p/var/lib/dpkg/info/monodoc.postrm"` = 0 ]; then
    sudo echo "#!/bin/sh" > "%p/var/lib/dpkg/info/monodoc.postrm"
    sudo echo "exit 0" >> "%p/var/lib/dpkg/info/monodoc.postrm"
  fi
<<
PostInstScript: <<
  [ -x "%p/bin/monodoc" ] && [ -d "%p/lib/monodoc" ] && "%p/bin/monodoc" --make-index >/dev/null 2>&1 || :
<<
PostRmScript: <<
  if [ "upgrade" != "$1" ]; then
    rm -rf %p/lib/monodoc
  fi
<<
License: GPL
Maintainer: Benjamin Reed <monodoc@fink.racoonfink.com>
Homepage: http://www.go-mono.org/
