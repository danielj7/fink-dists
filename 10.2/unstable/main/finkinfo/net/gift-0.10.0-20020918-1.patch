diff -ruN gift-0.10.0-20020918/OpenFT/html.c gift-0.10.0-20020918.new/OpenFT/html.c
--- gift-0.10.0-20020918/OpenFT/html.c	Mon Sep 16 23:41:52 2002
+++ gift-0.10.0-20020918.new/OpenFT/html.c	Thu Sep 19 17:26:30 2002
@@ -317,9 +317,12 @@
 	if (!file || !SHARE_DATA(file))
 		return TRUE;
 
-	encoded = url_encode (SHARE_DATA(file)->hpath);
+       assert (SHARE_DATA(file)->hpath != NULL);
 
-	fprintf (f, "<tr><td>%lu</td><td><a href='%s'>%s</a></td></tr>\n",
+       if (!(encoded = url_encode (SHARE_DATA(file)->hpath)))
+               return TRUE;
+
+	fprintf (f, "<tr><td>%llu</td><td><a href='%s'>%s</a></td></tr>\n",
 	         file->size, encoded, SHARE_DATA(file)->hpath);
 
 	free (encoded);
diff -ruN gift-0.10.0-20020918/OpenFT/share_host.c gift-0.10.0-20020918.new/OpenFT/share_host.c
--- gift-0.10.0-20020918/OpenFT/share_host.c	Wed Sep 18 21:36:51 2002
+++ gift-0.10.0-20020918.new/OpenFT/share_host.c	Wed Sep 18 21:38:29 2002
@@ -224,7 +224,7 @@
 	if ((ret = dbp->set_cachesize (dbp, 0, ((nrec / 40) + 20) * 1024, 0)))
 		TRACE (("DB->set_cachesize failed: %s", db_strerror (ret)));
 
-	if ((ret = dbp->open (dbp, path, NULL, type, DB_CREATE, 0664)))
+	if ((ret = dbp->open (dbp, path, NULL, NULL, type, DB_CREATE, 0664)))
 	{
 		TRACE (("DB->open failed: %s", db_strerror (ret)));
 
diff -ruN gift-0.10.0-20020918/autogen.macosx.sh gift-0.10.0-20020918.new/autogen.macosx.sh
--- gift-0.10.0-20020918/autogen.macosx.sh	Sat Aug 10 17:07:33 2002
+++ gift-0.10.0-20020918.new/autogen.macosx.sh	Wed Sep 18 21:38:29 2002
@@ -3,8 +3,6 @@
 
 srcdir=`dirname $0`
 PKG_NAME="giFT"
-export LDFLAGS="-ldl -L/sw/lib -lltdl -L../OpenFT/.libs"
-
 DIE=0
 
 (autoconf --version) < /dev/null > /dev/null 2>&1 || {
@@ -50,25 +48,6 @@
   exit 1
 fi
 
-if test -z "$*"; then
-  echo "I am going to run \`configure' with the default arguments."
-  echo "If you wish to pass any other to it, please specify them on the"
-  echo \`$0\'" command line."
-  echo
-  1="ppc"
-  2="--disable-libdl"
-  3="--with-zlib=/sw"
-  echo "Default is:"
-  echo "./configure $*"
-  echo
-else
-  echo "**Warning**: To compile giFT on Mac OS X you must specify"
-  echo "\"ppc\" as the host and "--disable-libdl" as parameters"
-  echo "for configure. Otherwise giFT will not compile."
-  echo
-  echo "Parameters are:"
-  echo "./configure $*"
-fi
 
 case $CC in
 xlc )
diff -ruN gift-0.10.0-20020918/configure.ac gift-0.10.0-20020918.new/configure.ac
--- gift-0.10.0-20020918/configure.ac	Wed Sep 18 21:36:51 2002
+++ gift-0.10.0-20020918.new/configure.ac	Wed Sep 18 21:38:29 2002
@@ -291,8 +291,8 @@
 if test x$use_libdb = xyes
 then
   for dbname in db-4 db4 db-4.0 db; do
-    AC_CHECK_LIB($dbname, db_create_4000,
-                  [ LIBDB_CFLAGS=
+    AC_CHECK_LIB($dbname, db_create,
+                  [ LIBDB_CFLAGS="-I$prefix/include/db4"
   	                LIBDB_LIBS="-l$dbname"
   	                AC_SUBST(LIBDB_CFLAGS)
   	                AC_SUBST(LIBDB_LIBS)
@@ -309,7 +309,7 @@
 dnl Check for the presence of ZLIB libraries and headers
 dnl ###########################################################################
 
-ZLIB_VER=1.1.4
+ZLIB_VER=1.1.3
 
 dnl Default to compiler & linker defaults for files & libraries.
 OPT_ZLIB=
diff -ruN gift-0.10.0-20020918/etc/gift.conf gift-0.10.0-20020918.new/etc/gift.conf
--- gift-0.10.0-20020918/etc/gift.conf	Wed Jul 17 01:51:36 2002
+++ gift-0.10.0-20020918.new/etc/gift.conf	Wed Sep 18 21:38:29 2002
@@ -39,11 +39,12 @@
 # Windows.
 #
 # *nix users: use the extension '.so', or whatever is appropriate for your OS.
+# OSX and Darwin Users: use the extension '.dylib'.
 # Windows users: use the extension '.dll'.
 #
 # Default: none
 #
-plugins = libOpenFT.so
+plugins = libOpenFT.dylib
 
 ###############################################################################
 # DOWNLOAD CONTROLS
diff -ruN gift-0.10.0-20020918/ltmain.patch gift-0.10.0-20020918.new/ltmain.patch
--- gift-0.10.0-20020918/ltmain.patch	Wed Dec 31 19:00:00 1969
+++ gift-0.10.0-20020918.new/ltmain.patch	Wed Sep 18 21:38:29 2002
@@ -0,0 +1,62 @@
+--- ltmain.sh.orig	2002-06-22 21:27:18.000000000 -0400
++++ ltmain.sh	2002-06-22 21:27:52.000000000 -0400
+@@ -1739,7 +1739,7 @@
+ 
+ 	  if test "$installed" = no; then
+ 	    notinst_deplibs="$notinst_deplibs $lib"
+-	    need_relink=yes
++	    need_relink=no
+ 	  fi
+ 
+ 	  if test -n "$old_archive_from_expsyms_cmds"; then
+@@ -1884,7 +1884,11 @@
+ 	      add="-l$name"
+ 	    else
+ 	      # We cannot seem to hardcode it, guess we'll fake it.
+-	      add_dir="-L$libdir"
++	      if test "X$installed" = Xyes; then
++		add_dir="-L$libdir"
++	      else
++		add_dir="-L$DESTDIR$libdir"
++	      fi
+ 	      add="-l$name"
+ 	    fi
+ 
+@@ -4146,12 +4150,21 @@
+ 	esac
+ 
+ 	# Add the libdir to current_libdirs if it is the destination.
++	DESTDIR=
+ 	if test "X$destdir" = "X$libdir"; then
+ 	  case "$current_libdirs " in
+ 	  *" $libdir "*) ;;
+ 	  *) current_libdirs="$current_libdirs $libdir" ;;
+ 	  esac
+ 	else
++	  case "$destdir" in
++	    *"$libdir")
++	      DESTDIR=`$echo "$destdir" | sed -e 's!'"$libdir"'$!!'`
++	      if test "X$destdir" != "X$DESTDIR$libdir"; then
++		DESTDIR=
++	      fi
++	      ;;
++	  esac
+ 	  # Note the libdir as a future libdir.
+ 	  case "$future_libdirs " in
+ 	  *" $libdir "*) ;;
+@@ -4165,6 +4178,7 @@
+ 
+ 	if test -n "$relink_command"; then
+ 	  $echo "$modename: warning: relinking \`$file'" 1>&2
++	  export DESTDIR
+ 	  $show "$relink_command"
+ 	  if $run eval "$relink_command"; then :
+ 	  else
+@@ -4172,6 +4186,7 @@
+ 	    continue
+ 	  fi
+ 	fi
++	unset DESTDIR
+ 
+ 	# See the names of the shared library.
+ 	set dummy $library_names
