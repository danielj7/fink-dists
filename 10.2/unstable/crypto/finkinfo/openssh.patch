diff -ru openssh-3.7.1p1/configure openssh-3.7.1p1-patched/configure
--- openssh-3.7.1p1/configure	2003-09-16 23:38:28.000000000 +0200
+++ openssh-3.7.1p1-patched/configure	2003-09-17 19:55:06.000000000 +0200
@@ -3550,6 +3550,18 @@
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
+
+	cat >>confdefs.h <<\EOF
+#define BROKEN_SETREUID 1
+EOF
+
+	cat >>confdefs.h <<\EOF
+#define BROKEN_SETREGID 1
+EOF
+
+	cat >>confdefs.h <<\EOF
+#define SETEUID_BREAKS_SETUID 1
+EOF
 	;;
 *-*-hpux10.26)
 	if test -z "$GCC"; then
@@ -14960,7 +14968,7 @@
 
 # Looking for programs, paths and files
 
-PRIVSEP_PATH=/var/empty
+PRIVSEP_PATH='${prefix}/var/empty'
 
 # Check whether --with-privsep-path or --without-privsep-path was given.
 if test "${with_privsep_path+set}" = set; then
