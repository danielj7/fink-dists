diff -Naur xfontpath-0.4.orig/xfontpath.in xfontpath-0.4/xfontpath.in
--- xfontpath-0.4.orig/xfontpath.in	2001-10-06 09:09:17.000000000 +0000
+++ xfontpath-0.4/xfontpath.in	2006-04-05 15:36:19.000000000 +0000
@@ -1,4 +1,5 @@
 #!/usr/bin/perl -w
+use POSIX qw(:errno_h);
 
 $CONFFILE = '@CONFFILE@';
 $FONTBASE = '@FONTBASE@';
@@ -136,7 +137,14 @@
 	my ($newconf) = $CONFFILE . '.new';
 
 	open (FP, ">$newconf") or &dief ("can't open `%s'\n", $newconf);
-	flock (FP, 2) or &dief ("can't lock `%s'\n", $newconf);
+	if (!flock (FP, 2)) {
+		if ($! == EOPNOTSUPP || $! == ENOLCK) {
+			print STDERR "WARNING: No locking is available on this filesystem.\n";
+			print STDERR "WARNING: Creating $newconf without locking...\n";
+		} else {
+			&dief ("can't lock `%s'\n", $newconf);
+		}
+	}
 
 	print FP "# This file was automaticaly generated by $0.\n";
 	print FP "# Don't edit!\n";
diff -Naur xfontpath-0.4.orig/fink/Makefile.in xfontpath-0.4/fink/Makefile.in
--- xfontpath-0.4.orig/fink/Makefile.in	2002-03-23 01:49:31.000000000 +0900
+++ xfontpath-0.4/fink/Makefile.in	2008-02-24 00:17:48.000000000 +0900
@@ -203,8 +203,8 @@
 $(scripts): Makefile
 
 install-data-local: $(scripts)
-	install -d -m 755 $(DESTDIR)$(sysconfdir)/profile.d
-	install -c -m 755 $(scripts) $(DESTDIR)$(sysconfdir)/profile.d/
+	install -d -m 755 $(DESTDIR)$(sysconfdir)/xinitrc.d
+	install -c -m 755 xfontpath.sh $(DESTDIR)$(sysconfdir)/xinitrc.d/20xfontpath.sh
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
