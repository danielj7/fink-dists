diff -bur itcl3.2/ itcl3.2-patched/
--- itcl3.2/Makefile.in	Mon Aug 28 20:58:00 2000
+++ itcl3.2-patched/Makefile.in	Wed May 22 00:00:14 2002
@@ -25,8 +25,8 @@
 all:
 	for dir in $(subdirs) ; do \
 		if test -d $$dir ; then \
-		    echo "$$dir: $(MAKE) $@" ;\
-		    (cd $$dir; $(MAKE) $@) \
+		    echo "$$dir: $(MAKE) $(MAKEFLAGS) $@" ;\
+		    (cd $$dir; $(MAKE) $(MAKEFLAGS) $@) \
 		else \
 		    exit 1; \
 		fi \
@@ -35,8 +35,8 @@
 test:
 	for dir in itcl itk iwidgets3.0.0 ; do \
 		if test -d $$dir ; then \
-		    echo "$$dir: $(MAKE) $@" ;\
-		    (cd $$dir; $(MAKE) $@) \
+		    echo "$$dir: $(MAKE) $(MAKEFLAGS) $@" ;\
+		    (cd $$dir; $(MAKE) $(MAKEFLAGS) $@) \
 		else \
 		    exit 1; \
 		fi \
@@ -45,8 +45,8 @@
 static:
 	for dir in $(subdirs) ; do \
 		if test -d $$dir ; then \
-		    echo "$$dir: $(MAKE) $@" ;\
-		    (cd $$dir; $(MAKE) $@) \
+		    echo "$$dir: $(MAKE) $(MAKEFLAGS) $@" ;\
+		    (cd $$dir; $(MAKE) $(MAKEFLAGS) $@) \
 		else \
 		    exit 1; \
 		fi \
@@ -55,8 +55,8 @@
 standalone:
 	for dir in $(subdirs) ; do \
 		if test -d $$dir ; then \
-		    echo "$$dir: $(MAKE) $@" ;\
-		    (cd $$dir; $(MAKE) $@) \
+		    echo "$$dir: $(MAKE) $(MAKEFLAGS) $@" ;\
+		    (cd $$dir; $(MAKE) $(MAKEFLAGS) $@) \
 		else \
 		    exit 1; \
 		fi \
@@ -65,8 +65,8 @@
 plusplus:
 	for dir in $(subdirs) ; do \
 		if test -d $$dir ; then \
-		    echo "$$dir: $(MAKE) $@" ;\
-		    (cd $$dir; $(MAKE) $@) \
+		    echo "$$dir: $(MAKE) $(MAKEFLAGS) $@" ;\
+		    (cd $$dir; $(MAKE) $(MAKEFLAGS) $@) \
 		else \
 		    exit 1; \
 		fi \
@@ -75,8 +75,8 @@
 install:
 	for dir in $(subdirs) ; do \
 		if test -d $$dir ; then \
-		    echo "$$dir: $(MAKE) $@" ;\
-		    (cd $$dir; $(MAKE) $@) \
+		    echo "$$dir: $(MAKE) $(MAKEFLAGS) $@" ;\
+		    (cd $$dir; $(MAKE) $(MAKEFLAGS) $@) \
 		else \
 		    exit 1; \
 		fi \
@@ -85,8 +85,8 @@
 install-binaries:
 	for dir in $(subdirs) ; do \
 		if test -d $$dir ; then \
-		    echo "$$dir: $(MAKE) $@" ;\
-		    (cd $$dir; $(MAKE) $@) \
+		    echo "$$dir: $(MAKE) $(MAKEFLAGS) $@" ;\
+		    (cd $$dir; $(MAKE) $(MAKEFLAGS) $@) \
 		else \
 		    exit 1; \
 		fi \
@@ -95,8 +95,8 @@
 install-libraries:
 	for dir in $(subdirs) ; do \
 		if test -d $$dir ; then \
-		    echo "$$dir: $(MAKE) $@" ;\
-		    (cd $$dir; $(MAKE) $@) \
+		    echo "$$dir: $(MAKE) $(MAKEFLAGS) $@" ;\
+		    (cd $$dir; $(MAKE) $(MAKEFLAGS) $@) \
 		else \
 		    exit 1; \
 		fi \
@@ -105,8 +105,8 @@
 clean:
 	for dir in $(subdirs) ; do \
 		if test -d $$dir ; then \
-		    echo "$$dir: $(MAKE) $@" ;\
-		    (cd $$dir; $(MAKE) $@) \
+		    echo "$$dir: $(MAKE) $(MAKEFLAGS) $@" ;\
+		    (cd $$dir; $(MAKE) $(MAKEFLAGS) $@) \
 		else \
 		    exit 1; \
 		fi \
@@ -116,8 +116,8 @@
 	rm -f Makefile config.log config.status config.cache
 	for dir in $(subdirs) ; do \
 		if test -d $$dir ; then \
-		    echo "$$dir: $(MAKE) $@" ;\
-		    (cd $$dir; $(MAKE) $@) \
+		    echo "$$dir: $(MAKE) $(MAKEFLAGS) $@" ;\
+		    (cd $$dir; $(MAKE) $(MAKEFLAGS) $@) \
 		else \
 		    exit 1; \
 		fi \
--- itcl3.2/itcl/Makefile.in	Mon Aug 28 20:58:00 2000
+++ itcl3.2-patched/itcl/Makefile.in	Thu Jul 18 22:16:51 2002
@@ -23,7 +23,7 @@
 # library that we are building.
 #========================================================================
 
-lib_BINARIES=$(itcl_LIB_FILE) $(itclstub_LIB_FILE)
+lib_BINARIES=$(itcl_LIB_FILE) $(itclstub_LIB_FILE) $(itcl_STATIC_LIB_FILE)
 BINARIES=$(lib_BINARIES)
 
 #========================================================================
@@ -94,6 +94,9 @@
 itcl_LIB_FILE = @itcl_LIB_FILE@
 @itcl_LIB_FILE@_OBJECTS = $(itcl_OBJECTS)
 
+itcl_STATIC_LIB_FILE = @itcl_STATIC_LIB_FILE@
+@itcl_STATIC_LIB_FILE@_OBJECTS = $(itcl_OBJECTS)
+
 itclstub_LIB_FILE = @itclstub_LIB_FILE@
 @itclstub_LIB_FILE@_OBJECTS = $(itclstub_OBJECTS)
 
@@ -269,16 +272,16 @@
 #========================================================================
 
 install-libraries: libraries
-	$(mkinstalldirs) $(includedir)
-	@echo "Installing header files in $(includedir)"
+	$(mkinstalldirs) $(DESTDIR)$(includedir)
+	@echo "Installing header files in $(DESTDIR)$(includedir)"
 	@for i in $(GENERIC_HDRS) ; do \
 	    echo "Installing $$i" ; \
-	    $(INSTALL_DATA) $$i $(includedir) ; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(includedir) ; \
 	done;
-	@echo "Installing library files in $(ITCL_LIBRARY)"
+	@echo "Installing library files in $(DESTDIR)$(ITCL_LIBRARY)"
 	@for i in $(srcdir)/library/*.tcl ; do \
 	    echo "Installing $$i" ; \
-	    $(INSTALL_DATA) $$i $(ITCL_LIBRARY) ; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(ITCL_LIBRARY) ; \
 	done;
 
 #========================================================================
@@ -287,13 +290,13 @@
 #========================================================================
 
 install-doc: doc
-	$(mkinstalldirs) $(mandir)/mann
-	@echo "Installing man pages in $(mandir)"
+	$(mkinstalldirs) $(DESTDIR)$(mandir)/mann
+	@echo "Installing man pages in $(DESTDIR)$(mandir)"
 	@for i in $(srcdir)/doc/*.n; \
 	    do \
 	    echo "Installing $$i"; \
-	    rm -f $(mandir)/mann/$$i; \
-	    $(INSTALL_DATA) $$i $(mandir)/mann ; \
+	    rm -f $(DESTDIR)$(mandir)/mann/$$i; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(mandir)/mann ; \
 	    done
 
 test: $(TCLSH_PROG)
@@ -319,7 +322,12 @@
 $(itcl_LIB_FILE): $(itcl_OBJECTS)
 	-rm -f $(itcl_LIB_FILE)
 	@MAKE_LIB@
-	$(RANLIB) $(itcl_LIB_FILE)
+#	$(RANLIB) $(itcl_LIB_FILE)
+
+$(itcl_STATIC_LIB_FILE): $(itcl_OBJECTS)
+	-rm -f $(itcl_STATIC_LIB_FILE)
+	@MAKE_STATIC_LIB@
+	$(RANLIB) $(itcl_STATIC_LIB_FILE)
 
 $(itclstub_LIB_FILE): $(itclstub_OBJECTS)
 	-rm -f $(itclstub_LIB_FILE)
@@ -439,11 +447,14 @@
 	done
 	@list='$(lib_BINARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
+	    ext=`echo $$p|sed -e "s/.*\.//"`; \
+	    if test "x$$ext" != "xdylib"; then \
 	    echo " $(RANLIB) $(DESTDIR)$(libdir)/$$p"; \
 	    $(RANLIB) $(DESTDIR)$(libdir)/$$p; \
 	  else :; fi; \
+	  else :; fi; \
 	done
-	$(INSTALL_DATA) pkgIndex.tcl $(pkglibdir)
+	$(INSTALL_DATA) pkgIndex.tcl $(DESTDIR)$(pkglibdir)
 
 #========================================================================
 # Install binary executables (e.g. .exe files)
@@ -481,7 +492,7 @@
 	$(mkinstalldirs)  $(DESTDIR)$(libdir)
 	$(mkinstalldirs)  $(DESTDIR)$(bindir)
 	$(mkinstalldirs)  $(DESTDIR)$(pkglibdir)
-	$(mkinstalldirs)  $(ITCL_LIBRARY)
+	$(mkinstalldirs)  $(DESTDIR)$(ITCL_LIBRARY)
 
 .PHONY: all binaries clean depend distclean doc install installdirs \
 libraries test
--- itcl3.2/itcl/configure	Mon Aug 28 20:58:00 2000
+++ itcl3.2-patched/itcl/configure	Thu Jul 18 22:22:22 2002
@@ -1508,6 +1508,7 @@
 LDFLAGS_DEBUG=${TCL_LDFLAGS_DEBUG}
 LDFLAGS_OPTIMIZE=${TCL_LDFLAGS_OPTIMIZE}
 SHLIB_LD=${TCL_SHLIB_LD}
+SHLIB_LDFLAGS="-current_version ${VERSION} -compatibility_version ${VERSION}"
 STLIB_LD=${TCL_STLIB_LD}
 SHLIB_CFLAGS=${TCL_SHLIB_CFLAGS}
 
@@ -1639,7 +1640,8 @@
 	if test "${SHARED_BUILD}" = "1" ; then
 	    SHLIB_LD_LIBS="${TCL_STUB_LIB_SPEC}"
 	    eval "${PACKAGE}_LIB_FILE=lib${PACKAGE}${SHARED_LIB_SUFFIX}"
-	    RANLIB=:
+	    eval "${PACKAGE}_STATIC_LIB_FILE=lib${PACKAGE}${UNSHARED_LIB_SUFFIX}"
+#	    RANLIB=:
 	else
 	    eval "${PACKAGE}_LIB_FILE=lib${PACKAGE}${UNSHARED_LIB_SUFFIX}"
 	fi
@@ -1915,6 +1917,7 @@
 s%@MAKE_SHARED_LIB@%$MAKE_SHARED_LIB%g
 s%@MAKE_STATIC_LIB@%$MAKE_STATIC_LIB%g
 s%@itclstub_LIB_FILE@%$itclstub_LIB_FILE%g
+s%@itcl_STATIC_LIB_FILE@%$itcl_STATIC_LIB_FILE%g
 s%@itcl_LIB_FILE@%$itcl_LIB_FILE%g
 s%@SHLIB_LD_LIBS@%$SHLIB_LD_LIBS%g
 s%@TCLSH_PROG@%$TCLSH_PROG%g
--- itcl3.2/itcl/pkgIndex.tcl	Mon Aug 28 20:58:00 2000
+++ itcl3.2-patched/itcl/pkgIndex.tcl	Thu Jul 18 22:45:26 2002
@@ -1,3 +1,3 @@
 # Tcl package index file, version 1.0
 
-package ifneeded Itcl 3.2 [list load [file join $dir .. "libitcl3.2.so"] Itcl]
+package ifneeded Itcl 3.2 [list load [file join $dir .. "libitcl3.2.dylib"] Itcl]
--- itcl3.2/itk/Makefile.in	Mon Aug 28 20:58:00 2000
+++ itcl3.2-patched/itk/Makefile.in	Thu Jul 18 22:39:10 2002
@@ -23,7 +23,7 @@
 # library that we are building.
 #========================================================================
 
-lib_BINARIES=$(itk_LIB_FILE) $(itkstub_LIB_FILE)
+lib_BINARIES=$(itk_LIB_FILE) $(itkstub_LIB_FILE) $(itk_STATIC_LIB_FILE)
 BINARIES=$(lib_BINARIES)
 
 #========================================================================
@@ -81,6 +81,9 @@
 itk_LIB_FILE = @itk_LIB_FILE@
 $(itk_LIB_FILE)_OBJECTS = $(itk_OBJECTS)
 
+itk_STATIC_LIB_FILE = @itk_STATIC_LIB_FILE@
+$(itk_STATIC_LIB_FILE)_OBJECTS = $(itk_OBJECTS)
+
 itkstub_LIB_FILE = @itkstub_LIB_FILE@
 $(itkstub_LIB_FILE)_OBJECTS = $(itkstub_OBJECTS)
 
@@ -264,16 +267,16 @@
 #========================================================================
 
 install-libraries: libraries
-	$(mkinstalldirs) $(includedir)
-	@echo "Installing header files in $(includedir)"
+	$(mkinstalldirs) $(DESTDIR)$(includedir)
+	@echo "Installing header files in $(DESTDIR)$(includedir)"
 	@for i in $(GENERIC_HDRS) ; do \
 	    echo "Installing $$i" ; \
-	    $(INSTALL_DATA) $$i $(includedir) ; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(includedir) ; \
 	done;
-	@echo "Installing library files in $(ITK_LIBRARY)"
+	@echo "Installing library files in $(DESTDIR)$(ITK_LIBRARY)"
 	@for i in $(srcdir)/library/*.* $(srcdir)/library/tclIndex ; do \
 	    echo "Installing $$i" ; \
-	    $(INSTALL_DATA) $$i $(ITK_LIBRARY) ; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(ITK_LIBRARY) ; \
 	done;
 
 #========================================================================
@@ -282,13 +285,13 @@
 #========================================================================
 
 install-doc: doc
-	$(mkinstalldirs) $(mandir)/mann
-	@echo "Installing man pages in $(mandir)"
+	$(mkinstalldirs) $(DESTDIR)$(mandir)/mann
+	@echo "Installing man pages in $(DESTDIR)$(mandir)"
 	@for i in $(srcdir)/doc/*.n; \
 	    do \
-	    echo "Installing $$i info $(mandir)/mann"; \
-	    rm -f $(mandir)/mann/$$i; \
-	    $(INSTALL_DATA) $$i $(mandir)/mann ; \
+	    echo "Installing $$i info $(DESTDIR)$(mandir)/mann"; \
+	    rm -f $(DESTDIR)$(mandir)/mann/$$i; \
+	    $(INSTALL_DATA) $$i $(DESTDIR)$(mandir)/mann ; \
 	    done
 
 test: $(TCLSH_PROG)
@@ -314,7 +317,12 @@
 $(itk_LIB_FILE): $(itk_OBJECTS)
 	-rm -f $(itk_LIB_FILE)
 	@MAKE_LIB@
-	$(RANLIB) $(itk_LIB_FILE)
+#	$(RANLIB) $(itk_LIB_FILE)
+
+$(itk_STATIC_LIB_FILE): $(itk_OBJECTS)
+	-rm -f $(itk_STATIC_LIB_FILE)
+	@MAKE_STATIC_LIB@
+	$(RANLIB) $(itk_STATIC_LIB_FILE)
 
 $(itkstub_LIB_FILE): $(itkstub_OBJECTS)
 	-rm -f $(itkstub_LIB_FILE)
@@ -413,11 +421,14 @@
 	done
 	@list='$(lib_BINARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
+	    ext=`echo $$p|sed -e "s/.*\.//"`; \
+	    if test "x$$ext" != "xdylib"; then \
 	    echo " $(RANLIB) $(DESTDIR)$(libdir)/$$p"; \
 	    $(RANLIB) $(DESTDIR)$(libdir)/$$p; \
 	  else :; fi; \
+	  else :; fi; \
 	done
-	$(INSTALL_DATA) pkgIndex.tcl $(pkglibdir)
+	$(INSTALL_DATA) pkgIndex.tcl $(DESTDIR)$(pkglibdir)
 
 #========================================================================
 # Install binary executables (e.g. .exe files)
@@ -455,7 +466,7 @@
 	$(mkinstalldirs)  $(DESTDIR)$(libdir)
 	$(mkinstalldirs)  $(DESTDIR)$(bindir)
 	$(mkinstalldirs)  $(DESTDIR)$(pkglibdir)
-	$(mkinstalldirs)  $(ITK_LIBRARY)
+	$(mkinstalldirs)  $(DESTDIR)$(ITK_LIBRARY)
 
 .PHONY: all binaries clean depend distclean doc install installdirs \
 libraries test
--- itcl3.2/itk/configure	Mon Aug 28 20:58:00 2000
+++ itcl3.2-patched/itk/configure	Thu Jul 18 22:52:57 2002
@@ -1401,8 +1401,8 @@
 # appears in the Itcl configure script.
 #--------------------------------------------------------------------
 
-echo $ac_n "checking for name if Itcl stub library""... $ac_c" 1>&6
-echo "configure:1406: checking for name if Itcl stub library" >&5
+echo $ac_n "checking for name of Itcl stub library""... $ac_c" 1>&6
+echo "configure:1406: checking for name of Itcl stub library" >&5
 if eval "test \"`echo '$''{'ac_cv_itclstub_LIB_FILE'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1804,6 +1804,7 @@
 LDFLAGS_DEBUG=${TCL_LDFLAGS_DEBUG}
 LDFLAGS_OPTIMIZE=${TCL_LDFLAGS_OPTIMIZE}
 SHLIB_LD=${TCL_SHLIB_LD}
+SHLIB_LDFLAGS="-current_version ${VERSION} -compatibility_version ${VERSION}"
 STLIB_LD=${TCL_STLIB_LD}
 SHLIB_CFLAGS=${TCL_SHLIB_CFLAGS}
 
@@ -1943,7 +1944,8 @@
 	if test "${SHARED_BUILD}" = "1" ; then
 	    SHLIB_LD_LIBS="${tkstub_LIB_SPEC} ${TCL_STUB_LIB_SPEC} ../itcl/${itclstub_LIB_FILE}"
 	    eval "${PACKAGE}_LIB_FILE=lib${PACKAGE}${SHARED_LIB_SUFFIX}"
-	    RANLIB=:
+	    eval "${PACKAGE}_STATIC_LIB_FILE=lib${PACKAGE}${UNSHARED_LIB_SUFFIX}"
+#	    RANLIB=:
 	else
 	    eval "${PACKAGE}_LIB_FILE=lib${PACKAGE}${UNSHARED_LIB_SUFFIX}"
 	fi
@@ -2257,6 +2259,7 @@
 s%@MAKE_SHARED_LIB@%$MAKE_SHARED_LIB%g
 s%@MAKE_STATIC_LIB@%$MAKE_STATIC_LIB%g
 s%@itkstub_LIB_FILE@%$itkstub_LIB_FILE%g
+s%@itk_STATIC_LIB_FILE@%$itk_STATIC_LIB_FILE%g
 s%@itk_LIB_FILE@%$itk_LIB_FILE%g
 s%@SHLIB_LD_LIBS@%$SHLIB_LD_LIBS%g
 s%@TCLSH_PROG@%$TCLSH_PROG%g
--- itcl3.2/itk/pkgIndex.tcl	Mon Aug 28 20:58:00 2000
+++ itcl3.2-patched/itk/pkgIndex.tcl	Thu Jul 18 22:45:34 2002
@@ -1,3 +1,3 @@
 # Tcl package index file, version 1.0
 
-package ifneeded Itk 3.2 [list load [file join $dir .. "libitk3.2.so"] Itk]
+package ifneeded Itk 3.2 [list load [file join $dir .. "libitk3.2.dylib"] Itk]
--- itcl3.2/iwidgets2.2.0/Makefile.in	Mon Aug 28 20:58:00 2000
+++ itcl3.2-patched/iwidgets2.2.0/Makefile.in	Wed Jul 10 13:36:36 2002
@@ -52,7 +52,7 @@
 INCLUDE_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/include
 
 # Top-level directory in which to install manual entries:
-MAN_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/man
+MAN_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/share/man
 
 # Directory in which to install manual entry for itclsh:
 MAN1_INSTALL_DIR = $(MAN_INSTALL_DIR)/man1
@@ -66,7 +66,7 @@
 MANN_INSTALL_DIR = $(MAN_INSTALL_DIR)/mann
 
 # Directory in which to install html version of manual entries:
-HTML_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/doc
+HTML_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/share/doc/itcl3
 
 # Tcl libraries can be found here:
 TCL_LIB_DIR = @TCL_LIB_DIR@
--- itcl3.2/iwidgets3.0.0/Makefile.in	Mon Aug 28 20:58:00 2000
+++ itcl3.2-patched/iwidgets3.0.0/Makefile.in	Fri Jul  5 02:47:16 2002
@@ -52,7 +52,7 @@
 INCLUDE_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/include
 
 # Top-level directory in which to install manual entries:
-MAN_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/man
+MAN_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/share/man
 
 # Directory in which to install manual entry for itclsh:
 MAN1_INSTALL_DIR = $(MAN_INSTALL_DIR)/man1
@@ -66,7 +66,7 @@
 MANN_INSTALL_DIR = $(MAN_INSTALL_DIR)/mann
 
 # Directory in which to install html version of manual entries:
-HTML_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/doc
+HTML_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/share/doc/itcl3
 
 # Tcl libraries can be found here:
 TCL_LIB_DIR = @TCL_LIB_DIR@
