Index: admin/Makefile.common
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/admin/Makefile.common,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
Index: admin/acinclude.m4.in
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/admin/acinclude.m4.in,v
retrieving revision 1.1.1.3
diff -u -b -u -r1.1.1.3 acinclude.m4.in
--- admin/acinclude.m4.in	14 Aug 2002 13:18:45 -0000	1.1.1.3
+++ admin/acinclude.m4.in	25 Sep 2002 00:28:53 -0000
@@ -699,13 +699,10 @@
      AC_CHECK_LIB(ipc, shmat, X_EXTRA_LIBS="$X_EXTRA_LIBS -lipc"))
    
    # darwin needs this to initialize the environment
-   AC_CHECK_HEADERS(crt_externs.h)
+   AC_CHECK_HEADERS([crt_externs.h sys/types.h])
    AC_CHECK_FUNC(_NSGetEnviron, [AC_DEFINE(HAVE_NSGETENVIRON, 1, [Define if your system needs _NSGetEnviron to set up the environment])])
  
-   # more headers that need to be explicitly included on darwin
-   AC_CHECK_HEADERS(sys/types.h stdint.h)
-
-   # darwin requires a poll emulation library
+   # darwin requires a poll.h emulation library
    AC_CHECK_LIB(poll, poll, LIB_POLL="-lpoll")
 
    # CoreAudio framework
@@ -714,6 +711,12 @@
      FRAMEWORK_COREAUDIO="-framework CoreAudio"
    ])
 
+   # CoreServices framework
+   AC_CHECK_HEADER(CoreServices/CoreServices.h, [
+     AC_DEFINE(HAVE_CORESERVICES, 1, [Define if you have the CoreServices API])
+     FRAMEWORK_CORESERVICES="-framework CoreServices"
+   ])
+
    # Solaris 2.6 and others need -lresolv for res_init
    AC_CHECK_FUNCS(res_init, , [
      kde_libs_safe="$LIBS"
@@ -736,6 +739,8 @@
    AC_SUBST(FRAMEWORK_COREAUDIO)
    LIBSOCKET="$X_EXTRA_LIBS"
    AC_SUBST(LIBSOCKET)
+   AC_SUBST(FRAMEWORK_COREAUDIO)
+   AC_SUBST(LIB_POLL)
    AC_SUBST(LIBRESOLV)
    AC_SUBST(X_EXTRA_LIBS)
    AC_CHECK_LIB(ucb, killpg, [LIBUCB="-lucb"]) dnl for Solaris2.4
@@ -905,7 +910,7 @@
 kde_ldflags_safe="$LDFLAGS"
 kde_libs_safe="$LIBS"
 
-LDFLAGS="$LDFLAGS $X_LDFLAGS $USER_LDFLAGS"
+LDFLAGS="$LDFLAGS $USER_LDFLAGS $X_LDFLAGS"
 LIBS="-lXext -lX11 $LIBSOCKET"
 
 AC_TRY_LINK([
@@ -947,9 +952,9 @@
 kde_save_LDFLAGS="$LDFLAGS"
 kde_save_CFLAGS="$CFLAGS"
 kde_save_LIBS="$LIBS"
-LDFLAGS="$LDFLAGS $X_LDFLAGS $USER_LDFLAGS"
+LDFLAGS="$LDFLAGS $USER_LDFLAGS $X_LDFLAGS"
 CFLAGS="$CFLAGS -I$x_includes"
-LIBS="-lXinerama -lXext"
+LIBS="-lXinerama -lXext -lX11"
 
 if test "x$no_xinerama" = "xno"; then
 
@@ -1846,15 +1851,29 @@
    AC_REQUIRE([K_PATH_X])
 
 if test $kde_qtver = 3; then
+   AC_SUBST(LIB_ARTSKDE, "-lartskde")
+   AC_SUBST(LIB_DCOP, "-lDCOP")
+   AC_SUBST(LIB_KAB, "-lkab")
+   AC_SUBST(LIB_KABC, "-lkabc")
    AC_SUBST(LIB_KDECORE, "-lkdecore")
+   AC_SUBST(LIB_KDED, "@PREFIX@/lib/kded.la")
+   AC_SUBST(LIB_KDEFX, "-lkdefx")
+   AC_SUBST(LIB_KDEPRINT, "-lkdeprint")
+   AC_SUBST(LIB_KDESASL, "-lkdesasl")
+   AC_SUBST(LIB_KDESU, "-lkdesu")
    AC_SUBST(LIB_KDEUI, "-lkdeui")
-   AC_SUBST(LIB_KIO, "-lkio")
-   AC_SUBST(LIB_SMB, "-lsmb")
-   AC_SUBST(LIB_KAB, "-lkab")
    AC_SUBST(LIB_KHTML, "-lkhtml")
-   AC_SUBST(LIB_KSPELL, "-lkspell")
+   AC_SUBST(LIB_KIO, "-lkio")
    AC_SUBST(LIB_KPARTS, "-lkparts")
-   AC_SUBST(LIB_KDEPRINT, "-lkdeprint")
+   AC_SUBST(LIB_KJAVA, "-lkjava")
+   AC_SUBST(LIB_KJS, "-lkjs")
+   AC_SUBST(LIB_KMID, "-lkmid")
+   AC_SUBST(LIB_KSCRIPT, "-lkscript")
+   AC_SUBST(LIB_KSPELL, "-lkspell")
+   AC_SUBST(LIB_KTEXTEDITOR, "-lktexteditor")
+   AC_SUBST(LIB_SHELLSCRIPT, "-lshellscript")
+   AC_SUBST(LIB_SMB, "-lsmb")
+   AC_SUBST(LIB_VCARD, "-lvcard")
 # these are for backward compatibility
    AC_SUBST(LIB_KSYCOCA, "-lkio")
    AC_SUBST(LIB_KFILE, "-lkio")
@@ -2544,10 +2563,10 @@
       if test $kde_use_debug_code = "full"; then
         CFLAGS="-g3 $CFLAGS"
       else
-        CFLAGS="-g -O2 $CFLAGS"
+        CFLAGS="-g -O $CFLAGS"
       fi
     else
-      CFLAGS="-O2 $CFLAGS"
+      CFLAGS="-Os -Ddlsym=dlsym_auto_underscore -frename-registers -mmultiple -mcpu=750 -mtune=750 $CFLAGS"
     fi
   fi
 
@@ -2577,7 +2596,7 @@
         if test "$kde_use_debug_code" = "full"; then
           CXXFLAGS="-g3 $CXXFLAGS"
         else
-          CXXFLAGS="-g -O2 $CXXFLAGS"
+          CXXFLAGS="-g -O $CXXFLAGS"
         fi
       fi
       KDE_CHECK_COMPILER_FLAG(fno-builtin,[CXXFLAGS="-fno-builtin $CXXFLAGS"])
@@ -2589,7 +2608,7 @@
       if test "$CXX" = "KCC"; then
         CXXFLAGS="+K3 $CXXFLAGS"
       else
-        CXXFLAGS="-O2 $CXXFLAGS"
+        CXXFLAGS="-Os -Ddlsym=dlsym_auto_underscore -frename-registers -mmultiple -mcpu=750 -mtune=750 $CXXFLAGS"
       fi  
     fi
   fi
@@ -3059,9 +3078,9 @@
     ac_save_ldflags="$LDFLAGS"
     ac_save_cflags="$CFLAGS"
     if test "x$kde_use_qt_emb" != "xyes"; then
-      LDFLAGS="$LDFLAGS $X_LDFLAGS $USER_LDFLAGS $LDFLAGS $XPM_LDFLAGS $all_libraries -lXpm -lX11 -lXext $LIBZ $LIBSOCKET"
+      LDFLAGS="$LDFLAGS $USER_LDFLAGS $X_LDFLAGS $LDFLAGS $XPM_LDFLAGS $all_libraries -lXpm -lX11 -lXext $LIBZ $LIBSOCKET"
     else
-      LDFLAGS="$LDFLAGS $X_LDFLAGS $USER_LDFLAGS $LDFLAGS $XPM_LDFLAGS $all_libraries -lXpm $LIBZ $LIBSOCKET"
+      LDFLAGS="$LDFLAGS $USER_LDFLAGS $X_LDFLAGS $LDFLAGS $XPM_LDFLAGS $all_libraries -lXpm $LIBZ $LIBSOCKET"
     fi
     CFLAGS="$CFLAGS $X_INCLUDES $USER_INCLUDES"
     test -n "$XPM_INCLUDE" && CFLAGS="-I$XPM_INCLUDE $CFLAGS"
@@ -4553,6 +4572,7 @@
       KDE_JAVA_PREFIX(/usr/lib/IBMJava2*)
       KDE_JAVA_PREFIX(/usr/lib/IBMJava*)
       KDE_JAVA_PREFIX(/opt/java*)
+      KDE_JAVA_PREFIX(/Library/Java/Home)
     
       kde_cv_path="NONE"
       kde_save_IFS=$IFS
@@ -4604,10 +4624,20 @@
 dnl At this point kde_java_bindir and kde_java_includedir are either set or "no"
 if test "x$kde_java_bindir" != "xno"; then
 
+  case $host_os in
+    darwin*)
+      dnl Look for libjvm.dylib
+      kde_java_libjvmdir=`find $kde_java_bindir/.. -name libjvm.dylib | sed 's,libjvm.dylib,,'|head -n 1`
+      kd_java_libhpidir=''
+      dnl Darwin doesn't have libhpi
+      ;;
+    *)
   dnl Look for libjvm.so
   kde_java_libjvmdir=`find $kde_java_bindir/.. -name libjvm.so | sed 's,libjvm.so,,'|head -n 1`
   dnl Look for libhpi.so and avoid green threads
   kde_java_libhpidir=`find $kde_java_bindir/.. -name libhpi.so | grep -v green | sed 's,libhpi.so,,' | tail -n 1`
+      ;;
+  esac
 
   dnl Now check everything's fine under there
   dnl the include dir is our flag for having the JDK
@@ -4635,17 +4665,29 @@
     JAVAC=
     jni_includes=
   fi
-
+  case $host_os in
+    darwin*)
+      if test ! -r "$kde_java_libjvmdir/libjvm.dylib"; then
+        AC_MSG_ERROR([libjvm.dylib not found under $kde_java_libjvmdir. Use --without-java.])
+      fi
+      dnl Darwin doesn't have libhpi, but it's not fatal
+      LIB_JVM="-framework JavaVM"
+      LIB_HPI=""
+      ;;
+    *)
   if test ! -r "$kde_java_libjvmdir/libjvm.so"; then
      AC_MSG_ERROR([libjvm.so not found under $kde_java_libjvmdir. Use --without-java.])
   fi 
+      LIB_JVM="-L$kde_java_libjvmdir -ljvm"
+      if test ! -r "$kde_java_libhpidir/libhpi.so"; then
+        AC_MSG_ERROR([libhpi.so not found under $kde_java_libhpidir. Use --without-java.])
+      fi
+      LIB_HPI="-L$kde_java_libhpidir -lhpi"
+      ;;
+  esac
 
   if test ! -x "$kde_java_bindir/java"; then
       AC_MSG_ERROR([java not found under $kde_java_bindir. javac was found though! Use --with-java or --without-java.])
-  fi
-
-  if test ! -r "$kde_java_libhpidir/libhpi.so"; then
-    AC_MSG_ERROR([libhpi.so not found under $kde_java_libhpidir. Use --without-java.])
   fi
 
   if test -n "$jni_includes"; then
Index: admin/detect-autoconf.sh
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/admin/detect-autoconf.sh,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- admin/detect-autoconf.sh	10 Jul 2002 02:47:38 -0000	1.1.1.1
+++ admin/detect-autoconf.sh	15 Jul 2002 22:55:00 -0000	1.2
@@ -42,12 +42,12 @@
 checkAutomakeAclocal ()
 {
   if test -z "$UNSERMAKE"; then
-    if test -x "`$WHICH automake-1.5`" ; then
-      AUTOMAKE="`$WHICH automake-1.5`"
-      ACLOCAL="`$WHICH aclocal-1.5`"
-    elif test -x "`$WHICH automake-1.6`" ; then
+    if test -x "`$WHICH automake-1.6`" ; then
       AUTOMAKE="`$WHICH automake-1.6`"
       ACLOCAL="`$WHICH aclocal-1.6`"
+    elif test -x "`$WHICH automake-1.5`" ; then
+      AUTOMAKE="`$WHICH automake-1.5`"
+      ACLOCAL="`$WHICH aclocal-1.5`"
     fi
   else
      AUTOMAKE="$UNSERMAKE"
Index: admin/libtool.m4.in
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/admin/libtool.m4.in,v
retrieving revision 1.1.1.3
retrieving revision 1.7
diff -u -b -u -r1.1.1.3 -r1.7
--- admin/libtool.m4.in	14 Aug 2002 13:18:45 -0000	1.1.1.3
+++ admin/libtool.m4.in	16 Sep 2002 14:31:34 -0000	1.7
@@ -609,6 +609,12 @@
     lt_cv_sys_max_cmd_len=-1;
     ;;
 
+  darwin*)
+    # this should be enough... the length test freaks out some versions
+    # of OSX's `expr`
+    lt_cv_sys_max_cmd_len=16384;
+    ;;
+
   *)
     # If test is not a shell built-in, we'll probably end up computing a
     # maximum length that is only half of the actual maximum length, but
@@ -1132,7 +1138,7 @@
 darwin* | rhapsody*)
   dynamic_linker="$host_os dyld"
   version_type=darwin
-  need_lib_prefix=no
+  need_lib_prefix=yes
   need_version=no
   # FIXME: Relying on posixy $() will cause problems for
   #        cross-compilation, but unfortunately the echo tests do not
@@ -1901,16 +1907,7 @@
   ;;
 
 darwin* | rhapsody*)
-  lt_cv_deplibs_check_method='file_magic Mach-O dynamically linked shared library'
-  lt_cv_file_magic_cmd='/usr/bin/file -L'
-  case "$host_os" in
-  rhapsody* | darwin1.[[012]])
-    lt_cv_file_magic_test_file=`/System/Library/Frameworks/System.framework/System`
-    ;;
-  *) # Darwin 1.3 on
-    lt_cv_file_magic_test_file='/usr/lib/libSystem.dylib'
-    ;;
-  esac
+  lt_cv_deplibs_check_method='pass_all'
   ;;
 
 freebsd*)
@@ -2560,6 +2557,11 @@
 	;;
     esac
     ;;
+  darwin*)
+    shared_flag='-dynamiclib'
+    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -r -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs && $CC -dynamiclib -install_name $rpath/$soname $predep_objects ${lib}-master.o $deplibs $postdep_objects $compiler_flags -o $lib'
+    output_verbose_link_cmd='$CC -dynamiclib $CFLAGS -v conftest.$objext 2>&1 | egrep "\-L"'
+    ;;
   dgux*)
     case $cc_basename in
       ec++)
@@ -4750,7 +4752,9 @@
 	_LT_AC_TAGVAR(allow_undefined_flag, $1)='-undefined suppress'
 	;;
       *) # Darwin 1.3 on
-	_LT_AC_TAGVAR(allow_undefined_flag, $1)='-flat_namespace -undefined suppress'
+	#_LT_AC_TAGVAR(allow_undefined_flag, $1)='-flat_namespace -undefined suppress'
+        # testing with twolevel namespaces
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)=unsupported
 	;;
       esac
 
@@ -4758,7 +4762,7 @@
       #        cross-compilation, but unfortunately the echo tests do not
       #        yet detect zsh echo's removal of \ escapes.  Also zsh mangles
       #	       `"' quotes if we put them in here... so don't!
-      _LT_AC_TAGVAR(archive_cmds, $1)='$CC $(test .$module = .yes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags -install_name $rpath/$soname $verstring'
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -r -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs && $CC $(test .$module = .yes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib ${lib}-master.o $deplibs $linker_flags $(test x$module != xyes && echo -install_name $rpath/$soname $verstring)'
       # We need to add '_' to the symbols in $export_symbols first
       #_LT_AC_TAGVAR(archive_expsym_cmds, $1)="$_LT_AC_TAGVAR(archive_cmds, $1)"' && strip -s $export_symbols'
       _LT_AC_TAGVAR(hardcode_direct, $1)=yes
Index: admin/ltconfig
===================================================================
RCS file: admin/ltconfig
diff -N admin/ltconfig
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ admin/ltconfig	25 Jun 2002 03:34:27 -0000	1.1.1.1
@@ -0,0 +1,4 @@
+#! /bin/sh
+# Written by <matz@kde.org> and placed into the public domain ;-)
+echo "This file shouldn't be called.  It exists solely for the purpose"
+echo "to make automake 1.4 cope with newer libtools."
Index: admin/ltmain.sh
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/admin/ltmain.sh,v
retrieving revision 1.1.1.2
retrieving revision 1.4
diff -u -b -u -r1.1.1.2 -r1.4
--- admin/ltmain.sh	10 Jul 2002 02:47:39 -0000	1.1.1.2
+++ admin/ltmain.sh	13 Jul 2002 04:33:25 -0000	1.4
@@ -3321,7 +3321,23 @@
 	if test -n "$export_symbols" && test -n "$archive_expsym_cmds"; then
 	  eval cmds=\"$archive_expsym_cmds\"
 	else
+          if test "x$verstring" = "x0.0"; then
+                tmp_verstring=
+          else
+                tmp_verstring="$verstring"
+          fi
+ 	  save_deplibs="$deplibs"
+ 	  for conv in $convenience; do
+            tmp_deplibs=
+            for test_deplib in $deplibs; do
+              if test "$test_deplib" != "$conv"; then
+                tmp_deplibs="$tmp_deplibs $test_deplib"
+              fi
+            done
+            deplibs="$tmp_deplibs"
+ 	  done
 	  eval cmds=\"$archive_cmds\"
+ 	  deplibs="$save_deplibs"
 	fi
 
 	if len=`expr "X$cmds" : ".*"` &&
@@ -3419,7 +3435,12 @@
 	  if test -n "$export_symbols" && test -n "$archive_expsym_cmds"; then
 	    eval cmds=\"$archive_expsym_cmds\"
 	  else
+            save_deplibs="$deplibs"
+            for conv in $convenience; do
+              deplibs="${deplibs%$conv*} ${deplibs#*$conv}"
+            done
 	    eval cmds=\"$archive_cmds\"
+            deplibs="$save_deplibs"
 	  fi
 
 	  # Append the command to remove the reloadable object files
@@ -3632,6 +3653,14 @@
 	compile_deplibs=`$echo "X $compile_deplibs" | $Xsed -e 's/ -lc / -framework System /'`
 	finalize_deplibs=`$echo "X $finalize_deplibs" | $Xsed -e 's/ -lc / -framework System /'`
 	;;
+      esac
+
+      case $host in
+      *darwin*)
+        # Don't allow lazy linking, it breaks C++ global constructors
+        compile_command="$compile_command ${wl}-bind_at_load"
+        finalize_command="$finalize_command ${wl}-bind_at_load"
+        ;;
       esac
 
       compile_command="$compile_command $compile_deplibs"
Index: admin/missing
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/admin/missing,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- admin/missing	10 Jul 2002 02:47:39 -0000	1.1.1.2
+++ admin/missing	10 Jul 2002 02:50:11 -0000	1.3
@@ -106,7 +106,7 @@
     exit 1
     ;;
 
-  aclocal)
+  aclocal*)
     echo 1>&2 "\
 WARNING: \`$1' is missing on your system.  You should only need it if
          you modified \`acinclude.m4' or \`${configure_ac}'.  You might want
@@ -143,7 +143,7 @@
     touch $touch_files
     ;;
 
-  automake)
+  automake*)
     echo 1>&2 "\
 WARNING: \`$1' is missing on your system.  You should only need it if
          you modified \`Makefile.am', \`acinclude.m4' or \`${configure_ac}'.
Index: startkde
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/startkde,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- startkde	10 Jul 2002 03:15:11 -0000	1.1.1.3
+++ startkde	10 Jul 2002 03:42:55 -0000	1.4
@@ -30,6 +30,9 @@
 # people's heads. We use colours from the standard KDE palette for those with
 # palettised displays.
 
+# we have to unset this for Darwin since it will screw up KDE's dynamic-loading
+unset DYLD_FORCE_FLAT_NAMESPACE
+
 test "$XDM_MANAGED" || bkg="-solid #C0C0C0"
 xsetroot -cursor_name left_ptr $bkg
 
@@ -134,7 +137,11 @@
 fi
 
 # the splashscreen and progress indicator
-ksplash
+if [ -x "@PREFIX@/bin/ksplashml" ]; then
+	ksplashml
+else
+	ksplash
+fi
 
 # We set LD_BIND_NOW to increase the efficiency of kdeinit.
 # kdeinit unsets this variable before loading applications.
Index: debian/konsole.links
===================================================================
RCS file: debian/konsole.links
diff -N debian/konsole.links
Index: doc/kaddressbook/index.cache.bz2
===================================================================
RCS file: doc/kaddressbook/index.cache.bz2
diff -N doc/kaddressbook/index.cache.bz2
Binary files /dev/null and /tmp/cvs005914 differ
Index: kate/app/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kate/app/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.6
diff -u -b -u -r1.1.1.3 -r1.6
--- kate/app/Makefile.am	14 Aug 2002 14:26:29 -0000	1.1.1.3
+++ kate/app/Makefile.am	15 Aug 2002 15:26:45 -0000	1.6
@@ -7,17 +7,18 @@
 	kateviewmanager.cpp kateviewspace.cpp katemain.cpp \
 	kateIface.skel kategrepdialog.cpp katefiledialog.cpp katemailfilesdialog.cpp \
         kbookmarkhandler.cpp kactionselector.cpp katedockcontainer.cpp
-
-libkateinterfaces_la_LIBADD   = ../interfaces/libkateinterfacesprivate.la -lkscript ../lib/libkmultitabbar.la
+libkateinterfaces_la_LIBADD   = $(top_builddir)/kate/interfaces/libkateinterfacesprivate.la -lkscript $(top_builddir)/kate/lib/libkmultitabbar.la
 libkateinterfaces_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version
 
 kate_la_SOURCES = dummy_kate_la.cpp
-kate_la_LIBADD = libkateinterfaces.la
-kate_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version 
+kate_la_LIBADD   = libkateinterfaces.la -lkscript $(LIB_DCOP) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI) \
+	$(LIB_KPARTS) $(LIB_KIO) $(top_builddir)/kate/lib/libkmultitabbar.la
+kate_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version $(QT_LDFLAGS)
 
 kwrite_la_SOURCES = kwritemain.cpp katefiledialog.cpp kwritedialogs.cpp
-kwrite_la_LIBADD   = -lktexteditor
-kwrite_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version
+kwrite_la_LIBADD  = libkateinterfaces.la $(LIB_DCOP) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI) \
+	$(LIB_KPARTS) $(LIB_KIO) -lktexteditor
+kwrite_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version $(QT_LDFLAGS)
 
 kate_SOURCES = dummy_kate.cpp
 kate_LDADD = kate.la
Index: kate/interfaces/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kate/interfaces/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.5
diff -u -b -u -r1.1.1.3 -r1.5
--- kate/interfaces/Makefile.am	14 Aug 2002 14:26:30 -0000	1.1.1.3
+++ kate/interfaces/Makefile.am	14 Aug 2002 15:35:40 -0000	1.5
@@ -2,11 +2,12 @@
 
 noinst_LTLIBRARIES = libkateinterfacesprivate.la
 
-libkateinterfacesprivate_la_SOURCES = application.cpp mainwindow.cpp documentmanager.cpp viewmanager.cpp toolviewmanager.cpp \
-                                                           pluginmanager.cpp plugin.cpp \
-                                                           pluginconfiginterface.cpp pluginconfiginterfaceextension.cpp
-libkateinterfacesprivate_la_LIBADD   = -lkatepartinterfaces
-libkateinterfacesprivate_la_LDFLAGS = $(all_libraries) $(KDE_RPATH)
+libkateinterfacesprivate_la_SOURCES = application.cpp mainwindow.cpp documentmanager.cpp viewmanager.cpp \
+	toolviewmanager.cpp pluginmanager.cpp plugin.cpp pluginconfiginterface.cpp \
+	pluginconfiginterfaceextension.cpp
+libkateinterfacesprivate_la_LIBADD   = -lkatepartinterfaces $(LIB_KDECORE) $(LIB_KDEUI) $(LIB_QT) $(LIB_DCOP) $(LIB_KPARTS)
+
+libkateinterfacesprivate_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) $(QT_LDFLAGS)
 
 kateinclude_HEADERS = application.h documentmanager.h mainwindow.h plugin.h viewmanager.h pluginconfiginterface.h pluginconfiginterfaceextension.h toolviewmanager.h pluginmanager.h
 kateincludedir = $(includedir)/kate
Index: kcontrol/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
Index: kcontrol/access/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/access/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/access/Makefile.am	14 Aug 2002 14:29:16 -0000	1.1.1.2
+++ kcontrol/access/Makefile.am	14 Aug 2002 15:35:40 -0000	1.3
@@ -12,12 +12,12 @@
 lib_LTLIBRARIES = kaccess.la
 
 kaccess_la_SOURCES = kaccess.cpp main.cpp
-kaccess_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kaccess_la_LIBADD = $(LIB_KDEUI)
+kaccess_la_LDFLAGS = $(all_libraries) -module -avoid-version $(QT_LDFLAGS)
+kaccess_la_LIBADD = $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_DCOP)
 
 kcm_access_la_SOURCES = kcmaccess.cpp 
-kcm_access_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_access_la_LIBADD = $(LIB_KIO)
+kcm_access_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_access_la_LIBADD = $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI)
 
 noinst_HEADERS = kcmaccess.h
 
Index: kcontrol/arts/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/arts/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/arts/Makefile.am	10 Jul 2002 03:17:21 -0000	1.1.1.2
+++ kcontrol/arts/Makefile.am	10 Jul 2002 03:42:55 -0000	1.3
@@ -2,8 +2,8 @@
 
 kcm_arts_la_SOURCES = arts.cpp artsconfig.ui
 
-kcm_arts_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_arts_la_LIBADD = -lkdeui
+kcm_arts_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_arts_la_LIBADD = $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 INCLUDES = -I$(kde_includes)/arts  $(all_includes)
 
Index: kcontrol/background/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/background/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/background/Makefile.am	14 Aug 2002 14:29:15 -0000	1.1.1.2
+++ kcontrol/background/Makefile.am	14 Aug 2002 15:35:40 -0000	1.3
@@ -7,8 +7,9 @@
 kde_module_LTLIBRARIES = kcm_background.la
 
 kcm_background_la_SOURCES = backgnd.cpp bgdialogs.cpp
-kcm_background_la_LDFLAGS = $(KDE_RPATH) -module -avoid-version $(all_libraries) -no-undefined
-kcm_background_la_LIBADD = libbgnd.la $(LIB_KIO)
+kcm_background_la_LDFLAGS = $(KDE_RPATH) -module -avoid-version $(all_libraries) -no-undefined $(QT_LDFLAGS)
+kcm_background_la_LIBADD = $(LIB_KIO) libbgnd.la $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI) \
+	$(LIB_DCOP) $(LIB_KDEFX)
 
 METASOURCES = AUTO
 
Index: kcontrol/bell/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/bell/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/bell/Makefile.am	25 Jun 2002 02:03:44 -0000	1.1.1.1
+++ kcontrol/bell/Makefile.am	25 Jun 2002 02:06:13 -0000	1.2
@@ -3,7 +3,7 @@
 kcm_bell_la_SOURCES = bell.cpp
 
 kcm_bell_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined
-kcm_bell_la_LIBADD = -lkdeui
+kcm_bell_la_LIBADD = $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 INCLUDES= $(all_includes)
 
Index: kcontrol/clock/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/clock/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/clock/Makefile.am	25 Jun 2002 02:03:44 -0000	1.1.1.1
+++ kcontrol/clock/Makefile.am	25 Jun 2002 02:06:13 -0000	1.2
@@ -2,8 +2,8 @@
 
 kcm_clock_la_SOURCES = dtime.cpp tzone.cpp main.cpp 
 
-kcm_clock_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined
-kcm_clock_la_LIBADD = -lkdeui
+kcm_clock_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_clock_la_LIBADD = $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_DCOP)
 
 INCLUDES= $(all_includes)
  
Index: kcontrol/colors/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/colors/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/colors/Makefile.am	14 Aug 2002 14:29:16 -0000	1.1.1.2
+++ kcontrol/colors/Makefile.am	14 Aug 2002 15:35:41 -0000	1.3
@@ -5,8 +5,9 @@
 kde_module_LTLIBRARIES = kcm_colors.la
 
 kcm_colors_la_SOURCES = colorscm.cpp widgetcanvas.cpp 
-kcm_colors_la_LDFLAGS = $(KDE_RPATH) -module -avoid-version $(all_libraries) -no-undefined
-kcm_colors_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(top_builddir)/kcontrol/krdb/libkrdb.la
+kcm_colors_la_LDFLAGS = $(KDE_RPATH) -module -avoid-version $(all_libraries) -no-undefined $(QT_LDFLAGS)
+kcm_colors_la_LIBADD = $(LIB_KDEUI) $(top_builddir)/kcontrol/krdb/libkrdb.la $(LIB_X11) $(LIB_QT) \
+	$(LIB_KDECORE) $(LIB_KDEFX) $(LIB_KIO)
 kcm_colors_la_METASOURCES = colorscm.moc widgetcanvas.moc
 
 noinst_HEADERS = colorscm.h widgetcanvas.h
Index: kcontrol/crypto/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/crypto/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/crypto/Makefile.am	14 Aug 2002 14:29:17 -0000	1.1.1.2
+++ kcontrol/crypto/Makefile.am	14 Aug 2002 15:35:41 -0000	1.3
@@ -3,8 +3,8 @@
 
 kcm_crypto_la_SOURCES = crypto.cpp certexport.cpp kdatetimedlg.cpp
 
-kcm_crypto_la_LDFLAGS  = $(KDE_RPATH) $(all_libraries) $(SSL_LDFLAGS) -module -avoid-version -no-undefined
-kcm_crypto_la_LIBADD = -lkdeui $(LIB_KIO) $(LIBSSL)
+kcm_crypto_la_LDFLAGS  = $(KDE_RPATH) $(all_libraries) $(SSL_LDFLAGS) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_crypto_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIBSSL) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 kcm_crypto_la_METASOURCES = AUTO
 
Index: kcontrol/css/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/css/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/css/Makefile.am	14 Aug 2002 14:28:12 -0000	1.1.1.2
+++ kcontrol/css/Makefile.am	14 Aug 2002 15:35:41 -0000	1.3
@@ -5,8 +5,8 @@
 
 kde_module_LTLIBRARIES = kcm_css.la
 kcm_css_la_SOURCES = template.cpp cssconfig.ui kcmcss.cpp preview.ui
-kcm_css_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_css_la_LIBADD = -lkdeui $(LIB_KIO)
+kcm_css_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_css_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 kcm_css_la_METASOURCES = AUTO
  
Index: kcontrol/ebrowsing/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/ebrowsing/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/ebrowsing/Makefile.am	25 Jun 2002 02:03:44 -0000	1.1.1.1
+++ kcontrol/ebrowsing/Makefile.am	25 Jun 2002 02:06:13 -0000	1.2
@@ -10,8 +10,8 @@
 
 kcm_kurifilt_la_SOURCES = filteropts.cpp main.cpp
 
-kcm_kurifilt_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_kurifilt_la_LIBADD = $(LIB_KSYCOCA)
+kcm_kurifilt_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_kurifilt_la_LIBADD = $(LIB_KSYCOCA) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI)
 # Don't link this lib to the plugins. They are dlopened and linking to them
 # results in crashes when closing kcmshell.
 # plugins/ikws/libkuriikwsfilter.la plugins/shorturi/libkshorturifilter.la
Index: kcontrol/ebrowsing/plugins/ikws/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/ebrowsing/plugins/ikws/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/ebrowsing/plugins/ikws/Makefile.am	10 Jul 2002 03:17:39 -0000	1.1.1.2
+++ kcontrol/ebrowsing/plugins/ikws/Makefile.am	10 Jul 2002 03:42:56 -0000	1.3
@@ -7,10 +7,10 @@
 kde_module_LTLIBRARIES = libkuriikwsfilter.la libkurisearchfilter.la
 
 libkuriikwsfilter_la_LDFLAGS = $(all_libraries) -module $(KDE_PLUGIN)
-libkuriikwsfilter_la_LIBADD = $(LIB_KSYCOCA) $(LIB_KDEUI)
+libkuriikwsfilter_la_LIBADD = $(LIB_KSYCOCA) $(LIB_KDEUI) $(LIB_KDECORE) $(LIB_QT) $(LIB_DCOP)
 
 libkurisearchfilter_la_LDFLAGS = $(all_libraries) -module $(KDE_PLUGIN)
-libkurisearchfilter_la_LIBADD = $(LIB_KSYCOCA) $(LIB_KDEUI)
+libkurisearchfilter_la_LIBADD = $(LIB_KSYCOCA) $(LIB_KDEUI) $(LIB_KDECORE) $(LIB_QT) $(LIB_DCOP)
 
 libkuriikwsfilter_la_SOURCES = kuriikwsfiltereng.cpp kuriikwsfilter.skel kuriikwsfilter.cpp searchprovider.cpp
 libkurisearchfilter_la_SOURCES = kurisearchfilter.cpp kurisearchfilter.skel kuriikwsfiltereng.cpp ikwsopts.cpp searchproviderdlg.cpp searchprovider.cpp
Index: kcontrol/ebrowsing/plugins/shorturi/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/ebrowsing/plugins/shorturi/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/ebrowsing/plugins/shorturi/Makefile.am	25 Jun 2002 02:03:44 -0000	1.1.1.1
+++ kcontrol/ebrowsing/plugins/shorturi/Makefile.am	25 Jun 2002 02:06:13 -0000	1.2
@@ -7,8 +7,8 @@
 
 kde_module_LTLIBRARIES = libkshorturifilter.la
 
-libkshorturifilter_la_LDFLAGS = -module $(KDE_PLUGIN)
-libkshorturifilter_la_LIBADD = $(LIB_KSYCOCA) $(LIB_KDEUI)
+libkshorturifilter_la_LDFLAGS = -module $(KDE_PLUGIN) $(QT_LDFLAGS)
+libkshorturifilter_la_LIBADD = $(LIB_KSYCOCA) $(LIB_KDEUI) $(LIB_KDECORE) $(LIB_QT) $(LIB_DCOP)
 
 libkshorturifilter_la_SOURCES = kshorturifilter.cpp kshorturifilter.skel
 
Index: kcontrol/email/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/email/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/email/Makefile.am	14 Aug 2002 14:28:28 -0000	1.1.1.2
+++ kcontrol/email/Makefile.am	14 Aug 2002 15:35:41 -0000	1.3
@@ -3,8 +3,8 @@
 kde_module_LTLIBRARIES = kcm_email.la
 
 kcm_email_la_SOURCES = emailbase.ui email.cpp
-kcm_email_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_email_la_LIBADD = -lkdeui $(LIB_KIO)
+kcm_email_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_email_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 INCLUDES= $(all_includes) 
 
 kcm_email_la_METASOURCES = AUTO
Index: kcontrol/energy/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/energy/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/energy/Makefile.am	14 Aug 2002 14:29:17 -0000	1.1.1.3
+++ kcontrol/energy/Makefile.am	14 Aug 2002 15:35:41 -0000	1.4
@@ -7,8 +7,8 @@
 kde_module_LTLIBRARIES = kcm_energy.la
 
 kcm_energy_la_SOURCES = energy.cpp
-kcm_energy_la_LDFLAGS = -module -avoid-version $(all_libraries) -no-undefined
-kcm_energy_la_LIBADD = $(DPMSLIB) $(LIB_KDEUI) $(LIB_KIO)
+kcm_energy_la_LDFLAGS = -module -avoid-version $(all_libraries) -no-undefined $(QT_LDFLAGS)
+kcm_energy_la_LIBADD = $(DPMSLIB) $(LIB_KDEUI) $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 kcm_energy_la_METASOURCES = energy.moc
 
 noinst_HEADERS = energy.h
Index: kcontrol/filetypes/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/filetypes/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/filetypes/Makefile.am	14 Aug 2002 14:28:27 -0000	1.1.1.2
+++ kcontrol/filetypes/Makefile.am	14 Aug 2002 15:35:41 -0000	1.3
@@ -1,7 +1,7 @@
 INCLUDES= $(all_includes)
 
-kcm_filetypes_la_LIBADD	= libfiletypes.la $(LIB_KIO)
-kcm_filetypes_la_LDFLAGS = -module -avoid-version -no-undefined $(all_libraries)
+kcm_filetypes_la_LIBADD	= libfiletypes.la $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_DCOP)
+kcm_filetypes_la_LDFLAGS = -module -avoid-version -no-undefined $(all_libraries) $(QT_LDFLAGS)
 kcm_filetypes_la_METASOURCES = AUTO
 
 kde_module_LTLIBRARIES = kcm_filetypes.la
Index: kcontrol/fonts/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/fonts/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/fonts/Makefile.am	10 Jul 2002 03:17:50 -0000	1.1.1.2
+++ kcontrol/fonts/Makefile.am	10 Jul 2002 03:42:56 -0000	1.3
@@ -5,8 +5,8 @@
 kde_module_LTLIBRARIES = kcm_fonts.la
 
 kcm_fonts_la_SOURCES = fonts.cpp kxftconfig.cpp
-kcm_fonts_la_LDFLAGS = $(KDE_RPATH) -module -avoid-version $(all_libraries) -no-undefined
-kcm_fonts_la_LIBADD = $(LIB_KDEUI)
+kcm_fonts_la_LDFLAGS = $(KDE_RPATH) -module -avoid-version $(all_libraries) -no-undefined $(QT_LDFLAGS)
+kcm_fonts_la_LIBADD = $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 kcm_fonts_la_METASOURCES = fonts.moc
 
 noinst_HEADERS = fonts.h kxftconfig.h
Index: kcontrol/icons/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/icons/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/icons/Makefile.am	14 Aug 2002 14:28:29 -0000	1.1.1.3
+++ kcontrol/icons/Makefile.am	14 Aug 2002 15:35:41 -0000	1.4
@@ -5,8 +5,8 @@
 kde_module_LTLIBRARIES = kcm_icons.la
 
 kcm_icons_la_SOURCES = iconthemes.cpp icons.cpp main.cpp
-kcm_icons_la_LDFLAGS = -module -avoid-version $(all_libraries) -no-undefined
-kcm_icons_la_LIBADD = $(LIB_KIO)
+kcm_icons_la_LDFLAGS = -module -avoid-version $(all_libraries) -no-undefined $(QT_LDFLAGS)
+kcm_icons_la_LIBADD = $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI)
 kcm_icons_la_METASOURCES = icons.moc iconthemes.moc main.moc
 
 
Index: kcontrol/info/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/info/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/info/Makefile.am	25 Jun 2002 02:03:45 -0000	1.1.1.1
+++ kcontrol/info/Makefile.am	25 Jun 2002 02:06:13 -0000	1.2
@@ -2,8 +2,8 @@
 
 kcm_info_la_SOURCES = main.cpp memory.cpp
 
-kcm_info_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined
-kcm_info_la_LIBADD = $(LIBALIB) $(LIB_KDEUI) $(LIB_TRU64_MACH) $(LIBCFG) $(LIBODM) $(LIBKSTAT) $(LIBDEVINFO)
+kcm_info_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS) $(FRAMEWORK_COREAUDIO)
+kcm_info_la_LIBADD = $(LIBALIB) $(LIB_KDEUI) $(LIB_TRU64_MACH) $(LIBCFG) $(LIBODM) $(LIBKSTAT) $(LIBDEVINFO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 INCLUDES= $(all_includes)
  
Index: kcontrol/info/info.cpp
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/info/info.cpp,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/info/info.cpp	10 Jul 2002 03:17:53 -0000	1.1.1.2
+++ kcontrol/info/info.cpp	10 Jul 2002 03:42:56 -0000	1.3
@@ -471,6 +471,8 @@
 #include "info_svr4.cpp"
 #elif _AIX
 #include "info_aix.cpp"
+#elif defined(__APPLE__)
+#include "info_osx.cpp"
 #else
 #include "info_generic.cpp"	/* Default for unsupportet systems.... */
 #endif
Index: kcontrol/info/info_osx.cpp
===================================================================
RCS file: kcontrol/info/info_osx.cpp
diff -N kcontrol/info/info_osx.cpp
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ kcontrol/info/info_osx.cpp	25 Jun 2002 02:06:13 -0000	1.1
@@ -0,0 +1,163 @@
+/*
+ * kdebase3-3.0.1-3.patch,v 1.2 2002/06/24 01:48:12 ranger Exp
+ *
+ * info_fbsd.cpp is part of the KDE program kcminfo.  This displays
+ * various information about the system (hopefully a FreeBSD system)
+ * it's running on.
+ */
+
+#define INFO_CPU_AVAILABLE
+//#define INFO_IRQ_AVAILABLE
+//#define INFO_DMA_AVAILABLE
+//#define INFO_PCI_AVAILABLE
+//#define INFO_IOPORTS_AVAILABLE
+#define INFO_SOUND_AVAILABLE
+#define INFO_DEVICES_AVAILABLE
+#define INFO_SCSI_AVAILABLE
+#define INFO_PARTITIONS_AVAILABLE
+#define INFO_XSERVER_AVAILABLE
+
+/*
+ * all following functions should return TRUE, when the Information
+ * was filled into the lBox-Widget. Returning FALSE indicates that
+ * information was not available.
+ */
+
+#include <sys/types.h>
+#include <sys/sysctl.h>
+
+#include <fstab.h>
+#include <stdio.h>
+#include <stdlib.h>
+
+#include <iostream.h>
+
+#include <qdict.h>
+#include <qfile.h>
+#include <qfontmetrics.h>
+#include <qptrlist.h>
+#include <qstring.h>
+#include <qtextstream.h>
+
+#include <kdebug.h>
+
+#include <mach/mach.h>
+#include <mach-o/arch.h>
+
+#ifdef HAVE_COREAUDIO
+#include <CoreAudio/CoreAudio.h>
+#endif
+
+#include <machine/limits.h>
+
+bool GetInfo_CPU (QListView *lBox)
+{
+
+	QString cpustring;
+
+        kern_return_t ret;
+        struct host_basic_info basic_info;
+        unsigned int count=HOST_BASIC_INFO_COUNT;
+
+        ret=host_info(mach_host_self(), HOST_BASIC_INFO, 
+                (host_info_t)&basic_info, &count);
+        if (ret != KERN_SUCCESS) {
+		kdDebug() << "unable to get host information from mach" << endl;
+		return false;
+        } else {
+		kdDebug() << "got Host Info: (" << basic_info.avail_cpus << ") CPUs available" << endl;
+        	const NXArchInfo *archinfo;
+        	archinfo=NXGetArchInfoFromCpuType(basic_info.cpu_type, basic_info.cpu_subtype);
+		new QListViewItem(lBox, i18n("Kernel is configured for %1 CPUs").arg(basic_info.max_cpus));
+		for (int i = 1; i <= basic_info.avail_cpus; i++) {
+			cpustring = i18n("CPU %1: %2").arg(i).arg(archinfo->description);
+			new QListViewItem(lBox, cpustring);
+		}
+		return true;
+	}
+	return false;
+}
+
+bool GetInfo_IRQ (QListView *)
+{
+	return false;
+}
+
+bool GetInfo_DMA (QListView *)
+{
+	return false;
+}
+
+bool GetInfo_PCI (QListView *)
+{
+	return false;
+}
+
+bool GetInfo_IO_Ports (QListView *)
+{
+	return false;
+}
+
+bool GetInfo_Sound (QListView *lBox)
+{
+#ifdef HAVE_COREAUDIO
+#define kMaxStringSize 1024
+	OSStatus status;
+	AudioDeviceID gOutputDeviceID;
+	unsigned long propertySize;
+	char deviceName[kMaxStringSize];
+	char manufacturer[kMaxStringSize];
+	propertySize = sizeof(gOutputDeviceID);
+	status = AudioHardwareGetProperty(kAudioHardwarePropertyDefaultOutputDevice, &propertySize, &gOutputDeviceID);
+	if (status) {
+		kdDebug() << "get default output device failed, status = " << (int)status << endl;
+		return false;
+	}
+
+	if (gOutputDeviceID != kAudioDeviceUnknown) {
+
+		propertySize = kMaxStringSize;
+
+		/* Device Name */
+		status = AudioDeviceGetProperty(gOutputDeviceID, 1, 0, kAudioDevicePropertyDeviceName, &propertySize, deviceName);
+		if (status) {
+			kdDebug() << "get device name failed, status = " << (int)status << endl;
+			return false;
+		}
+		new QListViewItem(lBox, i18n("Device Name: %1").arg(deviceName));
+
+		/* Manufacturer */
+		status = AudioDeviceGetProperty(gOutputDeviceID, 1, 0, kAudioDevicePropertyDeviceManufacturer, &propertySize, manufacturer);
+		if (status) {
+			kdDebug() << "get manufacturer failed, status = " << (int)status << endl;
+			return false;
+		}
+		new QListViewItem(lBox, i18n("Manufacturer: %1").arg(manufacturer));
+		return true;
+	} else {
+		return false;
+	}
+#else
+	return false;
+#endif
+}
+
+bool GetInfo_SCSI (QListView *lbox)
+{
+	return false;
+}
+
+bool GetInfo_Partitions (QListView *lbox)
+{
+	return false;
+}
+
+bool GetInfo_XServer_and_Video (QListView *lBox)
+{
+	return GetInfo_XServer_Generic( lBox );
+}
+
+bool GetInfo_Devices (QListView *lbox)
+{
+	return false;
+}
Index: kcontrol/info/memory.cpp
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/info/memory.cpp,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/info/memory.cpp	14 Aug 2002 14:28:16 -0000	1.1.1.3
+++ kcontrol/info/memory.cpp	14 Aug 2002 15:35:41 -0000	1.4
@@ -431,6 +431,8 @@
 
 #ifdef __linux__
 #include "memory_linux.cpp"
+#elif defined(__APPLE__)
+#include "memory_osx.cpp"
 #elif sgi
 #include "memory_sgi.cpp"
 #elif defined(__svr4__) && defined(sun)
Index: kcontrol/info/memory_osx.cpp
===================================================================
RCS file: kcontrol/info/memory_osx.cpp
diff -N kcontrol/info/memory_osx.cpp
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ kcontrol/info/memory_osx.cpp	25 Jun 2002 02:06:13 -0000	1.1
@@ -0,0 +1,72 @@
+#include <unistd.h>
+#include <stdlib.h>
+#include <qfile.h>
+#include <mach/mach_init.h>
+#include <mach/mach_host.h>
+#include <mach/host_info.h>
+#include <sys/stat.h>
+#include <dirent.h>
+#include <kdebug.h>
+
+void KMemoryWidget::update()
+{
+
+	vm_statistics_data_t vm_info;
+	mach_msg_type_number_t info_count;
+	DIR *dirp;
+	struct dirent *dp;
+	off_t total;
+
+	info_count = HOST_VM_INFO_COUNT;
+	if (host_statistics(mach_host_self (), HOST_VM_INFO, (host_info_t)&vm_info, &info_count)) {
+		kdDebug() << "could not get memory statistics" << endl;
+		return;
+	}
+
+	Memory_Info[TOTAL_MEM]    = (vm_info.active_count + vm_info.inactive_count +
+		vm_info.free_count + vm_info.wire_count) * vm_page_size;
+	Memory_Info[FREE_MEM]     = vm_info.free_count * vm_page_size;
+	Memory_Info[SHARED_MEM]   = NO_MEMORY_INFO;
+	Memory_Info[BUFFER_MEM]   = NO_MEMORY_INFO;
+	Memory_Info[CACHED_MEM]   = NO_MEMORY_INFO;
+
+	dirp = opendir("/private/var/vm");
+	if (!dirp) {
+		kdDebug() << "unable to open /private/var/vm" << endl;
+		return;
+	}
+
+	total = 0;
+
+	while ((dp = readdir (dirp)) != NULL) {
+		struct stat sb;
+		char fname [MAXNAMLEN];
+
+		if (strncmp (dp->d_name, "swapfile", 8))
+			continue;
+
+		strcpy (fname, "/private/var/vm/");
+		strcat (fname, dp->d_name);
+		if (stat (fname, &sb) < 0)
+			continue;
+
+		total += sb.st_size;
+	}
+	closedir (dirp);
+
+	info_count = HOST_VM_INFO_COUNT;
+	if (host_statistics (mach_host_self (), HOST_VM_INFO,
+		(host_info_t) &vm_info, &info_count)) {
+			kdDebug() << "unable to get VM info" << endl;
+	}
+
+	Memory_Info[SWAP_MEM]     = total;
+	// off_t used = (vm_info.pageouts - vm_info.pageins) * vm_page_size;
+	Memory_Info[FREESWAP_MEM] = NO_MEMORY_INFO;
+
+	/* free = vm_info.free_count * vm_page_size;
+	   used = vm_info.active_count * vm_page_size;
+	   total = (vm_info.active_count + vm_info.inactive_count +
+		vm_info.free_count + vm_info.wire_count) * vm_page_size; */
+
+}
Index: kcontrol/input/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/input/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/input/Makefile.am	10 Jul 2002 03:17:57 -0000	1.1.1.2
+++ kcontrol/input/Makefile.am	10 Jul 2002 03:42:56 -0000	1.3
@@ -4,8 +4,8 @@
 
 kcm_input_la_SOURCES = main.cpp mouse.cpp kmousedlg.ui
 
-kcm_input_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_input_la_LIBADD = $(XTESTLIB) $(LIB_KIO) $(LIB_KDEUI)
+kcm_input_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_input_la_LIBADD = $(XTESTLIB) $(LIB_KIO) $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 INCLUDES= $(all_includes)
 
Index: kcontrol/ioslaveinfo/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/ioslaveinfo/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/ioslaveinfo/Makefile.am	10 Jul 2002 03:17:59 -0000	1.1.1.2
+++ kcontrol/ioslaveinfo/Makefile.am	10 Jul 2002 03:42:56 -0000	1.3
@@ -2,8 +2,8 @@
 
 kcm_ioslaveinfo_la_SOURCES = kcmioslaveinfo.cpp
 
-kcm_ioslaveinfo_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_ioslaveinfo_la_LIBADD = -lkdeui $(LIB_KIO)
+kcm_ioslaveinfo_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_ioslaveinfo_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 INCLUDES= $(all_includes)
 
Index: kcontrol/kcontrol/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/kcontrol/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/kcontrol/Makefile.am	14 Aug 2002 14:29:19 -0000	1.1.1.3
+++ kcontrol/kcontrol/Makefile.am	14 Aug 2002 15:35:41 -0000	1.4
@@ -33,19 +33,19 @@
 	quickhelp.cpp moduletreeview.cpp moduleiconview.cpp \
 	kecdialog.cpp kcrootonly.cpp moduleIface.cpp moduleIface.skel
 
-kcontrol_la_LIBADD  = $(LIB_KDEUI) $(LIB_KSYCOCA)
-kcontrol_la_LDFLAGS = $(all_libraries) -module -avoid-version
+kcontrol_la_LIBADD  = $(LIB_KDEUI) $(LIB_KSYCOCA) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEFX) $(LIB_DCOP)
+kcontrol_la_LDFLAGS = $(all_libraries) -module -avoid-version $(QT_LDFLAGS)
 
 kcmshell_la_SOURCES = kcmshell.cpp moduleinfo.cpp modloader.cpp kecdialog.cpp \
 			proxywidget.cpp kcdialog.cpp global.cpp \
 			kcdialog.skel
-kcmshell_la_LIBADD = $(LIB_KDEUI) $(LIB_KSYCOCA)
-kcmshell_la_LDFLAGS = $(all_libraries) -module -avoid-version
+kcmshell_la_LIBADD = $(LIB_KDEUI) $(LIB_KSYCOCA) $(LIB_DCOP) $(LIB_KDECORE) $(LIB_QT)
+kcmshell_la_LDFLAGS = $(all_libraries) -module -avoid-version $(QT_LDFLAGS)
 
 
 kcminit_la_SOURCES = kcminit.cpp global.cpp
-kcminit_la_LIBADD   = $(LIB_KDEUI) $(LIB_KSYCOCA)
-kcminit_la_LDFLAGS = $(all_libraries) -module -avoid-version
+kcminit_la_LIBADD   = $(LIB_KDEUI) $(LIB_KSYCOCA) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_DCOP)
+kcminit_la_LDFLAGS = $(all_libraries) -module -avoid-version $(QT_LDFLAGS)
 
 kcontrol_SOURCES = dummy.cpp
 kcontrol_LDADD = kcontrol.la
Index: kcontrol/kdm/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/kdm/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.2
diff -u -b -u -r1.1.1.2 -r1.2
--- kcontrol/kdm/Makefile.am	14 Aug 2002 14:28:12 -0000	1.1.1.2
+++ kcontrol/kdm/Makefile.am	25 Jun 2002 02:06:14 -0000	1.2
@@ -4,8 +4,9 @@
 	kdropsite.cpp backgnd.cpp kdm-users.cpp kdm-conv.cpp \
 	klanguagebutton.cpp main.cpp bgdialogs.cpp
 
-kcm_kdm_la_LDFLAGS  = $(KDE_RPATH) $(all_libraries) -module -avoid-version -no-undefined
-kcm_kdm_la_LIBADD = $(top_builddir)/kcontrol/background/libbgnd.la $(LIB_KIO)
+kcm_kdm_la_LDFLAGS  = $(KDE_RPATH) $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_kdm_la_LIBADD = $(LIB_KIO) $(top_builddir)/kcontrol/background/libbgnd.la $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) \
+	$(LIB_KDEUI) $(LIB_KDEFX)
 
 INCLUDES= -I$(top_srcdir)/kcontrol/background -I$(top_srcdir)/kdesktop $(all_includes)
 
Index: kcontrol/keys/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/keys/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/keys/Makefile.am	10 Jul 2002 03:18:16 -0000	1.1.1.2
+++ kcontrol/keys/Makefile.am	10 Jul 2002 03:42:57 -0000	1.3
@@ -1,8 +1,8 @@
 kde_module_LTLIBRARIES = kcm_keys.la
 
 kcm_keys_la_SOURCES =  shortcuts.cpp modifiers.cpp main.cpp
-kcm_keys_la_LIBADD   = -lkdeui
-kcm_keys_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
+kcm_keys_la_LIBADD   = $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
+kcm_keys_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
 
 INCLUDES= $(all_includes)
 
Index: kcontrol/kfontinst/kfile-plugin/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/kfontinst/kfile-plugin/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/kfontinst/kfile-plugin/Makefile.am	10 Jul 2002 03:18:18 -0000	1.1.1.1
+++ kcontrol/kfontinst/kfile-plugin/Makefile.am	11 Jul 2002 22:35:30 -0000	1.2
@@ -2,7 +2,7 @@
 
 kfile_font_la_SOURCES = kfile_font.cpp
 kfile_font_la_LDFLAGS = $(all_libraries) -module $(KDE_PLUGIN)
-kfile_font_la_LIBADD = $(LIB_KSYCOCA)
+kfile_font_la_LIBADD = $(LIB_KSYCOCA) $(FREETYPE_LIB)
 
 kdelnkdir = $(kde_servicesdir)
 kde_services_DATA = kfile_font.desktop
Index: kcontrol/kfontinst/kfontinst/FontEngine.cpp
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/kfontinst/kfontinst/FontEngine.cpp,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/kfontinst/kfontinst/FontEngine.cpp	14 Aug 2002 14:29:43 -0000	1.1.1.3
+++ kcontrol/kfontinst/kfontinst/FontEngine.cpp	14 Aug 2002 15:35:42 -0000	1.4
@@ -26,9 +26,7 @@
 // (C) Craig Drummond, 2001
 ////////////////////////////////////////////////////////////////////////////////
 
-#ifdef HAVE_CONFIG_H
 #include "config.h"
-#endif
 
 #include "FontEngine.h"
 #if !defined KFI_THUMBNAIL && !defined KFI_METAINFO
@@ -53,11 +51,7 @@
 //       and some systems have both FreeType1 and FreeType2 installed - if we used <freetype/freetype.h> then it
 //       is likely that the FreeType1 header would be included!
 //
-#ifdef HAVE_FT2_FTSNAMES
 #include "freetype/ftsnames.h"
-#else
-#include "freetype/ftnames.h"
-#endif
 #include "freetype/ttnameid.h"
 #include "freetype/tttables.h"
 #include "freetype/ftimage.h"
Index: kcontrol/kfontinst/kfontinst/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/kfontinst/kfontinst/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
Index: kcontrol/kicker/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/kicker/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/kicker/Makefile.am	14 Aug 2002 14:29:23 -0000	1.1.1.3
+++ kcontrol/kicker/Makefile.am	14 Aug 2002 15:35:42 -0000	1.4
@@ -5,8 +5,9 @@
 			menutab_impl.cpp extensionInfo.cpp main.cpp menutab_kcm.cpp \
                         lookandfeeltab_kcm.cpp advancedOptions.ui advancedDialog.cpp
 
-kcm_kicker_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_kicker_la_LIBADD =  ../background/libbgnd.la $(LIB_KIO)
+kcm_kicker_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_kicker_la_LIBADD = $(top_builddir)/kcontrol/background/libbgnd.la $(LIB_KIO) $(LIB_KSYCOCA) \
+	$(LIB_KFILE) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI) $(LIB_DCOP)
 INCLUDES= -I$(srcdir)/../background $(all_includes)
 
 kcm_kicker_la_METASOURCES = AUTO
Index: kcontrol/kio/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/kio/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/kio/Makefile.am	14 Aug 2002 14:28:14 -0000	1.1.1.3
+++ kcontrol/kio/Makefile.am	14 Aug 2002 15:35:42 -0000	1.4
@@ -13,8 +13,8 @@
       kproxydlg.cpp kcookiesmanagement.cpp fakeuaprovider.cpp \
       uagentproviderdlg.cpp netpref.cpp cache.cpp ksaveioconfig.cpp
 
-kcm_kio_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_kio_la_LIBADD = $(LIB_KSYCOCA) $(LIB_KIO)
+kcm_kio_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_kio_la_LIBADD = $(LIB_KSYCOCA) $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI) $(LIB_DCOP)
 
 messages: rc.cpp
 	$(XGETTEXT) *.cpp -o $(podir)/kcmkio.pot
Index: kcontrol/knotify/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/knotify/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/knotify/Makefile.am	14 Aug 2002 14:28:33 -0000	1.1.1.3
+++ kcontrol/knotify/Makefile.am	14 Aug 2002 15:35:42 -0000	1.4
@@ -4,8 +4,8 @@
 
 kcm_knotify_la_SOURCES = knotify.cpp events.cpp
 
-kcm_knotify_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined
-kcm_knotify_la_LIBADD = $(LIB_KIO)
+kcm_knotify_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_knotify_la_LIBADD = $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI) $(LIB_DCOP)
 INCLUDES= $(all_includes)
  
 kcm_knotify_la_METASOURCES = AUTO
Index: kcontrol/konq/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/konq/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/konq/Makefile.am	14 Aug 2002 14:28:20 -0000	1.1.1.3
+++ kcontrol/konq/Makefile.am	14 Aug 2002 15:35:42 -0000	1.4
@@ -9,8 +9,8 @@
 		fontopts.cpp previews.cpp \
 		desktop.cpp uiserver.stub main.cpp
 
-kcm_konq_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_konq_la_LIBADD = $(LIB_KIO) $(LIB_KDEUI) $(LIB_KSYCOCA)
+kcm_konq_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_konq_la_LIBADD = $(LIB_KIO) $(LIB_KDEUI) $(LIB_KSYCOCA) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_DCOP)
 
 kcm_konq_la_DATA = overlapping.png onlyone.png
 kcm_konq_ladir = $(kde_datadir)/kcontrol/pics
Index: kcontrol/konqhtml/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/konqhtml/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/konqhtml/Makefile.am	14 Aug 2002 14:29:12 -0000	1.1.1.2
+++ kcontrol/konqhtml/Makefile.am	14 Aug 2002 15:35:42 -0000	1.3
@@ -9,8 +9,8 @@
 			     javaopts.cpp pluginopts.cpp appearance.cpp \
 			     khttpoptdlg.cpp policydlg.cpp main.cpp nsconfigwidget.ui
 
-kcm_konqhtml_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_konqhtml_la_LIBADD = -lkhtml -lkdeui
+kcm_konqhtml_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_konqhtml_la_LIBADD = $(LIB_KHTML) $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_DCOP) $(LIB_KIO)
 
 data_DATA = khtml_behavior.desktop khtml_java_js.desktop khtml_fonts.desktop khtml_plugins.desktop
 datadir = $(kde_appsdir)/Settings/WebBrowsing
Index: kcontrol/konsole/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/konsole/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/konsole/Makefile.am	14 Aug 2002 14:29:11 -0000	1.1.1.2
+++ kcontrol/konsole/Makefile.am	14 Aug 2002 15:35:42 -0000	1.3
@@ -5,8 +5,8 @@
 kcm_konsole_la_SOURCES =  schemaeditor.cpp sessioneditor.cpp kcmkonsole.cpp \
 	schemadialog.ui sessiondialog.ui kcmkonsoledialog.ui
 
-kcm_konsole_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_konsole_la_LIBADD = -lkdeui $(LIB_KIO)
+kcm_konsole_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_konsole_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_DCOP) $(LIB_KDEFX)
 INCLUDES= $(all_includes) 
 
 kcm_konsole_la_METASOURCES = AUTO
Index: kcontrol/krdb/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/krdb/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/krdb/Makefile.am	10 Jul 2002 03:19:14 -0000	1.1.1.2
+++ kcontrol/krdb/Makefile.am	10 Jul 2002 03:42:58 -0000	1.3
@@ -7,8 +7,8 @@
 
 noinst_LTLIBRARIES = libkrdb.la
 libkrdb_la_SOURCES = krdb.cpp
-libkrdb_la_LIBADD = $(LIB_KDECORE)
-libkrdb_la_LDFLAGS = -no-undefined $(all_libraries) 
+libkrdb_la_LIBADD = $(LIB_KDECORE) $(LIB_X11) $(LIB_QT)
+libkrdb_la_LDFLAGS = -no-undefined $(all_libraries) $(QT_LDFLAGS)
 
 messages:
 	$(XGETTEXT) *.cpp -o $(podir)/krdb.pot
Index: kcontrol/launch/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/launch/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/launch/Makefile.am	25 Jun 2002 02:03:47 -0000	1.1.1.1
+++ kcontrol/launch/Makefile.am	25 Jun 2002 02:06:14 -0000	1.2
@@ -2,8 +2,8 @@
 kde_module_LTLIBRARIES        = kcm_launch.la
 INCLUDES                      = $(all_includes) 
 kcm_launch_la_SOURCES      = kcmlaunch.cpp
-kcm_launch_la_LDFLAGS      = $(all_libraries) $(KDE_PLUGIN) -module
-kcm_launch_la_LIBADD       = $(LIB_KDEUI)
+kcm_launch_la_LDFLAGS      = $(all_libraries) $(KDE_PLUGIN) -module $(QT_LDFLAGS)
+kcm_launch_la_LIBADD       = $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_DCOP)
 kcm_launch_la_METASOURCES  = AUTO
 noinst_HEADERS                = kcmlaunch.h
 data_DATA                     = kcmlaunch.desktop
Index: kcontrol/locale/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/locale/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/locale/Makefile.am	14 Aug 2002 14:29:24 -0000	1.1.1.2
+++ kcontrol/locale/Makefile.am	14 Aug 2002 15:35:42 -0000	1.3
@@ -10,8 +10,8 @@
 METASOURCES = AUTO
 noinst_HEADERS = toplevel.h kcmlocale.h klanguagebutton.h klocalesample.h menuitem.h localenum.h localemon.h localetime.h localeother.h kmenubutton.h
 
-kcm_locale_la_LDFLAGS = -module -avoid-version $(all_libraries) -no-undefined
-kcm_locale_la_LIBADD = $(LIB_KDEUI)
+kcm_locale_la_LDFLAGS = -module -avoid-version $(all_libraries) -no-undefined $(QT_LDFLAGS)
+kcm_locale_la_LIBADD = $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 messages:
 	$(XGETTEXT) $(kcm_locale_la_SOURCES) -o $(podir)/kcmlocale.pot
Index: kcontrol/midi/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/midi/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/midi/Makefile.am	14 Aug 2002 14:28:21 -0000	1.1.1.2
+++ kcontrol/midi/Makefile.am	14 Aug 2002 15:35:42 -0000	1.3
@@ -3,7 +3,7 @@
 kcm_midi_la_SOURCES = midi.cpp 
 
 kcm_midi_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_midi_la_LIBADD = -lkdeui $(LIB_KIO) -lkmid 
+kcm_midi_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIB_KMID) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 INCLUDES= $(all_includes) 
 
 kcm_midi_la_METASOURCES = AUTO
Index: kcontrol/nics/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/nics/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/nics/Makefile.am	14 Aug 2002 14:28:21 -0000	1.1.1.3
+++ kcontrol/nics/Makefile.am	14 Aug 2002 15:35:42 -0000	1.4
@@ -2,8 +2,8 @@
 
 kcm_nic_la_SOURCES = nic.cpp
 
-kcm_nic_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_nic_la_LIBADD = -lkdeui $(LIB_KIO) $(LIBSOCKET)
+kcm_nic_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_nic_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIBSOCKET) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 INCLUDES= $(all_includes)
 
Index: kcontrol/passwords/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/passwords/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/passwords/Makefile.am	25 Jun 2002 02:03:48 -0000	1.1.1.1
+++ kcontrol/passwords/Makefile.am	25 Jun 2002 02:06:14 -0000	1.2
@@ -5,7 +5,7 @@
 kde_module_LTLIBRARIES = kcm_passwords.la
 kcm_passwords_la_SOURCES = passwords.cpp
 kcm_passwords_la_LDFLAGS = -module -avoid-version $(all_libraries) -no-undefined
-kcm_passwords_la_LIBADD = $(LIB_KDEUI) -lkdesu
+kcm_passwords_la_LIBADD = $(LIB_KDEUI) $(LIB_KDESU) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 METASOURCES = AUTO
 noinst_HEADERS = passwords.h
Index: kcontrol/samba/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/samba/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/samba/Makefile.am	14 Aug 2002 14:28:31 -0000	1.1.1.3
+++ kcontrol/samba/Makefile.am	14 Aug 2002 15:35:43 -0000	1.4
@@ -2,8 +2,8 @@
 
 kcm_samba_la_SOURCES = main.cpp ksmbstatus.cpp kcmsambaimports.cpp kcmsambalog.cpp kcmsambastatistics.cpp
 
-kcm_samba_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_samba_la_LIBADD = $(LIB_KIO)
+kcm_samba_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_samba_la_LIBADD = $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI)
 
 INCLUDES= $(all_includes)
 
Index: kcontrol/screensaver/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/screensaver/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/screensaver/Makefile.am	25 Jun 2002 02:03:48 -0000	1.1.1.1
+++ kcontrol/screensaver/Makefile.am	25 Jun 2002 02:06:14 -0000	1.2
@@ -7,8 +7,8 @@
 kde_module_LTLIBRARIES = kcm_screensaver.la
 
 kcm_screensaver_la_SOURCES = scrnsave.cpp
-kcm_screensaver_la_LDFLAGS = -module -avoid-version $(all_libraries) -no-undefined
-kcm_screensaver_la_LIBADD = $(LIB_KSYCOCA) $(DPMSLIB)
+kcm_screensaver_la_LDFLAGS = -module -avoid-version $(all_libraries) -no-undefined $(QT_LDFLAGS)
+kcm_screensaver_la_LIBADD = $(LIB_KSYCOCA) $(DPMSLIB) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI) $(LIB_DCOP)
 kcm_screensaver_la_METASOURCES = scrnsave.moc
 
 noinst_HEADERS = scrnsave.h
Index: kcontrol/smartcard/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/smartcard/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/smartcard/Makefile.am	14 Aug 2002 14:29:18 -0000	1.1.1.3
+++ kcontrol/smartcard/Makefile.am	14 Aug 2002 15:35:43 -0000	1.4
@@ -3,9 +3,9 @@
 
 kcm_smartcard_la_SOURCES = smartcard.cpp smartcardbase.ui nosmartcardbase.ui smartcard.skel
 
-kcm_smartcard_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
+kcm_smartcard_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
 
-kcm_smartcard_la_LIBADD = -lkdeui -lksmartcard $(LIB_KIO)
+kcm_smartcard_la_LIBADD = $(LIB_KDEUI) -lksmartcard $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 kcm_smartcard_la_METASOURCES = AUTO
 
Index: kcontrol/smserver/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/smserver/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/smserver/Makefile.am	25 Jun 2002 02:03:48 -0000	1.1.1.1
+++ kcontrol/smserver/Makefile.am	25 Jun 2002 02:06:14 -0000	1.2
@@ -1,8 +1,8 @@
 kde_module_LTLIBRARIES = kcm_smserver.la
 
 kcm_smserver_la_SOURCES = kcmsmserver.cpp smserverconfigdlg.ui smserverconfigimpl.cpp
-kcm_smserver_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_smserver_la_LIBADD = -lkdeui
+kcm_smserver_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_smserver_la_LIBADD = $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 INCLUDES= $(all_includes) 
 
 kcm_smserver_la_METASOURCES = AUTO
Index: kcontrol/socks/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/socks/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/socks/Makefile.am	14 Aug 2002 14:28:31 -0000	1.1.1.2
+++ kcontrol/socks/Makefile.am	14 Aug 2002 15:35:43 -0000	1.3
@@ -3,8 +3,8 @@
 
 kcm_socks_la_SOURCES = socks.cpp socksbase.ui 
 
-kcm_socks_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_socks_la_LIBADD = -lkdeui $(LIB_KIO)
+kcm_socks_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_socks_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 kcm_socks_la_METASOURCES = AUTO
 
Index: kcontrol/spellchecking/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/spellchecking/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/spellchecking/Makefile.am	25 Jun 2002 02:03:48 -0000	1.1.1.1
+++ kcontrol/spellchecking/Makefile.am	25 Jun 2002 02:06:14 -0000	1.2
@@ -2,8 +2,8 @@
 
 kcm_spellchecking_la_SOURCES = spellchecking.cpp
 
-kcm_spellchecking_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined
-kcm_spellchecking_la_LIBADD = -lkdeui -lkspell
+kcm_spellchecking_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_spellchecking_la_LIBADD = $(LIB_KDEUI) $(LIB_KSPELL) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 INCLUDES= $(all_includes)
 
Index: kcontrol/taskbar/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/taskbar/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kcontrol/taskbar/Makefile.am	14 Aug 2002 14:29:14 -0000	1.1.1.2
+++ kcontrol/taskbar/Makefile.am	14 Aug 2002 15:35:43 -0000	1.3
@@ -1,8 +1,8 @@
 kde_module_LTLIBRARIES = kcm_taskbar.la
 
 kcm_taskbar_la_SOURCES = kcmtaskbarui.ui kcmtaskbar.cpp
-kcm_taskbar_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_taskbar_la_LIBADD = -lkdeui
+kcm_taskbar_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_taskbar_la_LIBADD = $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_DCOP)
 INCLUDES= $(all_includes) 
 
 kcm_taskbar_la_METASOURCES = AUTO
Index: kcontrol/thememgr/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/thememgr/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kcontrol/thememgr/Makefile.am	14 Aug 2002 14:29:26 -0000	1.1.1.3
+++ kcontrol/thememgr/Makefile.am	14 Aug 2002 15:35:43 -0000	1.4
@@ -13,8 +13,8 @@
 	options.h version.h groupdetails.h \
 	themecreator.h newthemedlg.h
 
-kcm_themes_la_LIBADD = $(LIB_KIO) 
-kcm_themes_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module
+kcm_themes_la_LIBADD = $(LIB_KIO) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE) $(LIB_KDEUI) $(LIB_DCOP)
+kcm_themes_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module $(QT_LDFLAGS)
 
 apps_DATA = kthememgr.desktop
 appsdir = $(kde_appsdir)/Settings/LookNFeel
Index: kcontrol/usbview/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kcontrol/usbview/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kcontrol/usbview/Makefile.am	25 Jun 2002 02:03:48 -0000	1.1.1.1
+++ kcontrol/usbview/Makefile.am	25 Jun 2002 02:06:14 -0000	1.2
@@ -2,8 +2,8 @@
 
 kcm_usb_la_SOURCES = kcmusb.cpp usbdevices.cpp usbdb.cpp
 
-kcm_usb_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined
-kcm_usb_la_LIBADD = $(LIB_KDEUI)
+kcm_usb_la_LDFLAGS  = $(all_libraries) -module -avoid-version -no-undefined $(QT_LDFLAGS)
+kcm_usb_la_LIBADD = $(LIB_KDEUI) $(LIB_X11) $(LIB_QT) $(LIB_KDECORE)
 
 INCLUDES= $(all_includes) 
 
Index: kdeprint/kjobviewer/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kdeprint/kjobviewer/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kdeprint/kjobviewer/Makefile.am	25 Jun 2002 02:03:49 -0000	1.1.1.1
+++ kdeprint/kjobviewer/Makefile.am	25 Jun 2002 02:06:14 -0000	1.2
@@ -9,8 +9,8 @@
 
 kjobviewer_la_SOURCES = kjobviewer.cpp main.cpp
 kjobviewer_la_METASOURCES = AUTO
-kjobviewer_la_LIBADD = -lkdeprint_management $(LIB_KDEUI)
-kjobviewer_la_LDFLAGS = -module -avoid-version $(all_libraries) $(KDE_RPATH)
+kjobviewer_la_LIBADD = -lkdeprint_management $(LIB_KDEUI) $(LIB_KDECORE) $(LIB_QT) $(LIB_KDEPRINT) $(LIB_DCOP)
+kjobviewer_la_LDFLAGS = -module -avoid-version $(all_libraries) $(KDE_RPATH) $(QT_LDFLAGS)
 
 noinst_HEADERS = kjobviewer.h
 
Index: kdeprint/kprinter/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kdeprint/kprinter/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.2
diff -u -b -u -r1.1.1.2 -r1.2
--- kdeprint/kprinter/Makefile.am	10 Jul 2002 03:20:23 -0000	1.1.1.2
+++ kdeprint/kprinter/Makefile.am	11 Jul 2002 22:35:30 -0000	1.2
@@ -8,7 +8,7 @@
 kprinter_LDFLAGS = $(KDE_RPATH) $(all_libraries)
 
 kprinter_la_SOURCES = main.cpp printwrapper.cpp
-kprinter_la_LIBADD = -lkdeprint
+kprinter_la_LIBADD = -lkdeprint $(LIB_QT) $(LIB_KIO) $(LIB_KDEUI) $(LIB_KDECORE)
 kprinter_la_LDFLAGS = -module -avoid-version $(all_libraries) $(KDE_RPATH)
 kprinter_METASOURCES = AUTO
 
Index: kdialog/kdialog.cpp
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kdialog/kdialog.cpp,v
retrieving revision 1.1.1.1
retrieving revision 1.3
diff -u -b -u -r1.1.1.1 -r1.3
--- kdialog/kdialog.cpp	14 Aug 2002 14:27:19 -0000	1.1.1.1
+++ kdialog/kdialog.cpp	26 Aug 2002 19:38:08 -0000	1.3
@@ -20,8 +20,10 @@
 
 #include <fcntl.h>
 #include <unistd.h>
-#include <stream.h>
+#include <iostream>
 #include <stdlib.h>
+
+using namespace std;
 
 #include <qlist.h>
 #include <qfile.h>
Index: kdm/backend/dm.h
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kdm/backend/dm.h,v
retrieving revision 1.1.1.2
retrieving revision 1.2
diff -u -b -u -r1.1.1.2 -r1.2
--- kdm/backend/dm.h	10 Jul 2002 03:20:52 -0000	1.1.1.2
+++ kdm/backend/dm.h	16 Sep 2002 14:14:13 -0000	1.2
@@ -41,6 +41,10 @@
 #ifndef _DM_H_
 #define _DM_H_ 1
 
+#ifdef __APPLE__
+#define CSRG_BASED
+#endif
+
 #include "greet.h"
 
 #include <X11/Xos.h>
Index: khelpcenter/khelpcenter.desktop
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/khelpcenter/khelpcenter.desktop,v
retrieving revision 1.1.1.3
retrieving revision 1.3
diff -u -b -u -r1.1.1.3 -r1.3
Index: khotkeys/khotkeys/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/khotkeys/khotkeys/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- khotkeys/khotkeys/Makefile.am	25 Jun 2002 02:03:52 -0000	1.1.1.1
+++ khotkeys/khotkeys/Makefile.am	25 Jun 2002 02:06:14 -0000	1.2
@@ -4,7 +4,7 @@
 lib_LTLIBRARIES = khotkeys.la
 
 khotkeys_la_SOURCES = khotkeys.cpp main.cpp khotkeys.skel
-khotkeys_la_LIBADD   = ../shared/libshared.la $(LIB_KSYCOCA)
+khotkeys_la_LIBADD   = ../shared/libshared.la $(LIB_KSYCOCA) $(LIB_QT) $(LIB_X11) $(LIB_KDECORE) $(LIB_DCOP)
 khotkeys_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
 khotkeys_SOURCES = dummy.cpp
Index: kicker/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kicker/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kicker/Makefile.am	10 Jul 2002 03:21:29 -0000	1.1.1.2
+++ kicker/Makefile.am	10 Jul 2002 03:42:58 -0000	1.3
@@ -7,8 +7,10 @@
 
 CLEANFILES = dummy.cpp dummy_la.cpp
 
-kicker_la_LIBADD = core/libkicker_core.la  buttons/libkicker_buttons.la \
-	ui/libkicker_ui.la share/libkickermain.la $(LIB_KIO) 
+kicker_la_LIBADD = $(top_builddir)/kicker/core/libkicker_core.la \
+	$(top_builddir)/kicker/buttons/libkicker_buttons.la \
+	$(top_builddir)/kicker/ui/libkicker_ui.la \
+	$(top_builddir)/kicker/share/libkickermain.la $(LIB_KIO) 
 
 kicker_la_SOURCES = dummy.cpp
 kicker_la_LDFLAGS = $(KDE_PLUGIN) -no-undefined -module $(all_libraries)
Index: kicker/menuext/kdeprint/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kicker/menuext/kdeprint/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kicker/menuext/kdeprint/Makefile.am	25 Jun 2002 02:03:52 -0000	1.1.1.1
+++ kicker/menuext/kdeprint/Makefile.am	25 Jun 2002 02:06:14 -0000	1.2
@@ -4,7 +4,7 @@
 
 kickermenu_kdeprint_la_SOURCES = print_mnu.cpp
 kickermenu_kdeprint_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kickermenu_kdeprint_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) -lkdeprint
+kickermenu_kdeprint_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIB_KDEPRINT) $(LIB_KDECORE) $(LIB_QT)
 
 kickermenu_kdeprint_la_METASOURCES = AUTO
 
Index: kicker/menuext/konsole/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kicker/menuext/konsole/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kicker/menuext/konsole/Makefile.am	14 Aug 2002 14:30:12 -0000	1.1.1.1
+++ kicker/menuext/konsole/Makefile.am	15 Aug 2002 15:26:45 -0000	1.2
@@ -3,8 +3,8 @@
 kde_module_LTLIBRARIES = kickermenu_konsole.la
 
 kickermenu_konsole_la_SOURCES = konsole_mnu.cpp konsolebookmarkhandler.cpp konsolebookmarkmenu.cpp
-kickermenu_konsole_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kickermenu_konsole_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO)
+kickermenu_konsole_la_LDFLAGS = $(all_libraries) -module -avoid-version $(QT_LDFLAGS)
+kickermenu_konsole_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIB_KDECORE) $(LIB_QT)
 
 kickermenu_konsole_la_METASOURCES = AUTO
 
Index: kicker/menuext/prefmenu/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kicker/menuext/prefmenu/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kicker/menuext/prefmenu/Makefile.am	10 Jul 2002 03:22:41 -0000	1.1.1.1
+++ kicker/menuext/prefmenu/Makefile.am	11 Jul 2002 22:35:30 -0000	1.2
@@ -4,7 +4,8 @@
 
 kickermenu_prefmenu_la_SOURCES = prefmenu.cpp
 kickermenu_prefmenu_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kickermenu_prefmenu_la_LIBADD = $(LIB_KDEUI) $(top_builddir)/kicker/ui/libkicker_ui.la
+kickermenu_prefmenu_la_LIBADD = $(LIB_KDEUI) $(top_builddir)/kicker/ui/libkicker_ui.la \
+	$(top_builddir)/kicker/kicker.la
 
 kickermenu_prefmenu_la_METASOURCES = AUTO
 
Index: kicker/menuext/recentdocs/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kicker/menuext/recentdocs/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kicker/menuext/recentdocs/Makefile.am	10 Jul 2002 03:22:42 -0000	1.1.1.1
+++ kicker/menuext/recentdocs/Makefile.am	11 Jul 2002 22:35:30 -0000	1.2
@@ -4,7 +4,8 @@
 
 kickermenu_recentdocs_la_SOURCES = recentdocsmenu.cpp
 kickermenu_recentdocs_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kickermenu_recentdocs_la_LIBADD = $(LIB_KDEUI) $(top_builddir)/kicker/ui/libkicker_ui.la
+kickermenu_recentdocs_la_LIBADD = $(LIB_KDEUI) $(top_builddir)/kicker/ui/libkicker_ui.la \
+	$(top_builddir)/kicker/kicker.la
 
 kickermenu_recentdocs_la_METASOURCES = AUTO
 
Index: kioslave/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kioslave/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.5
diff -u -b -u -r1.1.1.3 -r1.5
--- kioslave/Makefile.am	14 Aug 2002 14:27:55 -0000	1.1.1.3
+++ kioslave/Makefile.am	14 Aug 2002 15:35:43 -0000	1.5
@@ -8,10 +8,14 @@
 SMB_SUBDIR=smb
 endif
 
+if include_kioslave_nfs
+NFS_SUBDIR=nfs
+endif
+
 if include_devicesdir
 DEVICES_SUBDIR=devices
 endif
 
-
-SUBDIRS = cgi floppy filter fish info mac man nfs nntp pop3 imap4 smtp \
-  smbro sftp tar zip finger thumbnail $(LDAP_SUBDIR) $(SMB_SUBDIR) $(DEVICES_SUBDIR)
+SUBDIRS = cgi floppy filter fish info mac man nntp pop3 imap4 smtp \
+	smbro sftp tar zip finger thumbnail $(LDAP_SUBDIR) $(SMB_SUBDIR) \
+	$(NFS_SUBDIR) $(DEVICES_SUBDIR)
Index: kioslave/devices/kdedmodule/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kioslave/devices/kdedmodule/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- kioslave/devices/kdedmodule/Makefile.am	10 Jul 2002 03:22:56 -0000	1.1.1.1
+++ kioslave/devices/kdedmodule/Makefile.am	11 Jul 2002 22:35:30 -0000	1.2
@@ -3,8 +3,8 @@
 INCLUDES = $(all_includes)
 LDFLAGS =$(all_libraries)
 kded_mountwatcher_la_SOURCES = mountwatcher.cpp mountwatcher.skel disklist.cpp disks.cpp
-kded_mountwatcher_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kded_mountwatcher_la_LIBADD = $(LIB_KSYCOCA)
+kded_mountwatcher_la_LDFLAGS = $(all_libraries) -module -avoid-version $(QT_LDFLAGS)
+kded_mountwatcher_la_LIBADD = $(LIB_KSYCOCA) $(LIB_QT) $(LIB_DCOP) $(LIB_KDECORE) $(LIB_KDED)
 
 METASOURCES = AUTO
 
Index: kioslave/nfs/.cvsignore
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kioslave/nfs/.cvsignore,v
retrieving revision 1.1.1.2
retrieving revision 1.2
diff -u -b -u -r1.1.1.2 -r1.2
--- kioslave/nfs/.cvsignore	10 Jul 2002 03:23:11 -0000	1.1.1.2
+++ kioslave/nfs/.cvsignore	16 Sep 2002 13:19:20 -0000	1.2
@@ -1,4 +1,4 @@
-kio_*
+kio_nfs.loT
 Makefile.in
 Makefile
 *~
Index: kioslave/nfs/README
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kioslave/nfs/README,v
retrieving revision 1.1.1.1
retrieving revision 1.4
diff -u -b -u -r1.1.1.1 -r1.4
--- kioslave/nfs/README	25 Jun 2002 02:03:52 -0000	1.1.1.1
+++ kioslave/nfs/README	16 Sep 2002 14:52:42 -0000	1.4
@@ -1,3 +1,29 @@
 this is an ioslave for KDE 2 for NFS, version 2.
 
 Alex
+
+Darwin notes --
+
+It looks like there are C++ type issues with the Darwin headers
+(try building, you'll see the "too many arguments to function" stuff)
+
+The problem seems to be <rpc/clnt.h> having definitions that don't
+play nice with C++.  The client rpc handle does a bunch of void stuff
+in the struct which is fine in C but makes an empty arg list in C++.
+
+typedef struct {
+        AUTH    *cl_auth;                       /* authenticator */
+        struct clnt_ops {
+                enum clnt_stat  (*cl_call)();   /* call remote procedure */
+                void            (*cl_abort)();  /* abort a call */
+                void            (*cl_geterr)(); /* get specific error code */
+                bool_t          (*cl_freeres)(); /* frees results */
+                void            (*cl_destroy)();/* destroy this structure */
+                bool_t          (*cl_control)();/* the ioctl() of rpc */
+        } *cl_ops;
+        caddr_t                 cl_private;     /* private stuff */
+} CLIENT;
+
+
+The only solution is to probably reimplement clnt.h locally to fix
+these (wrapping the "#include <rpc/rpc.h>" in an extern "C" isn't enough).
Index: kioslave/nfs/configure.in.in
===================================================================
RCS file: kioslave/nfs/configure.in.in
diff -N kioslave/nfs/configure.in.in
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ kioslave/nfs/configure.in.in	12 Jul 2002 02:04:22 -0000	1.2
@@ -0,0 +1,7 @@
+AC_MSG_CHECKING(whether to compile NFS support)
+AC_ARG_WITH(nfs,
+[  --without-nfs           Disable NFS kioslave [default=no]],
+	with_nfs=$withval, with_nfs=yes
+)dnl
+AC_MSG_RESULT($withval)
+AM_CONDITIONAL(include_kioslave_nfs, test "$with_nfs" = "yes")
Index: kioslave/nfs/kio_nfs.cpp
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kioslave/nfs/kio_nfs.cpp,v
retrieving revision 1.1.2.2
retrieving revision 1.3
diff -u -b -u -r1.1.2.2 -r1.3
Index: kioslave/nfs/kio_nfs.h
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kioslave/nfs/kio_nfs.h,v
retrieving revision 1.1.2.2
retrieving revision 1.3
diff -u -b -u -r1.1.2.2 -r1.3
Index: klipper/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/klipper/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- klipper/Makefile.am	10 Jul 2002 03:23:37 -0000	1.1.1.2
+++ klipper/Makefile.am	10 Jul 2002 03:42:59 -0000	1.3
@@ -6,12 +6,12 @@
 
 CLEANFILES = dummy.cpp
 
-klipper_la_LIBADD = $(LIB_KDEUI) $(LIB_KSYCOCA) 
+klipper_la_LIBADD = $(LIB_KDEUI) $(LIB_KSYCOCA) $(LIB_QT) $(LIB_KDECORE) $(LIB_X11) $(LIB_DCOP)
 klipper_la_SOURCES = main.cpp toplevel.cpp urlgrabber.cpp configdialog.cpp \
     toplevel.skel
 
 klipper_la_METASOURCES = AUTO
-klipper_la_LDFLAGS = $(all_libraries) -module -avoid-version
+klipper_la_LDFLAGS = $(all_libraries) $(QT_LDFLAGS) -module -avoid-version
 
 klipper_LDADD = klipper.la $(LIB_KSYCOCA)
 klipper_SOURCES = dummy.cpp
Index: kmenuedit/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kmenuedit/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- kmenuedit/Makefile.am	14 Aug 2002 14:27:55 -0000	1.1.1.3
+++ kmenuedit/Makefile.am	14 Aug 2002 15:35:43 -0000	1.4
@@ -7,8 +7,8 @@
 
 kmenuedit_la_SOURCES = basictab.cpp treeview.cpp desktopfileeditor.cpp menueditview.cpp kmenuedit.cpp main.cpp khotkeys.cpp
 
-kmenuedit_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO)
-kmenuedit_la_LDFLAGS = $(all_libraries) -module -avoid-version
+kmenuedit_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIB_KDECORE) $(LIB_QT) $(LIB_DCOP)
+kmenuedit_la_LDFLAGS = $(all_libraries) $(QT_LDFLAGS) -module -avoid-version
 
 kmenuedit_SOURCES = dummy.cpp
 kmenuedit_LDADD   = kmenuedit.la
Index: konqueror/client/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/konqueror/client/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.4
diff -u -b -u -r1.1.1.2 -r1.4
--- konqueror/client/Makefile.am	14 Aug 2002 14:30:59 -0000	1.1.1.2
+++ konqueror/client/Makefile.am	14 Aug 2002 15:35:43 -0000	1.4
@@ -4,8 +4,8 @@
 lib_LTLIBRARIES = kfmclient.la
 
 INCLUDES= -I.. $(all_includes)
-kfmclient_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kfmclient_la_LIBADD =  $(LIB_KIO)
+kfmclient_la_LDFLAGS = $(all_libraries) $(QT_LDFLAGS) -module -avoid-version
+kfmclient_la_LIBADD =  $(LIB_KIO) $(LIB_KDECORE) $(LIB_QT) $(LIB_DCOP) $(LIB_KDEUI)
 kfmclient_la_SOURCES = kfmclient.cc KonquerorIface.stub KDesktopIface.stub
 
 noinst_HEADERS = kfmclient.h
Index: konqueror/keditbookmarks/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/konqueror/keditbookmarks/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.2
diff -u -b -u -r1.1.1.2 -r1.2
--- konqueror/keditbookmarks/Makefile.am	10 Jul 2002 03:24:04 -0000	1.1.1.2
+++ konqueror/keditbookmarks/Makefile.am	12 Jul 2002 02:04:22 -0000	1.2
@@ -7,7 +7,7 @@
 keditbookmarks_la_SOURCES = main.cpp items.cpp toplevel.cpp toplevel.skel commands.cpp
 kbookmarklistener_DIR = $(top_srcdir)/libkonq
 
-keditbookmarks_la_LIBADD  = $(top_builddir)/libkonq/libkonq.la
+keditbookmarks_la_LIBADD  = $(top_builddir)/libkonq/libkonq.la $(LIB_KHTML)
 keditbookmarks_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
 bin_PROGRAMS = keditbookmarks
Index: konqueror/sidebar/trees/history_module/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/konqueror/sidebar/trees/history_module/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- konqueror/sidebar/trees/history_module/Makefile.am	14 Aug 2002 14:30:58 -0000	1.1.1.2
+++ konqueror/sidebar/trees/history_module/Makefile.am	14 Aug 2002 15:35:44 -0000	1.3
@@ -6,7 +6,7 @@
 
 konq_sidebartree_history_la_SOURCES = history_module.cpp history_item.cpp \
 	history_settings.cpp history_settings.skel
-konq_sidebartree_history_la_LDFLAGS = $(all_libraries) -module $(KDE_PLUGIN)
+konq_sidebartree_history_la_LDFLAGS = $(all_libraries) -no-undefined -module $(KDE_PLUGIN)
 konq_sidebartree_history_la_LIBADD =  ../../libkonqsidebarplugin.la ../libkonq_sidebar_tree.la
 
 kcm_history_la_SOURCES = kcmhistory.cpp history_dlg.ui history_settings.cpp history_settings.skel
Index: konqueror/sidebar/trees/history_module/history_module.h
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/konqueror/sidebar/trees/history_module/history_module.h,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- konqueror/sidebar/trees/history_module/history_module.h	14 Aug 2002 14:30:58 -0000	1.1.1.2
+++ konqueror/sidebar/trees/history_module/history_module.h	14 Aug 2002 15:35:44 -0000	1.3
@@ -53,8 +53,7 @@
     bool sortsByName() const { return m_sortsByName; }
 
     static QString groupForURL( const KURL& url ) {
-	static const QString& misc = KGlobal::staticQString(i18n("Miscellaneous"));
-	return url.host().isEmpty() ? misc : url.host();
+	return url.host().isEmpty() ? KGlobal::staticQString(i18n("Miscellaneous")) : url.host();
     }
 
 public slots:
Index: konsole/konsole/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/konsole/konsole/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.3
diff -u -b -u -r1.1.1.3 -r1.3
--- konsole/konsole/Makefile.am	14 Aug 2002 14:27:36 -0000	1.1.1.3
+++ konsole/konsole/Makefile.am	14 Aug 2002 15:35:44 -0000	1.3
@@ -47,8 +47,8 @@
 konsole_la_SOURCES = TEPty.cpp BlockArray.cpp main.cpp konsole.cpp schema.cpp session.cpp TEWidget.cpp TEmuVt102.cpp \
      TEScreen.cpp TEmulation.cpp TEHistory.cpp keytrans.cpp konsoleiface.skel sessioniface.skel \
      konsole_wcwidth.cpp konsolebookmarkhandler.cpp konsolebookmarkmenu.cpp konsole_child.cpp
-konsole_la_LDFLAGS = $(all_libraries) -module -avoid-version
-konsole_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIBUTIL) $(XTESTLIB)
+konsole_la_LDFLAGS = $(all_libraries) -module -avoid-version $(QT_LDFLAGS)
+konsole_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIBUTIL) $(XTESTLIB) $(LIB_KDECORE) $(LIB_QT) $(LIB_DCOP)
 
 # konsole executable
 konsole_SOURCES = dummy.cpp
Index: konsole/konsole/TEPty.cpp
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/konsole/konsole/TEPty.cpp,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
Index: ksmserver/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/ksmserver/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- ksmserver/Makefile.am	10 Jul 2002 03:24:29 -0000	1.1.1.2
+++ ksmserver/Makefile.am	10 Jul 2002 03:42:59 -0000	1.3
@@ -28,9 +28,9 @@
 ksmserver_la_SOURCES = main.cpp server.cpp shutdown.cpp KSMServerInterface.skel
 ksmserver_SOURCES = dummy.cpp
 
-ksmserver_la_LDFLAGS = $(all_libraries) -avoid-version -module
+ksmserver_la_LDFLAGS = $(all_libraries) $(QT_LDFLAGS) -avoid-version -module
 ksmserver_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-ksmserver_la_LIBADD = $(LIB_KDEUI)
+ksmserver_la_LIBADD = $(LIB_KDEUI) $(LIB_KDECORE) $(LIB_QT) $(LIB_DCOP) $(LIBSM)
 ksmserver_LDADD = ksmserver.la
 
 picsdir = $(kde_datadir)/ksmserver/pics
Index: ksysguard/CContLib/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/ksysguard/CContLib/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.2
diff -u -b -u -r1.1.1.2 -r1.2
--- ksysguard/CContLib/Makefile.am	10 Jul 2002 03:24:36 -0000	1.1.1.2
+++ ksysguard/CContLib/Makefile.am	16 Sep 2002 14:31:34 -0000	1.2
@@ -4,5 +4,3 @@
 include_HEADERS = ccont.h
 
 libccont_a_SOURCES = ccont.c
-
-AM_CFLAGS = -ggdb
Index: ksysguard/gui/SensorDisplayLib/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/ksysguard/gui/SensorDisplayLib/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.2
diff -u -b -u -r1.1.1.3 -r1.2
--- ksysguard/gui/SensorDisplayLib/Makefile.am	14 Aug 2002 14:27:16 -0000	1.1.1.3
+++ ksysguard/gui/SensorDisplayLib/Makefile.am	16 Sep 2002 14:31:34 -0000	1.2
@@ -4,8 +4,9 @@
  
 lib_LTLIBRARIES = libsensordisplays.la
 
-libsensordisplays_la_LDFLAGS = $(all_libraries)
-libsensordisplays_la_LIBADD = $(LIB_KDEUI)
+libsensordisplays_la_LDFLAGS = $(all_libraries) -fno-common
+libsensordisplays_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIB_QT) $(LIB_KDECORE) \
+	$(top_builddir)/ksysguard/gui/ksgrd/libksgrd.la
 
 # Which sources should be compiled for the sensor display lib.
 libsensordisplays_la_SOURCES = \
Index: ksysguard/gui/SensorDisplayLib/SensorDisplay.cc
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/ksysguard/gui/SensorDisplayLib/SensorDisplay.cc,v
retrieving revision 1.1.1.3
retrieving revision 1.2
diff -u -b -u -r1.1.1.3 -r1.2
--- ksysguard/gui/SensorDisplayLib/SensorDisplay.cc	14 Aug 2002 14:27:17 -0000	1.1.1.3
+++ ksysguard/gui/SensorDisplayLib/SensorDisplay.cc	16 Sep 2002 14:31:34 -0000	1.2
@@ -62,7 +62,6 @@
 	pausedWhileHidden = false;
 
 	timerOn();
-	QWhatsThis::add(this, "dummy");
 
 	frame = new QGroupBox(2, Qt::Vertical, "", this, "displayFrame"); 
 	Q_CHECK_PTR(frame);
Index: ksysguard/gui/ksgrd/StyleEngine.h
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/ksysguard/gui/ksgrd/StyleEngine.h,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- ksysguard/gui/ksgrd/StyleEngine.h	25 Jun 2002 02:03:54 -0000	1.1.1.1
+++ ksysguard/gui/ksgrd/StyleEngine.h	16 Sep 2002 14:31:34 -0000	1.2
@@ -68,11 +68,12 @@
 	}
 	const QColor& getSensorColor(uint i)
 	{
-		static QColor dummy;
-		if (i < sensorColors.count())
+		if (i < sensorColors.count()) {
 			return *(sensorColors.at(i));
-		else
+		} else {
+			QColor dummy;
 			return dummy;
+		}
 	}
 	uint getSensorColorCount() const
 	{
Index: kwin/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kwin/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- kwin/Makefile.am	10 Jul 2002 03:24:51 -0000	1.1.1.2
+++ kwin/Makefile.am	10 Jul 2002 03:42:59 -0000	1.3
@@ -9,7 +9,7 @@
 kwin_la_SOURCES = workspace.cpp placement.cpp atoms.cpp  client.cpp main.cpp \
 	popupinfo.cpp tabbox.cpp options.cpp plugins.cpp events.cpp KWinInterface.skel \
 	killwindow.cpp kwinbutton.cpp
-kwin_la_LIBADD = $(LIB_KDEUI) $(LIBXINERAMA)
+kwin_la_LIBADD = $(LIB_KDEUI) $(LIBXINERAMA) $(LIB_KDECORE) $(LIB_X11) $(LIB_XEXT) $(LIB_DCOP) $(LIB_QT)
 kwin_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
 include_HEADERS = KWinInterface.h
Index: kxkb/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/kxkb/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.5
diff -u -b -u -r1.1.1.3 -r1.5
--- kxkb/Makefile.am	14 Aug 2002 14:26:44 -0000	1.1.1.3
+++ kxkb/Makefile.am	14 Aug 2002 15:35:44 -0000	1.5
@@ -18,8 +18,8 @@
 kcm_keyboard_la_LIBADD = $(XTESTLIB) $(LIB_KIO) -lxkbfile
 
 kxkb_la_SOURCES = kxkb.cpp rules.cpp extension.cpp pixmap.cpp
-kxkb_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kxkb_la_LIBADD = -lX11 -lXext $(LIB_KDEUI)
+kxkb_la_LDFLAGS = $(all_libraries) $(QT_LDFLAGS) -module -avoid-version
+kxkb_la_LIBADD = -lX11 -lXext -lxkbfile $(LIB_KDEUI) $(LIB_KDECORE) $(LIB_QT) $(LIB_DCOP)
 
 data_DATA = keyboard.desktop
 datadir = $(kde_appsdir)/Settings/Peripherals
Index: legacyimport/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/legacyimport/Makefile.am,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- legacyimport/Makefile.am	14 Aug 2002 14:27:42 -0000	1.1.1.2
+++ legacyimport/Makefile.am	14 Aug 2002 15:35:44 -0000	1.3
@@ -4,8 +4,8 @@
 lib_LTLIBRARIES = klegacyimport.la
 
 klegacyimport_la_SOURCES = legacyimport.cpp
-klegacyimport_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO)
-klegacyimport_la_LDFLAGS = $(all_libraries) -module -avoid-version
+klegacyimport_la_LIBADD = $(LIB_KDEUI) $(LIB_KIO) $(LIB_KFILE) $(LIB_KDECORE) $(LIB_QT)
+klegacyimport_la_LDFLAGS = $(all_libraries) $(QT_LDFLAGS) -module -avoid-version
 
 klegacyimport_SOURCES = dummy.cpp
 klegacyimport_LDADD   = klegacyimport.la
Index: libkonq/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/libkonq/Makefile.am,v
retrieving revision 1.1.1.3
retrieving revision 1.4
diff -u -b -u -r1.1.1.3 -r1.4
--- libkonq/Makefile.am	14 Aug 2002 14:27:43 -0000	1.1.1.3
+++ libkonq/Makefile.am	14 Aug 2002 15:35:44 -0000	1.4
@@ -20,8 +20,8 @@
 SUBDIRS = pics favicons
 
 lib_LTLIBRARIES = libkonq.la
-libkonq_la_LDFLAGS = $(all_libraries) -version-info 5:0:1 -no-undefined
-libkonq_la_LIBADD = $(LIB_KPARTS)
+libkonq_la_LDFLAGS = $(all_libraries) -version-info 5:0:1 -no-undefined $(QT_LDFLAGS)
+libkonq_la_LIBADD = $(LIB_KPARTS) $(LIB_KDECORE) $(LIB_QT) $(LIB_MCOP) $(LIB_KDEUI) $(LIB_KIO) $(LIB_DCOP) $(LIB_KDEFX)
 
 libkonq_la_SOURCES = konq_popupmenu.cc knewmenu.cc \
    konq_xmlguiclient.cc\
@@ -59,7 +59,7 @@
 kde_module_LTLIBRARIES = konq_sound.la
 konq_sound_la_SOURCES = konq_sound.cc
 konq_sound_la_LDFLAGS = $(all_libraries) -module $(KDE_PLUGIN)
-konq_sound_la_LIBADD = -lsoundserver_idl -lartskde
+konq_sound_la_LIBADD = -lsoundserver_idl -lartskde $(LIB_KDECORE) $(LIB_QT) $(LIB_MCOP)
 
 noinst_HEADERS = konq_sound.h
 
Index: libkonq/favicons/Makefile.am
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/libkonq/favicons/Makefile.am,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -u -b -u -r1.1.1.1 -r1.2
--- libkonq/favicons/Makefile.am	25 Jun 2002 02:03:55 -0000	1.1.1.1
+++ libkonq/favicons/Makefile.am	25 Jun 2002 02:06:14 -0000	1.2
@@ -2,8 +2,8 @@
 
 INCLUDES = $(all_includes)
 kded_favicons_la_SOURCES = favicons.cpp favicons.skel
-kded_favicons_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kded_favicons_la_LIBADD = $(LIB_KSYCOCA)
+kded_favicons_la_LDFLAGS = $(all_libraries) -module -avoid-version $(QT_LDFLAGS)
+kded_favicons_la_LIBADD = $(LIB_KSYCOCA) $(LIB_QT) $(LIB_KDECORE) $(LIB_DCOP) $(LIB_KDED)
 
 METASOURCES = AUTO
 
Index: nsplugins/pluginscan.cpp
===================================================================
RCS file: /cvs/od/proj/KDE-Darwin/kdebase/nsplugins/pluginscan.cpp,v
retrieving revision 1.1.1.2
retrieving revision 1.3
diff -u -b -u -r1.1.1.2 -r1.3
--- nsplugins/pluginscan.cpp	14 Aug 2002 14:27:53 -0000	1.1.1.2
+++ nsplugins/pluginscan.cpp	14 Aug 2002 15:35:44 -0000	1.3
@@ -442,6 +442,7 @@
         paths.append("/usr/lib/netscape/plugins");
         paths.append("/usr/lib/netscape/plugins-libc5");
         paths.append("/usr/lib/netscape/plugins-libc6");
+        paths.append("@PREFIX@/lib/mozilla/plugins");
         paths.append("/usr/lib/mozilla/plugins");
         paths.append("$MOZILLA_HOME/plugins");
         config->writeEntry( "scanPaths", paths );
