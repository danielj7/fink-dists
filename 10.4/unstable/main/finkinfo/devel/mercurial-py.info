Info2: <<
Package: mercurial-py%type_pkg[python]
Distribution: (%type_pkg[python] = 23) 10.3
Version: 0.9.5
Revision: 1
Type: python (2.3 2.4 2.5)
Depends: python%type_pkg[python]
Source: http://www.selenic.com/mercurial/release/mercurial-%v.tar.gz
Source-MD5: a9dd54bcb87ca332315ce83293816e37
PatchScript: <<
perl -i -pe 'print "#include <inttypes.h>\n" if /stdlib/' mercurial/mpatch.c
perl -i -pe 's|^(#!/usr/bin/env) wish|\1 /usr/bin/wish|' contrib/hgk
perl -i -pe 's|/etc/|%p/etc/|' doc/*.[15]* mercurial/ui.py
perl -e 'print  "[extensions]\ngpg=\nhbisect=\nhgk=\nmq=\ntransplant=\npatchbomb=\n"' > hgrc
<<
CompileScript: <<
echo Nothing to compile
<<
InstallScript: <<
python%type_raw[python] setup.py install --prefix %p --root %d

cp contrib/hgk %i/bin/
cd %i/bin; for filename in *; do mv -v $filename $filename-py%type_pkg[python]; done;

mkdir -p %i/etc/mercurial
cp -v hgrc %i/etc/mercurial/hgrc-py%type_pkg[python]

mkdir -p %i/share/man/man1
#cp doc/*.1 %i/share/man/man1
cd %b/doc; for filename in *.1; do cp -v $filename %i/share/man/man1/`echo $filename | sed s/.1/-py%type_pkg[python].1/`; done;

mkdir -p %i/share/man/man5
#cp doc/*.5 %i/share/man/man5
cd %b/doc; for filename in *.5; do cp $filename %i/share/man/man5/`echo $filename | sed s/.5/-py%type_pkg[python].5/`; done;

mkdir -p %i/share/emacs/site-lisp
cp contrib/mercurial.el %i/share/emacs/site-lisp/mercurial-py%type_pkg[python].el
cp contrib/mq.el %i/share/emacs/site-lisp/mq-py%type_pkg[python].el

mkdir -p %i/etc/bash_completion.d
cp contrib/bash_completion %i/etc/bash_completion.d/hg-py%type_pkg[python]

mkdir -p %i/share/doc/%n/contrib
cp -r contrib/churn.py contrib/convert-repo contrib/hg-ssh \
  contrib/tcsh_completion contrib/zsh_completion contrib/vim \
  %i/share/doc/%n/contrib
<<

PostInstScript: <<
 update-alternatives --install %p/bin/hg hg %p/bin/hg-py%type_pkg[python] %type_pkg[python]
 update-alternatives --install %p/bin/hgk hgk %p/bin/hgk-py%type_pkg[python] %type_pkg[python]
 update-alternatives --install %p/bin/hgmerge hgmerge %p/bin/hgmerge-py%type_pkg[python] %type_pkg[python]

 update-alternatives --install %p/etc/bash_completion.d/hg hg_completion %p/etc/bash_completion.d/hg-py%type_pkg[python] %type_pkg[python]
 update-alternatives --install %p/etc/mercurial/hgrc hgrc %p/etc/mercurial/hgrc-py%type_pkg[python] %type_pkg[python]

 update-alternatives --install %p/share/emacs/site-lisp/mercurial.el mercurial.el %p/share/emacs/site-lisp/mercurial-py%type_pkg[python].el %type_pkg[python]
 update-alternatives --install %p/share/emacs/site-lisp/mq.el mq.el %p/share/emacs/site-lisp/mq-py%type_pkg[python].el %type_pkg[python]

 update-alternatives --install %p/share/man/man1/hg.1 hg.1 %p/share/man/man1/hg-py%type_pkg[python].1 %type_pkg[python]
 update-alternatives --install %p/share/man/man1/hgmerge.1 hgmerge.1 %p/share/man/man1/hgmerge-py%type_pkg[python].1 %type_pkg[python]
 update-alternatives --install %p/share/man/man5/hgignore.5 hgignore.5 %p/share/man/man5/hgignore-py%type_pkg[python].5 %type_pkg[python]
 update-alternatives --install %p/share/man/man5/hgrc.5 hgrc.5 %p/share/man/man5/hgrc-py%type_pkg[python].5 %type_pkg[python]
<<

PreRmScript: <<
 if [ $1 != "upgrade" ]; then
  update-alternatives --remove hg %p/bin/hg-py%type_pkg[python]
  update-alternatives --remove hgk %p/bin/hgk-py%type_pkg[python]
  update-alternatives --remove hgmerge %p/bin/hgmerge-py%type_pkg[python]

  update-alternatives --remove hg_completion %p/etc/bash_completion.d/hg-py%type_pkg[python]
  update-alternatives --remove hgrc %p/etc/mercurial/hgrc-py%type_pkg[python]

  update-alternatives --remove mercurial.el %p/share/emacs/site-lisp/mercurial-py%type_pkg[python].el
  update-alternatives --remove mq.el %p/share/emacs/site-lisp/mq-py%type_pkg[python].el

  update-alternatives --remove hg.1 %p/share/man/man1/hg-py%type_pkg[python].1
  update-alternatives --remove hgmerge.1 %p/share/man/man1/hgmerge-py%type_pkg[python].1
  update-alternatives --remove hgignore.5 %p/share/man/man5/hgignore-py%type_pkg[python].5
  update-alternatives --remove hgrc.5 %p/share/man/man5/hg-py%type_pkg[python].5
 fi
<<

DocFiles: README COPYING CONTRIBUTORS doc/*.txt
ConfFiles: %p/etc/mercurial/hgrc-py%type_pkg[python]
Description: Lightweight distributed SCM 
DescDetail: <<
Mercurial is a fast, lightweight source control management 
system designed for efficient handling of very large 
distributed projects. Features include:

 * O(1) delta-compressed file storage and retrieval scheme
 * Complete cross-indexing of file and changesets for 
   efficient exploration of project history
 * Robust SHA1-based integrity checking and append-only 
   storage model
 * Decentralized development model with arbitrary merging 
   between trees
 * High-speed HTTP-based network merge protocol
 * Easy-to-use command-line interface
 * Integrated stand-alone web interface
 * Small Python codebase
 * GPL license
<<
License: GPL
Homepage: http://www.selenic.com/mercurial
Maintainer: Pepe Barbe <pepe.barbe@gmail.com>
<<