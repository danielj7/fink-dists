Package: libcanberra0
Version: 0.11
Revision: 2
Source: http://0pointer.de/lennart/projects/libcanberra/libcanberra-%v.tar.gz
Source-MD5: c661db14cb0b1fe9b6963defacc3bba6

BuildDepends: <<
	autoconf,
	automake1.10,
	fink (>= 0.24.12-1),
	gconf2-dev (>= 2.24.0-1),
	glib2-dev (>= 2.18.0-1),
	gstreamer-0.10-dev (>= 0.10.22-1),
	gtk-doc (>= 1.9-1),
	libgettext3-dev,
	libiconv-dev,
	libogg,
	libtool2,
	libvorbis0,
	libxml2 (>= 2.6.30-1),
	pkgconfig (>= 0.23)
<<
Depends: %n-shlibs (= %v-%r)
BuildDependsOnly: true

PatchFile: %n.patch
Patchfile-MD5: 1f1b8248dbc840162cb6924ca9854962
PatchScript: <<
	%{default_script}
	mv libltdl libltdl_UNUSED
<<

ConfigureParams: --disable-dependency-tracking --disable-static --disable-gtk --disable-lynx --disable-tdb --enable-gstreamer
CompileScript: <<
	autoreconf -fi
	./configure %c
	make
<<
InstallScript: <<
	make install DESTDIR=%d
	rm %i/share/doc/libcanberra/README
	rmdir %i/share/doc/libcanberra
<<
DocFiles: LGPL README

SplitOff: <<
	Package: %N-shlibs
	Depends: <<
		glib2-shlibs (>= 2.18.0-1),
		gstreamer-0.10-shlibs (>= 0.10.22-1),
		libgettext3-shlibs,
		libiconv,
		libogg-shlibs,
		libtool2-shlibs,
		libvorbis0-shlibs,
		libxml2-shlibs (>= 2.6.30-1),
		xdg-base
	<<
	Replaces: canberra-plugins
	Files: <<
		lib/libcanberra.*.dylib
		lib/libcanberra-0.11
	<<
	Shlibs: %p/lib/libcanberra.0.dylib 2.0.0 %n (>= 0.6-1)
	DocFiles: LGPL README
<<

SplitOff2: <<
	Package: canberra-plugins
	Depends: fink-obsolete-packages
	InstallScript: <<
		mkdir -p %i/share/doc/installed-packages
		touch %i/share/doc/installed-packages/%n
	<<
<<

DescPort: <<
	Scrap superfluous iconv tests. See:
	http://bugs.freedesktop.org/show_bug.cgi?id=20927

	Scrap gconf tests if not doing gtk stuff. See:
	http://bugs.freedesktop.org/show_bug.cgi?id=20926
<<
DescPackaging: <<
	Core lib doesn't use gtk and the gtk lib's libtool versioning
	is independent, so don't build as part of the main lib pkgs.

	Don't bother dragging in lynx just for .html -> .txt for the README

	tdb not in fink now--disable for consistency if we do get it.

	Plugins reverted canberra-plugins -> %N-shlibs as of 0.11-1.
	They are loaded by %N-shlibs and are now in libversioned dir.
	Third-party plugin packages (of which there are presently
	none) will have to be adjusted each time %v changes. Cannot
	have %N-shlibs:Conflicts:canberra-plugins and nuke it cleanly
	because old libcanberra-gtk0 and maybe other packages have
	Depends:canberra-plugins.

	We do our own doc files our own ways and places.

	Don't bother with included libltdl at all. See:
	http://git.0pointer.de/?p=libcanberra.git;a=commitdiff;h=23247f130601fc02a5368c02e513bb0e28597ef9
<<

Description: Abstract interface for playing event sounds
DescDetail: <<
	XDG Sound Theme and Name Specifications:
	http://0pointer.de/public/sound-theme-spec.html

	The gtk lib is in the libcanberra-gtk* packages.
<<
DescUsage: <<
	Actual sound output is handled by various back-end modules.
	The default/standard ones are in the canberra-plugins package.
<<

Homepage: http://0pointer.de/lennart/projects/libcanberra
License: LGPL
Maintainer: Daniel Macks <dmacks@netspace.org>
