Package: darkstat
Version: 2.2
Revision: 1
BuildDepends: libpcap
Depends: libpcap-shlibs
Source: http://members.optushome.com.au/emikulic/net/%n/%n-%v.tar.gz
SourceDirectory: %n-%v
#Patch: %f.patch
ConfigureParams: --mandir='${prefix}/share/man' --infodir='${prefix}/share/info' --disable-dependency-tracking 
DocFiles: AUTHORS COPYING ChangeLog ISSUES NEWS README TODO
InstallScript: <<
make install DESTDIR=%d
mkdir -p %i/var/log/%n
<<
Description: Smaller network traffic analyzer
DescDetail: <<
Basically a packet sniffer which runs as a background process on a cable/DSL router and gathers all sorts of useless but interesting statistics.
<<

DaemonicFile: <<
<service>
  <description>darkstat</description>
  <message>Darkstat</message>
  <startmessage>Starting Darkstat</startmessage>
  <stopmessage>Stopping Darkstat</stopmessage>
  <restartmessage>Reatarting Darkstat</restartmessage>

  <daemon name="darkstat">
    <executable>%p/bin/darkstat</executable>
    <parameters>-d %p/var/log/%n</parameters>
    <pidfile>%p/var/run/%n.pid</pidfile>
  </daemon>

</service>
<<

PostInstScript: <<
# update init script if necessary
daemonic update %n
<<

PreRmScript: <<
# clean up
if [ $1 != "upgrade" ]; then
  daemonic remove %n
fi
<<

DescUsage: <<
Run 'daemonic enable darkstat' as root, this will install a Startup Item
                a) either reboot (easy :-) )
                b) or else, if this is a first time installation (or if you
                   know no instance of darkstat is running), run
                   '/Library/StartupItems/daemonic-darkstat/daemonic-darkstat
                   start' as root.
<<
License: GPL
Maintainer: Chris Zubrzycki <beren12@users.sourceforge.net>
Homepage: http://members.optushome.com.au/emikulic/net/darkstat/
