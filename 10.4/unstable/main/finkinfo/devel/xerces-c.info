Package: xerces-c
Version: 2.7.0
Revision: 1001
GCC: 4.0
Maintainer: Daniel Czarnecki <daniel@zoltak.com>
License: BSD
Homepage: http://xml.apache.org/xerces-c/

Depends: %N-shlibs (= %v-%r)
Conflicts: xerces-c23
Replaces: xerces-c23

Source: http://archive.apache.org/dist/xml/xerces-c/source/xerces-c-src_2_7_0.tar.gz
Source-MD5: 04169609449a8846bc1e6891c04cadf4
#SourceDirectory: xerces-c-src_2_7_0
Patch: %n.patch

NoSetLDFLAGS: true
NoSetCPPFLAGS: true
SetLIBRARY_PATH: %p/lib
CompileScript: <<
 #!/bin/sh -e
 export XERCESCROOT=%b CPATH=%p/include
 cd src/xercesc
 ./runConfigure -p macosx -n native -C "%c"
 make LD_SONAME="-install_name %p/lib/libxerces-c.27.dylib -compatibility_version %v -current_version %v"
 cd ../../samples
 ./runConfigure -p macosx -C "%c"
 make
<<
InstallScript: <<
 #!/bin/sh -e
 export XERCESCROOT=%b
 echo Install samples
 mkdir -p %d/%p/bin
 cp -fp bin/{CreateDOMDocument,EnumVal,Redirect,SAXCount,StdInParse,DOMCount,MemParse,SAX2Count,SAXPrint,DOMPrint,PParse,SAX2Print,SEnumVal} %d/%p/bin
 echo Install docs
 mkdir -p %i/share/doc/%n-dev
 cp -Rfp doc/html %i/share/doc/%n-dev
 cd src/xercesc
 echo Install config.status
 mkdir -p %i/share/%n-dev
 cp -fp config.status %i/share/%n-dev
 echo make install
 make install DESTDIR=%d
<<
DocFiles: LICENSE*
SplitOff: <<
 Package: %N-shlibs
 Files: lib/libxerces-c.27.0.dylib lib/libxerces-depdom.27.0.dylib
 Shlibs: <<
  %p/lib/libxerces-c.27.dylib 2.7.0 %n (>= 2.7.0-1)
  %p/lib/libxerces-depdom.27.dylib 2.7.0 %n (>= 2.7.0-1)
 <<
 DocFiles: LICENSE*
<<
SplitOff2: <<
 Package: %N-dev
 Conflicts: xerces-c23-dev, %N-dev (<< %v-%r)
 Replaces: xerces-c23-dev, %N-dev (<< %v-%r)
 BuildDependsOnly: True
 Depends: %N-shlibs
 Files: include share/%N-dev lib share/doc/%N-dev
 DocFiles: LICENSE*
<<
Description: XML parser in C++
DescDetail: <<
 Xerces-C is a validating XML parser written in C++.  Xerces-C
 conforms with the XML-1.0 W3C recommendation.
<<
DescPackaging: <<
 The extensive documentation is in the -dev splitoff
 .
 The main package contains the sample applications, installed in bin.
 .
 If building the Perl XML::Xerces package (sold separately), it should
 set the following envvars:
   XERCESCROOT=%%p
   XERCES_CONFIG=%%p/share/%n-dev/config.status
<<
DescPort: <<
 Patched samples/runConfigure to support a -C flag just like
 src/xercesc/runConfigure
<<

