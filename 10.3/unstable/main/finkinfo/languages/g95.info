Package: g95
Version: 0.50
Revision: 20050206
Source: ftp://ftp.cdc.noaa.gov/Public/jsw/g95/gcc-4.0-20050129.tar.bz2
Source2: ftp://ftp.cdc.noaa.gov/Public/jsw/g95/g95-%v-%r.tgz
Source-MD5: de750c8cf87e37faaec4cb34075b884c
Source2-MD5: 9fbc747300c55097633852fb7af22deb
NoSourceDirectory: True
Depends: cctools-gcc4
BuildDepends: gmp (>= 4.1.3-11)
NoSetCPPFLAGS: True
NoSetLDFLAGS: True
PatchScript: <<
 #!/bin/sh
 cd g95-%v
 tar -xvzf libf95.a-%v.tar.gz
<<
CompileScript: <<
 #!/bin/sh
 cd gcc-4.0-20050129
 cp intl/libgnuintl.h gcc/libintl.h
 mkdir g95
 cd g95
 ../configure --prefix=%p --with-gmp=%p --enable-languages=c --with-included-gettext 
 make
 cd ../../g95-%v
 ./configure --prefix=%p --with-gmp-dir=%p --with-gcc-dir=%b/gcc-4.0-20050129
 make 
 cd libf95.a-%v
 ./configure %c
 make 
<<
InstallScript: <<
 #!/bin/sh
 darwinver=`uname -r`
 gccverfull=`grep version_string %b/gcc-4.0-20050129/gcc/version.c | sed -e 's/.*"\([^"]*\)".*/\1/'`
 gccver=`echo ${gccverfull} | sed -e 's/\([^ ]*\) .*/\1/'`
 cd g95-%v
 mv Makefile Makefile.orig
 sed "s|%p/lib/gcc-lib/%m-apple-darwin${darwinver}/${gccver}|%i/lib/gcc-lib/%m-apple-darwin${darwinver}/${gccver}|g" < Makefile.orig > Makefile
 make install prefix=%i 
 cd libf95.a-%v
 mv Makefile Makefile.orig
 sed "s|%p/lib/gcc-lib/%m-apple-darwin${darwinver}/${gccver}|%i/lib/gcc-lib/%m-apple-darwin${darwinver}/${gccver}|g" < Makefile.orig > Makefile
 make install prefix=%i
 ranlib %i/lib/gcc-lib/%m-apple-darwin${darwinver}/${gccver}/libgcc.a
 ranlib %i/lib/gcc-lib/%m-apple-darwin${darwinver}/${gccver}/libf95.a
 ln -s %p/bin/%m-apple-darwin${darwinver}-g95 %i/bin/g95
 /bin/rm -f %i/INSTALL
<<
License: GPL
DocFiles: g95-%v/COPYING
Description: Another GNU Fortran 95 compiler
DescDetail: <<
The goal of the g95 project is to create a free, open source 
Fortran 95 compiler and runtime libraries.

The 'gfortran' package is the official Fortran 95 compiler for the gcc
project, and will be included in gcc 4.0.  gfortran originated from
the g95 codebase.  At this time, g95 is a more fully-functional compiler 
than gfortran.
<<
DescPort: <<
 The gcc-4.0 20050129 snapshot is needed to build the backend.
 Requires that an updated cctools be installed (detected by
 the cctools-gcc4 placeholder package).
<<
Homepage: http://g95.org
Maintainer: Jeffrey Whitaker <jswhit@fastmail.fm>
