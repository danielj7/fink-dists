Package: libplist
Version: 1.3
Revision: 2
Description: Library for handling apple .plist files
License: GPL/LGPL

# Dependencies:
BuildDependsOnly: true
BuildDepends: <<
  fink (>= 0.24.12),
  cmake, 
  pkgconfig (>= 0.9.0-1), 
  glib2-dev (>= 2.20.5-1),
  libxml2 (>= 2.6.32-1),
  swig,
  python25 | python26 | python27 | python31
<<
Depends: %N-shlibs (= %v-%r)

# Unpack Phase:
Source: http://github.com/downloads/JonathanBeck/%n/%n-%v.tar.bz2
Source-MD5: 0f48f4da8ddba5d7e186307622bf2c62

PatchFile: libplist.patch
PatchFile-MD5: ca57c2e09f87f7786187e39dff8ca72a

# Compile Phase:
CompileScript: <<
#!/bin/sh -ev
  mkdir build
  cd build
  cmake .. -DCMAKE_INSTALL_PREFIX=%p -DLIB_DESTINATION=%p/lib
  make
<<

# Install Phase:
InstallScript: <<
#!/bin/sh -ev
  cd build
  make install DESTDIR=%d
<<
DocFiles: AUTHORS COPYING* README

SplitOff: <<
  Package: %N-shlibs
  Depends:  glib2-shlibs (>= 2.20.5-1), libxml2-shlibs (>= 2.6.32-1)
  Files: <<
    lib/libplist.1.1.3.dylib
    lib/libplist.1.dylib
    lib/libplist++.1.1.3.dylib
    lib/libplist++.1.dylib
  <<
  Shlibs: <<
    %p/lib/libplist.1.dylib   1.0.0 %n (>= 1.3-1)
    %p/lib/libplist++.1.dylib 1.0.0 %n (>= 1.3-1)
  <<
  DocFiles: AUTHORS COPYING* README
<<

Splitoff2: <<
  Package: %N-bin
  Depends: %N-shlibs (= %v-%r)
  Files: bin
  DocFiles: AUTHORS COPYING* README
<<

# Additional Info
DescDetail: <<
libplist eases dealing with Apple's property list files.
<<

DescPort: <<
CMakeLists.txt is patched and cmake is called with -DLIB_DESTINATION=%p/lib,
which fixes the truncated path of the install_name of the dylibs, where 
"%p/lib/" was missing.
<<

Homepage: http://www.libimobiledevice.org/
Maintainer: Karl-Michael Schindler <karl-michael.schindler@web.de>
