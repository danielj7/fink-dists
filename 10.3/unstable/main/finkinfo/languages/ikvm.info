Package: ikvm
Version: 0.20.0.0
Revision: 2
Source: mirror:sourceforge:%n/%n-%v.zip
Source-MD5: b5c736a52279002e53b844b7657d59a7
SourceDirectory: %n
Source2: mirror:gnu:classpath/classpath-0.18.tar.gz
Source2-MD5: c0650c257aa93eafb709553f172f0bbb
Source3: http://go-mono.com/sources/%n/%n-0.14.tar.gz
Source3-MD5: 042e49520251f9c76c0180cc2437a0b4
Patch: %n.patch
DocFiles: LICENSE THANKYOU website/*.txt
Depends: mono (>= 1.1.10-1)
Suggests: monodevelop
BuildDepends: mono-dev (>= 1.1.10-1), nant (>= 0.85-10), ecj
Homepage: http://go-mono.com/
Maintainer: Benjamin Reed <ikvm@fink.racoonfink.com>
Description: Java implementation for .Net
NoSetCPPFLAGS: true
SetCPPFLAGS: -I%p/include
NoSETLDFLAGS: true
SetLIBS: -L%p/lib
NoSetMAKEFLAGS: true
SetMAKEFLAGS: -j1
ConfigureParams: --mandir=%p/share/man --disable-dependency-tracking --libdir=%p/lib
CompileScript: <<
#!/bin/sh -ex

  pushd ../%n-0.14
  ./configure %c
  make
  popd

  export MONO_PATH=`pwd`/bin:$MONO_PATH
  export DYLD_LIBRARY_PATH=`pwd`/bin

  nant
<<
InstallScript: <<
#!/bin/sh -ex

  export MONO_PATH=`pwd`/bin:$MONO_PATH
  export DYLD_LIBRARY_PATH=`pwd`/bin

  pushd ../%n-0.14
  make install DESTDIR=%d
  popd

  perl -pi -e 's,0.14,%v,g' %i/lib/pkgconfig/*.pc

  rm -rf %i/lib/%n/{*.exe,*.dll}
  install -c -m 755 bin/*.exe bin/IKVM*.dll %i/lib/%n/
<<

DescDetail: <<
IKVM.NET is an implementation of Java for Mono and the Microsoft
.NET Framework.  It includes the following components:

    * A Java Virtual Machine implemented in .NET
    * A .NET implementation of the Java class libraries
    * Tools that enable Java and .NET interoperability
<<
License: BSD
