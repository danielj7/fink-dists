Package: evolution-webcal
Version: 2.8.0
Revision: 1
Source-MD5: 6dd4821ce90e238acbd8a959fee1ee14
Source: mirror:gnome:sources/%n/2.8/%n-%v.tar.bz2
Depends: evolution
BuildDepends: <<
  atk1, cairo, evolution-data-server-1.12-dev, evolution-2.12-dev, fontconfig2-dev, freetype219, gconf2-dev, glib2-dev, 
  gnome-vfs2-unified-dev, gnutls26, gtk+2-dev, libart2, libbonobo2-dev, libbonoboui2-dev, libgettext3-dev, 
  libgnome2-dev, libgnomecanvas2-dev, libgnomeui2-dev, libiconv-dev, libsoup2.2.8-ssl, libxml2, orbit2-dev, 
  pango1-xft2-ft219-dev, popt, x11-dev, pkgconfig, intltool, gettext-tools
<<
NoSetLDFLAGS: true
SetLIBRARY_PATH: %p/lib
NoSetCPPFLAGS: true
SetCFLAGS: -O3 -fstrict-aliasing
PatchScript: <<
#!/bin/sh -ev
# cf e-d-s for next :
  for f in `find . -name ltmain.sh` ; do sed -ri.bak -e 's,(s%%/)(\[\^/\]\*\$%%%%),\1\\+\2,' $f ; done
  for f in `find . -name configure` ; do sed -ri.bak -e '/(host_os ld.so|Apple)/,+3{
/sys_lib_search_path_spec.*\/usr\/local\/lib/c\
sys_lib_search_path_spec=$(echo $(for f in `$CC -print-search-dirs|egrep "^libraries:"|sed -e "s,.*=,," -e "s,$PATH_SEPARATOR, ,g" -e "s,$, /lib /usr/lib /usr/local/lib,"`; do cd $f 2>/dev/null && pwd || : ; done|uniq))
}' $f ; done
<<
ConfigureParams: --libexecdir=%p/sbin
CompileScript: <<
#!/bin/sh -ev
  export CPATH=%p/include:/usr/X11R6/include
  export PKG_CONFIG_PATH=%p/lib/pango-ft219/lib/pkgconfig:%p/lib/fontconfig2/lib/pkgconfig:%p/lib/freetype219/lib/pkgconfig:$PKG_CONFIG_PATH
  ./configure %c
  perl -pi -e 's,\-L(/usr|%p)/lib([^/]),\2,g; s,\-I(/usr|%p)/include([^/]),\2,g' config.status
  make
  make -i check
<<
InstallScript: make DESTDIR=%d install
PostInstScript: <<       
  if [ configure = "$1" ]; then
    GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source` gconftool-2 --makefile-install-rule \
	%p/etc/gconf/schemas/evolution-webcal.schemas >/dev/null
  fi
<<
PreRmScript: <<
  if [ purge = "$1" ]; then
    GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source` gconftool-2 --makefile-uninstall-rule \
	%p/etc/gconf/schemas/evolution-webcal.schemas >/dev/null
  fi
<<
ConfFiles: %p/etc/gconf/schemas/evolution-webcal.schemas
DocFiles: AUTHORS COPYING ChangeLog TODO
Description: Web Calendar plugin for evolution
Homepage: http://gnome.org/projects/evolution/
License: GPL
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
