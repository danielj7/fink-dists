Info2: <<
Package: pysvn-py%type_pkg[python]
Version: 1.7.2
Revision: 1
Type: python (2.6 2.7 3.1)
Description: Python SVN Extension
DescDetail: <<
	Supports all svn client features
	Supports svn transaction features required to write svn
		pre-commit hooks
	Easy to learn and use
	Python like interface
	Good Documentation and examples
	No need to understand the Subversion C API
<<
Maintainer: Daniel Johnson <daniel@daniel-johnson.org>
License: BSD
Homepage: http://pysvn.tigris.org/

Source: http://pysvn.barrys-emacs.org/source_kits/pysvn-%v.tar.gz
Source-MD5: b557a12bc34f0d6805e259d69b9f38ce

PatchFile: %{ni}.patch
PatchFile-MD5: f6cf334ead1dc3eb92d2e0941ff7213d
PatchScript: <<
	%{default_script}
	#Validator won't allow '/ s w' in PatchScript so we need to trick it.
	perl -pi -e 's,[/]sw/,%p/,g' Source/setup_configure.py
<<

Depends: python%type_pkg[python], svn15-shlibs, libapr.0-shlibs
BuildDepends: fink (>= 0.24.12), svn15-dev, svn, libapr.0-dev, libaprutil.0-dev

CompileScript: <<
	#!/bin/bash -ev
	cd Source
	%p/bin/python%type_raw[python] setup.py configure --verbose --svn-root-dir=%p --apr-inc-dir=%p/include/apache2 --apr-lib-dir=%p/lib
	
	make
<<

#Some tests fails when run as root but pass with --build-as-nobody.
InfoTest: TestScript: cd Tests && make || exit 1

InstallScript: <<
	rm -f Source/pysvn/__init__.pyc
	%p/bin/python%type_raw[python] -m compileall Source/pysvn
	
	mkdir -p %i/lib/python%type_raw[python]/site-packages/pysvn
	cp Source/pysvn/__init__.{py,pyc} %i/lib/python%type_raw[python]/site-packages/pysvn
	cp Source/pysvn/_pysvn*.so %i/lib/python%type_raw[python]/site-packages/pysvn
<<

DocFiles: LICENSE.txt Docs/*.{html,js} Examples/Client/*.py
<<
