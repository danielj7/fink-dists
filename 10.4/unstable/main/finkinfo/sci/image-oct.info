Info2: <<
Package: image-oct%type_pkg[oct]
Version: 1.0.7
Type: oct (3.0.5), forge (image)
Revision: 2
Maintainer: Alexander Hansen <alexkhansen@users.sourceforge.net>
# unfortunately, Homepage won't do types
Homepage: http://octave.sourceforge.net/general/index.html 
Description: Image tools for octave
DescDetail: <<
The Octave-forge Image package provides functions for reading, writing, and 
and processing images. The package supports almost all image formats through
the use of GraphicsMagick. The package also provides functions for feature 
extraction, image statistics, spatial and geometric transformations, 
morphological operations, linear filtering, and much more.
This version contains the imread and imwrite functions which are
now in core Octave, but aren't in 3.0.5.
<<
License: GPL

# All octave-forge packages have to have the following BuildDepends:
#  octave%type_pkg[oct]-dev | octave%type_pkg[oct]-atlas-dev,
# fftw3, hdf5.7-oldapi

BuildDepends: <<
  octave%type_pkg[oct]-dev | octave%type_pkg[oct]-atlas-dev,
  fftw3, hdf5.7-oldapi, graphicsmagick-dev, libjpeg8, libpng14
 <<
Depends: << 
  octave%type_pkg[oct] | octave%type_pkg[oct]-atlas,
  graphicsmagick-shlibs, libjpeg8-shlibs, libpng14-shlibs
  <<
Conflicts: octave-forge, octave-forge-%type_raw[forge] (<< 1.0.7-999)
Replaces: octave-forge-%type_raw[forge] (<< 1.0.7-999)

Source-MD5: 2fd2a0b18029d034c69f37eab5df83db

# You do not change anything from this point down, unless absolutely necessary,
# since all of the foo-oct%type_pkg[oct] packages are designed to be built/installed
# in the same way.

Source: mirror:sourceforge:octave/%type_raw[forge]-%v.tar.gz

NoSetCPPFLAGS: true
NoSetLDFLAGS: true
SetLIBRARY_PATH: /usr/X11R6/lib:%p/lib
SetMAKEFLAGS: -j1
CompileScript: %p/share/octave/%type_raw[oct]/scripts/octave-forge-compile.sh %type_raw[forge]-%v

InstallScript: << 
	#!/bin/sh -ev
	%p/share/octave/%type_raw[oct]/scripts/octave-forge-install.sh %type_raw[forge]-%v %i %b
	mkdir -p %i/share/octave/%type_raw[oct]/%type_raw[forge]-%v
	# copy template scripts
	cp %p/share/octave/%type_raw[oct]/scripts/octave-forge-prerm %p/share/octave/%type_raw[oct]/scripts/octave-forge-postinst %i/share/octave/%type_raw[oct]/%type_raw[forge]-%v
	cd %i/share/octave/%type_raw[oct]/%type_raw[forge]-%v
	sed -i -e 's/@PKGNAME@/%type_raw[forge]-%v/' octave-forge*
	chmod a+x octave-forge*
<<
PostInstScript:  <<
	if [ -f %p/var/octave/%type_raw[oct]/octave_packages ]
	then 
		%p/share/octave/%type_raw[oct]/%type_raw[forge]-%v/octave-forge-postinst
	else
 		mv %p/share/octave/%type_raw[oct]/packages/%type_raw[forge]-%v/octave_packages %p/var/octave/%type_raw[oct]/octave_packages
	fi
<<

PreRmScript: %p/share/octave/%type_raw[oct]/%type_raw[forge]-%v/octave-forge-prerm

DescPackaging: <<
Common for all octave-forge packages.

We read in postinst and prm template scripts installed by octaveN and modify
them to use the name of this package because Octave's package manager can't 
cope with non-literal arguments.

The Type: forge (pkgname) is used to minimize what needs to be changed when
using this .info file as a template.
<<
<<