Package: netcdf-g95
Version: 3.6.2
Revision: 6
Distribution: 10.4
BuildDepends: g95
BuildDependsOnly: True
Maintainer: Jeffrey Whitaker <jswhit@fastmail.fm>
Depends: %n-shlibs (= %v-%r)
Conflicts: netcdf (<= 3.6.1-1003), netcdf-absoft
Replaces: netcdf (<= 3.6.1-1003), netcdf-absoft, netcdf-gfortran
Source: ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-%v.tar.gz
Source-MD5: a7d450da9081e4a6e440705ea31868d3
SourceDirectory: netcdf-%v
NoSetCPPFlags: true
Patch: netcdf.patch
ConfigureParams: <<
  --prefix=%p/lib/netcdf-g95 \
  --enable-shared CFLAGS=-O2 FFLAGS=-O2 FCFLAGS=-O2 FC=g95 F77=g95 F90=g95 \
  --mandir='${prefix}/share/man' --enable-docs-install --docdir='${prefix}/share/doc/netcdf' \
  --disable-dependency-tracking --disable-fortran-compiler-check --disable-c --with-netcdf-c-lib=%p/lib \
  --disable-cxx --disable-utilities
<<
InstallScript: <<
  #!/bin/sh -ev
  make install prefix=%i/lib/netcdf-g95
  mkdir -p %i/share
  mv %i/lib/netcdf-g95/share/man %i/share
  mv %i/lib/netcdf-g95/share/doc %i/share
  mv %i/lib/netcdf-g95/share/info %i/share
  /bin/rm -rf %i/lib/netcdf-g95/share
  # Add examples for F77 and F90
  mkdir -p %i/share/doc/netcdf/examples
  cp -r examples/F* %i/share/doc/netcdf/examples
  # Remove duplicate and C and CXX documentation
  rm -f %i/share/doc/netcdf/*.{ps,txt,info}
  rm -f %i/share/doc/netcdf/netcdf{-*,}.*
  rm -f %i/share/info/netcdf{-[a-eg-z]*,}.info
<<
SplitOff: <<
  Package: %N-shlibs
  Depends: netcdf-shlibs (= %v-%r)
  Files: lib/netcdf-g95/lib/libnetcdff.*.dylib
  Shlibs: %p/lib/netcdf-g95/lib/libnetcdff.4.dylib 5.0.0 %n (>= 3.6.2-1001)
  DocFiles: COPYRIGHT README RELEASE_NOTES
<<
InfoDocs: netcdf-f77.info netcdf-f90.info
DocFiles: COPYRIGHT README RELEASE_NOTES
Description: Interface & lib for array-based data access
DescDetail: <<
The netCDF (network Common Data Form) library defines a machine-independent
format for representing scientific data. Together, the interface, library,
and format support the creation, access, and sharing of scientific data.

This package provides libraries, documentation and examples for interfacing
with Fortran 77 and Fortran 90 code using the g95 compiler.

Installs library and include files in %p/lib/netcdf-g95 to avoid 
conflicting with the netcdf-gfortran package.
<<
DescPackaging: <<
This Fortran interface is created as a different package so that users
do not have to install a Fortran compiler to just get the C/C++ interface.
<<
DescPort: <<
CFLAGS=-O2 FFLAGS=-O2 FCFLAGS=-O2 is essential to avoid debugging mode flags (-g).
All docs are moved into the directory /sw/share/doc/netcdf.
Removed non-essential duplicate documentation (.ps and .txt).
<<
Homepage: http://www.unidata.ucar.edu/software/netcdf/
License: OSI-Approved
