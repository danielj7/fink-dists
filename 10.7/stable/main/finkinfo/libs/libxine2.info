Info4: <<
Package: libxine2
Version: 1.2.1
Revision: 1
Description: Xine video/media player library
License: LGPL
Maintainer: None <fink-devel@lists.sourceforge.net>

Depends: <<
	%N-shlibs (= %v-%r),
	fontconfig2-shlibs (>= 2.8.0-6),
	freetype219-shlibs (>= 2.4.4-2),
	libavutil51-shlibs (>= 0.8.11),
	libgettext8-shlibs,
	libiconv
<<	
BuildDepends: <<
	a52dec-dev,
	aalib,
	audiofile,
#	bzip2-dev,
	esound (>= 0.2.38-1),
#	expat1,
#	faac-dev,
	fink (>= 0.32-1),
	fink-package-precedence (>= 0.7-1),
	fontconfig2-dev (>= 2.8.0-6),
	freetype219 (>= 2.4.4-2),
	gconf2-dev (>= 2.20.0-1),
	gettext-bin,
	gettext-tools,
	glib2-dev (>= 2.22.0-1),
	gnome-vfs2-unified-dev (>= 1:2.24.2-1),
	gtk+2-dev (>= 2.18.0-1),
	imagemagick2-dev,
	jack-dev,
#	lame-dev,
#	lcms,
#	libavahi-client3-dev,
#	libavahi-common3-dev,
#	libavahi-glib1-dev,
	libavcodec53-dev (>= 0.8.11),
	libavutil51-dev (>= 0.8.11),
	libbluray1-dev,
#	libbonobo2-dev (>= 2.20.0-1),
	libcaca-dev (>= 0.99.beta16-1),
#	libcdio-dev,
	libdvdnav,
	libdvdread.3,
	libfaad2-dev,
	libflac8-dev,
	libgettext8-dev,
#	libgnugetopt,
#	libgsm1-dev,
	libiconv-dev,
#	libiso9660-dev,
	libjpeg8,
	libmad,
	libmng2,
	libmodplug1,
	libmpcdec5,
	libncurses5 (>= 5.4-20041023-1006),
	libncursesw5,
	libogg,
#	libopencore-amr0,
	libpostproc51-dev (>= 0.8.11),
	libspeex1,
	libtheora0,
#	libtiff,
#	libtool2,
#	libvcd-dev (>= 0.7.21-10),
	libvorbis0,
#	libx264-115-dev,
#	libxml2 (>= 2.6.32-1),
#	orbit2-dev (>= 2.14.9-1),
	pkgconfig (>= 0.23-1),
#	popt,
#	pth2-dev,
	sdl (>= 1.2.9-1001),
#	slang2,
#	wavpack1-dev,
	x11-dev,
#	xvidcore
<<
Conflicts: <<
	libxine,
	libxine-docs,
	libxine1,
	libxine2
<<
Replaces: <<
	libxine,
	libxine-shlibs,
	libxine-docs,
	libxine1,
	libxine2
<<
Recommends: libdvdcss-shlibs
BuildDependsOnly: true

Source: mirror:sourceforge:xine/xine-lib-%v.tar.xz
Source-MD5: 6884ba356ebd7f0ccf900f91ebf15a65

PatchScript: <<
	%{default_script}
<<
PatchFile: %n.patch
PatchFile-MD5: 9da75a181af09f489e0687416fc6d41a

### --NNNdir games needed to put fonts into a versioned directory
ConfigureParams: <<
--build=%m-apple-darwin`uname -r|cut -f1 -d.` \
--libexecdir=%p/lib/libxine \
--datarootdir=%p/share \
--datadir=%p/share/libxine2 \
--localedir=%p/share/locale \
--mandir=%p/share/man \
--docdir=%p/share/doc/xine-lib \
\
--enable-ipv6 \
--enable-dependency-tracking \
--disable-static \
--enable-shared \
--enable-coreaudio \
--disable-oss \
--enable-aalib \
--enable-macosx-video \
--enable-opengl \
--enable-glu \
--enable-gnomevfs \
--disable-samba \
--disable-vcd \
--enable-bluray \
--enable-a52dec \
--enable-asf \
--enable-nosefart \
--enable-faad \
--enable-gdkpixbuf \
--disable-dts \
--enable-mad \
--enable-modplug \
--enable-musepack \
--enable-mng \
--disable-real-codecs \
\
--with-freetype \
--with-fontconfig \
--with-esound \
--without-fusionsound \
--with-jack \
--without-pulseaudio \
--with-caca \
--with-sdl \
--with-external-dvdnav \
--with-imagemagick \
--with-libflac \
--with-speex \
--with-theora \
--with-vorbis
<<
CompileScript: <<
	#!/bin/sh -ev
	./configure %c
	make -w
	fink-package-precedence --prohibit-bdep=libxine1,libxine2 .
<<
InfoTest: <<
	TestScript: make check || exit 2
<<
InstallScript: <<
	make -w install DESTDIR=%d
	mv %i/share/%n/aclocal %i/share
	perl -pi -e 's/-framework /-Wl,-framework,/g' %i/lib/*.la
<<
DocFiles: AUTHORS COPYING CREDITS ChangeLog INSTALL NEWS README TODO
SplitOff: <<
	Package: %N-shlibs
	Depends: <<
		a52dec-shlibs,
		aalib-shlibs,
#		audiofile-shlibs,
#		bzip2-shlibs,
		esound-shlibs (>= 0.2.38-1),
#		expat1-shlibs,
#		faac-shlibs,
		fontconfig2-shlibs (>= 2.8.0-6),
		freetype219-shlibs (>= 2.4.4-2),
		gconf2-shlibs (>= 2.20.0-1),
		glib2-shlibs (>= 2.22.0-1),
		gnome-vfs2-unified-shlibs (>= 1:2.24.2-1),
		gtk+2-shlibs (>= 2.18.0-1),
		imagemagick2-shlibs,
		jack-shlibs,
#		lame-shlibs,
#		lcms-shlibs,
#		libavahi-client3-shlibs,
#		libavahi-common3-shlibs,
#		libavahi-glib1-shlibs,
		libavcodec53-shlibs (>= 0.8.11),
		libavutil51-shlibs (>= 0.8.11),
		libbluray1-shlibs,
#		libbonobo2-shlibs (>= 2.20.0-1),
		libcaca-shlibs (>= 0.99.beta16-1),
#		libcdio7-shlibs,
		libdvdnav4-shlibs,
		libdvdread.3-shlibs,
		libfaad2-shlibs,
		libflac8,
		libgettext8-shlibs,
#		libgnugetopt-shlibs,
#		libgsm1-shlibs,
		libiconv,
#		libiso96605-shlibs,
#		libjpeg8-shlibs,
		libmad-shlibs,
		libmng2-shlibs,
		libmodplug1-shlibs,
		libmpcdec5-shlibs,
		libncurses5-shlibs (>= 5.4-20041023-1006),
		libncursesw5-shlibs,
		libogg-shlibs,
#		libopencore-amr0-shlibs,
		libpostproc51-shlibs (>= 0.8.11),
		libspeex1-shlibs,
		libtheora0-shlibs,
#		libtiff-shlibs,
#		libtool2-shlibs,
#		libvcd0-shlibs (>= 0.7.21-10),
		libvorbis0-shlibs,
#		libx264-115-shlibs,
#		libxml2-shlibs (>= 2.6.32-1),
#		orbit2-shlibs (>= 2.14.9-1),
		sdl-shlibs (>= 1.2.9-1001),
#		slang2-shlibs,
#		wavpack1-shlibs,
		x11-shlibs,
#		xvidcore-shlibs
	<<
	DocFiles: AUTHORS COPYING ChangeLog INSTALL NEWS README
	Files: <<
		lib/libxine*.*.dylib
		lib/xine
		share/libxine2
	<<
	Shlibs: <<
		%p/lib/libxine.2.dylib				4.0.0 %n (>= 1.2.1-1)
		%p/lib/libxineMacOSXVideo.2.dylib	4.0.0 %n (>= 1.2.1-1)
	<<
<<

Homepage: http://xine.sourceforge.net/
DescDetail: <<
Libxine provides the complete infrastructure for a video/media player.
It supports MPEG 1/2 and some AVI and Quicktime videos out of the box,
so you can use it to play DVDs, (S)VCDs and most video files out there.
It supports network streams, subtitles and even mp3 files. It's extensible
to your heart's content via plugins for audio_out, video_out, input media,
demuxers (stream types), audio/video and subtitle codecs.
Building a GUI (or text based) frontend around this should be quite easy.
The xine-ui package provides one for your convenience, so you can just
start watching your VCDs ;-)
<<
DescPackaging: <<
o Version 1.2.1 by nieder, but has open maintainership
<<
DescPort: <<
Force add a missing .lo into am_libxine_interface_la_OBJECTS because ar doesn't like
creating .a files with no objects.

Add missing #include to audio_coreaudio_out.c to avoid needing older OSX SDKs. See:
https://trac.macports.org/ticket/23102
<<
<<
