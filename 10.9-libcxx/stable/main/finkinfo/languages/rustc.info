Package: rustc
Version: 1.17.0
Revision: 2
Description: Safe Fast System Programming Language
Maintainer: Brendan Cully <fink@brendan.cully.org>
License: BSD

Conflicts: rust (<< 1.11.0-2)
Replaces: rust (<< 1.11.0-2)

Source: https://static.rust-lang.org/dist/rustc-%v-src.tar.gz
Source-MD5: 2cba8948591084acdcb78d02914faa80
SourceDirectory: rustc-%v-src

Source2: https://static.rust-lang.org/dist/2017-03-11/rust-std-1.16.0-x86_64-apple-darwin.tar.gz
Source2-MD5: a0563d4bd73bda9433d58f4f42c43f2a
# prevent automatic unpacking
Source2Rename: rust-std-1.16.0-x86_64-apple-darwin.tar.gz.nounpack

# derived from src/stage0.txt
Source3: https://static.rust-lang.org/dist/2017-03-11/rustc-1.16.0-x86_64-apple-darwin.tar.gz
Source3-MD5: d44dcbaca33068473de9180ee34a5bdc
Source3Rename: rustc-1.16.0-x86_64-apple-darwin.tar.gz.nounpack

Source4: https://s3.amazonaws.com/rust-lang-ci/cargo-builds/6b05583d71f982bcad049b9fa094c637c062e751/cargo-nightly-x86_64-apple-darwin.tar.gz
Source4-MD5: 6069e6f7e47330d45b61d332a1662115
Source4Rename: cargo-bootstrap-%v-x86_64-apple-darwin.tar.gz.nounpack

BuildDepends: cmake

PatchScript: <<
#!/bin/sh -ev
#perl -pi -e 's,7.3\*\),7.3\* \| 8.0\*\),' configure
cat > config.toml <<EOF
[build]
vendor = true
#extended = true

[install]
prefix = "%i"

[rust]
codegen-units = 0
channel = "stable"
rpath = false
EOF
<<

CompileScript: <<
#!/bin/sh -ev
mkdir -p build/cache/2017-03-11
mv ../rust-std-1.16.0-x86_64-apple-darwin.tar.gz.nounpack build/cache/2017-03-11/rust-std-1.16.0-x86_64-apple-darwin.tar.gz
mv ../rustc-1.16.0-x86_64-apple-darwin.tar.gz.nounpack build/cache/2017-03-11/rustc-1.16.0-x86_64-apple-darwin.tar.gz
mkdir build/cache/6b05583d71f982bcad049b9fa094c637c062e751
mv ../cargo-bootstrap-%v-x86_64-apple-darwin.tar.gz.nounpack build/cache/6b05583d71f982bcad049b9fa094c637c062e751/cargo-nightly-x86_64-apple-darwin.tar.gz

# LC_CTYPE to unconfuse configparser
LC_CTYPE=UTF-8 ./x.py build
./x.py dist
<<
InstallScript: <<
#!/bin/sh -ev
  ./x.py dist --install

  mv %i/share/doc/rust %i/share/doc/%n
  
  # lib path is in build tree
  for tgt in %i/bin/* %i/lib/*.dylib; do
    for lib in $(otool -L $tgt | grep %b | awk '{print $1}')
    do
      install_name_tool -change $lib %p/lib/$(basename $lib) $tgt
    done
  done
  for tgt in %i/lib/rustlib/x86_64-apple-darwin/lib/*.dylib; do
    for lib in $(otool -L $tgt | grep %b | awk '{print $1}')
    do
      install_name_tool -change $lib %p/lib/$(basename $lib) $tgt
    done
  done
  for tgt in %i/lib/*.dylib; do
    install_name_tool -id %p/lib/$(basename $tgt) $tgt
  done
  for tgt in %i/lib/rustlib/x86_64-apple-darwin/lib/*.dylib; do
    install_name_tool -id %p/lib/rustlib/x86_64-apple-darwin/lib/$(basename $tgt) $tgt
  done
<<
Shlibs: <<
  %p/lib/libarena-9630750b295f884f.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libflate-0d2159da6509963a.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libfmt_macros-f515279e857b97e4.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libgetopts-d82858a74ca42b13.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libgraphviz-1322d793f13d6508.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/liblog-3db4fb93a4b712a1.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libproc_macro-64b4eb869e8e2f81.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libproc_macro_plugin-fd9e5a768e8baf7c.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc-bf550df0e222eba6.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_back-97df21b745227199.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_borrowck-5e54adeb0c20be65.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_const_eval-a87acd68cef376c6.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_const_math-6a6bc2b656a983c1.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_data_structures-46f00d9fbb60f608.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_driver-a6de821c6817decb.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_errors-fad64cf385e538dd.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_incremental-2a09dc6f33ec1bb3.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_lint-abf50d09b129c48f.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_llvm-af3e4245012b727f.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_metadata-a9c32d816edaf463.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_mir-1c47dca9509d7445.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_passes-4e1a26d5c07909be.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_platform_intrinsics-4a04a03f3c462882.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_plugin-1656788ad7542bfc.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_privacy-67f3879038c79569.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_resolve-bc1bf68972968c61.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_save_analysis-19c61ac64284a1a9.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_trans-cbab918eb52880aa.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustc_typeck-5d16db6f60749846.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/librustdoc-943410558d5dfa7e.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libserialize-78c14c1dd4882df3.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libstd-dea499e904e02802.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libsyntax-36e5b77e80782c8c.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libsyntax_ext-6ca5f1c668c3f690.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libsyntax_pos-529d69c3eabdb410.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libterm-1ab8455098dc2448.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/libtest-d7c8fcac9ae773e1.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libarena-9630750b295f884f.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libflate-0d2159da6509963a.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libfmt_macros-f515279e857b97e4.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libgetopts-d82858a74ca42b13.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libgraphviz-1322d793f13d6508.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/liblog-3db4fb93a4b712a1.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libproc_macro-64b4eb869e8e2f81.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libproc_macro_plugin-fd9e5a768e8baf7c.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc-bf550df0e222eba6.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_back-97df21b745227199.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_borrowck-5e54adeb0c20be65.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_const_eval-a87acd68cef376c6.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_const_math-6a6bc2b656a983c1.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_data_structures-46f00d9fbb60f608.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_driver-a6de821c6817decb.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_errors-fad64cf385e538dd.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_incremental-2a09dc6f33ec1bb3.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_lint-abf50d09b129c48f.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_llvm-af3e4245012b727f.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_metadata-a9c32d816edaf463.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_mir-1c47dca9509d7445.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_passes-4e1a26d5c07909be.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_platform_intrinsics-4a04a03f3c462882.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_plugin-1656788ad7542bfc.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_privacy-67f3879038c79569.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_resolve-bc1bf68972968c61.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_save_analysis-19c61ac64284a1a9.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_trans-cbab918eb52880aa.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustc_typeck-5d16db6f60749846.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/librustdoc-943410558d5dfa7e.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libserialize-78c14c1dd4882df3.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libstd-dea499e904e02802.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libsyntax-36e5b77e80782c8c.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libsyntax_ext-6ca5f1c668c3f690.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libsyntax_pos-529d69c3eabdb410.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libterm-1ab8455098dc2448.dylib 0.0.0 %n (>= 1.17.0-1)
  %p/lib/rustlib/x86_64-apple-darwin/lib/libtest-d7c8fcac9ae773e1.dylib 0.0.0 %n (>= 1.17.0-1)
<<
DocFiles: <<
  CONTRIBUTING.md COPYRIGHT LICENSE-APACHE LICENSE-MIT README.md RELEASES.md
<<

Homepage: http://www.rust-lang.org/
DescDetail: <<
Rust is a curly-brace, block-structured expression language. It visually
resembles the C language family, but differs significantly in syntactic
and semantic details. Its design is oriented toward concerns of
"programming in the large", that is, of creating and maintaining
boundaries - both abstract and operational - that preserve large-system
integrity, availability and concurrency.

It supports a mixture of imperative procedural, concurrent actor,
object-oriented and pure functional styles. Rust also supports generic
programming and metaprogramming, in both static and dynamic styles.
<<
