# DISCLAIMER: Max Horn is the sole maintainer of this package.
# Please DO NOT MAKE MODIFICATIONS without informing the maintainer.
# Preferably, send a patch to me instead of making changes yourself!
# If that is not possible due to extra urgency, at least send me a mail.
#
# Explanation: I am sick and tired of getting back to my packages and
# discovering that people have messed with it. I am then forced to
# retrace their steps, find out who, when and why did make a certain
# change etc. -- i.e. it makes my life as maintainer harder.
# Furthermore, as maintainer I am responsible for problems caused by my
# packages. But I am not willing to take responsibility for something I
# did not do. In particular, for changes that other people introduced
# behind my back, no matter how good and noble their intentions were. As
# such, I may see myself forced to drop responsibility for (and hence,
# maintainership of) the affected package.

Package: xchat
Version: 2.8.8
Revision: 5
Maintainer: Max Horn <max@quendi.de>
BuildDepends: <<
  aspell-dev,
  atk1 (>= 1.28.0-1),
  cairo (>= 1.8.8-3),
  dbus1.3-dev,
  dbus-glib1.2-dev,
  expat1,
  fink (>= 0.24.12-1),
  fink-package-precedence,
  fontconfig2-dev (>= 2.8.0-4),
  freetype219 (>= 2.3.12-1),
  gconf2-dev (>= 2.28.0-1),
  gettext-tools,
  glib2-dev (>= 2.22.0-1),
  glitz,
  gtk+2-dev (>= 2.18.0-1),
  gtkspell2-dev (>= 2.0.16-3),
  libgettext8-dev,
  libiconv-dev,
  pango1-xft2-ft219-dev (>= 1.24.5-4),
  pixman (>= 0.16.0-1),
  pkgconfig (>= 0.23),
  system-openssl-dev,
  tcltk,
  tcltk-dev,
  x11-dev
<<
Depends: <<
  atk1-shlibs (>= 1.28.0-1),
  cairo-shlibs (>= 1.8.8-3),
  dbus (>= 1.2.1-1),
  dbus1.3-shlibs,
  dbus-glib1.2-shlibs,
  fontconfig2-shlibs (>= 2.8.0-4),
  freetype219-shlibs (>= 2.3.12-1),
  gconf2 (>= 2.28.0-1),
  glib2-shlibs (>= 2.22.0-1),
  gtk+2-shlibs (>= 2.18.0-1),
  gtkspell2-shlibs (>= 2.0.16-3),
  libgettext8-shlibs,
  pango1-xft2-ft219-shlibs (>= 1.23.5-4),
  python26,
  tcltk-shlibs
<<
Conflicts: xchat-ssl (<< 2.6.8-1022)
Replaces: xchat-ssl (<< 2.6.8-1022)
Source: http://xchat.org/files/source/2.8/xchat-%v.tar.bz2
Source-MD5: 6775c44f38e84d06c06c336b32c4a452
PatchFile: %n.patch
PatchFile-MD5: 731c5e62819224c4627b9fea2905ab15
ConfigureParams: <<
  --enable-openssl \
  --enable-tcl=%p/lib \
  --disable-perl \
  --enable-ipv6 \
  --enable-spell=gtkspell \
  --disable-xlib \
  --enable-dependency-tracking \
  --disable-mmx \
  PKG_CONFIG_PATH="%p/lib/glib-2.0/pkgconfig-strict:%p/lib/fontconfig2/lib/pkgconfig:$PKG_CONFIG_PATH"
<<
SetCPPFLAGS: -I%p/lib/system-openssl/include
SetLDFLAGS: -L%p/lib/system-openssl/lib
CompileScript: <<
  pythonpath=%p/bin/python2.6 ./configure %c
  make
  fink-package-precedence .
<<
InstallScript: make install DESTDIR=%d
DocFiles: AUTHORS COPYING ChangeLog README faq.html
ConfFiles: %p/etc/gconf/schemas/apps_xchat_url_handler.schemas
PostInstScript: <<
	if [ configure = "$1" ]; then
		export GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source`
		gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/apps_xchat_url_handler.schemas >/dev/null
	fi
<<
Description: Graphical IRC client
DescDetail: <<
XChat is a graphical IRC client for UNIX operating systems (I.R.C. is Internet
Relay Chat, see http://irchelp.org for more information about IRC in general).
It runs under the X Window System and uses the GTK+2 toolkit.
<<
DescPort: <<
No -lutil is available nor required for the python plugin; thus I removed it
(and the -lpthread), which fixes the python plugin.
<<
DescPackaging: <<
Force python interp to avoid "first 'python' in PATH" dependency mess.

Disable perl to avoid needing different variants for each OS X
version. Could force everyone to use same perlversion if users want
whatever functionality perl would provide in this package.
<<
Homepage: http://www.xchat.org
License: GPL
