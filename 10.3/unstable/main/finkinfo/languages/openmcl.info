Package: openmcl
Version: 0.14.2-p1
Revision: 1
Description: PPC Common Lisp implementation
License: LGPL
Maintainer: Lars Rosengreen <lars@margay.org>

# Dependencies
Depends: gnupg

# Unpack Phase
Source: ftp://clozure.com/pub/%n-src-%v.tar.gz
Source2: ftp://clozure.com/pub/%n-darwinppc-bin-%v.tar.gz
Source3: ftp://clozure.com/pub/openmcl-darwin-interfaces-040505.tar.gz

SourceDirectory: ccl

Source-MD5: 44ada61f3c0b4ab5fc84bcdec60aa8d1
Source2-MD5: a984baf2c55293baac14314d61c203b0
Source3-MD5: b66cda4edbf5e18baa54dae060e30f37

# Compile Phase
CompileScript: <<
  cd lisp-kernel/darwin ; make
  echo '(ccl::xload-level-0 :force)' | ./dppccl --batch
  echo '(ccl::compile-ccl)' | ./dppccl --batch
  echo '(ccl::save-application "dppccl.image")' | ./dppccl --batch --image-name ppc-boot.image
<<

# Install Phase
InstallScript: <<
  find . -type d -name CVS -depth -exec rm -rf {} \;
  mkdir -p %i/bin
  sed -e 's/\/usr\/local\/src\/ccl/\%p\/share\/%n\/ccl/' scripts/%n > %i/bin/%n
  chmod +x %i/bin/%n
  mkdir -p %i/share/openmcl/ccl
  cp -Rp * %i/share/openmcl/ccl
<<

DocFiles: LGPL LICENSE

# Additional Data
Homepage: http://openmcl.clozure.com/

DescDetail: <<
A PPC common lisp implementation with many advanced features including
native (POSIX) threading, support for most of the MOP, and an advanced
interface to Objective-C/Cocoa.
<< 

DescPort: << 
This fink package uses the binary release of OpenMCL for bootstrapping
and borrows heavily from the darwinports port file.  gnupg is needed
by asdf-install, an included utility for downloading and installing
common lisp packages.

Note that OpenMCL is licensed under the Lisp Lesser General Public
License, a Lisp-specific variant of the LGPL.  See
http://opensource.franz.com/preamble.html for more information.
<<
