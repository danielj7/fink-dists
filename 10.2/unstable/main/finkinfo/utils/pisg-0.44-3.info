Package: pisg
Version: 0.44
Revision: 3
###
Depends: getopt-long-pm
###
Source: mirror:sourceforge:%n/%n-%v.tar.gz
Source-MD5: 3443111791a13d03190ac315ec03481e
###
PatchScript: sed 's|@FINKPREFIX@|%p|g' < %a/%f.patch | patch -p1
###
CompileScript: <<
  #!/bin/sh
  echo "### No compile needed!"
<<
InstallScript: <<
  #!/bin/sh
  echo "### making needed dirs"
  echo "  - making %i/bin"
  mkdir -p %i/bin
  echo "  - making %i/etc/cron.daily"
  mkdir -p %i/etc/cron.daily
  echo "  - making %i/share/pisg"
  mkdir -p %i/share/pisg
  echo "  - making %i/lib/perl5"
  mkdir -p %i/lib/perl5
  echo "  - making %i/share/man/man1"
  mkdir -p %i/share/man/man1
  echo "  - making %i/share/doc/pisg"
  mkdir -p %i/share/doc/pisg
  echo
  echo "### installing binary"
  echo "  - installing %i/bin/pisg"
  install -m 755 pisg %i/bin
  echo
  echo "### installing default config"
  echo "  - installing %i/etc/pisg.cfg"
  install -m 644 pisg.cfg %i/etc
  echo
  echo "### installing default daily cron script"
  echo "  - installing %i/etc/cron.daily/pisg"
  install -m 755 cron.daily %i/etc/cron.daily/pisg
  echo
  echo "### installing man page"
  echo "  - installing %i/share/man/man1/pisg.1"
  install -m 644 pisg.1 %i/share/man/man1
  echo
  echo "### installing perl modules"
  cd modules
  for i in `find . -name \* | sed -e s,"\./","",g`
  do
    if [ -d $i ]
    then 
      echo "  - making dir %i/lib/perl5/$i"
      mkdir -p %i/lib/perl5/$i
    elif [ -f $i ]
    then
      echo "  - installing %i/lib/perl5/$i"
      install -m 644 $i %i/lib/perl5/$i
    fi
  done
  cd ..
  echo
  echo "### installing pisg language support"
  echo "  - installing %i/share/pisg/lang.txt"
  install -m 644 lang.txt %i/share/pisg
  echo
  echo "### installing pisg gfxs"
  echo "  - making dir %i/share/pisg/gfx"
  mkdir -p %i/share/pisg/gfx
  cd gfx
  for i in *
  do
    if [ -d $i ]
    then 
      echo "  - making dir %i/share/pisg/gfx/$i"
      mkdir -p %i/share/pisg/gfx/$i
    elif [ -f $i ]
    then
      echo "  - installing %i/share/pisg/gfx/$i"
      install -m 644 $i %i/share/pisg/gfx/$i
    fi
  done
  cd ..
  echo
  echo "### installing pisg layouts"
  echo "  - making dir %i/share/pisg/layout"
  mkdir -p %i/share/pisg/layout
  cd layout
  for i in *
  do
    if [ -d $i ]
    then 
      echo "  - making dir %i/share/pisg/layout/$i"
      mkdir -p %i/share/pisg/layout/$i
    elif [ -f $i ]
    then
      echo "  - installing %i/share/pisg/layout/$i"
      install -m 644 $i %i/share/pisg/layout/$i
    fi
  done
  cd ..
  echo
  echo "### installing pisg extra scripts"
  cd scripts
  for i in `find . -name \* | sed -e s,"\./","",g`
  do
    if [ -d $i ]
    then 
      echo "  - making dir %i/share/doc/pisg/scripts/$i"
      mkdir -p %i/share/doc/pisg/scripts/$i
    elif [ -f $i ]
    then
      echo "  - installing %i/share/doc/pisg/scripts/$i"
      install -m 644 $i %i/share/doc/pisg/scripts/$i
    fi
  done
  cd ..
  echo
  echo "### installing pisg docs"
  cd docs
  for i in `find . -name \* | sed -e s,"\./","",g`
  do
    if [ -d $i ]
    then
      echo "  - making dir %i/share/doc/pisg/docs/$i"
      mkdir -p %i/share/doc/pisg/docs/$i
    elif [ -f $i ]
    then
      echo "  - installing %i/share/doc/pisg/docs/$i"
      install -m 644 $i %i/share/doc/pisg/docs/$i
    fi
  done
  cd ..
<<
###
DocFiles: COPYING README
ConfFiles: %p/etc/pisg.cfg
###
Description: Perl IRC Statistics Generator
DescDetail: <<
  pisg is an IRC channel statics generator written in Perl, it creates
  statistics out from different logfile formats - it was written because
  IRCStats wasn't open source. So here's an open source/GPL'ed version to
  anyone interested. It's a funny thing for your IRC channel, and it's
  highly customizeable.
<<
###
License: GPL
Maintainer: Justin F. Hallett <thesin@users.sourceforge.net>
Homepage: http://pisg.sourceforge.net/
