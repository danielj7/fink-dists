Package: mysql
Version: 3.23.52
Revision: 4
Maintainer: None <fink-devel@lists.sourceforge.net>
Depends: %N-shlibs (= %v-%r)
BuildDepends: readline (>= 4.3-5), libxml2, gdbm, gmp, expat, darwin (>= 6.0-1)
Source: http://www.fh-wolfenbuettel.de/ftp/pub/database/mysql/Downloads/MySQL-3.23/%n-%v.tar.gz
UpdateLibtool: true
SetCFLAGS: -O3 -fomit-frame-pointer
SetCXXFLAGS: -O3 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti
SetLDFLAGS: -L%b/libmysql/.libs
ConfigureParams: --with-innodb --without-readline --with-mysqld-user=mysql --with-extra-charsets=complex --mandir=%p/share/man --infodir=%p/share/info --localstatedir=%p/var/mysql --libexecdir=%p/sbin --sysconfdir=%p/etc
GCC: 3.1
InstallScript: <<
 make install DESTDIR=%d benchdir_root=%p/share/mysql libsdir=%p/lib/mysql
 mkdir -p %i/var/mysql
 chmod 700 %i/var/mysql
 chown mysql %i/var/mysql
 mkdir -p %i/share/doc/%n
 cd Docs/; cp -R *.html Flags *.ps *.txt INSTALL-BINARY %i/share/doc/%n/
 cd %i/lib && ln -s mysql/libmysqlclient.la . && ln -s mysql/libmysqlclient.a . && ln -s mysql/libmysqlclient.dylib .
<<
SplitOff: <<
  Package: %N-dev
  Depends: %N-shlibs (= %v-%r)
  BuildDependsOnly: True
  Replaces: mysql (<= 3.23.51-1)
  Files: include lib/mysql/*.a lib/mysql/*.la lib/mysql/libmysqlclient.dylib
  DocFiles: README COPYING COPYING.LIB
<<
SplitOff2: <<
  Package: %N-shlibs
  Replaces: mysql (<= 3.23.51-1)
  Depends: readline-shlibs (>= 4.3-5), dlcompat, daemonic (>= 20010902-1)
  Files: lib/mysql/libmysqlclient.10.0.0.dylib lib/mysql/libmysqlclient.10.dylib
  DocFiles: README COPYING COPYING.LIB
<<
DocFiles: README COPYING COPYING.LIB
InfoDocs: mysql.info
#
DaemonicFile: <<
<service>
<description>MySQL database server</description>
<message>MySQL database server</message>

<daemon name="mysqld">
<executable background="yes">%p/bin/safe_mysqld</executable>
</daemon>

</service>
<<
#
PostInstScript: <<
# create initial database
if [ ! -d %p/var/mysql/mysql ]; then
  %p/bin/mysql_install_db --user=mysql
  chown -R mysql %p/var/mysql/mysql %p/var/mysql/test
fi

# update daemonic init script if necessary
daemonic install mysql
<<
PreRmScript: <<
# clean up
if [ $1 != "upgrade" ]; then
  daemonic remove mysql
fi
<<
#
Description: Open Source SQL database
DescUsage: <<
The package creates the administrative tables on installation. Be sure
to set a MySQL root password using mysqladmin:
'mysqladmin -u root password your-new-password' or
'mysqladmin -u root -h localhost -p password your-new-password'

You can start the MySQL server manually
1) using 'safe_mysqld --user=mysql &' - version 3.x
2) using 'mysqld_safe --user=mysql &' - version 4.x
or you can run 'daemonic enable mysql' to create a StartupItem for it.
All of these must be done as root.
<<
DescPackaging: <<
Version 3.23.52 removes passwd dependency - for OSX 10.2 only which has mysql user.

Built with InnoDB transaction safe table support (http://www.innodb.com/).
You should install and update /sw/var/mysql/my.cnf in order to use InnoDB.

The MySQL benchmark suite is stowed away in <prefix>/share/mysql.

The InnoDB package revision by Andrei Verovski.
http://homepage.mac.com/macgurutemple/downloads.html

Previous package revisions by Christoph Pfisterer.
http://fink.sourceforge.net
<<
DescPort: <<
Supports Darwin out of the box, although the libtool scripts are
updated to build shared libraries. Version 3.23.47 fixes shutdown
problem on MacOS X/Darwin platform.
<<
License: GPL/LGPL
Homepage: http://www.mysql.com/
