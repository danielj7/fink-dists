--- cyrus-sasl-2.1.10/Makefile.in	Tue Dec 10 02:45:02 2002
+++ cyrus-sasl-2.1.10-patched/Makefile.in	Sun Dec 22 10:58:29 2002
@@ -176,7 +176,7 @@
 @SAMPLE_FALSE@SAM = 
 @JAVA_TRUE@JAV = java
 @JAVA_FALSE@JAV = 
-@MACOSX_TRUE@INSTALLOSX = install-exec-local-osx
+#@MACOSX_TRUE@INSTALLOSX = install-exec-local-osx
 @MACOSX_FALSE@INSTALLOSX = 
 
 SUBDIRS = include sasldb plugins lib utils doc man $(PWC) $(SAM) $(JAV) $(SAD)
@@ -487,13 +487,6 @@
 	  echo "* the library should use."; \
 	  echo "********************************************************"; \
 	fi
-install-exec-local-osx:
-	$(mkinstalldirs) $(framedir)/Versions/A/Headers
-	$(mkinstalldirs) $(framedir)/Versions/A/Resources
-	cd $(framedir)/Versions ; ln -fs A Current
-	cd $(framedir) ; ln -fs Versions/A/Headers .
-	cd $(framedir) ; ln -fs Versions/A/Resources .
-	$(INSTALL_DATA) $(srcdir)/config/Info.plist $(framedir)/Versions/A/Resources
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.

--- cyrus-sasl-2.1.10/include/Makefile.in	Tue Dec 10 02:45:02 2002
+++ cyrus-sasl-2.1.10-patched/include/Makefile.in	Sun Dec 22 11:00:16 2002
@@ -178,9 +178,9 @@
 
 makemd5_SOURCES = makemd5.c
 
-@MACOSX_TRUE@framedir = /Library/Frameworks/SASL2.framework
-@MACOSX_TRUE@frameheaderdir = $(framedir)/Versions/A/Headers
-@MACOSX_TRUE@frameheader_DATA = $(saslinclude_HEADERS)
+#@MACOSX_TRUE@framedir = /Library/Frameworks/SASL2.framework
+#@MACOSX_TRUE@frameheaderdir = $(framedir)/Versions/A/Headers
+#@MACOSX_TRUE@frameheader_DATA = $(saslinclude_HEADERS)
 mkinstalldirs = $(SHELL) $(top_srcdir)/config/mkinstalldirs
 CONFIG_HEADER = ../config.h
 CONFIG_CLEAN_FILES = 

--- cyrus-sasl-2.1.10/lib/Makefile.in	Tue Dec 10 02:45:03 2002
+++ cyrus-sasl-2.1.10-patched/lib/Makefile.in	Sun Dec 22 11:02:04 2002
@@ -189,7 +189,7 @@
 libsasl2_la_DEPENDENCIES = $(LTLIBOBJS)
 libsasl2_la_LIBADD = $(LTLIBOBJS) $(SASL_DL_LIB) $(LIB_SOCKET)
 
-@MACOSX_TRUE@framedir = /Library/Frameworks/SASL2.framework
+#@MACOSX_TRUE@framedir = /Library/Frameworks/SASL2.framework
 mkinstalldirs = $(SHELL) $(top_srcdir)/config/mkinstalldirs
 CONFIG_HEADER = ../config.h
 CONFIG_CLEAN_FILES = 
@@ -444,10 +444,10 @@
 	rm -f plugin_common.o
 	ln -s $(top_builddir)/plugins/plugin_common.o plugin_common.o
 @MACOSX_TRUE@install-exec-hook:
-@MACOSX_TRUE@	$(mkinstalldirs) $(framedir)/Versions/A
-@MACOSX_TRUE@	ln -fs $(libdir)/libsasl2.dylib $(framedir)/Versions/A/SASL2
-@MACOSX_TRUE@	cd $(framedir) ; ln -fs Versions/A/SASL2 .
-@MACOSX_FALSE@install-exec-hook:
+#@MACOSX_TRUE@	$(mkinstalldirs) $(framedir)/Versions/A
+#@MACOSX_TRUE@	ln -fs $(libdir)/libsasl2.dylib $(framedir)/Versions/A/SASL2
+#@MACOSX_TRUE@	cd $(framedir) ; ln -fs Versions/A/SASL2 .
+#@MACOSX_FALSE@install-exec-hook:
 
 libsasl2.a: libsasl2.la $(SASL_STATIC_OBJS)
 	@echo adding static plugins and dependencies

--- cyrus-sasl-2.1.10/saslauthd/auth_krb4.h	Tue Dec  4 13:06:54 2001
+++ cyrus-sasl-2.1.10-patched/saslauthd/auth_krb4.h	Sun Dec 22 12:03:24 2002
@@ -27,3 +27,5 @@
 
 char *auth_krb4(const char *, const char *, const char *, const char *);
 int auth_krb4_init(void);
+
+#define           KRB_TICKET_GRANTING_TICKET      "krbtgt"

--- cyrus-sasl-2.1.10/configure	Tue Dec 10 02:45:02 2002
+++ cyrus-sasl-2.1.10-patched/configure	Mon Dec 23 01:17:03 2002
@@ -1516,7 +1516,7 @@
     CFLAGS="-Wall ${CFLAGS}"
   GCC_VERSION=`$CC -v 2>&1 | sed -n -e '/version/s/.*version \([0-9]\)\..*/\1/p'`
   if test "$GCC_VERSION" != "3"; then
-    CPPFLAGS="${CPPFLAGS} -I/usr/local/include"
+    CPPFLAGS="${CPPFLAGS}"
   fi
 else
   CPPFLAGS="${CPPFLAGS} -I/usr/local/include"
@@ -1524,7 +1524,7 @@
 
   # this is CMU ADD LIBPATH
   if test "$andrew_runpath_switch" = "none" ; then
-	LDFLAGS="-L"/usr/local/lib" ${LDFLAGS}"
+	LDFLAGS="${LDFLAGS}"
   else
 	LDFLAGS="-L"/usr/local/lib" $andrew_runpath_switch"/usr/local/lib" ${LDFLAGS}"
   fi
@@ -3623,16 +3623,16 @@
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-	  ac_safe=`echo "security/pam_appl.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for security/pam_appl.h""... $ac_c" 1>&6
-echo "configure:3629: checking for security/pam_appl.h" >&5
+	  ac_safe=`echo "pam/pam_appl.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for pam/pam_appl.h""... $ac_c" 1>&6
+echo "configure:3629: checking for pam/pam_appl.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 3634 "configure"
 #include "confdefs.h"
-#include <security/pam_appl.h>
+#include <pam/pam_appl.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:3639: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }

--- cyrus-sasl-2.1.10/saslauthd/configure	Tue Dec 10 02:45:05 2002
+++ cyrus-sasl-2.1.10-patched/saslauthd/configure	Mon Dec 23 01:29:06 2002
@@ -3861,16 +3861,16 @@
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-	  ac_safe=`echo "security/pam_appl.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for security/pam_appl.h""... $ac_c" 1>&6
-echo "configure:3867: checking for security/pam_appl.h" >&5
+	  ac_safe=`echo "pam/pam_appl.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for pam/pam_appl.h""... $ac_c" 1>&6
+echo "configure:3867: checking for pam/pam_appl.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 3872 "configure"
 #include "confdefs.h"
-#include <security/pam_appl.h>
+#include <pam/pam_appl.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:3877: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }

--- cyrus-sasl-2.1.10/saslauthd/auth_pam.c	Tue Mar 12 01:52:59 2002
+++ cyrus-sasl-2.1.10-patched/saslauthd/auth_pam.c	Mon Dec 23 01:38:07 2002
@@ -50,7 +50,7 @@
 
 # include <string.h>
 # include <syslog.h>
-# include <security/pam_appl.h>
+# include <pam/pam_appl.h>
 
 # include "auth_pam.h"
 /* END PUBLIC DEPENDENCIES */
