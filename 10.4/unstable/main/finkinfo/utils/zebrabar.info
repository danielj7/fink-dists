Package: zebrabar
Version: 0.5
Revision: 1
Source: mirror:sourceforge:zebra/zebra-%v.tar.bz2
Source-MD5: 7e5cfba8d06fe46c4310efe67fb7a4a7

BuildDepends: <<
	bzip2-dev,
	expat1,
	fink (>= 0.24.12-1),
	fontconfig2-dev (>= 2.4.1-1),
	freetype219 (>= 2.3.5-1),
	imagemagick1-dev,
	lcms,
	libjpeg,
	libtiff,
	libzebrabar3 (>= 0.5-3),
	pkgconfig,
	x11-dev,
	xft2-dev,
	xmlto
<<
Depends: <<
	bzip2-shlibs,
	expat1-shlibs,
	fontconfig2-shlibs (>= 2.4.1-1),
	freetype219-shlibs (>= 2.3.5-1),
	imagemagick1-shlibs,
	lcms-shlibs,
	libjpeg-shlibs,
	libtiff-shlibs,
	libzebrabar3-shlibs (>= 0.5-3),
	x11-shlibs
<<
GCC: 4.0

PatchFile: %n.patch
PatchFile-MD5: d1f46ce2fda3b313c8cc864cd4ee6b56
PatchScript: <<
	%{default_script}

	mkdir -p _include/zebra
	ln -s ../include/config.h _include

	perl -pi -e 's,zebra/libzebra.la,,g' Makefile.in
	perl -pi -e 's,zebra.pc,,g' Makefile.in
<<
ConfigureParams: --disable-dependency-tracking --disable-video --with-imagemagick --without-npapi --without-gtk --without-python --without-qt
CompileScript: <<
#!/bin/sh -ex
	# gather flags for installed zebra
	ZEBRA_CFLAGS=`%p/bin/pkg-config --cflags zebra`
	ZEBRA_LIBS=`%p/bin/pkg-config --libs zebra`
	CPPFLAGS="$CPPFLAGS $ZEBRA_CFLAGS"
	LDFLAGS="$LDFLAGS $ZEBRA_LIBS"

	./configure %c
	make
<<
InstallScript: <<
	make install DESTDIR=%d include_HEADERS= zinclude_HEADERS=
	rm -rf %i/share/doc/zebra
	rm %i/share/man/man1/zebracam.1
	install examples/upcrpc.py %i/bin/upcrpc
<<
DocFiles: COPYING.LIB ChangeLog HACKING NEWS README TODO

DescPackaging: <<
	Hack makefiles and autoconf config.h locations to use
	installed zebra instead of building locally.

	Redo doc files manually so they go where we want and include
	the files oriented towards users not installers.

	This is just the zebraimg program.
<<
DescUsage: <<
'zebraimg' is the main graphics-file decoding program.

'upcrpc' does UPC-code lookups from http://dev.upcdatabase.com
<<
Description: GTK bindings for zebra barcode library
Homepage: http://zebra.sourceforge.net/
License: LGPL
Maintainer: Daniel Macks <dmacks@netspace.org>
