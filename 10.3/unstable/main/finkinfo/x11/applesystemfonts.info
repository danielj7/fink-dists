Package: applesystemfonts
Version: 1.0
Revision: 15
Depends: xfontpath
BuildDepends: x11, fondu, xfontpath, x11-dev
Type: nosource
NoSourceDirectory: true
CompileScript: <<
#!/bin/sh
	find /Library/Fonts /Network/Library/Fonts /System/Library/Fonts /Users/*/Library/Fonts  -name \*.dfont -print | while read file; do
		fondu -force "$file"
	done
	for file in "Arial" "Arial Black" "Arial Narrow" "Arial Rounded Bold" "Brush Script" \
             "Comic Sans MS" "Courier New" "Georgia" "Inkpen2" "Opus" "Verdana"  "Webdings" \
        ; do
                fondu -force /Library/Fonts/"$file"
        done 
<<
InstallScript: <<
#!/bin/sh
	# hot stinkin' DAMN this is ugly
	install -d -m 755 %d`%p/bin/xfontpath basedir`/applettf
	install -c -m 644 *.ttf %d`%p/bin/xfontpath basedir`/applettf/
	cd %d`%p/bin/xfontpath basedir`/applettf
	find /Library/Fonts /Network/Library/Fonts /Users/*/Library/Fonts /System/Library/Fonts -name \*.ttf -print | while read FONTFILE; do
		FONTNAME=`basename "$FONTFILE"`
		rm -f "$FONTNAME"
		ln -s "$FONTFILE" "${FONTNAME//\ /_}"
	done
	echo "generating fonts.scale"
	/usr/X11R6/bin/mkfontscale
	echo "generating fonts.dir"
        /usr/X11R6/bin/mkfontdir
<<
PostInstScript: <<
#!/bin/sh
	if test -x %p/bin/xfontpath; then
		%p/bin/xfontpath --silent install applettf
	fi
	echo "All done.  You may need to restart X to get antialiased fonts"
	echo "in some applications."
<<
PostRmScript: <<
#!/bin/sh
	if test -x %p/bin/xfontpath; then
		%p/bin/xfontpath --silent remove applettf
	fi
<<
Description: Make Apple system fonts available to X11R6
DescDetail: <<
This package will extract the TrueType fonts from your
Apple System and Library directories and make them
available to X11R6.

Warning: This package can get *VERY* large depending on
how many fonts you have in your system.  TrueType fonts
will get symlinked, so they won't take much space, but any
dfont files in the /Library or /System/Library directories
will get converted to TrueType and copied to your fink
tree.
<<
DescPackaging: <<
Not sure about licensing on the Apple fonts, so I'm going
to assume for now it's restrictive.
Version 1.0-15 by Martin Costabel <costabel@wanadoo.fr>
<<
License: Restrictive
Maintainer: Benjamin Reed <ranger@befunk.com>
