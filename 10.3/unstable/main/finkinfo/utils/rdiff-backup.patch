# Let Fink install the document files into the proper location instead
# of having rdiff-backup's setup.py do it, which also puts its version
# number in the document directory name.

diff -ru rdiff-backup-0.13.6-orig/setup.py rdiff-backup-0.13.6/setup.py
--- rdiff-backup-0.13.6-orig/setup.py	2004-01-31 20:31:34.000000000 -0800
+++ rdiff-backup-0.13.6/setup.py	2004-03-08 19:01:56.000000000 -0800
@@ -56,7 +56,4 @@
 							   libraries=libname,
 							   extra_link_args=lflags_arg)],
 	  scripts = ['rdiff-backup'],
-	  data_files = [('share/man/man1', ['rdiff-backup.1']),
-					('share/doc/rdiff-backup-%s' % (version_string,),
-					 ['CHANGELOG', 'COPYING', 'README', 'FAQ.html'])])
-
+	  data_files = [('share/man/man1', ['rdiff-backup.1'])])

# Patch from http://savannah.nongnu.org/bugs/?func=detailitem&item_id=12949 .

--- rdiff-backup-0.13.6-orig/rdiff_backup/fs_abilities.py.orig	2005-05-31 11:58:36.000000000 -0400
+++ rdiff-backup-0.13.6/rdiff_backup/fs_abilities.py	2005-05-31 14:45:32.000000000 -0400
@@ -241,13 +241,15 @@
 		def supports_unusual_chars():
 			"""Test handling of several chars sometimes not supported"""
 			for filename in [':', '\\', chr(175)]:
-				rp = subdir.append(filename)
-				try: rp.touch()
-				except IOError:
+				try:
+					rp = subdir.append(filename)
+					rp.touch()
+				except (IOError, OSError):
 					assert not rp.lstat()
 					return 0
-				assert rp.lstat()
-				rp.delete()
+				else:
+					assert rp.lstat()
+					rp.delete()
 			return 1
 
 		def sanity_check():
