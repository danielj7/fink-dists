diff -Naur gst-plugins-0.6.4-old/configure gst-plugins-0.6.4/configure
--- gst-plugins-0.6.4-old/configure	Tue Nov  4 13:04:10 2003
+++ gst-plugins-0.6.4/configure	Tue Nov  4 13:04:42 2003
@@ -12605,7 +12605,7 @@
         intfloat law level\
         median mixmatrix mpeg1enc mpeg1sys mpeg1videoparse mpeg2enc mpeg2sub\
         mpegaudio mpegaudioparse mpegstream mpegtypes\
-        monoscope oneton passthrough playondemand qtdemux rtjpeg silence sine\
+        monoscope oneton passthrough qtdemux rtjpeg silence sine\
         smooth smpte spectrum speed stereo stereomono synaesthesia\
         udp vbidec videocrop videoscale videotestsrc volenv volume\
         vumeter wavenc wavparse y4m"
@@ -28762,7 +28762,7 @@
 fi
 
 
-                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ac_config_files="$ac_config_files Makefile gst-plugins.spec gst/Makefile gst/ac3parse/Makefile gst/adder/Makefile gst/audioscale/Makefile gst/auparse/Makefile gst/avi/Makefile gst/cdxaparse/Makefile gst/chart/Makefile gst/cutter/Makefile gst/deinterlace/Makefile gst/effectv/Makefile gst/festival/Makefile gst/filter/Makefile gst/flx/Makefile gst/goom/Makefile gst/intfloat/Makefile gst/law/Makefile gst/level/Makefile gst/median/Makefile gst/mixmatrix/Makefile gst/mpeg1enc/Makefile gst/mpeg1sys/Makefile gst/mpeg1videoparse/Makefile gst/mpeg2enc/Makefile gst/mpeg2sub/Makefile gst/mpegaudio/Makefile gst/mpegaudioparse/Makefile gst/mpegstream/Makefile gst/mpegtypes/Makefile gst/modplug/Makefile gst/modplug/libmodplug/Makefile gst/monoscope/Makefile gst/oneton/Makefile gst/passthrough/Makefile gst/playondemand/Makefile gst/qtdemux/Makefile gst/rtjpeg/Makefile gst/silence/Makefile gst/sine/Makefile gst/smooth/Makefile gst/smpte/Makefile gst/spectrum/Makefile gst/speed/Makefile gst/stereo/Makefile gst/stereomono/Makefile gst/synaesthesia/Makefile gst/udp/Makefile gst/vbidec/Makefile gst/videoscale/Makefile gst/videotestsrc/Makefile gst/videocrop/Makefile gst/volenv/Makefile gst/volume/Makefile gst/vumeter/Makefile gst/wavenc/Makefile gst/wavparse/Makefile gst/y4m/Makefile sys/Makefile sys/cdrom/Makefile sys/dxr3/Makefile sys/oss/Makefile sys/qcam/Makefile sys/v4l/Makefile sys/v4l2/Makefile sys/vcd/Makefile sys/vga/Makefile sys/xvideo/Makefile sys/videosink/Makefile ext/Makefile ext/a52dec/Makefile ext/aalib/Makefile ext/alsa/Makefile ext/arts/Makefile ext/artsd/Makefile ext/audiofile/Makefile ext/avifile/Makefile ext/cdparanoia/Makefile ext/dv/Makefile ext/dvdread/Makefile ext/dvdnav/Makefile ext/esd/Makefile ext/ffmpeg/Makefile ext/flac/Makefile ext/gnomevfs/Makefile ext/gsm/Makefile ext/hermes/Makefile ext/http/Makefile ext/jack/Makefile ext/jpeg/Makefile ext/ladspa/Makefile ext/lame/Makefile ext/lcs/Makefile ext/libfame/Makefile ext/libpng/Makefile ext/mad/Makefile ext/mikmod/Makefile ext/mjpegtools/Makefile ext/mpeg2dec/Makefile ext/openquicktime/Makefile ext/raw1394/Makefile ext/rtp/Makefile ext/sdl/Makefile ext/shout/Makefile ext/shout2/Makefile ext/sidplay/Makefile ext/smoothwave/Makefile ext/snapshot/Makefile ext/swfdec/Makefile ext/vorbis/Makefile ext/tarkin/Makefile ext/xmms/Makefile gst-libs/Makefile gst-libs/gst/Makefile gst-libs/gst/audio/Makefile gst-libs/gst/floatcast/Makefile gst-libs/gst/gconf/Makefile gst-libs/gst/gconf/gstreamer-gconf.pc gst-libs/gst/gconf/gstreamer-gconf-uninstalled.pc gst-libs/gst/idct/Makefile gst-libs/gst/media-info/Makefile gst-libs/gst/play/Makefile gst-libs/gst/resample/Makefile gst-libs/gst/riff/Makefile gst-libs/gst/video/Makefile gst-libs/ext/Makefile gst-libs/ext/ffmpeg/Makefile examples/dynparams/Makefile examples/capsfilter/Makefile examples/seeking/Makefile examples/indexing/Makefile examples/Makefile testsuite/autoplug/Makefile testsuite/spider/Makefile testsuite/Makefile tools/Makefile gconf/Makefile pkgconfig/Makefile pkgconfig/gstreamer-libs.pc pkgconfig/gstreamer-libs-uninstalled.pc pkgconfig/gstreamer-play.pc pkgconfig/gstreamer-play-uninstalled.pc"
+                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ac_config_files="$ac_config_files Makefile gst-plugins.spec gst/Makefile gst/ac3parse/Makefile gst/adder/Makefile gst/audioscale/Makefile gst/auparse/Makefile gst/avi/Makefile gst/cdxaparse/Makefile gst/chart/Makefile gst/cutter/Makefile gst/deinterlace/Makefile gst/effectv/Makefile gst/festival/Makefile gst/filter/Makefile gst/flx/Makefile gst/goom/Makefile gst/intfloat/Makefile gst/law/Makefile gst/level/Makefile gst/median/Makefile gst/mixmatrix/Makefile gst/mpeg1enc/Makefile gst/mpeg1sys/Makefile gst/mpeg1videoparse/Makefile gst/mpeg2enc/Makefile gst/mpeg2sub/Makefile gst/mpegaudio/Makefile gst/mpegaudioparse/Makefile gst/mpegstream/Makefile gst/mpegtypes/Makefile gst/modplug/Makefile gst/modplug/libmodplug/Makefile gst/monoscope/Makefile gst/oneton/Makefile gst/passthrough/Makefile gst/qtdemux/Makefile gst/rtjpeg/Makefile gst/silence/Makefile gst/sine/Makefile gst/smooth/Makefile gst/smpte/Makefile gst/spectrum/Makefile gst/speed/Makefile gst/stereo/Makefile gst/stereomono/Makefile gst/synaesthesia/Makefile gst/udp/Makefile gst/vbidec/Makefile gst/videoscale/Makefile gst/videotestsrc/Makefile gst/videocrop/Makefile gst/volenv/Makefile gst/volume/Makefile gst/vumeter/Makefile gst/wavenc/Makefile gst/wavparse/Makefile gst/y4m/Makefile sys/Makefile sys/cdrom/Makefile sys/dxr3/Makefile sys/oss/Makefile sys/qcam/Makefile sys/v4l/Makefile sys/v4l2/Makefile sys/vcd/Makefile sys/vga/Makefile sys/xvideo/Makefile sys/videosink/Makefile ext/Makefile ext/a52dec/Makefile ext/aalib/Makefile ext/alsa/Makefile ext/arts/Makefile ext/artsd/Makefile ext/audiofile/Makefile ext/avifile/Makefile ext/cdparanoia/Makefile ext/dv/Makefile ext/dvdread/Makefile ext/dvdnav/Makefile ext/esd/Makefile ext/ffmpeg/Makefile ext/flac/Makefile ext/gnomevfs/Makefile ext/gsm/Makefile ext/hermes/Makefile ext/http/Makefile ext/jack/Makefile ext/jpeg/Makefile ext/ladspa/Makefile ext/lame/Makefile ext/lcs/Makefile ext/libfame/Makefile ext/libpng/Makefile ext/mad/Makefile ext/mikmod/Makefile ext/mjpegtools/Makefile ext/mpeg2dec/Makefile ext/openquicktime/Makefile ext/raw1394/Makefile ext/rtp/Makefile ext/sdl/Makefile ext/shout/Makefile ext/shout2/Makefile ext/sidplay/Makefile ext/smoothwave/Makefile ext/snapshot/Makefile ext/swfdec/Makefile ext/vorbis/Makefile ext/tarkin/Makefile ext/xmms/Makefile gst-libs/Makefile gst-libs/gst/Makefile gst-libs/gst/audio/Makefile gst-libs/gst/floatcast/Makefile gst-libs/gst/gconf/Makefile gst-libs/gst/gconf/gstreamer-gconf.pc gst-libs/gst/gconf/gstreamer-gconf-uninstalled.pc gst-libs/gst/idct/Makefile gst-libs/gst/media-info/Makefile gst-libs/gst/play/Makefile gst-libs/gst/resample/Makefile gst-libs/gst/riff/Makefile gst-libs/gst/video/Makefile gst-libs/ext/Makefile gst-libs/ext/ffmpeg/Makefile examples/dynparams/Makefile examples/capsfilter/Makefile examples/seeking/Makefile examples/indexing/Makefile examples/Makefile testsuite/autoplug/Makefile testsuite/spider/Makefile testsuite/Makefile tools/Makefile gconf/Makefile pkgconfig/Makefile pkgconfig/gstreamer-libs.pc pkgconfig/gstreamer-libs-uninstalled.pc pkgconfig/gstreamer-play.pc pkgconfig/gstreamer-play-uninstalled.pc"
 
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
@@ -29887,7 +29887,6 @@
   "gst/monoscope/Makefile" ) CONFIG_FILES="$CONFIG_FILES gst/monoscope/Makefile" ;;
   "gst/oneton/Makefile" ) CONFIG_FILES="$CONFIG_FILES gst/oneton/Makefile" ;;
   "gst/passthrough/Makefile" ) CONFIG_FILES="$CONFIG_FILES gst/passthrough/Makefile" ;;
-  "gst/playondemand/Makefile" ) CONFIG_FILES="$CONFIG_FILES gst/playondemand/Makefile" ;;
   "gst/qtdemux/Makefile" ) CONFIG_FILES="$CONFIG_FILES gst/qtdemux/Makefile" ;;
   "gst/rtjpeg/Makefile" ) CONFIG_FILES="$CONFIG_FILES gst/rtjpeg/Makefile" ;;
   "gst/silence/Makefile" ) CONFIG_FILES="$CONFIG_FILES gst/silence/Makefile" ;;
diff -Naur gst-plugins-0.6.4-old/configure.ac gst-plugins-0.6.4/configure.ac
--- gst-plugins-0.6.4-old/configure.ac	Tue Nov  4 13:04:10 2003
+++ gst-plugins-0.6.4/configure.ac	Tue Nov  4 13:04:42 2003
@@ -243,7 +243,7 @@
         intfloat law level\
         median mixmatrix mpeg1enc mpeg1sys mpeg1videoparse mpeg2enc mpeg2sub\
         mpegaudio mpegaudioparse mpegstream mpegtypes\
-        monoscope oneton passthrough playondemand qtdemux rtjpeg silence sine\
+        monoscope oneton passthrough qtdemux rtjpeg silence sine\
         smooth smpte spectrum speed stereo stereomono synaesthesia\
         udp vbidec videocrop videoscale videotestsrc volenv volume\ 
         vumeter wavenc wavparse y4m"
@@ -1101,7 +1101,6 @@
 gst/monoscope/Makefile
 gst/oneton/Makefile
 gst/passthrough/Makefile
-gst/playondemand/Makefile
 gst/qtdemux/Makefile
 gst/rtjpeg/Makefile
 gst/silence/Makefile
diff -Naur gst-plugins-0.6.4-old/ext/flac/gstflacdec.c gst-plugins-0.6.4/ext/flac/gstflacdec.c
--- gst-plugins-0.6.4-old/ext/flac/gstflacdec.c	Tue Nov  4 13:04:11 2003
+++ gst-plugins-0.6.4/ext/flac/gstflacdec.c	Tue Nov  4 13:06:14 2003
@@ -18,7 +18,11 @@
  */
 
 #include <string.h>
+#if defined(__APPLE__) && (__GNUC__)
+#include <liboss/soundcard.h>
+#else
 #include <sys/soundcard.h>
+#endif /* Darwin liboss */
 
 /*#define DEBUG_ENABLED */
 #include "gstflacdec.h"
diff -Naur gst-plugins-0.6.4-old/ext/libpng/gstpngenc.h gst-plugins-0.6.4/ext/libpng/gstpngenc.h
--- gst-plugins-0.6.4-old/ext/libpng/gstpngenc.h	Tue Nov  4 13:04:11 2003
+++ gst-plugins-0.6.4/ext/libpng/gstpngenc.h	Tue Nov  4 13:04:42 2003
@@ -38,7 +38,7 @@
 typedef struct _GstPngEnc GstPngEnc;
 typedef struct _GstPngEncClass GstPngEncClass;
 
-GstPadTemplate *pngenc_src_template, *pngenc_sink_template;
+extern GstPadTemplate *pngenc_src_template, *pngenc_sink_template;
 
 struct _GstPngEnc
 {
diff -Naur gst-plugins-0.6.4-old/ext/mikmod/gstmikmod.h gst-plugins-0.6.4/ext/mikmod/gstmikmod.h
--- gst-plugins-0.6.4-old/ext/mikmod/gstmikmod.h	Tue Nov  4 13:04:11 2003
+++ gst-plugins-0.6.4/ext/mikmod/gstmikmod.h	Tue Nov  4 13:04:42 2003
@@ -73,11 +73,11 @@
 typedef struct _GstMikMod GstMikMod;
 typedef struct _GstMikModClass GstMikModClass;
 
-MODULE *module;
-MREADER *reader;
-GstPad *srcpad;
-gint64 timestamp;
-int need_sync;
+extern MODULE *module;
+extern MREADER *reader;
+extern GstPad *srcpad;
+extern gint64 timestamp;
+extern int need_sync;
 
 GType gst_mikmod_get_type(void);
 
diff -Naur gst-plugins-0.6.4-old/gst-libs/ext/ffmpeg/ffmpeg/vhook/Makefile gst-plugins-0.6.4/gst-libs/ext/ffmpeg/ffmpeg/vhook/Makefile
--- gst-plugins-0.6.4-old/gst-libs/ext/ffmpeg/ffmpeg/vhook/Makefile	Tue Nov  4 13:04:15 2003
+++ gst-plugins-0.6.4/gst-libs/ext/ffmpeg/ffmpeg/vhook/Makefile	Tue Nov  4 13:04:42 2003
@@ -5,7 +5,7 @@
 CFLAGS=-fPIC $(OPTFLAGS) -g -Wall -I.. -I$(SRC_PATH) -I$(SRC_PATH)/libavformat -I$(SRC_PATH)/libavcodec -DHAVE_AV_CONFIG_H
 
 ifeq ($(CONFIG_DARWIN),yes)
-SHFLAGS+=-bundle -flat_namespace -undefined suppress
+SHFLAGS+=-flat_namespace -undefined suppress -read_only_relocs suppress
 endif
 HOOKS=null.so fish.so
 
diff -Naur gst-plugins-0.6.4-old/gst-libs/gst/Makefile.in gst-plugins-0.6.4/gst-libs/gst/Makefile.in
--- gst-plugins-0.6.4-old/gst-libs/gst/Makefile.in	Tue Nov  4 13:04:15 2003
+++ gst-plugins-0.6.4/gst-libs/gst/Makefile.in	Tue Nov  4 13:04:42 2003
@@ -212,7 +212,7 @@
 @USE_GCONF_TRUE@GCONF_DIR = gconf
 @USE_GCONF_FALSE@GCONF_DIR = 
 
-SUBDIRS = audio idct resample riff floatcast \
+SUBDIRS = audio idct riff floatcast \
 		$(GCONF_DIR) media-info play video
 
 
