Package: yui-compressor
Version: 2.4.7
Revision: 1
###
BuildDepends: ant-base
Depends: system-java
###
Source: http://yui.zenfs.com/releases/yuicompressor/yuicompressor-%v.zip
Source-MD5: 885657c68ed617737e730b4c2ce52dda
###
PatchFile: %n.patch
PatchFile-MD5: 4ee2018381c0931cd26247762367fe89
PatchScript: <<
sed -e 's,@FINKPREFIX@,%p,g' %{PatchFile} | patch -p1

### use 1>&2 instead of /dev/stderr for fink-bld user
perl -pi -e 's,> /dev/stderr,1>&2,g' tests/suite.sh
<<
###
DocFiles: doc/README
JarFiles: build/yuicompressor-%v.jar:yui-compressor.jar
###
CompileScript: <<
#!/bin/sh -ev

cd %b && java -classpath %p/lib/ant/lib/ant.jar:%p/lib/ant/lib/ant-launcher.jar \
		-Dant.home=%p/lib/ant \
		org.apache.tools.ant.Main \
		-Dcompile.debug=true -Dcompile.optimize=true \
		-buildfile %b/build.xml -propertyfile %b/ant.properties \
		build.jar
<<
###
InfoTest: <<
  TestScript: cd tests; bash ./suite.sh || exit 2
<<
###
InstallScript: <<
install -d -m0755 %i/bin
install -d -m0755 %i/share/man/man1
install -m0755 fink/bin/yui-compressor %i/bin
install -m0644 fink/yui-compressor.1 %i/share/man/man1
<<
###
Description: JavaScript/CSS minifier
DescDetail: <<
The YUI Compressor is a JavaScript compressor which, in addition to removing
comments and white-spaces, obfuscates local variables using the smallest
possible variable name. This obfuscation is safe, even when using constructs
such as 'eval' or 'with' (although the compression is not optimal is those
cases) Compared to jsmin, the average savings is around 20%.
.
The YUI Compressor is also able to safely compress CSS files. The decision
on which compressor is being used is made on the file extension (js or css).
<<
###
License: BSD
Homepage: http://yuilibrary.com/projects/yuicompressor/
Maintainer: Justin F. Hallett <thesin@users.sourceforge.net>
