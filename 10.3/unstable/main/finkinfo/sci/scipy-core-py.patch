--- scipy_core-0.6.1/scipy/distutils/fcompiler/gnu.py.orig	Wed Nov 16 05:51:10 2005
+++ scipy_core-0.6.1/scipy/distutils/fcompiler/gnu.py	Wed Nov 16 05:52:04 2005
@@ -29,7 +29,7 @@
         'compiler_f77' : [fc_exe,"-Wall","-fno-second-underscore"],
         'compiler_f90' : None,
         'compiler_fix' : None,
-        'linker_so'    : [fc_exe,"-Wall"],
+        'linker_so'    : [fc_exe+" -undefined dynamic_lookup -bundle"],
         'archiver'     : ["ar", "-cr"],
         'ranlib'       : ["ranlib"],
         'linker_exe'   : [fc_exe,"-Wall"]
@@ -62,7 +62,7 @@
             os.environ['MACOSX_DEPLOYMENT_TARGET'] = '%s.%s' % (major,
                 minor)
             
-            opt.extend(['-undefined', 'dynamic_lookup', '-bundle'])
+            #opt.extend(['-undefined', 'dynamic_lookup', '-bundle'])
         else:
             opt.append("-shared")
         if sys.platform[:5]=='sunos':
@@ -106,7 +106,10 @@
         if g2c is not None:
             opt.append(g2c)
         if sys.platform == 'darwin':
-            opt.append('cc_dynamic')
+            import platform
+            opt = []
+            if platform.mac_ver()[0] < 10.4:
+                opt.append('cc_dynamic')
         return opt
 
     def get_flags_debug(self):
@@ -222,7 +225,7 @@
         'compiler_f77' : [fc_exe,"-Wall","-ffixed-form","-fno-second-underscore"],
         'compiler_f90' : [fc_exe,"-Wall","-fno-second-underscore"],
         'compiler_fix' : [fc_exe,"-Wall","-ffixed-form","-fno-second-underscore"],
-        'linker_so'    : [fc_exe,"-Wall"],
+        'linker_so'    : [fc_exe+" -undefined dynamic_lookup -bundle"],
         'archiver'     : ["ar", "-cr"],
         'ranlib'       : ["ranlib"],
         'linker_exe'   : [fc_exe,"-Wall"]
--- scipy_core-0.6.1/scipy/distutils/fcompiler/ibm.py.orig	Wed Nov 16 09:11:09 2005
+++ scipy_core-0.6.1/scipy/distutils/fcompiler/ibm.py	Wed Nov 16 09:12:10 2005
@@ -15,7 +15,7 @@
         'compiler_f77' : ["xlf"],
         'compiler_fix' : ["xlf90", "-qfixed"],
         'compiler_f90' : ["xlf90"],
-        'linker_so'    : ["xlf95"],
+        'linker_so'    : ["xlf95 -undefined dynamic_lookup -bundle"],
         'archiver'     : ["ar", "-cr"],
         'ranlib'       : ["ranlib"]
         }
@@ -45,7 +45,8 @@
     def get_flags_linker_so(self):
         opt = []
         if sys.platform=='darwin':
-            opt.append('-Wl,-bundle,-flat_namespace,-undefined,suppress')
+            #opt.append('-Wl,-bundle,-flat_namespace,-undefined,suppress')
+            pass
         else:
             opt.append('-bshared')
         version = self.get_version(ok_status=[0,40])
--- scipy_core-0.6.1/scipy/distutils/fcompiler/g95.py.orig	Wed Nov 16 09:12:34 2005
+++ scipy_core-0.6.1/scipy/distutils/fcompiler/g95.py	Wed Nov 16 09:13:07 2005
@@ -16,7 +16,7 @@
         'compiler_f77' : ["g95", "-ffixed-form"],
         'compiler_fix' : ["g95", "-ffixed-form"],
         'compiler_f90' : ["g95"],
-        'linker_so'    : ["g95","-shared"],
+        'linker_so'    : ["g95 -undefined dynamic_lookup -bundle"],
         'archiver'     : ["ar", "-cr"],
         'ranlib'       : ["ranlib"]
         }
