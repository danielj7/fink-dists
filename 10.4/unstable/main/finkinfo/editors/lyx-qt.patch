--- lyx/lyx.sh.orig	Wed Sep 24 14:34:33 2003
+++ lyx/lyx.sh	Wed Sep 24 14:34:25 2003
@@ -0,0 +1,15 @@
+#!/bin/sh
+# make symlinks in ~/.fonts for latex-xft-fonts.
+# if they are not already there.
+export QT_XFT=TRUE
+for file in @PREFIX@/lib/X11/fonts/latex-xft-fonts/*ttf; do
+    if [ ! -d ~/.fonts ]; then
+        mkdir ~/.fonts
+    fi
+    symlink=~/.fonts/`basename $file`
+    if [ -f $file ] && [ ! -L $symlink ] && [ ! -f $symlink ] ; then
+        ln -s $file $symlink
+    fi
+done
+# launch lyx
+@PREFIX@/bin/lyxx $@
--- lyx/src/frontends/qt2/QLyXKeySym.C.orig	2005-10-14 14:55:33.000000000 -0600
+++ lyx/src/frontends/qt2/QLyXKeySym.C	2005-10-14 14:58:14.000000000 -0600
@@ -54,11 +54,12 @@
 	}
 
 	if (lyxerr.debugging())
-		lyxerr[Debug::KEY] << "Using codec " << fromqstr(codec->name()) << endl;
+               lyxerr[Debug::KEY] << "Using codec " << (codec? fromqstr(codec->name()) : "NULL") << endl;
 
-	if (!codec->canEncode(str)) {
-		if (lyxerr.debugging())
-			lyxerr[Debug::KEY] << "Oof. Can't encode the text !" << endl;
+        if (!codec || !codec->canEncode(str)) {
+                if (lyxerr.debugging())
+                        lyxerr[Debug::KEY] << "Oof. Can't encode the text !" << 
+endl;
 		return 0;
 	}
 
@@ -93,6 +94,7 @@
 	string::size_type i = s.find(".");
 	s = s.substr(0, i);
 										       
+        encoding_map["C"] = QTextCodec::codecForName("Latin-1"); 
 	encoding_map["iso8859-1"] = QTextCodec::codecForName("ISO 8859-1");
 	encoding_map["iso8859-2"] = QTextCodec::codecForName("ISO 8859-2");
 	encoding_map["iso8859-3"] = QTextCodec::codecForName("ISO 8859-3");
