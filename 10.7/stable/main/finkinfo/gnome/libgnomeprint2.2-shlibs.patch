diff -Nurd -x'*~' libgnomeprint-2.18.6.orig/configure libgnomeprint-2.18.6/configure
--- libgnomeprint-2.18.6.orig/configure	2009-03-06 05:31:09.000000000 -0500
+++ libgnomeprint-2.18.6/configure	2009-05-18 11:09:47.000000000 -0400
@@ -20592,7 +20587,7 @@
 $as_echo "Cups found but the version found is less than 1.1.20" >&6; }
               cups_msg="Version requirement not satisfied"
 	    else
-		    CUPS_LIBS="$CUPS_LIBS `cups-config --ldflags` `cups-config --libs`"
+		    CUPS_LIBS="$CUPS_LIBS `cups-config --ldflags` `cups-config --libs | perl -p -e 's/(-\S*framework)\s+(\S+)/-Wl,\1,\2/g'`"
 		    CUPS_CFLAGS="$CUPS_CFLAGS `cups-config --cflags`"
 		    { $as_echo "$as_me:$LINENO: result: Found version $verstxt" >&5
 $as_echo "Found version $verstxt" >&6; }
diff -Nurd -x'*~' libgnomeprint-2.18.6.orig/libgnomeprint/modules/cups/gnome-print-cups-transport.c libgnomeprint-2.18.6/libgnomeprint/modules/cups/gnome-print-cups-transport.c
--- libgnomeprint-2.18.6.orig/libgnomeprint/modules/cups/gnome-print-cups-transport.c	2007-01-01 19:23:08.000000000 -0500
+++ libgnomeprint-2.18.6/libgnomeprint/modules/cups/gnome-print-cups-transport.c	2011-07-12 13:04:35.000000000 -0400
@@ -36,6 +36,7 @@
 #include <fcntl.h>
 #include <unistd.h>
 #include <locale.h>
+#include <stdio.h>
 
 #include <cups/cups.h>
 #include <libgnomeprint/gnome-print.h>
