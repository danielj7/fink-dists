--- gcc/libjava/configure.ac.org	2008-01-25 18:55:24.000000000 -0500
+++ gcc/libjava/configure.ac	2008-01-25 18:56:16.000000000 -0500
@@ -82,6 +82,13 @@
 	[allow rebuilding of .class and .h files]))
 AM_CONDITIONAL(JAVA_MAINTAINER_MODE, test "$enable_java_maintainer_mode" = yes)
 
+AC_ARG_ENABLE(libjava-multilib,
+	AS_HELP_STRING([--enable-libjava-multilib], [build libjava as multilib]))
+if test "$enable_libjava_multilib" = no; then
+  multilib=no
+  ac_configure_args="$ac_configure_args --disable-multilib"
+fi
+
 # It may not be safe to run linking tests in AC_PROG_CC/AC_PROG_CXX.
 GCC_NO_EXECUTABLES
 
--- gcc/libjava/configure.org	2008-01-25 18:56:41.000000000 -0500
+++ gcc/libjava/configure	2008-01-25 18:57:21.000000000 -0500
@@ -1018,6 +1018,8 @@
   --enable-gconf-peer     compile GConf native peers for util.preferences
   --enable-java-maintainer-mode
                           allow rebuilding of .class and .h files
+  --enable-libjava-multilib
+                          build libjava as multilib
   --disable-dependency-tracking  speeds up one-time build
   --enable-dependency-tracking   do not reject slow dependency extractors
   --enable-maintainer-mode  enable make rules and dependencies not useful
@@ -1850,6 +1852,16 @@
 fi
 
 
+# Check whether --enable-libjava-multilib was given.
+if test "${enable_libjava_multilib+set}" = set; then
+  enableval=$enable_libjava_multilib;
+fi
+
+if test "$enable_libjava_multilib" = no; then
+  multilib=no
+  ac_configure_args="$ac_configure_args --disable-multilib"
+fi
+
 # It may not be safe to run linking tests in AC_PROG_CC/AC_PROG_CXX.
 
 
--- gcc-4.4-20090327/gcc/cp/Make-lang.in.org	2009-03-27 20:58:00.000000000 -0400
+++ gcc-4.4-20090327/gcc/cp/Make-lang.in	2009-03-27 20:58:46.000000000 -0400
@@ -73,7 +73,7 @@
 CXX_C_OBJS = attribs.o c-common.o c-format.o c-pragma.o c-semantics.o c-lex.o \
 	c-dump.o $(CXX_TARGET_OBJS) c-pretty-print.o c-opts.o c-pch.o \
 	incpath.o cppdefault.o c-ppoutput.o c-cppbuiltin.o prefix.o \
-	c-gimplify.o c-omp.o tree-inline.o
+	c-gimplify.o c-omp.o
 
 # Language-specific object files for C++ and Objective C++.
 CXX_AND_OBJCXX_OBJS = cp/call.o cp/decl.o cp/expr.o cp/pt.o cp/typeck2.o \
--- gcc-4.4-20090327/gcc/cp/Make-lang.in.orig	2009-03-27 21:04:25.000000000 -0400
+++ gcc-4.4-20090327/gcc/cp/Make-lang.in	2009-03-27 21:29:51.000000000 -0400
@@ -72,7 +72,7 @@
 # Shared with C front end:
 CXX_C_OBJS = attribs.o c-common.o c-format.o c-pragma.o c-semantics.o c-lex.o \
 	c-dump.o $(CXX_TARGET_OBJS) c-pretty-print.o c-opts.o c-pch.o \
-	incpath.o cppdefault.o c-ppoutput.o c-cppbuiltin.o prefix.o \
+	incpath.o c-ppoutput.o c-cppbuiltin.o prefix.o \
 	c-gimplify.o c-omp.o
 
 # Language-specific object files for C++ and Objective C++.
--- gcc-4.4-20090407/libjava/configure.fix	2009-04-08 22:10:17.000000000 -0400
+++ gcc-4.4-20090407/libjava/configure	2009-04-08 22:10:53.000000000 -0400
@@ -27576,7 +27576,7 @@
  m68*-*-linux*)
     SIGNAL_HANDLER=include/dwarf2-signal.h
     ;;
- powerpc*-*-darwin* | i?86-*-darwin9* | x86_64-*-darwin9*)
+ powerpc*-*-darwin* | i?86-*-darwin[912]* | x86_64-*-darwin[912]*)
     SIGNAL_HANDLER=include/darwin-signal.h
     ;;
  powerpc*-*-aix*)
--- gcc-4.4-20090407/configure.fix	2009-04-08 22:12:51.000000000 -0400
+++ gcc-4.4-20090407/configure	2009-04-08 22:13:21.000000000 -0400
@@ -2215,7 +2215,7 @@
     noconfigdirs="$noconfigdirs ld gas gdb gprof"
     noconfigdirs="$noconfigdirs sim target-rda"
     ;;
-  i[3456789]86-*-darwin* | x86_64-*-darwin9*)
+  i[3456789]86-*-darwin* | x86_64-*-darwin[921]*)
     noconfigdirs="$noconfigdirs ld gas gprof"
     noconfigdirs="$noconfigdirs sim target-rda"
     ;;
--- gcc-4.4-20090407/libjava/configure.host.fix	2009-04-08 22:33:36.000000000 -0400
+++ gcc-4.4-20090407/libjava/configure.host	2009-04-08 22:34:17.000000000 -0400
@@ -295,11 +295,11 @@
 	slow_pthread_self=
 	can_unwind_signal=no
 	;;
-  i?86-*-darwin9*)
+  i?86-*-darwin[912]*)
 	can_unwind_signal=yes
 	DIVIDESPEC=-f%{m32:no-}%{!m32:%{!m64:no-}}%{m64:}use-divide-subroutine
         ;;
-  x86_64-*-darwin9*)
+  x86_64-*-darwin[912]*)
 	enable_hash_synchronization_default=yes
 	slow_pthread_self=
 	can_unwind_signal=yes
