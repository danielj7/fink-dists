Info4: <<
Package: rrdtool
Version: 1.4.4
Revision: 1
Description: Fixed-size "round-robin" database storage
License: GPL
Maintainer: Benjamin Reed <rrdtool@fink.raccoonfink.com>

Depends: librrd4-shlibs (>= %v-%r)
BuildDepends: <<
	cairo (>= 1.8.10-3),
	expat1,
	fink (>= 0.29.7-1),
	fontconfig2-dev (>= 2.4.1-1),
	freetype219 (>= 2.3.12-1),
	glib2-dev (>= 2.22.0-1),
	glitz,
	intltool40,
	libgettext8-dev,
	libiconv-dev,
	libpng14,
	pango1-xft2-ft219-dev (>= 1.24.0-1),
	pixman (>= 0.16.0-1),
	pkgconfig (>= 0.23-1),
	tcltk,
	tcltk-dev,
	x11-dev,
	xft2-dev
<<
Conflicts: %N-bin
Replaces: %N-bin

Source: http://oss.oetiker.ch/%n/pub/%n-%v.tar.gz
Source-MD5: 93ad2fc2e9ddcd7d99c611fe30284a54
PatchScript: perl -pi -e 's/((librrd|librrd_th)_la_LIBADD\s*=.*)/\1 -lpng/' src/Makefile.in

SetCPPFLAGS: -fno-common -I%p/lib/freetype219/include -I%p/lib/freetype219/include/freetype2
UseMaxBuildJobs: true
ConfigureParams: <<
--disable-dependency-tracking \
--disable-static \
--enable-shared \
--with-tcllib=%p/lib \
--mandir=%p/share/man \
--disable-perl \
--disable-python \
--disable-ruby
<<
CompileScript: <<
	#!/bin/sh -ex
	
	export PKG_CONFIG_PATH="%p/lib/freetype219/lib/pkgconfig:%p/lib/pango-ft219/lib/pkgconfig:$PKG_CONFIG_PATH" lt_cv_sys_max_cmd_len=65536 PERLBIN="/usr/bin/perl" POD2MAN="/usr/bin/pod2man" POD2HTML="/usr/bin/pod2html"
	
	case `sw_vers -productVersion` in
	10.[01234]*)
	;;
	*)
	export LDFLAGS="$LDFLAGS -Wl,-dead_strip_dylibs"
	;;
	esac
	
	./configure %c
	make TCL_SHLIB_LD='${CC} -dynamiclib -Wl,-single_module'
<<

InstallScript: <<
#!/bin/sh -ex

	make -j1 install \
		DESTDIR="%d" \
		examplesdir="%p/share/doc/%n/examples" \
		idocdir="%p/share/doc/%n/doc" \
		ihtmldir="%p/share/doc/%n/html" \
		contribdir="%p/share/doc/%n/contrib" \
		pkglibdir='%p/lib/tclrrd$(VERSION)'
	find %i -name RRDp\* -o -name RRDs\* -exec rm -rf {} \;
	rm -rf %i/share/man/man1/RRDp.1 %i/share/man/man1/RRDs.1
	install_name_tool -id %p/lib/tclrrd%v.dylib %i/lib/tclrrd%v.dylib
	find %i -name \*.la | xargs perl -pi -e 's,-L%b/src/.libs,,'
<<
DocFiles: CHANGES CONTRIBUTORS COPYING COPYRIGHT NEWS README THREADS TODO
SplitOff: <<
	Package: librrd4-shlibs
	Description: Fixed-size "round-robin" database storage shared libraries
	Depends: <<
		cairo-shlibs (>= 1.8.10-3),
		glib2-shlibs (>= 2.22.0-1),
		libpng14-shlibs (>= 1.4.1-2),
		libxml2-shlibs (>= 2.6.32-1),
		pango1-xft2-ft219-shlibs (>= 1.24.0-1)
	<<
	Suggests: %N
	Files: lib/librrd*.*.dylib
	Shlibs: <<
		%p/lib/librrd.4.dylib    6.0.0 %n (>= 1.4.2-1)
		%p/lib/librrd_th.4.dylib 6.0.0 %n (>= 1.4.2-1)
	<<
<<
SplitOff3: <<
	Package: %N-dev
	Description: Utilities for round-robin databases
	Depends: %N (>= %v-%r)
	BuildDependsOnly: true
	Files: include lib/*.la lib/librrd.dylib lib/librrd_th.dylib lib/pkgconfig
<<
SplitOff4: <<
	Package: %N-tcl
	Description: TCL scripting module for round-robin databases
	Depends: <<
		librrd4-shlibs (>= %v-%r),
		tcltk-shlibs
	<<
	Enhances: librrd4-shlibs
	Files: lib/tclrrd%v lib/tclrrd%v.dylib
	Shlibs: %p/lib/tclrrd%v.dylib 0.0.0 rrdtool-tcl (>= 1.3.7-1)
<<

Homepage: http://people.ee.ethz.ch/~oetiker/webtools/rrdtool/
DescDetail: <<
RRD is a system to store and display time-series data (i.e. network bandwidth,
machine-room temperature, server load average).  It stores the data in a very
compact way that will not expand over time, and it presents useful graphs by
processing the data to enforce a certain data density.  It can be used either
via simple wrapper scripts (from shell or Perl) or via frontends that poll
network devices and put a friendly user interface on it.
<<
<<

