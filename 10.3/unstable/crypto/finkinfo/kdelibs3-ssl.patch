diff -uNr kdelibs-3.2.3/kdecore/Makefile.am kdelibs-3.2.3-new/kdecore/Makefile.am
--- kdelibs-3.2.3/kdecore/Makefile.am	Sun Nov 30 04:46:42 2003
+++ kdelibs-3.2.3-new/kdecore/Makefile.am	Wed Jun  9 21:38:11 2004
@@ -24,7 +24,7 @@
 
 if include_SVGICONS
 SVGICONS=svgicons
-SVGICON_LIB=svgicons/libkdesvgicons.la
+SVGICON_LIB=svgicons/libkdesvgicons.la $(LIBZ)
 endif
 
 SUBDIRS = malloc $(SVGICONS) . kconfig_compiler tests
diff -uNr kdelibs-3.2.3/kdecore/kglobalsettings.cpp kdelibs-3.2.3-new/kdecore/kglobalsettings.cpp
--- kdelibs-3.2.3/kdecore/kglobalsettings.cpp	Sun Apr  4 05:08:11 2004
+++ kdelibs-3.2.3-new/kdecore/kglobalsettings.cpp	Wed Jun  9 21:38:36 2004
@@ -468,7 +468,7 @@
       s_desktopPath->append('/');
 
     // Trash Path
-    *s_trashPath = *s_desktopPath + i18n("Trash") + "/";
+    *s_trashPath = *s_desktopPath + "." + i18n("Trash") + "/";
     *s_trashPath = config->readPathEntry( "Trash" , *s_trashPath);
     if ( !s_trashPath->startsWith("/") )
       s_trashPath->prepend( QDir::homeDirPath() + "/" );
diff -uNr kdelibs-3.2.3/kdecore/kstandarddirs.cpp kdelibs-3.2.3-new/kdecore/kstandarddirs.cpp
--- kdelibs-3.2.3/kdecore/kstandarddirs.cpp	Sun May 30 10:24:00 2004
+++ kdelibs-3.2.3-new/kdecore/kstandarddirs.cpp	Wed Jun  9 21:38:36 2004
@@ -901,7 +901,7 @@
     if (!strcmp(type, "data"))
 	return "share/apps/";
     if (!strcmp(type, "html"))
-	return "share/doc/HTML/";
+	return "share/doc/kde/";
     if (!strcmp(type, "icon"))
 	return "share/icons/";
     if (!strcmp(type, "config"))
diff -uNr kdelibs-3.2.3/kdecore/svgicons/Makefile.am kdelibs-3.2.3-new/kdecore/svgicons/Makefile.am
--- kdelibs-3.2.3/kdecore/svgicons/Makefile.am	Tue Sep  2 04:47:43 2003
+++ kdelibs-3.2.3-new/kdecore/svgicons/Makefile.am	Wed Jun  9 21:38:36 2004
@@ -4,3 +4,4 @@
 
 include_HEADERS = ksvgiconengine.h
 libkdesvgicons_la_SOURCES = ksvgiconengine.cpp ksvgiconpainter.cpp
+libkdesvgicons_la_LIBADD = $(LIBZ)
diff -uNr kdelibs-3.2.3/kdeprint/configure.in.in kdelibs-3.2.3-new/kdeprint/configure.in.in
--- kdelibs-3.2.3/kdeprint/configure.in.in	Sun Apr  4 05:08:15 2004
+++ kdelibs-3.2.3-new/kdeprint/configure.in.in	Wed Jun  9 21:38:36 2004
@@ -79,7 +79,7 @@
 
       dnl check if CUPS is at least 1.1.20
       ac_have_new_cups="no"
-      AC_CHECK_CUPS_VERSION(1.0120)
+      AC_CHECK_CUPS_VERSION(1.0121)
       if test "$ac_have_new_cups" = "yes"; then
  	AC_DEFINE(HAVE_CUPS_NO_PWD_CACHE, 1, CUPS doesn't have password caching)
       fi
diff -uNr kdelibs-3.2.3/kdeui/Makefile.am kdelibs-3.2.3-new/kdeui/Makefile.am
--- kdelibs-3.2.3/kdeui/Makefile.am	Sat Jan 17 07:53:04 2004
+++ kdelibs-3.2.3-new/kdeui/Makefile.am	Wed Jun  9 21:38:36 2004
@@ -23,11 +23,11 @@
 INCLUDES= -I$(top_srcdir)/kdefx -I$(top_srcdir)/interfaces $(all_includes)
 
 lib_LTLIBRARIES = libkdeui.la libkspell.la
-libkdeui_la_LDFLAGS = $(KDE_MT_LDFLAGS) -no-undefined -version-info 6:0:2
+libkdeui_la_LDFLAGS = $(KDE_MT_LDFLAGS) $(all_libraries) -no-undefined -version-info 6:0:2
 # we should get this to work when libtool 1.3 is released
 libkdeui_la_LIBADD = ../kdecore/libkdecore.la
 
-libkspell_la_LDFLAGS = $(KDE_MT_LDFLAGS) -version-info 6:0:2 -no-undefined
+libkspell_la_LDFLAGS = $(KDE_MT_LDFLAGS) $(all_libraries) -version-info 6:0:2 -no-undefined
 libkspell_la_LIBADD = libkdeui.la
 libkspell_la_SOURCES = dummy.cpp
 
diff -uNr kdelibs-3.2.3/kio/misc/kpac/Makefile.am kdelibs-3.2.3-new/kio/misc/kpac/Makefile.am
--- kdelibs-3.2.3/kio/misc/kpac/Makefile.am	Sat Jan 17 07:53:18 2004
+++ kdelibs-3.2.3-new/kio/misc/kpac/Makefile.am	Wed Jun  9 21:38:36 2004
@@ -10,7 +10,7 @@
 kded_proxyscout_la_SOURCES = proxyscout.skel proxyscout.cpp script.cpp \
                              downloader.cpp discovery.cpp
 kded_proxyscout_la_LDFLAGS = $(all_libraries) -module -avoid-version
-kded_proxyscout_la_LIBADD = $(LIB_KIO) $(top_builddir)/kjs/libkjs.la
+kded_proxyscout_la_LIBADD = $(LIB_KIO) $(top_builddir)/kjs/libkjs.la $(LIBRESOLV)
 
 kpac_dhcp_helper_SOURCES = kpac_dhcp_helper.c
 kpac_dhcp_helper_LDADD = $(LIBSOCKET)
diff -uNr kdelibs-3.2.3/kdesu/su.cpp kdelibs-3.2.3-new/kdesu/su.cpp
--- kdelibs-3.2.3/kdesu/su.cpp	Sun May 30 10:24:08 2004
+++ kdelibs-3.2.3-new/kdesu/su.cpp	Tue Jun 15 12:55:16 2004
@@ -74,13 +74,15 @@
 	setTerminal(true);
 
     QCStringList args;
+    args += "-c";
+    args += "staff";
     if ((m_Scheduler != SchedNormal) || (m_Priority > 50))
 	args += "root";
     else
 	args += m_User;
+
     args += "-c";
     args += QCString(__KDE_BINDIR) + "/kdesu_stub";
-    args += "-";
 
     QCString command = __PATH_SU;
     if (::access(__PATH_SU, X_OK) != 0)
