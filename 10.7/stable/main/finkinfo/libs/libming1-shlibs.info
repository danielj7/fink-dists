Package: libming1-shlibs
Version: 0.4.4
Revision: 1
BuildDepends: fink-package-precedence, freetype219, giflib, libpng15, libtool2, pkgconfig, x11-dev
Depends: freetype219-shlibs, giflib-shlibs, libpng15-shlibs
Source: mirror:sourceforge:ming/ming-%v.tar.bz2
Source-MD5: 9e780f93670eaf68b1eefa6cdfc1d1e2
PatchFile: %n.patch
PatchFile-MD5: 6097c0a72bae1ac6fdf1466a48ed90a0
ConfigureParams: --with-freetype-config=%p/lib/freetype219/bin/freetype-config --disable-python --disable-perl --disable-php --disable-tcl --with-pic --enable-shared --enable-static --mandir=%p/share/man --enable-dependency-tracking
CompileScript: <<
#!/bin/bash -ev
./configure %c
make V=1
fink-package-precedence .
<<
### Compiling a test program fails with clang, so switch to llvm-gcc here
### test/Font/test03 fails (since at least ming 0.4.1, so patch it out)
InfoTest: <<
	### This test file is missing from the tarball
	TestSource: https://github.com/libming/libming/blob/cc075813f7a8cd23041089c4f66b87496a3354b3/test/Media/font-kerntest.fdb?raw=true
	TestSourceRename: font-kerntest.fdb
	TestSource-MD5: 2b08af4b0337d2221d7587646e9bdb47
	TestDepends: llvm-gcc
	TestScript: <<
		#!/bin/sh -ev
		cp %b/../font-kerntest.fdb test/Media/font-kerntest.fdb
		make check CC=llvm-gcc-4.2 CXX=llvm-g++-4.2 || exit 2
		fink-package-precedence .
	<<
<<
InstallScript: <<
	make install DESTDIR=%d
	cd docs/man ; make install DESTDIR=%d
<<
DocFiles: AUTHORS COPYING HISTORY INSTALL LICENSE LICENSE_GPL2 NEWS README TODO
Shlibs: %p/lib/libming.1.dylib 6.0.0 %n (>= 0.4.2-1)
SplitOff: <<
  Package: libming1-dev
  Depends: libming1-shlibs (= %v-%r)
  Replaces: ming, libming-dev
  Conflicts: ming, libming-dev
  BuildDependsOnly: True
  Files: <<
    include
    lib/pkgconfig
    lib/libming.dylib
    lib/libming.la
    lib/libming.a
    share/man/man3
  <<
  DocFiles: AUTHORS COPYING HISTORY INSTALL LICENSE LICENSE_GPL2 NEWS README TODO
  Description: Library to generate SWF (Flash) Files (development files)
  DescDetail: <<
    Ming is an SWF (Flash) file format output library.
    It is written in C, with wrappers for C++, Perl, Python,
    PHP and experimental support for Ruby and Java.

    This package contains the development headers for C and C++.
  <<
<<
SplitOff2: <<
  Package: libming-utils
  Conflicts: swftools
  Depends: libming1-shlibs (>= %v-%r), freetype219-shlibs, giflib-shlibs, libpng15-shlibs
  Files: <<
    bin
    share/man/man1
  <<
  DocFiles: AUTHORS COPYING HISTORY INSTALL LICENSE LICENSE_GPL2 NEWS README TODO
  Description: Library to generate SWF (Flash) Files - Utilities
  DescDetail: <<
    Ming is an SWF (Flash) file format output library.
    It is written in C, with wrappers for C++, Perl, Python,
    PHP and experimental support for Ruby and Java.

    This package contains some utilities like:
     swftophp   - SWF to PHP converter
     makefdb    - Font Definition Ripper
     listfdb    - List Font Definition
     listjpeg   - List JPEGs
     listswf    - SWF Disassembler
     listaction - Actions Script Disassembler
     png2dbl    - PNG convert
     gif2dbl    - GIF converter
     gif2mask   - GIF Mask extractor
     raw2adpcm  - Audio Converter
  <<
<<
Description: Library to generate SWF (Flash) Files
DescDetail: <<
  Ming is an SWF (Flash) file format output library.
  It is written in C, with wrappers for C++, Perl, Python,
  PHP and experimental support for Ruby and Java.

  This package contains the C and C++ library.
<<
DescPackaging: <<
	C++ bindings appear to be implemented in headers only,
	not compiled. C++ is also used in tests, but no compiled
	C++ leaks into the installed binaries.
<<
License: GPL
HomePage: http://www.libming.org
Maintainer: Pierre-Henri Lavigne <yakesonchihiro@aim.com>
