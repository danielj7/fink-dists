Package: gchemtools
Version: 0.12.8
Revision: 1
Description: Gnome Chemistry Utils
BuildDepends: <<
  atk1, cairo, fink-package-precedence, gconf2-dev, glib2-dev, 
  gnumeric-dev, gtk+2-dev, gtkglext1, intltool40, libgettext8-dev, 
  libgoffice-0.8, libgsf1.114-dev, libiconv-dev, libopenbabel3-dev, 
  libxml2, pango1-xft2-ft219-dev, pkgconfig
<<
Depends: %n13-shlibs, rarian-compat
License: GPL

# Unpack Phase:
Source: http://download.savannah.gnu.org/releases/gchemutils/0.12/gnome-chemistry-utils-%v.tar.gz
Source-MD5: 1e1e9fafeb6df6cb725a0f626af8c8d8

ConfigureParams: --with-goffice-plugins-dir=%i/lib/goffice/0.8.17/plugins --disable-scrollkeeper --disable-mozilla-plugin --disable-update-databases

CompileScript: <<
#!/bin/sh -ev
  ./configure %c
  make
  fink-package-precedence programs
<<

# Install Phase:
DocFiles: AUTHORS COPYING* INSTALL NEWS README TODO

InstallScript: <<
#!/bin/sh -ev
# fix the wrong path.
# Setting goffice-plugins-dir to %p causes problems at other places.
  sed -i 's|%i|%p|g' goffice/gchemutils.la

  make install DESTDIR=%d
# simply delete stuff, the validator complains about.
# libexec is empty anyways.
  rm -fr %i/libexec
# there is stuff in src, but what the heck.
  rm -fr %i/src
<<

PostInstScript: <<
  if [ configure = "$1" ]; then
    scrollkeeper-update -q
  fi
# disabled for the time being
#  . %p/bin/init.sh
#  %p/bin/update-mime-database %p/share/mime >/dev/null
<<

PostRmScript: <<  
  if [ remove != "$1" ]; then
    scrollkeeper-update -q
  fi
# disabled for the time being
#  . %p/bin/init.sh
#  %p/bin/update-mime-database %p/share/mime >/dev/null
<<

SplitOff: <<
  Package: %n13-shlibs
  Depends: <<
    bodr, chemical-mime-data, gnumeric-shlibs, gtkglext1-shlibs, 
	libgoffice-0.8-shlibs, libopenbabel3-shlibs, rarian-compat
  <<
  Files: <<
    lib/libgccv-0.12.0.dylib
    lib/libgcp-0.12.0.dylib
    lib/libgcu-0.12.0.dylib
  <<
  Shlibs: <<
    %p/lib/libgccv-0.12.0.dylib   13.0.0 %n (>= 0.12.8-1)
    %p/lib/libgcp-0.12.0.dylib    13.0.0 %n (>= 0.12.8-1)
    %p/lib/libgcu-0.12.0.dylib    13.0.0 %n (>= 0.12.8-1)
  <<
  DocFiles: AUTHORS COPYING* INSTALL NEWS README TODO
<<

DescDetail: <<
  The Gnome Chemistry Utils include six chemistry related programs: 
  - GChemPaint, a 2D chemical formula editor. 
  - a chemical calculator (computes raw formule, molar weight, mass 
    composition and isotopic pattern). 
  - a molecule 3d viewer using OpenGL to display molecular models. 
  - a crystal structure editor and viewer. 
  - a periodic table of the elements. 
  - a spectrum viewer. 
<<

DescPort: <<
  Later versions than this need glib schema or even a newer version of gio, iow, glib
  without Mozilla plugins
  without updating databases
<<
DescUsage:  see the files in %p/share/doc/ftidy/
Homepage:   http://savannah.nongnu.org/projects/gchemutils/
Maintainer: Karl-Michael Schindler <karl-michael.schindler@web.de>
