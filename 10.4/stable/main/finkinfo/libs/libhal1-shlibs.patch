diff -Nurd hal-0.5.10.orig/configure hal-0.5.10/configure
--- hal-0.5.10.orig/configure	2007-09-25 15:08:31.000000000 -0400
+++ hal-0.5.10/configure	2008-03-20 01:04:44.000000000 -0400
@@ -21938,11 +21938,6 @@
 
 
 
-#### gcc linker flags
-
-if test "x$GCC" = "xyes"; then
-  LDFLAGS="-Wl,--as-needed $LDFLAGS"
-fi
 
 #### gcc warning flags
 
@@ -23654,6 +23649,8 @@
 case "$host" in
 *-*-solaris*)
 	;;
+*-*-darwin*)
+	;;
 *)
 
 pkg_failed=no
diff -Nurd hal-0.5.10.orig/hald/dummy/osspec.c hal-0.5.10/hald/dummy/osspec.c
--- hal-0.5.10.orig/hald/dummy/osspec.c	2007-07-26 14:00:28.000000000 -0400
+++ hal-0.5.10/hald/dummy/osspec.c	2008-03-20 01:23:42.000000000 -0400
@@ -37,6 +37,27 @@
 #include "../util.h"
 #include "../device_info.h"
 
+HalFileMonitor *
+osspec_get_file_monitor (void)
+{
+	return NULL;
+}
+
+guint
+hal_file_monitor_add_notify (HalFileMonitor          *monitor,
+                            const char             *path,
+                            int                     mask,
+                            HalFileMonitorNotifyFunc notify_func,
+                            gpointer                data)
+{
+	return 0;
+}
+
+void
+osspec_privileged_init (void)
+{
+}
+
 void
 osspec_init (void)
 {
diff -Nurd hal-0.5.10.orig/tools/hal-disable-polling.c hal-0.5.10/tools/hal-disable-polling.c
--- hal-0.5.10.orig/tools/hal-disable-polling.c	2007-08-31 16:53:08.000000000 -0400
+++ hal-0.5.10/tools/hal-disable-polling.c	2008-03-20 01:46:17.000000000 -0400
@@ -28,6 +28,7 @@
 #  include <config.h>
 #endif
 
+#include <stdlib.h>
 #include <stdio.h>
 #include <string.h>
 #include <unistd.h>
diff -Nurd hal-0.5.10.orig/tools/hal-storage-mount.c hal-0.5.10/tools/hal-storage-mount.c
--- hal-0.5.10.orig/tools/hal-storage-mount.c	2007-08-27 13:22:46.000000000 -0400
+++ hal-0.5.10/tools/hal-storage-mount.c	2008-03-20 02:01:28.000000000 -0400
@@ -31,7 +31,7 @@
 #include <string.h>
 #include <glib.h>
 #include <glib/gstdio.h>
-#ifdef __FreeBSD__
+#if defined (__FreeBSD__) || defined(__APPLE__)
 #include <fstab.h>
 #include <sys/param.h>
 #include <sys/ucred.h>
@@ -53,6 +53,9 @@
 #include <libhal-storage.h>
 
 #include "hal-storage-shared.h"
+#ifdef __APPLE__
+#define __FreeBSD__
+#endif
 
 #ifdef __FreeBSD__
 #define MOUNT		"/sbin/mount"
diff -Nurd hal-0.5.10.orig/tools/hal-storage-shared.c hal-0.5.10/tools/hal-storage-shared.c
--- hal-0.5.10.orig/tools/hal-storage-shared.c	2007-08-27 11:55:10.000000000 -0400
+++ hal-0.5.10/tools/hal-storage-shared.c	2008-03-20 02:01:09.000000000 -0400
@@ -31,7 +31,7 @@
 #include <string.h>
 #include <glib.h>
 #include <glib/gstdio.h>
-#ifdef __FreeBSD__
+#if defined (__FreeBSD__) || defined(__APPLE__)
 #include <fstab.h>
 #include <sys/param.h>
 #include <sys/ucred.h>
@@ -52,6 +52,9 @@
 #include <syslog.h>
 
 #include "hal-storage-shared.h"
+#ifdef __APPLE__
+#define __FreeBSD__
+#endif
 
 #ifdef __FreeBSD__
 struct mtab_handle
diff -Nurd hal-0.5.10.orig/tools/hal-storage-unmount.c hal-0.5.10/tools/hal-storage-unmount.c
--- hal-0.5.10.orig/tools/hal-storage-unmount.c	2007-07-26 14:00:28.000000000 -0400
+++ hal-0.5.10/tools/hal-storage-unmount.c	2008-03-20 02:32:13.000000000 -0400
@@ -31,7 +31,7 @@
 #include <string.h>
 #include <glib.h>
 #include <glib/gstdio.h>
-#ifdef __FreeBSD__
+#if defined (__FreeBSD__) || defined(__APPLE__)
 #include <fstab.h>
 #include <sys/param.h>
 #include <sys/ucred.h>
@@ -52,6 +52,9 @@
 #include <libhal-storage.h>
 
 #include "hal-storage-shared.h"
+#ifdef __APPLE__
+#define __FreeBSD__
+#endif
 
 
 static void
