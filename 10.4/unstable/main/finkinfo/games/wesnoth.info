Package: wesnoth
Version: 1.2.5
Revision: 11
GCC: 4.0
Source-MD5: 40e00ac97680fb69499191c30f130774
Source: mirror:sourceforge:%n/%n-%v.tar.bz2
BuildDepends: <<
  sdl,
  sdl-mixer,
  sdl-image,
  sdl-ttf (>= 2.0.6-1017),
  sdl-net,
  fribidi-dev,
  fribidi,
  libpng3,
  freetype219,
  libiconv-dev,
  libgettext3-dev,
  gettext-tools
<<
Conflicts: wesnoth-devel
Replaces: wesnoth-devel
Depends: <<
  sdl-mixer-shlibs,
  sdl-shlibs,
  sdl-image-shlibs,
  sdl-ttf-shlibs (>= 2.0.6-1017),
  sdl-net-shlibs,
  fribidi-shlibs,
  libpng3-shlibs,
  freetype219-shlibs,
  libiconv,
  libgettext3-shlibs
<<
Description: Fantasy turn-based strategy game
DocFiles: <<
  ABOUT-NLS
  COPYING
  MANUAL
  MANUAL.brazilian
  MANUAL.catalan
  MANUAL.chinese_simplified
  MANUAL.czech
  MANUAL.danish
  MANUAL.french
  MANUAL.german
  MANUAL.hungarian
  MANUAL.indonesian
  MANUAL.italian
  MANUAL.japanese
  MANUAL.norwegian
  MANUAL.polish
  MANUAL.russian
  MANUAL.spanish
  MANUAL.swedish
  MANUAL.turkish
  copyright
<<
ConfigureParams: --with-libintl-prefix=%p --enable-editor  --enable-tools  --with-freetype-prefix=%p/lib/freetype219  --with-freetype-exec-prefix=%p/lib/freetype219  --disable-dependency-tracking  --disable-sdltest  --enable-server  --enable-campaign-server  --with-server-uid=admin  --with-server-gid=admin  --without-x
Patch: %n.patch
SetCXXFLAGS: -O3
PatchScript: <<
  perl -pi -e 's/-L. -l(wesnoth-core)/lib\1.a/' src/Makefile.in
<<
InstallScript: <<
  make install prefix=%i
  mkdir %i/etc
  touch %i/etc/wesnothd.conf
<<
DescDetail: <<
Battle for Wesnoth is a fantasy turn-based strategy game.
Battle for control of villages, using variety of units 
which have advantages and disadvantages in different types 
of terrains and against different types of attacks. Units 
gain experience and advance levels, and are carried over 
from one scenario to the next.

Features:

* Build a hero, and lead your army.

* Characters have different races, each with distinctive abilities,
  weapons and spells.

* Compatible with GNU/Linux, Windows, MacOSX, BeOS, Solaris, FreeBSD
  and OpenBSD.

The purpose of this package is to track the latest stable version of
wesnoth.  The package `wesnoth-devel' tracks the development branch.
<<
DescPackaging: <<
  dmacks added --disable-sdltest and patched support for it in all
  SDL_* tests so that can build on GUI-less machine.

  dmacks hacked around under-use of libtool in Makefile in order to
  assure that local convenince libs are used in preference to
  installed ones of the same name.
<<
License: GPL
Maintainer: Jesse Alama <alama@stanford.edu>
Homepage: http://www.wesnoth.org/

SplitOff: <<
  Package: wesnoth-server
  Description: Battle for Wesnoth multiplayer network daemon
  Conflicts: wesnoth-devel-server (>= 1.3.1)
  Replaces: wesnoth-devel-server (>= 1.3.1)
  Depends: %N, daemonic
  Files: <<
    bin/wesnothd:sbin/wesnothd
    etc/wesnothd.conf
    share/man/cs/man6/wesnothd.6
    share/man/de/man6/wesnothd.6
    share/man/en_GB/man6/wesnothd.6
    share/man/fr/man6/wesnothd.6
    share/man/ja/man6/wesnothd.6
    share/man/man6/wesnothd.6 
    share/man/nl/man6/wesnothd.6
    share/man/pt_BR/man6/wesnothd.6
    share/man/sk/man6/wesnothd.6
    share/man/sv/man6/wesnothd.6
<<
  ConfFiles: %p/etc/wesnothd.conf
  DaemonicName: wesnothd
  DaemonicFile: <<
<service>
        <description>
                Battle for Wesnoth Multiplayer Server
        </description>
        <message>
                Starting Battle for Wesnoth Multiplayer Server
        </message>
        <daemon name="wesnothd">
                <executable background="true">%p/sbin/wesnothd</executable>
                <parameters>-c %p/etc/wesnothd.conf -d</parameters>
                <configfile>%p/etc/wesnothd.conf</configfile>
        </daemon>
</service>
<<
  PreRmScript: <<
if [ $1 != "upgrade" ]; then
  daemonic remove wesnothd
fi
<<
  PostInstScript: <<
daemonic install wesnothd  
<<
DescUsage: <<
To create a startupitem that starts the wesnoth daemon after restart,
just run, as root, the command 'daemonic enable wesnothd'. To remove
the wesnothd startupitem just run, again as root, the command
'daemonic disable wesnothd'.
<<
<<

SplitOff2: <<
  Package: wesnoth-editor
  Description: Battle for Wesnoth map editor
  Conflicts: wesnoth-devel-editor (>= 1.3.1)
  Replaces: wesnoth-devel-editor (>= 1.3.1)
  Files: <<
    bin/wesnoth_editor
    share/man/cs/man6/wesnoth_editor.6
    share/man/de/man6/wesnoth_editor.6
    share/man/en_GB/man6/wesnoth_editor.6
    share/man/fr/man6/wesnoth_editor.6
    share/man/it/man6/wesnoth_editor.6
    share/man/ja/man6/wesnoth_editor.6
    share/man/man6/wesnoth_editor.6 
    share/man/nl/man6/wesnoth_editor.6
    share/man/pt_BR/man6/wesnoth_editor.6
    share/man/sk/man6/wesnoth_editor.6
    share/man/sv/man6/wesnoth_editor.6
<<
<<

SplitOff3: <<
  Package: wesnoth-campaign-server
  Conflicts: wesnoth-devel-campaign-server (>= 1.3.1)
  Replaces: wesnoth-devel-campaign-server (>= 1.3.1)
  Description: Battle for Wesnoth campaign server
  Files: bin/campaignd:sbin/campaignd
<<
