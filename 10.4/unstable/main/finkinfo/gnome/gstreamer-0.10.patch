diff -Nurd gstreamer-0.10.30/configure.ac gstreamer-0.10.30-new/configure.ac
--- gstreamer-0.10.30/configure.ac	2010-07-15 05:18:12.000000000 -0400
+++ gstreamer-0.10.30-new/configure.ac	2010-10-02 17:54:44.000000000 -0400
@@ -68,7 +68,6 @@
 
 dnl set up gettext
 dnl the version check needs to stay here because autopoint greps for it
-AM_GNU_GETTEXT_VERSION([0.17])
 AM_GNU_GETTEXT([external])
 AG_GST_GETTEXT([gstreamer-$GST_MAJORMINOR])
 
diff -Nurd gstreamer-0.10.30/docs/plugins/Makefile.am gstreamer-0.10.30-new/docs/plugins/Makefile.am
--- gstreamer-0.10.30/docs/plugins/Makefile.am	2009-11-18 04:31:00.000000000 -0500
+++ gstreamer-0.10.30-new/docs/plugins/Makefile.am	2010-10-02 17:54:44.000000000 -0400
@@ -103,7 +103,7 @@
 
 # CFLAGS and LDFLAGS for compiling scan program. Only needed if your app/lib
 # contains GtkObjects/GObjects and you want to document signals and properties.
-GTKDOC_CFLAGS = $(GST_OBJ_CFLAGS) -I$(top_builddir) -I$(top_builddir)/libs
+GTKDOC_CFLAGS = -I$(top_builddir) -I$(top_builddir)/libs $(GST_OBJ_CFLAGS)
 GTKDOC_LIBS = $(SCANOBJ_DEPS) $(GST_OBJ_LIBS)
 
 GTKDOC_CC=$(LIBTOOL) --tag=CC --mode=compile $(CC)
diff -Nurd gstreamer-0.10.30/gst/Makefile.am gstreamer-0.10.30-new/gst/Makefile.am
--- gstreamer-0.10.30/gst/Makefile.am	2010-04-14 06:38:27.000000000 -0400
+++ gstreamer-0.10.30-new/gst/Makefile.am	2010-10-02 17:54:44.000000000 -0400
@@ -119,7 +119,7 @@
 # DISTCLEANFILES is for files generated by configure
 DISTCLEANFILES = $(built_header_configure)
 
-libgstreamer_@GST_MAJORMINOR@_la_CFLAGS =		\
+libgstreamer_@GST_MAJORMINOR@_la_CPPFLAGS =		\
 	-D_GNU_SOURCE					\
 	-DGST_EXPORTS					\
 	-DG_LOG_DOMAIN=g_log_domain_gstreamer 		\
diff -Nurd gstreamer-0.10.30/libs/gst/base/Makefile.am gstreamer-0.10.30-new/libs/gst/base/Makefile.am
--- gstreamer-0.10.30/libs/gst/base/Makefile.am	2010-04-13 14:02:37.000000000 -0400
+++ gstreamer-0.10.30-new/libs/gst/base/Makefile.am	2010-10-02 17:54:44.000000000 -0400
@@ -15,7 +15,7 @@
 	gsttypefindhelper.c	\
 	gstdataqueue.c
 
-libgstbase_@GST_MAJORMINOR@_la_CFLAGS = $(GST_OBJ_CFLAGS)
+libgstbase_@GST_MAJORMINOR@_la_CPPFLAGS = $(GST_OBJ_CFLAGS)
 libgstbase_@GST_MAJORMINOR@_la_LIBADD = $(GST_OBJ_LIBS)
 libgstbase_@GST_MAJORMINOR@_la_LDFLAGS = $(GST_LIB_LDFLAGS) $(GST_ALL_LDFLAGS) $(GST_LT_LDFLAGS)
 
diff -Nurd gstreamer-0.10.30/libs/gst/check/Makefile.am gstreamer-0.10.30-new/libs/gst/check/Makefile.am
--- gstreamer-0.10.30/libs/gst/check/Makefile.am	2010-04-09 04:00:21.000000000 -0400
+++ gstreamer-0.10.30-new/libs/gst/check/Makefile.am	2010-10-02 17:54:44.000000000 -0400
@@ -13,7 +13,7 @@
 	gstcheck.c				\
 	gstconsistencychecker.c
 
-libgstcheck_@GST_MAJORMINOR@_la_CFLAGS = $(GST_OBJ_CFLAGS) \
+libgstcheck_@GST_MAJORMINOR@_la_CPPFLAGS = $(GST_OBJ_CFLAGS) \
 	-I$(top_builddir)/libs \
 	-I$(top_builddir)/libs/gst/check \
 	-I$(top_builddir)/libs/gst/check/libcheck
diff -Nurd gstreamer-0.10.30/libs/gst/controller/Makefile.am gstreamer-0.10.30-new/libs/gst/controller/Makefile.am
--- gstreamer-0.10.30/libs/gst/controller/Makefile.am	2010-04-09 04:00:21.000000000 -0400
+++ gstreamer-0.10.30-new/libs/gst/controller/Makefile.am	2010-10-02 17:54:44.000000000 -0400
@@ -21,7 +21,7 @@
 	gstinterpolationcontrolsource.c \
 	gstlfocontrolsource.c
 
-libgstcontroller_@GST_MAJORMINOR@_la_CFLAGS = $(GST_OBJ_CFLAGS)
+libgstcontroller_@GST_MAJORMINOR@_la_CPPFLAGS = $(GST_OBJ_CFLAGS)
 libgstcontroller_@GST_MAJORMINOR@_la_LIBADD = $(GST_OBJ_LIBS) $(LIBM)
 libgstcontroller_@GST_MAJORMINOR@_la_LDFLAGS = $(GST_LIB_LDFLAGS) $(GST_ALL_LDFLAGS) $(GST_LT_LDFLAGS)
 
diff -Nurd gstreamer-0.10.30/libs/gst/dataprotocol/Makefile.am gstreamer-0.10.30-new/libs/gst/dataprotocol/Makefile.am
--- gstreamer-0.10.30/libs/gst/dataprotocol/Makefile.am	2010-04-09 04:00:21.000000000 -0400
+++ gstreamer-0.10.30-new/libs/gst/dataprotocol/Makefile.am	2010-10-02 17:54:44.000000000 -0400
@@ -8,7 +8,7 @@
 libgstdataprotocol_@GST_MAJORMINOR@_la_SOURCES = \
     dataprotocol.c
 
-libgstdataprotocol_@GST_MAJORMINOR@_la_CFLAGS = $(GST_OBJ_CFLAGS)
+libgstdataprotocol_@GST_MAJORMINOR@_la_CPPFLAGS = $(GST_OBJ_CFLAGS)
 libgstdataprotocol_@GST_MAJORMINOR@_la_LIBADD = $(GST_OBJ_LIBS)
 libgstdataprotocol_@GST_MAJORMINOR@_la_LDFLAGS = $(GST_LIB_LDFLAGS) $(GST_ALL_LDFLAGS) $(GST_LT_LDFLAGS)
 
diff -Nurd gstreamer-0.10.30/libs/gst/net/Makefile.am gstreamer-0.10.30-new/libs/gst/net/Makefile.am
--- gstreamer-0.10.30/libs/gst/net/Makefile.am	2010-05-05 11:34:23.000000000 -0400
+++ gstreamer-0.10.30-new/libs/gst/net/Makefile.am	2010-10-02 17:54:44.000000000 -0400
@@ -12,7 +12,7 @@
     gstnettimepacket.c \
     gstnettimeprovider.c
 
-libgstnet_@GST_MAJORMINOR@_la_CFLAGS = $(GST_OBJ_CFLAGS)
+libgstnet_@GST_MAJORMINOR@_la_CPPFLAGS = $(GST_OBJ_CFLAGS)
 libgstnet_@GST_MAJORMINOR@_la_LIBADD = $(GST_OBJ_LIBS) $(INET_ATON_LIBS) $(WIN32_LIBS)
 libgstnet_@GST_MAJORMINOR@_la_LDFLAGS = $(GST_LIB_LDFLAGS) $(GST_ALL_LDFLAGS) $(GST_LT_LDFLAGS)
 
diff -Nurd gstreamer-0.10.30/plugins/elements/Makefile.am gstreamer-0.10.30-new/plugins/elements/Makefile.am
--- gstreamer-0.10.30/plugins/elements/Makefile.am	2009-11-02 03:49:56.000000000 -0500
+++ gstreamer-0.10.30-new/plugins/elements/Makefile.am	2010-10-02 17:54:44.000000000 -0400
@@ -26,7 +26,7 @@
 	gsttypefindelement.c	\
 	gstmultiqueue.c
 
-libgstcoreelements_la_CFLAGS = $(GST_OBJ_CFLAGS)
+libgstcoreelements_la_CPPFLAGS = $(GST_OBJ_CFLAGS)
 libgstcoreelements_la_LIBADD = \
 	$(top_builddir)/libs/gst/base/libgstbase-@GST_MAJORMINOR@.la \
 	$(GST_OBJ_LIBS)
diff -Nurd gstreamer-0.10.30/plugins/indexers/Makefile.am gstreamer-0.10.30-new/plugins/indexers/Makefile.am
--- gstreamer-0.10.30/plugins/indexers/Makefile.am	2010-04-09 04:00:21.000000000 -0400
+++ gstreamer-0.10.30-new/plugins/indexers/Makefile.am	2010-10-02 17:54:44.000000000 -0400
@@ -19,7 +19,7 @@
 
 libgstcoreindexers_la_DEPENDENCIES = $(top_builddir)/gst/libgstreamer-@GST_MAJORMINOR@.la
 libgstcoreindexers_la_SOURCES = gstindexers.c gstmemindex.c $(GST_LOADSAVE_SRC)
-libgstcoreindexers_la_CFLAGS = $(GST_OBJ_CFLAGS)
+libgstcoreindexers_la_CPPFLAGS = $(GST_OBJ_CFLAGS)
 libgstcoreindexers_la_LIBADD = $(GST_OBJ_LIBS) $(GST_FILEINDEX_LIBS)
 libgstcoreindexers_la_LDFLAGS = $(GST_PLUGIN_LDFLAGS)
 libgstcoreindexers_la_LIBTOOLFLAGS = --tag=disable-static
diff -Nurd gstreamer-0.10.30/tests/benchmarks/Makefile.am gstreamer-0.10.30-new/tests/benchmarks/Makefile.am
--- gstreamer-0.10.30/tests/benchmarks/Makefile.am	2010-06-30 19:59:56.000000000 -0400
+++ gstreamer-0.10.30-new/tests/benchmarks/Makefile.am	2010-10-02 17:54:44.000000000 -0400
@@ -10,7 +10,7 @@
 	gstbufferstress
 
 LDADD = $(GST_OBJ_LIBS)
-AM_CFLAGS = $(GST_OBJ_CFLAGS)
+AM_CPPFLAGS = $(GST_OBJ_CFLAGS)
 
 controller_CFLAGS  = $(GST_OBJ_CFLAGS) -I$(top_builddir)/libs
 controller_LDADD = $(top_builddir)/libs/gst/controller/libgstcontroller-@GST_MAJORMINOR@.la $(LDADD)
diff -Nurd gstreamer-0.10.30/tests/check/Makefile.am gstreamer-0.10.30-new/tests/check/Makefile.am
--- gstreamer-0.10.30/tests/check/Makefile.am	2010-07-12 09:03:38.000000000 -0400
+++ gstreamer-0.10.30-new/tests/check/Makefile.am	2010-10-02 17:56:38.000000000 -0400
@@ -136,7 +136,7 @@
 EXTRA_DIST = \
 	libs/test_transform.c
 
-AM_CFLAGS = $(GST_OBJ_CFLAGS)
+AM_CPPFLAGS = $(GST_OBJ_CFLAGS)
 LDADD = $(top_builddir)/libs/gst/check/libgstcheck-@GST_MAJORMINOR@.la \
 	$(top_builddir)/libs/gst/base/libgstbase-@GST_MAJORMINOR@.la \
 	$(GST_OBJ_LIBS)
@@ -145,13 +145,13 @@
 
 libs_gdp_SOURCES = \
 	libs/gdp.c
-libs_gdp_CFLAGS = $(AM_CFLAGS)
+libs_gdp_CFLAGS = $(AM_CPPFLAGS)
 libs_gdp_LDADD = \
 	$(top_builddir)/libs/gst/dataprotocol/libgstdataprotocol-@GST_MAJORMINOR@.la \
 	$(LDADD)
 
-elements_fdsrc_CFLAGS=$(GST_OBJ_CFLAGS) -DTESTFILE=\"$(top_srcdir)/configure.ac\"
-elements_filesrc_CFLAGS=$(GST_OBJ_CFLAGS) -DTESTFILE=\"$(top_srcdir)/configure.ac\"
+elements_fdsrc_CPPFLAGS=$(GST_OBJ_CFLAGS) -DTESTFILE=\"$(top_srcdir)/configure.ac\"
+elements_filesrc_CPPFLAGS=$(GST_OBJ_CFLAGS) -DTESTFILE=\"$(top_srcdir)/configure.ac\"
 
 libs_controller_LDADD = \
 	$(top_builddir)/libs/gst/controller/libgstcontroller-@GST_MAJORMINOR@.la \
diff -Nurd gstreamer-0.10.30/tests/examples/adapter/Makefile.am gstreamer-0.10.30-new/tests/examples/adapter/Makefile.am
--- gstreamer-0.10.30/tests/examples/adapter/Makefile.am	2009-05-21 14:43:04.000000000 -0400
+++ gstreamer-0.10.30-new/tests/examples/adapter/Makefile.am	2010-10-02 17:54:46.000000000 -0400
@@ -1,4 +1,4 @@
 noinst_PROGRAMS = adapter_test
 
 adapter_test_LDADD = $(GST_OBJ_LIBS) $(top_builddir)/libs/gst/base/libgstbase-@GST_MAJORMINOR@.la
-adapter_test_CFLAGS = $(GST_OBJ_CFLAGS)
+adapter_test_CPPFLAGS = $(GST_OBJ_CFLAGS)
diff -Nurd gstreamer-0.10.30/tests/examples/controller/Makefile.am gstreamer-0.10.30-new/tests/examples/controller/Makefile.am
--- gstreamer-0.10.30/tests/examples/controller/Makefile.am	2010-04-14 06:50:22.000000000 -0400
+++ gstreamer-0.10.30-new/tests/examples/controller/Makefile.am	2010-10-02 17:54:46.000000000 -0400
@@ -1,6 +1,6 @@
 noinst_PROGRAMS = audio-example
 
-audio_example_CFLAGS  = $(GST_OBJ_CFLAGS) -I$(top_builddir)/libs
+audio_example_CPPFLAGS  = -I$(top_builddir)/libs $(GST_OBJ_CFLAGS)
 audio_example_LDADD = \
 	$(top_builddir)/libs/gst/controller/libgstcontroller-@GST_MAJORMINOR@.la \
 	$(GST_OBJ_LIBS)
diff -Nurd gstreamer-0.10.30/tests/examples/helloworld/Makefile.am gstreamer-0.10.30-new/tests/examples/helloworld/Makefile.am
--- gstreamer-0.10.30/tests/examples/helloworld/Makefile.am	2009-05-21 14:43:04.000000000 -0400
+++ gstreamer-0.10.30-new/tests/examples/helloworld/Makefile.am	2010-10-02 17:54:46.000000000 -0400
@@ -1,4 +1,4 @@
 noinst_PROGRAMS = helloworld
 
 helloworld_LDADD = $(GST_OBJ_LIBS)
-helloworld_CFLAGS = $(GST_OBJ_CFLAGS)
+helloworld_CPPFLAGS = $(GST_OBJ_CFLAGS)
diff -Nurd gstreamer-0.10.30/tests/examples/launch/Makefile.am gstreamer-0.10.30-new/tests/examples/launch/Makefile.am
--- gstreamer-0.10.30/tests/examples/launch/Makefile.am	2009-05-21 14:43:04.000000000 -0400
+++ gstreamer-0.10.30-new/tests/examples/launch/Makefile.am	2010-10-02 17:54:46.000000000 -0400
@@ -1,7 +1,7 @@
 noinst_PROGRAMS = mp3parselaunch
 
 mp3parselaunch_LDADD = $(GST_OBJ_LIBS)
-mp3parselaunch_CFLAGS = $(GST_OBJ_CFLAGS)
+mp3parselaunch_CPPFLAGS = $(GST_OBJ_CFLAGS)
 
 #noinst_SCRIPTS = mp3play
 #EXTRA_DIST = mp3play
diff -Nurd gstreamer-0.10.30/tests/examples/metadata/Makefile.am gstreamer-0.10.30-new/tests/examples/metadata/Makefile.am
--- gstreamer-0.10.30/tests/examples/metadata/Makefile.am	2009-05-21 14:43:04.000000000 -0400
+++ gstreamer-0.10.30-new/tests/examples/metadata/Makefile.am	2010-10-02 17:54:46.000000000 -0400
@@ -1,4 +1,4 @@
 noinst_PROGRAMS = read-metadata
 
 read_metadata_LDADD = $(GST_OBJ_LIBS)
-read_metadata_CFLAGS = $(GST_OBJ_CFLAGS)
+read_metadata_CPPFLAGS = $(GST_OBJ_CFLAGS)
diff -Nurd gstreamer-0.10.30/tests/examples/queue/Makefile.am gstreamer-0.10.30-new/tests/examples/queue/Makefile.am
--- gstreamer-0.10.30/tests/examples/queue/Makefile.am	2009-05-21 14:43:04.000000000 -0400
+++ gstreamer-0.10.30-new/tests/examples/queue/Makefile.am	2010-10-02 17:54:46.000000000 -0400
@@ -1,5 +1,5 @@
 noinst_PROGRAMS = queue
 
 queue_LDADD = $(GST_OBJ_LIBS)
-queue_CFLAGS = $(GST_OBJ_CFLAGS)
+queue_CPPFLAGS = $(GST_OBJ_CFLAGS)
 
diff -Nurd gstreamer-0.10.30/tests/examples/typefind/Makefile.am gstreamer-0.10.30-new/tests/examples/typefind/Makefile.am
--- gstreamer-0.10.30/tests/examples/typefind/Makefile.am	2009-05-21 14:43:04.000000000 -0400
+++ gstreamer-0.10.30-new/tests/examples/typefind/Makefile.am	2010-10-02 17:54:46.000000000 -0400
@@ -1,5 +1,5 @@
 noinst_PROGRAMS = typefind
 
 typefind_LDADD = $(GST_OBJ_LIBS)
-typefind_CFLAGS = $(GST_OBJ_CFLAGS)
+typefind_CPPFLAGS = $(GST_OBJ_CFLAGS)
 
diff -Nurd gstreamer-0.10.30/tools/Makefile.am gstreamer-0.10.30-new/tools/Makefile.am
--- gstreamer-0.10.30/tools/Makefile.am	2010-06-30 20:25:00.000000000 -0400
+++ gstreamer-0.10.30-new/tools/Makefile.am	2010-10-02 17:57:24.000000000 -0400
@@ -38,24 +38,24 @@
 # make sure each versioned tool has the right source file and flags
 if !GST_DISABLE_LOADSAVE
 gst_xmllaunch_@GST_MAJORMINOR@_SOURCES = gst-launch.c tools.h
-gst_xmllaunch_@GST_MAJORMINOR@_CFLAGS = $(GST_OBJ_CFLAGS) -UGST_DISABLE_DEPRECATED
+gst_xmllaunch_@GST_MAJORMINOR@_CPPFLAGS = $(GST_OBJ_CFLAGS) -UGST_DISABLE_DEPRECATED
 gst_xmllaunch_@GST_MAJORMINOR@_LDADD = $(GST_OBJ_LIBS)
 endif
 
 if !GST_DISABLE_PARSE
 gst_launch_@GST_MAJORMINOR@_SOURCES = gst-launch.c tools.h
-gst_launch_@GST_MAJORMINOR@_CFLAGS = $(GST_OBJ_CFLAGS) -UGST_DISABLE_DEPRECATED
+gst_launch_@GST_MAJORMINOR@_CPPFLAGS = $(GST_OBJ_CFLAGS) -UGST_DISABLE_DEPRECATED
 gst_launch_@GST_MAJORMINOR@_LDADD = $(GST_OBJ_LIBS)
 endif
 
 gst_inspect_@GST_MAJORMINOR@_SOURCES = gst-inspect.c tools.h
-gst_inspect_@GST_MAJORMINOR@_CFLAGS = $(GST_OBJ_CFLAGS)
+gst_inspect_@GST_MAJORMINOR@_CPPFLAGS = $(GST_OBJ_CFLAGS)
 gst_inspect_@GST_MAJORMINOR@_LDADD = $(GST_OBJ_LIBS)
 gst_typefind_@GST_MAJORMINOR@_SOURCES = gst-typefind.c tools.h
-gst_typefind_@GST_MAJORMINOR@_CFLAGS = $(GST_OBJ_CFLAGS)
+gst_typefind_@GST_MAJORMINOR@_CPPFLAGS = $(GST_OBJ_CFLAGS)
 gst_typefind_@GST_MAJORMINOR@_LDADD = $(GST_OBJ_LIBS)
 gst_xmlinspect_@GST_MAJORMINOR@_SOURCES = gst-xmlinspect.c tools.h
-gst_xmlinspect_@GST_MAJORMINOR@_CFLAGS = $(GST_OBJ_CFLAGS)
+gst_xmlinspect_@GST_MAJORMINOR@_CPPFLAGS = $(GST_OBJ_CFLAGS)
 gst_xmlinspect_@GST_MAJORMINOR@_LDADD = $(GST_OBJ_LIBS)
 
 gst-feedback-@GST_MAJORMINOR@: gst-feedback-m.m
@@ -77,7 +77,7 @@
 gst_xmlinspect_SOURCES = gst-run.c
 
 # CFLAGS and libs for nonversioned frontend binaries
-AM_CFLAGS = $(GLIB_ONLY_CFLAGS)
+#AM_CFLAGS = $(GLIB_ONLY_CFLAGS)
 LDADD = $(GLIB_ONLY_LIBS)
 # due to depcomp not using AM_CFLAGS for rh9/yd3, we also set AM_CPPFLAGS
 AM_CPPFLAGS = $(GLIB_ONLY_CFLAGS)
