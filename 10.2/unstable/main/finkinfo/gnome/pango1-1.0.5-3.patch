diff -Naur pango-1.0.5.old/Makefile.in pango-1.0.5.new/Makefile.in
--- pango-1.0.5.old/Makefile.in	Mon Oct 14 01:50:47 2002
+++ pango-1.0.5.new/Makefile.in	Fri Feb 14 15:00:22 2003
@@ -116,7 +116,7 @@
 YACC = @YACC@
 ms_librarian = @ms_librarian@
 
-SUBDIRS = pango modules examples docs tools tests
+SUBDIRS = pango modules docs tools
 
 EXTRA_DIST = \
 	pango.spec.in	\
diff -Naur pango-1.0.5.old/configure pango-1.0.5.new/configure
--- pango-1.0.5.old/configure	Mon Oct 14 01:41:22 2002
+++ pango-1.0.5.new/configure	Fri Feb 14 15:00:22 2003
@@ -5513,16 +5513,16 @@
   darwin* | rhapsody*)
     case "$host_os" in
     rhapsody* | darwin1.[012])
-      allow_undefined_flag='-undefined suppress'
+#      allow_undefined_flag='-undefined suppress'
       ;;
     *) # Darwin 1.3 on
-      allow_undefined_flag='-flat_namespace -undefined suppress'
+#      allow_undefined_flag='-flat_namespace -undefined suppress'
       ;;
     esac
     # FIXME: Relying on posixy $() will cause problems for
     #        cross-compilation, but unfortunately the echo tests do not
     #        yet detect zsh echo's removal of \ escapes.
-    archive_cmds='$nonopt $(test "x$module" = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags -install_name $rpath/$soname $verstring'
+    archive_cmds='$nonopt $(test x$module = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags $(test .$module != .yes && echo -install_name $rpath/$soname $tmp_verstring)'
     # We need to add '_' to the symbols in $export_symbols first
     #archive_expsym_cmds="$archive_cmds"' && strip -s $export_symbols'
     hardcode_direct=yes
@@ -9365,7 +9365,7 @@
 
   if $have_freetype ; then
     pango_save_cppflags="$CPPFLAGS"
-    CPPFLAGS="$CPPFLAGS $FREETYPE_CFLAGS"
+    CPPFLAGS="$FREETYPE_CFLAGS $CPPFLAGS"
 
     echo "$as_me:$LINENO: checking For sufficiently new FreeType (at least 2.0.1)" >&5
 echo $ECHO_N "checking For sufficiently new FreeType (at least 2.0.1)... $ECHO_C" >&6
@@ -9435,7 +9435,7 @@
 
 ## see which freetype we have, 2.0.3 vs. 2.0.4
 pango_save_cppflags="$CPPFLAGS"
-CPPFLAGS="$CPPFLAGS $FREETYPE_CFLAGS"
+CPPFLAGS="$FREETYPE_CFLAGS $CPPFLAGS"
 if test "${ac_cv_header_freetype_internal_tterrors_h+set}" = set; then
   echo "$as_me:$LINENO: checking for freetype/internal/tterrors.h" >&5
 echo $ECHO_N "checking for freetype/internal/tterrors.h... $ECHO_C" >&6
diff -Naur pango-1.0.5.old/ltmain.sh pango-1.0.5.new/ltmain.sh
--- pango-1.0.5.old/ltmain.sh	Tue Aug 20 10:13:37 2002
+++ pango-1.0.5.new/ltmain.sh	Fri Feb 14 15:00:22 2003
@@ -2952,7 +2952,17 @@
 	if test -n "$export_symbols" && test -n "$archive_expsym_cmds"; then
 	  eval cmds=\"$archive_expsym_cmds\"
 	else
+	  if test "x$verstring" = "x0.0"; then
+	    tmp_verstring=
+	  else
+	    tmp_verstring="$verstring"
+	  fi
+	  save_deplibs="$deplibs"
+	  for conv in $convenience; do
+	    deplibs="${deplibs%$conv*} ${deplibs#*$conv}"
+	  done
 	  eval cmds=\"$archive_cmds\"
+	  deplibs="$save_deplibs"
 	fi
 	save_ifs="$IFS"; IFS='~'
 	for cmd in $cmds; do
@@ -4006,10 +4016,10 @@
 
 # Directory that this library needs to be installed in:
 libdir='$install_libdir'"
-	  if test "$installed" = no && test "$need_relink" = yes; then
-	    $echo >> $output "\
-relink_command=\"$relink_command\""
-	  fi
+#	  if test "$installed" = no && test "$need_relink" = yes; then
+#	    $echo >> $output "\
+#relink_command=\"$relink_command\""
+#	  fi
 	done
       fi
 
diff -Naur pango-1.0.5.old/modules/arabic/Makefile.in pango-1.0.5.new/modules/arabic/Makefile.in
--- pango-1.0.5.old/modules/arabic/Makefile.in	Mon Oct 14 01:50:50 2002
+++ pango-1.0.5.new/modules/arabic/Makefile.in	Fri Feb 14 15:00:22 2003
@@ -117,9 +117,9 @@
 ms_librarian = @ms_librarian@
 
 pangolibs = $(top_builddir)/pango/libpango-$(PANGO_API_VERSION).la $(FRIBIDI_LIBS) $(GLIB_LIBS)
-pangoxlibs = $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(X_LIBS) $(pangolibs)
-pangoxftlibs = $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(XFT_LIBS) $(pangolibs)
-pangoft2libs = $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(FREETYPE_LIBS) $(pangolibs)
+pangoxlibs = $(X_LIBS) $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(pangolibs)
+pangoxftlibs = $(XFT_LIBS) $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(pangolibs)
+pangoft2libs = $(FREETYPE_LIBS) $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(pangolibs)
 @HAVE_XFT_TRUE@@INCLUDE_ARABIC_XFT_TRUE@XFT_MODULES = 
 @HAVE_XFT_TRUE@@INCLUDE_ARABIC_XFT_FALSE@XFT_MODULES = @HAVE_XFT_TRUE@@INCLUDE_ARABIC_XFT_FALSE@pango-arabic-xft.la
 @HAVE_XFT_FALSE@XFT_MODULES = 
diff -Naur pango-1.0.5.old/modules/basic/Makefile.in pango-1.0.5.new/modules/basic/Makefile.in
--- pango-1.0.5.old/modules/basic/Makefile.in	Mon Oct 14 01:50:51 2002
+++ pango-1.0.5.new/modules/basic/Makefile.in	Fri Feb 14 15:00:22 2003
@@ -119,9 +119,9 @@
 basic_sources = basic-x.c
 
 pangolibs = $(top_builddir)/pango/libpango-$(PANGO_API_VERSION).la $(FRIBIDI_LIBS) $(GLIB_LIBS)
-pangoxlibs = $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(X_LIBS) $(pangolibs)
-pangoxftlibs = $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(XFT_LIBS) $(pangolibs)
-pangoft2libs = $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(FREETYPE_LIBS) $(pangolibs)
+pangoxlibs = $(X_LIBS) $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(pangolibs)
+pangoxftlibs = $(XFT_LIBS) $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(pangolibs)
+pangoft2libs = $(FREETYPE_LIBS) $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(pangolibs)
 pangowin32libs = $(top_builddir)/pango/libpangowin32-$(PANGO_API_VERSION).la $(pangolibs)
 @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_TRUE@XFT_INCLUDED = @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_TRUE@libpango-basic-xft.la
 @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@XFT_INCLUDED = 
@@ -132,7 +132,7 @@
 @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_TRUE@XFT_PREFIX = @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_TRUE@-DXFT_MODULE_PREFIX
 @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@XFT_PREFIX = 
 @HAVE_XFT_FALSE@XFT_PREFIX = 
-@HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@basic_xft_libadd = @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@$(pangoxlibs) $(pangoxftlibs)
+@HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@basic_xft_libadd = @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@$(pangoxftlibs) $(pangoxlibs)
 @HAVE_FREETYPE_TRUE@@INCLUDE_BASIC_FT2_TRUE@FT2_INCLUDED = @HAVE_FREETYPE_TRUE@@INCLUDE_BASIC_FT2_TRUE@libpango-basic-ft2.la
 @HAVE_FREETYPE_TRUE@@INCLUDE_BASIC_FT2_FALSE@FT2_INCLUDED = 
 @HAVE_FREETYPE_FALSE@FT2_INCLUDED = 
diff -Naur pango-1.0.5.old/modules/hangul/Makefile.in pango-1.0.5.new/modules/hangul/Makefile.in
--- pango-1.0.5.old/modules/hangul/Makefile.in	Mon Oct 14 01:50:51 2002
+++ pango-1.0.5.new/modules/hangul/Makefile.in	Fri Feb 14 15:00:22 2003
@@ -119,9 +119,9 @@
 sources = hangul-x.c
 
 pangolibs = $(top_builddir)/pango/libpango-$(PANGO_API_VERSION).la $(FRIBIDI_LIBS) $(GLIB_LIBS)
-pangoxlibs = $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(X_LIBS) $(pangolibs)
-pangoxftlibs = $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(XFT_LIBS) $(pangolibs)
-pangoft2libs = $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(FREETYPE_LIBS) $(pangolibs)
+pangoxlibs = $(X_LIBS) $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(pangolibs)
+pangoxftlibs = $(XFT_LIBS) $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(pangolibs)
+pangoft2libs = $(FREETYPE_LIBS) $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(pangolibs)
 
 @HAVE_X_TRUE@@INCLUDE_HANGUL_X_TRUE@noinst_LTLIBRARIES = @HAVE_X_TRUE@@INCLUDE_HANGUL_X_TRUE@libpango-hangul-x.la
 @HAVE_X_TRUE@@INCLUDE_HANGUL_X_TRUE@moddefine = @HAVE_X_TRUE@@INCLUDE_HANGUL_X_TRUE@-DX_MODULE_PREFIX
diff -Naur pango-1.0.5.old/modules/hebrew/Makefile.in pango-1.0.5.new/modules/hebrew/Makefile.in
--- pango-1.0.5.old/modules/hebrew/Makefile.in	Mon Oct 14 01:50:53 2002
+++ pango-1.0.5.new/modules/hebrew/Makefile.in	Fri Feb 14 15:00:22 2003
@@ -122,9 +122,9 @@
 hebrew_ft2_sources = $(common_sources) hebrew-ft2.c 
 
 pangolibs = $(top_builddir)/pango/libpango-$(PANGO_API_VERSION).la $(FRIBIDI_LIBS) $(GLIB_LIBS)
-pangoxlibs = $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(X_LIBS) $(pangolibs)
-pangoxftlibs = $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(XFT_LIBS) $(pangolibs)
-pangoft2libs = $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(FREETYPE_LIBS) $(pangolibs)
+pangoxlibs = $(X_LIBS) $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(pangolibs)
+pangoxftlibs = $(XFT_LIBS) $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(pangolibs)
+pangoft2libs = $(FREETYPE_LIBS) $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(pangolibs)
 @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_TRUE@XFT_INCLUDED = @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_TRUE@libpango-hebrew-xft.la
 @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@XFT_INCLUDED = 
 @HAVE_XFT_FALSE@XFT_INCLUDED = 
@@ -134,7 +134,7 @@
 @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_TRUE@XFT_PREFIX = @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_TRUE@-DXFT_MODULE_PREFIX
 @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@XFT_PREFIX = 
 @HAVE_XFT_FALSE@XFT_PREFIX = 
-@HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@hebrew_xft_libadd = @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@$(pangoxlibs) $(pangoxftlibs)
+@HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@hebrew_xft_libadd = @HAVE_XFT_TRUE@@INCLUDE_BASIC_XFT_FALSE@$(pangoxftlibs) $(pangoxlibs)
 @HAVE_X_TRUE@@INCLUDE_BASIC_X_TRUE@X_INCLUDED = @HAVE_X_TRUE@@INCLUDE_BASIC_X_TRUE@libpango-hebrew-x.la
 @HAVE_X_TRUE@@INCLUDE_BASIC_X_FALSE@X_INCLUDED = 
 @HAVE_X_FALSE@X_INCLUDED = 
diff -Naur pango-1.0.5.old/modules/indic/Makefile.in pango-1.0.5.new/modules/indic/Makefile.in
--- pango-1.0.5.old/modules/indic/Makefile.in	Mon Oct 14 01:50:52 2002
+++ pango-1.0.5.new/modules/indic/Makefile.in	Fri Feb 14 15:00:22 2003
@@ -126,9 +126,9 @@
 
 
 pangolibs = $(top_builddir)/pango/libpango-$(PANGO_API_VERSION).la $(FRIBIDI_LIBS) $(GLIB_LIBS)
-pangoxlibs = $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(X_LIBS) $(pangolibs)
-pangoxftlibs = $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(XFT_LIBS) $(pangolibs)
-pangoft2libs = $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(FREETYPE_LIBS) $(pangolibs)
+pangoxlibs = $(X_LIBS) $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(pangolibs)
+pangoxftlibs = $(XFT_LIBS) $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(pangolibs)
+pangoft2libs = $(FREETYPE_LIBS) $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(pangolibs)
 
 @HAVE_X_TRUE@@INCLUDE_MYANMAR_X_TRUE@myanmar_x_noinst = @HAVE_X_TRUE@@INCLUDE_MYANMAR_X_TRUE@libpango-myanmar-x.la
 @HAVE_X_TRUE@@INCLUDE_MYANMAR_X_TRUE@myanmar_x_cflags = @HAVE_X_TRUE@@INCLUDE_MYANMAR_X_TRUE@-DMYANMAR_X_MODULE_PREFIX
diff -Naur pango-1.0.5.old/modules/tamil/Makefile.in pango-1.0.5.new/modules/tamil/Makefile.in
--- pango-1.0.5.old/modules/tamil/Makefile.in	Mon Oct 14 01:50:52 2002
+++ pango-1.0.5.new/modules/tamil/Makefile.in	Fri Feb 14 15:00:22 2003
@@ -117,9 +117,9 @@
 ms_librarian = @ms_librarian@
 
 pangolibs = $(top_builddir)/pango/libpango-$(PANGO_API_VERSION).la $(FRIBIDI_LIBS) $(GLIB_LIBS)
-pangoxlibs = $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(X_LIBS) $(pangolibs)
-pangoxftlibs = $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(XFT_LIBS) $(pangolibs)
-pangoft2libs = $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(FREETYPE_LIBS) $(pangolibs)
+pangoxlibs = $(X_LIBS) $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(pangolibs)
+pangoxftlibs = $(XFT_LIBS) $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(pangolibs)
+pangoft2libs = $(FREETYPE_LIBS) $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(pangolibs)
 @HAVE_XFT_TRUE@@INCLUDE_TAMIL_XFT_TRUE@XFT_MODULES = 
 @HAVE_XFT_TRUE@@INCLUDE_TAMIL_XFT_FALSE@XFT_MODULES = @HAVE_XFT_TRUE@@INCLUDE_TAMIL_XFT_FALSE@pango-tamil-xft.la
 @HAVE_XFT_FALSE@XFT_MODULES = 
diff -Naur pango-1.0.5.old/modules/thai/Makefile.in pango-1.0.5.new/modules/thai/Makefile.in
--- pango-1.0.5.old/modules/thai/Makefile.in	Mon Oct 14 01:50:52 2002
+++ pango-1.0.5.new/modules/thai/Makefile.in	Fri Feb 14 15:00:22 2003
@@ -121,9 +121,9 @@
 thai_xft_sources = $(common_sources) thai-xft.c 
 
 pangolibs = $(top_builddir)/pango/libpango-$(PANGO_API_VERSION).la $(FRIBIDI_LIBS) $(GLIB_LIBS)
-pangoxlibs = $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(X_LIBS) $(pangolibs)
-pangoxftlibs = $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(XFT_LIBS) $(pangolibs)
-pangoft2libs = $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(FREETYPE_LIBS) $(pangolibs)
+pangoxlibs = $(X_LIBS) $(top_builddir)/pango/libpangox-$(PANGO_API_VERSION).la $(pangolibs)
+pangoxftlibs = $(XFT_LIBS) $(top_builddir)/pango/libpangoxft-$(PANGO_API_VERSION).la $(pangolibs)
+pangoft2libs = $(FREETYPE_LIBS) $(top_builddir)/pango/libpangoft2-$(PANGO_API_VERSION).la $(pangolibs)
 @HAVE_XFT_TRUE@@INCLUDE_THAI_XFT_TRUE@XFT_MODULES = 
 @HAVE_XFT_TRUE@@INCLUDE_THAI_XFT_FALSE@XFT_MODULES = @HAVE_XFT_TRUE@@INCLUDE_THAI_XFT_FALSE@pango-thai-xft.la
 @HAVE_XFT_FALSE@XFT_MODULES = 
@@ -133,7 +133,7 @@
 @HAVE_XFT_TRUE@@INCLUDE_THAI_XFT_TRUE@XFT_PREFIX = @HAVE_XFT_TRUE@@INCLUDE_THAI_XFT_TRUE@-DXFT_MODULE_PREFIX
 @HAVE_XFT_TRUE@@INCLUDE_THAI_XFT_FALSE@XFT_PREFIX = 
 @HAVE_XFT_FALSE@XFT_PREFIX = 
-@HAVE_XFT_TRUE@@INCLUDE_THAI_XFT_FALSE@thai_xft_libadd = @HAVE_XFT_TRUE@@INCLUDE_THAI_XFT_FALSE@$(pangoxftlibs)
+@HAVE_XFT_TRUE@@INCLUDE_THAI_XFT_FALSE@thai_xft_libadd = @HAVE_XFT_TRUE@@INCLUDE_THAI_XFT_FALSE@$(pangoxftlibs) $(pangoxlibs)
 @HAVE_X_TRUE@@INCLUDE_THAI_X_TRUE@X_MODULES = 
 @HAVE_X_TRUE@@INCLUDE_THAI_X_FALSE@X_MODULES = @HAVE_X_TRUE@@INCLUDE_THAI_X_FALSE@pango-thai-x.la
 @HAVE_X_FALSE@X_MODULES = 
diff -Naur pango-1.0.5.old/pango/Makefile.in pango-1.0.5.new/pango/Makefile.in
--- pango-1.0.5.old/pango/Makefile.in	Mon Oct 14 01:50:48 2002
+++ pango-1.0.5.new/pango/Makefile.in	Fri Feb 14 15:00:22 2003
@@ -222,7 +222,7 @@
 libpango_1_0_la_DEPENDENCIES = $(pango_win32res)
 
 libpangox_1_0_la_LDFLAGS = -version-info $(LT_VERSION_INFO)
-libpangox_1_0_la_LIBADD = libpango-$(PANGO_API_VERSION).la $(INCLUDED_X_MODULES) $(X_LIBS) $(X_EXTRA_LIBS)
+libpangox_1_0_la_LIBADD = libpango-$(PANGO_API_VERSION).la $(INCLUDED_X_MODULES) $(X_LIBS) $(X_EXTRA_LIBS) $(GLIB_LIBS)
 libpangox_1_0_la_DEPENDENCIES = $(INCLUDED_X_MODULES) libpango-$(PANGO_API_VERSION).la
 
 libpangowin32_1_0_la_SOURCES = \
@@ -249,7 +249,7 @@
 
 
 libpangoxft_1_0_la_LDFLAGS = -version-info $(LT_VERSION_INFO)
-libpangoxft_1_0_la_LIBADD = opentype/libpango-ot.la libpango-$(PANGO_API_VERSION).la $(INCLUDED_XFT_MODULES) $(XFT_LIBS) 
+libpangoxft_1_0_la_LIBADD = $(XFT_LIBS) opentype/libpango-ot.la libpango-$(PANGO_API_VERSION).la $(INCLUDED_XFT_MODULES) $(GLIB_LIBS)
 libpangoxft_1_0_la_DEPENDENCIES = $(INCLUDED_XFT_MODULES) libpango-$(PANGO_API_VERSION).la
 
 libpangoft2_1_0_la_SOURCES = \
diff -Naur pango-1.0.5.old/pango/opentype/Makefile.in pango-1.0.5.new/pango/opentype/Makefile.in
--- pango-1.0.5.old/pango/opentype/Makefile.in	Mon Oct 14 01:50:50 2002
+++ pango-1.0.5.new/pango/opentype/Makefile.in	Fri Feb 14 18:13:15 2003
@@ -137,6 +137,8 @@
 noinst_LTLIBRARIES = libpango-ot.la
 
 libpango_ot_la_SOURCES = \
+	ftcompat.c		\
+	ftcompat.h		\
 	fterrcompat.h		\
 	ftxopen.c	 	\
 	ftxopen.h	 	\
@@ -184,7 +186,7 @@
 X_PRE_LIBS = @X_PRE_LIBS@
 libpango_ot_la_LDFLAGS = 
 libpango_ot_la_LIBADD = 
-libpango_ot_la_OBJECTS =  ftxopen.lo ftxgdef.lo ftxgpos.lo ftxgsub.lo \
+libpango_ot_la_OBJECTS =  ftcompat.lo ftxopen.lo ftxgdef.lo ftxgpos.lo ftxgsub.lo \
 pango-ot-info.lo pango-ot-ruleset.lo
 @BUILD_OT_TESTS_TRUE@noinst_PROGRAMS =  ottest$(EXEEXT)
 PROGRAMS =  $(noinst_PROGRAMS)
@@ -332,6 +334,7 @@
 	  fi; \
 	done
 disasm.o: disasm.c disasm.h ftxopen.h ftxgdef.h ftxgsub.h ftxgpos.h
+ftcompat.lo ftcompat.o : ftcompat.c ftcompat.h
 ftxgdef.lo ftxgdef.o : ftxgdef.c fterrcompat.h ../../config.h ftxopen.h \
 	ftxgdef.h ftxgsub.h ftxgpos.h ftxopenf.h
 ftxgpos.lo ftxgpos.o : ftxgpos.c fterrcompat.h ../../config.h ftxopen.h \
diff -Naur pango-1.0.5.old/pango/opentype/ftcompat.c pango-1.0.5.new/pango/opentype/ftcompat.c
--- pango-1.0.5.old/pango/opentype/ftcompat.c	Thu Jan  1 09:00:00 1970
+++ pango-1.0.5.new/pango/opentype/ftcompat.c	Fri Feb 14 18:33:14 2003
@@ -0,0 +1,248 @@
+/*
+ *  ftcompat.c
+ *
+ *    Provides binary compatibility between freetype 2.0.x and 2.1.x.
+ *
+ *  Copyright 2003 by
+ *  Masanori Sekino <msek@users.sourceforge.net>
+ */
+
+#include "ftcompat.h"
+
+
+#define FTX_BYTE_( p, i )	( ((const FT_Byte*)(p))[(i)] )
+#define FTX_INT8_( p, i )	( ((const FT_Char*)(p))[(i)] )
+
+#define FTX_INT16( x )		( (FT_Int16)(x)  )
+#define FTX_UINT16( x )		( (FT_UInt16)(x) )
+#define FTX_INT32( x )		( (FT_Int32)(x)  )
+#define FTX_UINT32( x )		( (FT_UInt32)(x) )
+
+#define FTX_BYTE_I16( p, i, s )	( FTX_INT16(  FTX_BYTE_( p, i ) ) << (s) )
+#define FTX_BYTE_U16( p, i, s )	( FTX_UINT16( FTX_BYTE_( p, i ) ) << (s) )
+#define FTX_BYTE_I32( p, i, s )	( FTX_INT32(  FTX_BYTE_( p, i ) ) << (s) )
+#define FTX_BYTE_U32( p, i, s )	( FTX_UINT32( FTX_BYTE_( p, i ) ) << (s) )
+
+#define FTX_INT8_I16( p, i, s )	( FTX_INT16(  FTX_INT8_( p, i ) ) << (s) )
+#define FTX_INT8_U16( p, i, s )	( FTX_UINT16( FTX_INT8_( p, i ) ) << (s) )
+#define FTX_INT8_I32( p, i, s )	( FTX_INT32(  FTX_INT8_( p, i ) ) << (s) )
+#define FTX_INT8_U32( p, i, s )	( FTX_UINT32( FTX_INT8_( p, i ) ) << (s) )
+
+
+#define FTX_PEEK_SHORT( p )	FTX_INT16( FTX_INT8_I16( p, 0, 8) | \
+					   FTX_BYTE_I16( p, 1, 0) )
+
+#define FTX_PEEK_USHORT( p )	FTX_UINT16( FTX_BYTE_U16( p, 0, 8 ) | \
+					    FTX_BYTE_U16( p, 1, 0 ) )
+
+#define FTX_PEEK_LONG( p )	FTX_INT32( FTX_INT8_I32( p, 0, 24 ) | \
+					   FTX_BYTE_I32( p, 1, 16 ) | \
+					   FTX_BYTE_I32( p, 2,  8 ) | \
+					   FTX_BYTE_I32( p, 3,  0 ) )
+
+#define FTX_PEEK_ULONG( p )	FTX_UINT32( FTX_BYTE_U32( p, 0, 24 ) | \
+					    FTX_BYTE_U32( p, 1, 16 ) | \
+					    FTX_BYTE_U32( p, 2,  8 ) | \
+					    FTX_BYTE_U32( p, 3,  0 ) )
+
+#define FTX_PEEK_OFF3( p )	FTX_INT32( FTX_INT8_I32( p, 0, 16 ) | \
+					   FTX_BYTE_I32( p, 1,  8 ) | \
+					   FTX_BYTE_I32( p, 2,  0 ) )
+
+#define FTX_PEEK_UOFF3( p )	FTX_UINT32( FTX_BYTE_U32( p, 0, 16 ) | \
+					    FTX_BYTE_U32( p, 1,  8 ) | \
+					    FTX_BYTE_U32( p, 2,  0 ) )
+
+
+#define FTX_NEXT_CHAR( buffer ) \
+	( (signed char)*buffer++ )
+
+#define FTX_NEXT_BYTE( buffer ) \
+	( (unsigned char)*buffer++ )
+
+#define FTX_NEXT_SHORT( buffer ) \
+	( (short)( buffer += 2, FTX_PEEK_SHORT( buffer - 2 ) ) )
+  
+#define FTX_NEXT_USHORT( buffer ) \
+	( (unsigned short)( buffer += 2, FTX_PEEK_USHORT( buffer - 2 ) ) )
+
+#define FTX_NEXT_OFF3( buffer ) \
+	( (long)( buffer += 3, FTX_PEEK_OFF3( buffer - 3 ) ) )
+
+#define FTX_NEXT_UOFF3( buffer ) \
+	( (unsigned long)( buffer += 3, FTX_PEEK_UOFF3( buffer - 3 ) ) )
+
+#define FTX_NEXT_LONG( buffer ) \
+	( (long)( buffer += 4, FTX_PEEK_LONG( buffer - 4 ) ) )
+
+#define FTX_NEXT_ULONG( buffer ) \
+	( (unsigned long)( buffer += 4, FTX_PEEK_ULONG( buffer - 4 ) ) )
+
+
+  FT_BASE_DEF( FT_Char )
+  FTX_Stream_GetChar( FT_Stream  stream )
+  {
+    FT_Char  result;
+
+
+    result = 0;
+    if ( stream->cursor < stream->limit )
+      result = *stream->cursor++;
+
+    return result;
+  }
+
+
+  FT_BASE_DEF( FT_Short )
+  FTX_Stream_GetShort( FT_Stream  stream )
+  {
+    FT_Byte*  p;
+    FT_Short  result;
+   
+    
+    result         = 0;
+    p              = stream->cursor;
+    if ( p + 1 < stream->limit )
+      result       = FTX_NEXT_SHORT( p );
+    stream->cursor = p;
+       
+    return result;
+  }        
+
+
+  FT_BASE_DEF( FT_Long )
+  FTX_Stream_GetOffset( FT_Stream  stream )
+  {
+    FT_Byte*  p;
+    FT_Long   result;
+
+
+    result         = 0;
+    p              = stream->cursor;
+    if ( p + 2 < stream->limit )
+      result       = FTX_NEXT_OFF3( p );
+    stream->cursor = p;
+    return result;
+  }
+
+
+  FT_BASE_DEF( FT_Long )
+  FTX_Stream_GetLong( FT_Stream  stream )
+  {
+    FT_Byte*  p;
+    FT_Long   result;
+
+
+    result         = 0;
+    p              = stream->cursor;
+    if ( p + 3 < stream->limit )
+      result       = FTX_NEXT_LONG( p );
+    stream->cursor = p;
+    return result;
+  }
+
+
+  FT_BASE_DEF( FT_Error )
+  FTX_Stream_Seek( FT_Stream  stream,
+                  FT_ULong   pos )
+  {
+    FT_Error  error = FT_Err_Ok;
+
+
+    stream->pos = pos;
+
+    if ( stream->read )
+    {
+      if ( stream->read( stream, pos, 0, 0 ) )
+      {
+        FT_ERROR(( "FT_Stream_Seek: invalid i/o; pos = 0x%lx, size = 0x%lx\n",
+                   pos, stream->size ));
+
+        error = FT_Err_Invalid_Stream_Operation;
+      }
+    }
+    /* note that seeking to the first position after the file is valid */
+    else if ( pos > stream->size )
+    {
+      FT_ERROR(( "FT_Stream_Seek: invalid i/o; pos = 0x%lx, size = 0x%lx\n",
+                 pos, stream->size ));
+
+      error = FT_Err_Invalid_Stream_Operation;
+    }
+
+    return error;
+  }
+
+
+  FT_BASE_DEF( FT_Error )
+  FTX_Stream_EnterFrame( FT_Stream  stream,
+                        FT_ULong   count )
+  {
+    FT_Error  error = FT_Err_Ok;
+    FT_ULong  read_bytes;
+
+
+    if ( stream->read )
+    {
+      /* allocate the frame in memory */
+      FT_Memory  memory = stream->memory;
+
+
+      if ( ALLOC( stream->base, count ) )
+        goto Exit;
+
+      /* read it */
+      read_bytes = stream->read( stream, stream->pos,
+                                 stream->base, count );
+      if ( read_bytes < count )
+      {
+        FT_ERROR(( "FT_Stream_EnterFrame:" ));
+        FT_ERROR(( " invalid read; expected %lu bytes, got %lu\n",
+                   count, read_bytes ));
+
+        FREE( stream->base );
+        error = FT_Err_Invalid_Stream_Operation;
+      }
+      stream->cursor = stream->base;
+      stream->limit  = stream->cursor + count;
+      stream->pos   += read_bytes;
+    }
+    else
+    {
+      /* check current and new position */
+      if ( stream->pos >= stream->size        ||
+           stream->pos + count > stream->size )
+      {
+        FT_ERROR(( "FT_Stream_EnterFrame:" ));
+        FT_ERROR(( " invalid i/o; pos = 0x%lx, count = %lu, size = 0x%lx\n",
+                   stream->pos, count, stream->size ));
+
+        error = FT_Err_Invalid_Stream_Operation;
+        goto Exit;
+      }
+
+      /* set cursor */
+      stream->cursor = stream->base + stream->pos;
+      stream->limit  = stream->cursor + count;
+      stream->pos   += count;
+    }
+
+  Exit:
+    return error;
+  }
+
+
+  FT_BASE_DEF( void )
+  FTX_Stream_ExitFrame( FT_Stream  stream )
+  {
+    if ( stream->read )
+    {
+      FT_Memory  memory = stream->memory;
+
+
+      FREE( stream->base );
+    }
+    stream->cursor = 0;
+    stream->limit  = 0;
+  }
+
diff -Naur pango-1.0.5.old/pango/opentype/ftcompat.h pango-1.0.5.new/pango/opentype/ftcompat.h
--- pango-1.0.5.old/pango/opentype/ftcompat.h	Thu Jan  1 09:00:00 1970
+++ pango-1.0.5.new/pango/opentype/ftcompat.h	Fri Feb 14 18:33:14 2003
@@ -0,0 +1,105 @@
+/*
+ *  ftcompat.h
+ *
+ *    Provides binary compatibility between freetype 2.0.x and 2.1.x.
+ *
+ *  Copyright 2003 by
+ *  Masanori Sekino <msek@users.sourceforge.net>
+ */
+
+#ifndef FTCOMPAT_H
+#define FTCOMPAT_H
+
+
+#include <freetype/internal/ftdebug.h>
+#include <freetype/internal/ftstream.h>
+
+#undef ALLOC_ARRAY
+#undef REALLOC_ARRAY
+#undef ALLOC
+#undef FREE
+#undef MEM_Copy
+
+#undef FILE_Pos
+#undef FILE_Seek
+#undef ACCESS_Frame
+#undef FORGET_Frame
+
+#undef GET_Char
+#undef GET_Byte
+#undef GET_Short
+#undef GET_UShort
+#undef GET_Offset
+#undef GET_UOffset
+#undef GET_Long
+#undef GET_ULong
+#undef GET_Tag4
+
+
+#define FTX_GET_MACRO( func, type )	( (type)func( stream ) )
+
+#define GET_Char()	FTX_GET_MACRO( FTX_Stream_GetChar, FT_Char )
+#define GET_Byte()	FTX_GET_MACRO( FTX_Stream_GetChar, FT_Byte )
+#define GET_Short()	FTX_GET_MACRO( FTX_Stream_GetShort, FT_Short )
+#define GET_UShort()	FTX_GET_MACRO( FTX_Stream_GetShort, FT_UShort )
+#define GET_Offset()	FTX_GET_MACRO( FTX_Stream_GetOffset, FT_Long )
+#define GET_UOffset()	FTX_GET_MACRO( FTX_Stream_GetOffset, FT_ULong )
+#define GET_Long()	FTX_GET_MACRO( FTX_Stream_GetLong, FT_Long )
+#define GET_ULong()	FTX_GET_MACRO( FTX_Stream_GetLong, FT_ULong )
+#define GET_Tag4()	FTX_GET_MACRO( FTX_Stream_GetLong, FT_ULong )
+
+#define FTX_MEM_ALLOC( _pointer_, _size_ ) \
+	FT_Alloc( memory, _size_, (void**)&(_pointer_) )
+#define FTX_MEM_FREE( _pointer_ ) \
+	FT_Free( memory, (void**)&(_pointer_) )
+#define FTX_MEM_REALLOC( _pointer_, _current_, _size_ ) \
+	FT_Realloc( memory, _current_, _size_, (void**)&(_pointer_) )
+
+#define ALLOC_ARRAY( _pointer_, _count_, _type_ ) \
+	FT_SET_ERROR( FTX_MEM_ALLOC( _pointer_, (_count_) * sizeof ( _type_ ) ) )
+#define REALLOC_ARRAY( _pointer_, _old_, _new_, _type_ ) \
+	FT_SET_ERROR( FTX_MEM_REALLOC( _pointer_, (_old_) * sizeof ( _type_ ), \
+                                                  (_new_) * sizeof ( _type_ ) ) )
+#define ALLOC( _pointer_, _size_ ) \
+	FT_SET_ERROR( FTX_MEM_ALLOC( _pointer_, _size_ ) )
+#define FREE( _pointer_ ) \
+	FTX_MEM_FREE( _pointer_ )
+#define MEM_Copy( dest, source, count ) \
+	memcpy( dest, source, count )
+
+#define FILE_Pos() \
+	FT_Stream_Pos( stream )
+#define FILE_Seek( position ) \
+	FT_SET_ERROR( FTX_Stream_Seek( stream, position ) )
+#define ACCESS_Frame( size ) \
+	FT_SET_ERROR( FTX_Stream_EnterFrame( stream, size ) )
+#define FORGET_Frame() \
+	FTX_Stream_ExitFrame( stream )
+
+
+  FT_BASE( FT_Char )
+  FTX_Stream_GetChar( FT_Stream  stream );
+                                        
+  FT_BASE( FT_Short )
+  FTX_Stream_GetShort( FT_Stream  stream );
+  
+  FT_BASE( FT_Long )                      
+  FTX_Stream_GetOffset( FT_Stream  stream );
+
+  FT_BASE( FT_Long )
+  FTX_Stream_GetLong( FT_Stream  stream );
+
+  FT_BASE( FT_Error )
+  FTX_Stream_Seek( FT_Stream  stream,
+                   FT_ULong   pos );
+
+  FT_BASE( FT_Error )
+  FTX_Stream_EnterFrame( FT_Stream  stream,
+                         FT_ULong   count );
+
+  FT_BASE( void )
+  FTX_Stream_ExitFrame( FT_Stream  stream );
+
+
+#endif /* FTCOMPAT_H */
+
diff -Naur pango-1.0.5.old/pango/opentype/fterrcompat.h pango-1.0.5.new/pango/opentype/fterrcompat.h
--- pango-1.0.5.old/pango/opentype/fterrcompat.h	Thu Jul 25 12:11:29 2002
+++ pango-1.0.5.new/pango/opentype/fterrcompat.h	Fri Feb 14 18:33:14 2003
@@ -48,4 +48,7 @@
 
 #endif /* >= 2.1.0 */
 
+/* Compatibility fix */
+#include "ftcompat.h"
+
 #endif /* FTERRCOMPAT_H */
diff -Naur pango-1.0.5.old/pango/pangoxft-font.c pango-1.0.5.new/pango/pangoxft-font.c
--- pango-1.0.5.old/pango/pangoxft-font.c	Fri Aug  9 08:25:30 2002
+++ pango-1.0.5.new/pango/pangoxft-font.c	Fri Feb 14 15:00:22 2003
@@ -544,7 +544,7 @@
   face = pango_xft_font_get_face (font);
 
   coverage = pango_coverage_new ();
-#ifdef HAVE_FT_GET_FIRST_CHAR
+#if 0 /* #ifdef HAVE_FT_GET_FIRST_CHAR */
   {
     FT_UInt gindex;
     FT_ULong charcode;
diff -Naur pango-1.0.5.old/update-pango-modules pango-1.0.5.new/update-pango-modules
--- pango-1.0.5.old/update-pango-modules	Thu Jan  1 09:00:00 1970
+++ pango-1.0.5.new/update-pango-modules	Fri Feb 14 15:00:22 2003
@@ -0,0 +1,20 @@
+#!/bin/sh -e
+#
+# update-pango-modules
+#
+#   Package which install pango module(s) should call update-pango-modules in
+#   it's PostInstScript/PostRmScript to update pango.module file.
+#
+
+CONFDIR=@PREFIX@/etc/pango
+CONFFILE=$CONFDIR/pango.modules
+
+mkdir -p $CONFDIR
+
+TMPFILE=`tempfile`
+pango-querymodules >$TMPFILE
+
+mv -f $TMPFILE $CONFFILE
+chmod 0644 $CONFFILE
+
+exit 0
