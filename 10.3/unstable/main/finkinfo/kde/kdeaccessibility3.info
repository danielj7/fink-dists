Package: kdeaccessibility3
Version: 3.4.2
Revision: 11
Description: KDE - accessibility tools
License: GPL/LGPL
Maintainer: Benjamin Reed <kdeaccessibility3@fink.racoonfink.com>

Depends: kbstateapplet (>= %v-%r), kmag (>= %v-%r), kmousetool (>= %v-%r), ksayit (>= %v-%r), ktts (>= %v-%r), %N-iconthemes (>= %v-%r)
BuildDepends: arts-dev (>= 1.4.2-11), autoconf2.5, automake1.7, cctools (>= 446-1) | cctools-single-module, fink (>= 0.20.2.1-1), freetype219, gstreamer-dev (>= 0.8.5-1), gst-plugins-dev (>= 0.8.5-1), kdebase3-unified-dev (>= %v-11), kdelibs3-unified-dev (>= %v-11), libart2, libiconv-dev, libidn, libjpeg, libpng3 (>= 1.2.5-4), qt3 (>= 3.3.3-17), x11-dev
BuildConflicts: unsermake
GCC: 3.3

CustomMirror: <<
  nam-US: http://ranger.befunk.com/fink
  nam-US: http://astrange.ithinksw.net/~astrange/ranger-fink
  nam-CA: http://www.southofheaven.net/befunk
<<
Source: mirror:kde:stable/%v/src/kdeaccessibility-%v.tar.bz2
Source-MD5: 9ad0e81fc51de5513d778a2e4104d2c3
SourceDirectory: kdeaccessibility-%v
Source2: mirror:custom:kde-admindir-3.4.2-2.tar.bz2
Source2-MD5: d23ce8a8448b901cffeebb6bfc12bcd4
Source2ExtractDir: kdeaccessibility-%v

PatchScript: <<
  # perl -pi.bak -e 's,-O2,-Os,g; s,doc/HTML,doc/kde,g; s,/usr/share/doc/packages/qt3/html,%p/share/doc/qt3/html,g; s,HAVE_GCC_VISIBILITY=1,HAVE_GCC_VISIBILITY=0,g; s,-fvisibility=hidden -fvisibility-inlines-hidden,,g;' admin/*
  perl -pi.bak -e 's,-O2,-Os,g; s,doc/HTML,doc/kde,g; s,/usr/share/doc/packages/qt3/html,%p/share/doc/qt3/html,g;' admin/*
<<

NoSetLDFLAGS: true
NoSetCPPFLAGS: true
ConfigureParams: --includedir=%p/include --libdir=%p/lib --prefix=%p --with-qt-dir=%p --with-qt-includes=%p/include/qt --with-extra-libs=%p/lib --with-extra-includes=%p/include --enable-mt --with-pic --enable-rpath --enable-shared=yes --enable-static=no --mandir=%i/share/man --with-xinerama --with-pam --disable-final --with-distribution='Fink/Mac OS X' --disable-dependency-tracking --enable-kttsd-gstreamer

CompileScript: <<
#!/bin/sh -e

  export HOME=/tmp
  export PREFIX="%p"
  . ./environment-helper.sh
  export lt_cv_sys_max_cmd_len=65536

  export DO_NOT_COMPILE="kmouth"

  export CC=gcc-3.3 CXX=g++-3.3

  ./build-helper.sh cvs       %N %v %r make -f admin/Makefile.common cvs
  ./build-helper.sh configure %N %v %r ./configure %c
  ./build-helper.sh make      %N %v %r make all all_libraries="$ALL_LIBRARIES"
<<

InstallScript: <<
#!/bin/sh -e

  export PREFIX="%p"
  . ./environment-helper.sh

  ./build-helper.sh install %N %v %r make -j1 install DESTDIR=%d

  mkdir -p %i/share/doc/installed-packages
  touch %i/share/doc/installed-packages/%N
  touch %i/share/doc/installed-packages/%N-base

  rm -rf %i/share/doc/kde/en/kmouth
  install -d -m 755 %i/share/config
  cat <<END > %i/share/config/kttsdrc
[FreeTTS]
FreeTTSJarPath=%p/share/java/freetts/freetts.jar

[GStreamerPlayer]
SinkName=

[General]
AudioOutputMethod=0
AudioStretchFactor=100
EmbedInSysTray=true
EnableKttsd=true
Notify=false
NotifyPassivePopupsOnly=false
ShowMainWindowOnStartup=true
TalkerIDs=1
TextPostMsg=Resuming text.
TextPostMsgEnabled=true
TextPostSnd=\$HOME
TextPostSndEnabled=false
TextPreMsg=Text interrupted. Message.
TextPreMsgEnabled=true
TextPreSnd=\$HOME
TextPreSndEnabled=false

[Talker_1]
FreeTTSJarPath=%p/share/java/freetts/freetts.jar
PlugIn=FreeTTS
TalkerCode=<voice lang="en_US" name="fixed" gender="neutral" /><prosody volume="medium" rate="medium" /><kttsd synthesizer="FreeTTS" />
END
<<

DocFiles: COPYING INSTALL
SplitOff: <<
  Package: kmag
  Description: KDE - magnifier
  Depends: %N-base (>= %v-%r)
  Recommends: %N (>= %v-%r)
  Homepage: http://accessibility.kde.org/
  Files: <<
    bin/kmag
    share/applnk/Applications/kmag.desktop
    share/apps/kmag
    share/doc/kde/en/kmag
    share/icons/hicolor/16x16/apps/kmag.png
    share/icons/hicolor/32x32/apps/kmag.png
    share/icons/locolor/16x16/apps/kmag.png
    share/icons/locolor/32x32/apps/kmag.png
  <<
<<
SplitOff2: <<
  Package: kmousetool
  Description: KDE - automatically click when mouse idles
  Depends: %N-base (>= %v-%r)
  Recommends: %N (>= %v-%r)
  Homepage: http://accessibility.kde.org/aids/kmousetool.php
  Files: <<
    bin/kmousetool
    share/applnk/Applications/kmousetool.desktop
    share/apps/kmousetool
    share/doc/kde/en/kmousetool
    share/icons/hicolor/16x16/apps/kmousetool.png
    share/icons/hicolor/32x32/apps/kmousetool.png
  <<
  DescDetail: <<
KMouseTool is a Linux-based KDE program.  It clicks the mouse for you,
so you don't have to.  KMouseTool works with any mouse or pointing
device.
  <<
<<
SplitOff3: <<
  Package: ktts
  Description: KDE - Text-to-Speech
  Depends: %N-base (>= %v-%r), freetts
  Recommends: %N (>= %v-%r)
  Homepage: http://accessibility.kde.org/developer/kttsd/
  Files: <<
    bin/ktts*
    include/kparts/kttsjobmgr.h
    lib/kde3/kcm_kttsd.*
    lib/kde3/ktexteditor_kttsd*
    lib/kde3/libktts*
    lib/libKTTSD_Lib.*
    lib/libkttsd.*
    share/applications/kde/*ktts*
    share/apps/ktexteditor_kttsd
    share/apps/kttsd
    share/apps/kttsjobmgr
    share/config/ktts*
    share/doc/kde/en/kttsd
    share/icons/crystalsvg/128x128/apps/kttsd*
    share/icons/crystalsvg/16x16/apps/kttsd*
    share/icons/crystalsvg/22x22/apps/kttsd*
    share/icons/crystalsvg/32x32/apps/kttsd*
    share/icons/crystalsvg/48x48/apps/kttsd*
    share/icons/crystalsvg/64x64/apps/kttsd*
    share/icons/crystalsvg/scalable/apps/kttsd*
    share/icons/hicolor/16x16/actions/female*
    share/icons/hicolor/16x16/actions/male*
    share/services/*ktts*
    share/servicetypes/kttsd*
  <<
  DescDetail: <<
KTTS -- KDE Text-to-Speech -- is a subsystem within the KDE desktop for
conversion of text to audible speech.  KTTS is currently under
development and aims to become the standard subsystem for all KDE
applications to provide speech output.
  <<
  Shlibs: <<
    %p/lib/libKTTSD_Lib.0.dylib 1.0.0 ktts (>= 3.4.0-1)
    %p/lib/libkttsd.1.dylib 2.0.0 ktts (>= 3.4.0-1)
  <<
<<
SplitOff4: <<
  Package: ksayit
  Description: KDE - Speak a text file
  Depends: %N-base (>= %v-%r)
  Recommends: %N (>= %v-%r)
  Homepage: http://www.kde-apps.org/content/show.php?content=10028
  Files: <<
    bin/ksayit
    include/ksayit*
    share/applications/kde/ksayit*
    share/apps/ksayit
    share/icons/hicolor/16x16/apps/ksayit*
    share/icons/hicolor/32x32/apps/ksayit*
  <<
  DescDetail: <<
KSayIt is a small KDE3 utilitiy for Linux that simply speaks a given textfile in a
very high quality, i.e. sound and pronounciation of the spoken text should be as (human)
natural as possible. To achieve this, KSayIt uses natively Text-To-Speech systems like
MBrola, any TTS system that can be controlled via a command line or any TTS system that
is supported by the upcoming KDE TTS system (i.e. Festival).

KSayIt offers three user interfaces: A simple text editor window in which you can enter
or paste text that should be spoken after pressing a play button, as well as an icon
in the systemtray that starts to speak by a single mouseclick the actual content
of the clipboard (if it contains something that looks like text). As a KDE application it
offers also a DCOP interface for the say and shut-up action (see 'kdcop').
Finally KSayIt provides an effectstack to postprocess the sound of the voice (currently
only a Freeverb effect is included)
  <<
<<
SplitOff5: <<
  Package: kbstateapplet
  Description: KDE - Track keyboard state
  Depends: %N-base (>= %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    lib/kde3/kbstate*
    share/apps/kbstateapplet
    share/apps/kicker/applets/kbstateapplet.desktop
  <<
<<
SplitOff6: <<
  Package: %N-iconthemes
  Description: KDE - %N icon themes
  Depends: %N-base (>= %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    share/icons/mono
  <<
<<
SplitOff7: <<
  Package: %N-base
  Description: KDE - kdeaccessibility base package
  Depends: kdebase3-unified (>= %v-11)
  Replaces: %N (<< %v-%r)
  Recommends: %N (>= %v-%r)
  Files: <<
    share/doc/installed-packages/%N-base
  <<
<<

DescDetail: <<
Install kdeaccessibility3 if you would like to install all of the
kdeaccessibility packages.
<<
DescUsage: <<
---[ Installation ]---------------------------------------------------

To install all of the official KDE packages, install "bundle-kde" or
"bundle-kde-ssl" (depending on whether crypotgraphic laws permit
downloading strong cryptography).  Unless you have a specific reason
not to, "bundle-kde-ssl" is suggested.

---[ Configuration ]--------------------------------------------------

To use KDE as your windowing system in XDarwin, create a file called
".xinitrc" in your home directory, containing the following line:

  /sw/bin/startkde >/tmp/kde.log 2>&1

See http://fink.sourceforge.net/doc/x11/run-xfree86.php#xinitrc
for more information on the xinitrc files and how they work.

If you want to use Apple's X11 instead of the KDE window manager,
put the following line before the startkde line in .xinitrc:

  export KDEWM=quartz-wm

Note that depending on your version of Apple's X11, this can cause
strange resizing issues with the kicker (KDE task bar).

---[ Startup ]--------------------------------------------------------

Once you have created an ~/.xinitrc file, you should be able to start
KDE by clicking on the "XDarwin" icon in your Applications folder.  

NOTE: By default, X11 on Mac OS X runs in "rootless" mode, generally.
If you run KDE in rootless mode, it will take over your desktop with
a window that covers everything up.  You can remove this by disabling
desktop icons in the KDE control center.  Open the control center
(either from the "K" menu bar, or by typing "kcontrol" in an xterm)
then expand the "Desktop" list, click "Behavior", and uncheck the
"Show icons on desktop" checkbox.
   
---[ Removal ]--------------------------------------------------------
   
To remove all of the official KDE packages, you can remove the KDE
libraries and anything that depends on them by running, in a terminal:
   
  sudo apt-get remove kdelibs3-ssl-shlibs kdelibs3-shlibs

To remove an individual KDE package collection (like kdenetwork3 or
kdesdk3) you can generally remove [package]-base.  For example, to
remove all of the kdenetwork3 packages, run:

  sudo apt-get remove kdenetwork3-base
<<
