Package: abiword
Version: 2.4.6
Revision: 1
Depends: <<
	applesystemfonts,
	atk1-shlibs (>= 1.20.0-1),
	audiofile,
	enchant1-shlibs (>= 1.2.6-1002),
	fribidi-shlibs,
	gconf2 (>= 2.20.0-1),
	glib2-shlibs (>= 2.14.0-1),
	gnome-vfs2-unified-shlibs (>= 1:2.20.0-1),
	gtk+2-shlibs (>= 2.12.0-1),
	libgettext3-shlibs,
	libglade2-shlibs (>= 2.6.2-1),
	libgnomeprintui2.2-shlibs (>= 2.18.1-1),
	libiconv,
	libjpeg-shlibs,
	libpng3-shlibs,
	libxml2-shlibs (>= 2.6.30-1),
	pango1-xft2-ft219-shlibs (>= 1.18.4-4),
	popt-shlibs,
	x11-shlibs
<<
BuildDepends: <<
	applesystemfonts,
	atk1 (>= 1.20.0-1),
	cairo (>= 1.6-1),
	enchant1-dev (>= 1.2.6-1002),
	esound,
	expat1,
	fink (>= 0.24.12-1),
	fontconfig2-dev (>= 2.4.1-1),
	freetype219 (>= 2.3.5-1),
	fribidi,
	fribidi-dev,
	gail18-dev,
	gconf2 (>= 2.20.0-1),
	gconf2-dev (>= 2.20.0-1),
	gettext-bin,
	gettext-tools,
	glib2-dev (>= 2.14.0-1),
	glitz,
	gnome-keyring-dev (>= 0.8.1-1),
	gnome-vfs2-unified-dev (>= 1:2.20.0-1),
	gtk+2-dev (>= 2.12.0-1),
	libart2,
	libbonobo2-dev (>= 2.20.0-1),
	libbonoboui2-dev (>= 2.20.0-1),
	libgettext3-dev,
	libglade2 (>= 2.6.2-1),
	libgnomecanvas2-dev (>= 2.20.0-1),
	libgnome2-dev (>= 2.20.0-1),
	libgnomeui2-dev (>= 2.20.0-1),
	libgnomeprint2.2-dev (>= 2.18.2-1),
	libgnomeprintui2.2-dev (>= 2.18.1-1),
	libiconv-dev,
	libjpeg,
	libpng3,
	libxml2 (>= 2.6.30-1),
	orbit2-dev (>= 2.14.9-1),
	pango1-xft2-ft219-dev (>= 1.18.4-4),
	pixman (>= 0.10.0-1),
	pkgconfig (>= 0.21-1),
	popt,
	x11-dev,
	xft2-dev
<<
PatchFile: %n.patch
PatchFile-MD5: 562b8701913509f3dc8b32cb85df9b06
PatchScript: <<
	cd .. && sed 's|@PREFIX@|%p|g' < %{PatchFile} | patch -p1
<<
Description: Open-source word processor
DescUsage: <<
	set the BROWSER environment variable to "open" to
	have your default web browser be the help viewer.
<<
Source: http://www.abisource.com/downloads/%n/%v/source/%n-%v.tar.gz
Source-MD5: 30fbd0a9b539f15f54f90d3812a75266
GCC: 4.0
SourceDirectory: %n-%v/abi
ConfigureParams: --enable-gnome --disable-Cocoa --disable-Carbon --with-libxml2 --disable-gucharmap --with-libjpeg  --without-epath --disable-dependency-tracking
NoSetMAKEFLAGS: true
SetMAKEFLAGS: -j1
SetCPPFLAGS: -I%p/lib/pango-ft219/include/pango-1.0 -I%p/lib/pango-ft219/include -I%p/lib/freetype219/include/freetype2 -I%p/lib/freetype219/include -I%p/lib/fontconfig2/include
NoSetLDFLAGS: true
SetLDFLAGS: -L%p/lib/pango-ft219/lib -L%p/lib/freetype219/lib -L%p/lib/fontconfig2/lib
SetLIBS: -L%p/lib
SetCFLAGS: -Os -pipe
CompileScript: <<
#!/bin/sh -ev

export PKG_CONFIG_PATH="%p/lib/pango-ft219/lib/pkgconfig:%p/lib/fontconfig2/lib/pkgconfig:%p/lib/freetype219/lib/pkgconfig:$PKG_CONFIG_PATH" FREETYPE_CONFIG=%p/lib/freetype219/bin/freetype-config
./configure %c
make
<<
InstallScript: <<
	make -j1 install DESTDIR=%d

	# make abiword a shell script that sets symlinks for applettf
	# fonts in ~/.fonts (if necessary) on launch.
	# remove abiword (a symlink)
	/bin/rm -f %i/bin/abiword
	mkdir -p %i/lib/AbiSuite-2.4
	# move actual abiword executable
	mv %i/bin/AbiWord-2.4 %i/lib/AbiSuite-2.4
	# install abiword startup script
	install -m 755 abiword.sh %i/bin/abiword

	# install abiword-docs dir.
	mkdir -p %i/share/doc/%n
	cd .. && cp -R abiword-docs %i/share/doc/%n
	# symlink for man page
	mkdir -p %i/share/man/man8
	ln -sf %p/share/doc/abiword/abiword-docs/man/abiword.8 %i/share/man/man8/abiword.8
	# symlink for help pages
	mkdir -p %i/share/AbiSuite-2.4/AbiWord
	ln -s %p/share/doc/abiword/abiword-docs/help %i/share/AbiSuite-2.4/AbiWord/help
<<
DescPort: <<
	Patch to use 'open' as default help browser (set the BROWSER
	environment variable to override this).
	abiword is a wrapper script that sets up symlinks to applettf
	fonts in ~/.fonts, so that abiword will find them.
<<
DocFiles: BUILD.TXT COPYING README.TXT COPYRIGHT.TXT
License: GPL
Homepage: http://www.abiword.com
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
