Package: zhu3d-aqua
Version: 4.1.6
Revision: 1002
Source: mirror:sourceforge:zhu3d/zhu3d-%v.tar.gz
Depends: qt4-mac-core-shlibs (>= 4.3-1), qt4-mac-gui-shlibs (>= 4.3-1), libpng3-shlibs
BuildDepends: libpng3, qt4-mac (>= 4.3-1)
Maintainer: Jack Fink <jackfink@users.sourceforge.net>
Homepage: http://kde-apps.org/content/show.php/Zhu3D?content=43071
License: GPL
Description: Functions viewer/animator, uses Qt4 and OpenGL
GCC: 4.0
Source-MD5: 56a3f572335922b69dd33fe53cdf18d4
SourceDirectory: zhu3d-%v
PatchScript: <<
	cp %a/zhu3d.patch src/cpuinfo.h
	perl -pi -e 's/glGenTextures\(4, texID\)/glGenTextures\(4, \(GLuint\*\) texID\)/;s/glGetIntegerv\(GL_MAX_TEXTURE_SIZE, \&maxTex\)/glGetIntegerv\(GL_MAX_TEXTURE_SIZE, \(GLint\*\) \&maxTex\)/' src/glwidget.cpp
	perl -pi -e 's/glGetIntegerv\(GL_MAX_TEXTURE_SIZE, \&max\)/glGetIntegerv\(GL_MAX_TEXTURE_SIZE, \(GLint\*\) \&max\)/' src/sysinfo.cpp
	perl -pi -e "s,Q_WS_MAC,BURP,g" src/cpuinfo.h
	perl -pi -e "s,GL/gl.h,OpenGL/gl.h,g;s,GL/glu.h,OpenGL/glu.h,g" src/property.h src/glwidget.cpp src/iso.h src/speedit.cpp src/sysinfo.cpp
	cp -pr %p/lib/qt4-mac/plugins/imageform* .
	%p/lib/qt4-mac/bin/qmake zhu3d.pro
	perl -pi -e "s/-prebind/-undefined dynamic_lookup/" Makefile
<<
CompileScript: <<
	make
<<
AppBundles: zhu3d.app
InstallScript: <<
	mkdir -p %i/bin %i/share/%n/doc %i/share/%n/examples
##	cp -p zhu3d.app/Contents/MacOS/zhu3d %i/bin/zhu3d-aqua
	cp -r doc/* %i/share/%n/doc/
	cp -r work/* %i/share/%n/examples/
	cp -r syste* %i/share/%n/
<<
DocFiles: license.gpl:COPYING readme.txt:README
