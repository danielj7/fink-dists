Package: macaulay2
Version: 0.9.95
Revision: 1001
# gc 6.7 not available in 10.5
Distribution: 10.5
GCC: 4.0
Source: http://www.math.uiuc.edu/Macaulay2/Downloads/SourceCode/Macaulay2-%v-src.tar.gz
# 1.1 Source-MD5: fedd71141e8f3422c341f93576096d7e
Source-MD5: dbe13387812577b0abfdfa6c54eccecc
Source2: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/Factory/factory-3-0-2.tar.gz
Source2-MD5: 9b1fac924bc754339989d617946ea8c4
Source3: ftp://www.mathematik.uni-kl.de/pub/Math/Singular/Libfac/libfac-3-0-2.tar.gz
Source3-MD5: d94415a24186bfd4bdb6df491a58d173
Depends: readline5-shlibs, gdbm3-shlibs, gc-shlibs (>= 6.7-1)
BuildDepends: readline5, gdbm3, gmp (>= 4.2.1-1004), libmpfr1, gc (>= 6.7-1001), ntl (>= 5.4-1001)
BuildConflicts: broken-gcc, singular-factory, singular-libfac
Suggests: emacs | xemacs
SourceDirectory: Macaulay2-%v
ConfigureParams: --disable-strip --with-veclib --enable-altivec --disable-encap --with-gmplib="%p/lib/libmpfr.a %p/lib/libgmp.a"
SetLDFLAGS: -L%b/../install/lib
SetCPPFLAGS: -I%b/../install/include
PatchScript: <<
 perl -pi.bak -e 's|GC_PTR|void *|' \
	Macaulay2/d/actors2.d
 perl -pi.bak -e 's|<gc.h>|<gc/gc.h>|' \
	Macaulay2/basictests/testgc.c \
	Macaulay2/c/compat.h \
	Macaulay2/d/configure \
	Macaulay2/d/debug.c \
	Macaulay2/d/factory_allocator.c \
	Macaulay2/d/gmp_init.cc \
	Macaulay2/d/M2inits.c \
	Macaulay2/d/M2types.h \
	Macaulay2/d/memdebug.c \
	Macaulay2/d/t_main.c \
	Macaulay2/e/linalgGB/MonomialTable.hpp \
	Macaulay2/e/newdelete.hpp \
	Macaulay2/e/ntl_internal.cpp \
	Macaulay2/e/rings/coeff-ZZp.cpp \
	Macaulay2/e/rings/ring-poly.hpp \
	Macaulay2/e/table.h \
	Macaulay2/html-check-links/getmem.h \
	Macaulay2/test/engine/factor-init.c \
	Macaulay2/test/engine/factor.cc \
	Macaulay2/util/gc_test.c
<<
CompileScript: <<
 #!/bin/bash -ev
 export CPU=""
 if [ "%m" = "powerpc" ]; then
  export CPU="-mcpu=7450"
 fi
 cd ..
 mkdir build; mkdir install
 cd factory
 export CFLAGS="-mdynamic-no-pic -O3 -fschedule-insns -fschedule-insns2 -fsched-interblock -fstrict-aliasing \
   -fregmove -freorder-blocks -fast $CPU --param max-gcse-passes=3 -ffast-math"
 export CXXFLAGS="-mdynamic-no-pic -O3 -fschedule-insns -fschedule-insns2 -fsched-interblock -fstrict-aliasing \
   -fregmove -freorder-blocks -fast $CPU --param max-gcse-passes=3 -ffast-math -fno-exceptions -fno-rtti -Wno-deprecated"
 export CPATH=%p/include 
 export CC="gcc" 
 export CXX="g++" 
 ./configure --prefix=%p --enable-NTL  --with-gmp ; make
 make install prefix=%b/../install
 cd ../libfac
 export CPATH="%p/include %b/../install/include"
CPPFLAGS="-I%p/include -I%b/../install/include -Wno-deprecated" ./configure --prefix=%p --enable-NTL
 make DEFS=-DHAVE_SINGULAR_ERROR
 make install prefix=%b/../install
 ranlib %b/../install/lib/libfac.a
 cd ../Macaulay2-%v
 export CXXFLAGS=""
 export CFLAGS=""
 make
 cd ../build
 ../Macaulay2-%v/configure %c 
 make
<<
InstallScript: <<
 cd ../build; make install prefix=%i
<<
InfoDocs: <<
 Classic.info
 Dmodules.info
 Elimination.info
 FirstPackage.info
 FourierMotzkin.info
 GenericInitialIdeal.info
 IntegralClosure.info
 LLLBases.info
 LexIdeals.info
 Macaulay2.info
 Markov.info
 PackageTemplate.info
 Parsing.info
 Points.info
 PrimaryDecomposition.info
 ReesAlgebra.info
 SchurRings.info
 SimplicialComplexes.info
 Style.info
 TangentCone.info
<<
DocFiles: <<
 Macaulay2/COPYING arch/MacOSX/ReadMe-fink
<<
License: GPL
Description: Computer algebra system for algebraic geometry
DescPackaging: <<
 The former 'singular-factory' and 'singular-libfac' packages are now obsolete;
 instead, this package compiles those libraries (statically, as before), and
 then links them in to macaulay2.  The 'singular' package provides factory
 and libfac libraries suitable for other uses.

 While compiling singular-factory and singular-libfac, we now use -fast 
 instead of the obsolete -floop-transpose flag; however, on powerpc only we 
 must add -mcpu=7450 or else the compiled object will only run on G5.

 Thanks to John Dalbec for help with the 10.5 version.
<<
DescPort: <<
 The options for building singular-factory and singular-libfac have been
 retained as before; they match those used in an earlier version of the 
 'singular' package.
<<
DescUsage: <<
 Run Macaulay2 using the command "M2".  Users should, the first time they
 run M2, call the setup function: 'setup()':
   /sw/bin/M2 -e'setup();exit 0'
 This will place Macaulay2 support for emacs into the users ~/.emacs file, 
 backing up the file, if it already existed.
<<
Homepage: http://www.math.uiuc.edu/Macaulay2
Maintainer: Dave Morrison <drm@finkproject.org>
