--- mldonkey/config/configure	Mon May 26 00:29:46 2003
+++ mldonkey-patched/config/configure	Mon May 26 10:22:58 2003
@@ -1410,7 +1410,7 @@
   powerpc-*-linux*)             arch=power; model=ppc; system=elf;;
   powerpc-*-rhapsody*)          arch=power; model=ppc; system=rhapsody;;
   powerpc-*-darwin*)            arch=power; model=ppc; system=rhapsody
-    REQUIRED_OCAML=3.06+27
+    REQUIRED_OCAML=3.06
     
     echo "***************************************************"
     echo

--- mldonkey/donkey	Thu May 15 22:27:05 2003
+++ mldonkey-patched/donkey	Fri May 16 00:57:42 2003
@@ -0,0 +1,26 @@
+#!/bin/sh
+#
+# Start/Stop script for mldonkey
+
+case "$1" in
+    start)
+        if [ ! -d ~/.mldonkey ]; then
+	        echo "Creating $HOME/.mldonkey"  
+                cd @prefix@/share; cp -r mldonkey $HOME/.mldonkey
+        fi
+        echo "Starting mldonkey"
+        cd ~/.mldonkey && exec @prefix@/bin/mlnet -daemon
+        ;;
+
+    stop)
+        echo "Stopping mldonkey"
+        killall mlnet
+        ;;
+    
+    *)
+        echo "Start/Stop script for mldonkey"
+        echo "Usage: $0 {start|stop}"
+        exit 1
+        ;;
+
+esac

--- mldonkey/src/daemon/common/commonOptions.ml	Mon May 26 00:29:47 2003
+++ mldonkey-patched/src/daemon/common/commonOptions.ml	Mon May 26 21:49:33 2003
@@ -423,7 +423,7 @@
   
   
 let ask_for_gui = define_option downloads_ini ["ask_for_gui"]
-    "Ask for GUI start"    bool_option true
+    "Ask for GUI start"    bool_option false
     
 let start_gui = define_option downloads_ini ["start_gui"]
     "Automatically Start the GUI" bool_option false
@@ -432,11 +432,11 @@
   
 let mldonkey_bin = define_option downloads_expert_ini ["mldonkey_bin"]
     "Directory where mldonkey binaries are installed"
-    string_option bin_dir
+    string_option "@prefix@/bin"
 
 let mldonkey_gui = define_option downloads_expert_ini ["mldonkey_gui"]
     "Name of GUI to start" string_option 
-    (Filename.concat bin_dir "mlgui")
+    "@prefix@/bin/mldonkey_gui"
 
 (*
 let filter_search = define_option downloads_expert_ini ["filter_search"]
@@ -945,7 +945,7 @@
   set this option, mldonkey will log this info in the file until you use the
 'close_log' command. The log file may become very large. You can
     also enable logging in a file after startup using the 'log_file' command."
-  string_option ""
+  string_option "./mldonkey.log"
   
 
 let max_upload_slots = define_option downloads_ini ["max_upload_slots"]
