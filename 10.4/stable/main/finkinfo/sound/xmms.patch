diff -ru xmms-1.2.8.orig/General/ir/ir.c xmms-1.2.8/General/ir/ir.c
--- xmms-1.2.8.orig/General/ir/ir.c	2001-03-05 09:15:13.000000000 -0500
+++ xmms-1.2.8/General/ir/ir.c	2006-02-26 22:07:59.000000000 -0500
@@ -16,10 +16,10 @@
 #include "ir.h"
 
 /* Important stuff to know */
-static gboolean keepGoing = FALSE;
+gboolean keepGoing = FALSE;
 
 /* The thread handle */
-static pthread_t irapp_thread;
+pthread_t irapp_thread;
 
 /* Declarations for calls that we need to mention in the plugin struct */
 static void init(void);
diff -ru xmms-1.2.8.orig/configure xmms-1.2.8/configure
--- xmms-1.2.8.orig/configure	2003-09-04 17:00:38.000000000 -0400
+++ xmms-1.2.8/configure	2006-02-26 22:07:35.000000000 -0500
@@ -3918,7 +3918,7 @@
     # FIXME: Relying on posixy $() will cause problems for
     #        cross-compilation, but unfortunately the echo tests do not
     #        yet detect zsh echo's removal of \ escapes.
-    archive_cmds='$nonopt $(test "x$module" = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags -install_name $rpath/$soname $verstring'
+    archive_cmds='$nonopt $(test x$module = xyes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib $libobjs $deplibs$linker_flags $(test .$module != .yes && echo -install_name $rpath/$soname $verstring)'
     # We need to add '_' to the symbols in $export_symbols first
     #archive_expsym_cmds="$archive_cmds"' && strip -s $export_symbols'
     hardcode_direct=yes
@@ -13060,7 +13060,7 @@
 	i386-*-* | i486-*-* | i586-*-* | i686-*-* | i86pc-*-*)
 		arch_type=ix86
 		case "$host" in
-		        *-*-netbsd* | *-*openbsd*)
+		        *-*-netbsd* | *-*openbsd* | *-*-darwin*)
 			;;
 			*)
 				ARCH_DEFINES="-DI386_ASSEM"
diff -ru xmms-1.2.8.orig/gnomexmms/gnomexmms.desktop xmms-1.2.8/gnomexmms/gnomexmms.desktop
--- xmms-1.2.8.orig/gnomexmms/gnomexmms.desktop	2000-11-27 17:20:58.000000000 -0500
+++ xmms-1.2.8/gnomexmms/gnomexmms.desktop	2006-02-26 22:07:35.000000000 -0500
@@ -9,6 +9,6 @@
 Name[sv]=XMMS-panelprogram
 Name[pt_BR]=Applet do XMMS
 Exec=gnomexmms --activate-goad-server=gnomexmms
-Icon=
+Icon=gnomexmms.xpm
 Terminal=0
 Type=Application
diff -ru xmms-1.2.8.orig/libxmms/util.c xmms-1.2.8/libxmms/util.c
--- xmms-1.2.8.orig/libxmms/util.c	2003-01-14 10:09:18.000000000 -0500
+++ xmms-1.2.8/libxmms/util.c	2006-02-26 22:07:35.000000000 -0500
@@ -15,6 +15,13 @@
 #include <sys/sysctl.h>
 #endif
 
+#if defined (__APPLE__)
+#include <mach/mach.h>
+#include <mach/thread_policy.h>
+#include <sys/param.h>
+#include <sys/sysctl.h>
+#endif
+
 #if TIME_WITH_SYS_TIME
 # include <sys/time.h>
 # include <time.h>
@@ -73,6 +80,28 @@
 
 gboolean xmms_check_realtime_priority(void)
 {
+#if defined (__APPLE__)
+	struct thread_time_constraint_policy ttcpolicy;
+	int bus_speed, mib [2] = { CTL_HW, HW_BUS_FREQ };
+	size_t len;
+
+	len = sizeof (bus_speed);
+	sysctl (mib, 2, &bus_speed, &len, NULL, 0);
+
+	/* Is it enough? */
+	ttcpolicy.period = bus_speed / 120;
+	ttcpolicy.computation = bus_speed / 1000;
+	ttcpolicy.constraint = bus_speed / 500;
+	ttcpolicy.preemptible = 1;
+
+	thread_policy_set (mach_thread_self (),
+			   THREAD_TIME_CONSTRAINT_POLICY,
+			   (int*)&ttcpolicy,
+			   THREAD_TIME_CONSTRAINT_POLICY_COUNT);
+
+	return TRUE;
+#endif
+
 #ifdef HAVE_SCHED_SETSCHEDULER
 #ifdef __FreeBSD__
 	/*
diff -ru xmms-1.2.8.orig/ltmain.sh xmms-1.2.8/ltmain.sh
--- xmms-1.2.8.orig/ltmain.sh	2003-08-13 08:59:04.000000000 -0400
+++ xmms-1.2.8/ltmain.sh	2006-02-26 22:07:35.000000000 -0500
@@ -4053,10 +4053,10 @@
 
 # Directory that this library needs to be installed in:
 libdir='$install_libdir'"
-	  if test "$installed" = no && test $need_relink = yes; then
-	    $echo >> $output "\
-relink_command=\"$relink_command\""
-	  fi
+#	  if test "$installed" = no && test $need_relink = yes; then
+#	    $echo >> $output "\
+#relink_command=\"$relink_command\""
+#	  fi
 	done
       fi
 
diff -ru xmms-1.2.8.orig/xmms/Makefile.in xmms-1.2.8/xmms/Makefile.in
--- xmms-1.2.8.orig/xmms/Makefile.in	2003-09-04 17:01:20.000000000 -0400
+++ xmms-1.2.8/xmms/Makefile.in	2006-02-26 22:07:35.000000000 -0500
@@ -176,8 +176,8 @@
 bin_PROGRAMS = xmms
 
 xmms_LDFLAGS = -export-dynamic
-xmms_LDADD = @GTK_LIBS@ @PTHREAD_LIBS@ @SM_LIBS@ @VM_LIBS@ \
-@POSIX_LIBS@ $(top_builddir)/libxmms/libxmms.la @LTLIBINTL@
+xmms_LDADD = $(top_builddir)/libxmms/libxmms.la @GTK_LIBS@ \
+@PTHREAD_LIBS@ @SM_LIBS@ @VM_LIBS@ @POSIX_LIBS@ @LTLIBINTL@
 
 
 INCLUDES = @GTK_CFLAGS@ @XMMS_DEFINES@ @ARCH_DEFINES@ \
