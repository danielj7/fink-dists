--- a/cvs.h
+++ b/cvs.h
@@ -464,6 +464,9 @@
 lex_date(const cvs_number *n, void *, cvs_file *cvs);
 
 void
+atom_dir_init(void);
+
+void
 cvs_master_digest(cvs_file *cvs, cvs_master *cm, rev_master *master);
 
 git_repo *
--- a/import.c
+++ b/import.c
@@ -249,6 +249,8 @@
     /* Initialize and reinforce default thread non-detached attribute */
     pthread_attr_init(&attr);
     pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);
+
+    atom_dir_init();
 #endif /* THREADS */
 
     striplen = analyzer->striplen;
--- a/revcvs.c
+++ b/revcvs.c
@@ -77,9 +77,17 @@
 
 static dir_bucket *dir_buckets[DIR_BUCKETS];
 #ifdef THREADS
-static pthread_mutex_t dir_bucket_mutex = PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP;
-#endif /* THREADS */
+static pthread_mutex_t dir_bucket_mutex;
 
+void atom_dir_init(void)
+{
+    pthread_mutexattr_t attr;
+
+    pthread_mutexattr_init(&attr);
+    pthread_mutexattr_settype(&attr, PTHREAD_MUTEX_RECURSIVE);
+    pthread_mutex_init(&dir_bucket_mutex, &attr);
+}
+#endif /* THREADS */
 
 static const master_dir *
 atom_dir(const char* dirname)