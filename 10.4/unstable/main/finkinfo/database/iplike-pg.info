Info3: <<
Package: iplike-pg%type_pkg[postgresql]
Version: 1.0.7
Revision: 2
Type: postgresql(7.4 8.0 8.1 8.2 8.3)

Conflicts: opennms-pgsql74, opennms-pgsql80, opennms-pgsql81, opennms-pgsql82
Replaces: opennms-pgsql74, opennms-pgsql80, opennms-pgsql81, opennms-pgsql82
Provides: opennms-pgsql
Source: mirror:sourceforge:opennms/iplike-%v.tar.gz
Source-MD5: 0fa4478d6d82ba1e9fcd453154879cef

BuildDepends: <<
	autoconf (>= 2.60-1),
	automake1.10,
	libtool2,
	(%type_raw[postgresql] <= 8.0) postgresql%type_pkg[postgresql]-unified-dev,
	(%type_raw[postgresql] >= 8.1) postgresql%type_pkg[postgresql]-dev,
<<
Depends: <<
	(%type_raw[postgresql] <= 7.4) postgresql%type_pkg[postgresql]-unified-shlibs,
	(%type_raw[postgresql] >= 8.1) postgresql%type_pkg[postgresql]-shlibs,
<<

PatchScript: <<
#!/bin/sh -ev

	IPLIKE_VERSION=`echo %type_raw[postgresql] | sed -e 's,\.,_,g'`
	perl -pi -e "s,iplike_la,iplike_${IPLIKE_VERSION}_la,g" Makefile.am
	perl -pi -e 's,iplike[^_]la,iplike-%type_raw[postgresql].la,g' Makefile.am install_iplike.sh.in
	perl -pi -e 's,/psql,/psql-%type_raw[postgresql],' install_iplike.sh.in

	%p/bin/aclocal -I m4
	%p/bin/glibtoolize --automake --copy
	%p/bin/autoheader
	%p/bin/autoconf
	%p/bin/automake --add-missing --copy
<<

InstallScript: <<
	make install DESTDIR="%d"
	mv %i/sbin/install_iplike.sh %i/sbin/install_iplike_%type_pkg[postgresql].sh
<<

PostInstScript: <<
	cat <<END
*** NOTE ***

WARNING: this package will not work until you run
%p/sbin/install_iplike_%type_pkg[postgresql].sh with the appropriate options.

See \`%p/sbin/install_iplike_%type_pkg[postgresql].sh -h\` for more information.

END
<<

PostRmScript: <<
	cat <<END
*** NOTE ***

WARNING: Don't forget to remove the IPLIKE function from your database!

<<

Homepage: http://www.opennms.org/
Maintainer: Benjamin Reed <iplike@fink.racoonfink.com>
Description: PostgreSQL IP address query interface
DescDetail: <<
This package contains a PostgreSQL function for doing complex
IP address queries on a text field.
<<
License: GPL
<<
