diff -u -d -b -w foo/dlfcn.c foo1/dlfcn.c
--- foo/dlfcn.c     23 Jun 2003 14:28:14 -0000      1.33
+++ foo1/dlfcn.c     1 Jul 2003 12:26:42 -0000
@@ -451,7 +451,7 @@
 {
 	if (dls)
 	{
-		if (dls->module == MAGIC_DYLIB_MOD && !isFlagSet(mode, RTLD_GLOBAL))
+		if (dls->module == MAGIC_DYLIB_MOD && isFlagSet(mode, RTLD_LOCAL))
 		{
 			warning("trying to open a .dylib with RTLD_LOCAL");
 			error("unable to open a .dylib with RTLD_LOCAL");
@@ -699,7 +699,7 @@
 		NSObjectFileImageInappropriateFile:
			if (dyld_NSAddImage && dyld_NSIsSymbolNameDefinedInImage && dyld_NSLookupSymbolInImage)
 			{
-				if (!isFlagSet(mode, RTLD_GLOBAL))
+				if (isFlagSet(mode, RTLD_LOCAL))
 				{
					warning("trying to open a .dylib with RTLD_LOCAL");
 					error("unable to open this file with RTLD_LOCAL");
