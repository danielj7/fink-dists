Package: libtbb4
Version: 4.0.20111130
Revision: 1
Architecture: i386, x86_64
Description: Threading Building Blocks
DescDetail: <<
    Threading Building Blocks (TBB) is an award-winning C++ runtime library
    that abstracts the low-level threading details necessary for optimal
    multi-core performance. It uses common C++ templates and coding style to
    eliminate tedious threading implementation work.

    TBB requires fewer lines of code to achieve parallelism than other
    threading models. The applications you write are portable across platforms.
    Since the library is also inherently scalable, no code maintenance is
    required as more processor cores become available.
<<
License: GPL
HomePage: http://www.threadingbuildingblocks.org
Maintainer: Abdulla Kamar <abdulla.kamar+fink@gmail.com>

Source: http://threadingbuildingblocks.org/uploads/77/180/4.0%%20update%%202/tbb40_20111130oss_src.tgz
Source-MD5: 1e6926b21e865e79772119cd44fc3ad8
SourceDirectory: tbb40_20111130oss
Depends: libtbb4-shlibs (= %v-%r)
Conflicts: libtbb-dev
Replaces: libtbb-dev
BuildDependsOnly: true

CompileScript: <<
    #!/bin/sh -ev
    [ %m = i386 ] && ARCH=ia32 || ARCH=intel64
    make arch=$ARCH tbb_build_prefix=lib
<<

InstallScript: <<
    #!/bin/sh -ev
    mkdir %i/lib
    mkdir %i/include
    rm include/tbb/index.html
    cp -r include/tbb %i/include

    for I in tbb tbbmalloc; do
        install_name_tool -id %p/lib/lib${I}.4.0.dylib build/lib_release/lib${I}.dylib
        cp build/lib_release/lib${I}.dylib %i/lib/lib${I}.4.0.dylib

        pushd %i/lib
        ln -s lib${I}.4.0.dylib lib${I}.dylib
        popd
    done

    chmod -R u+rwx,go+rx %i/lib
    chmod -R u+rwX,go+rX %i/include
<<

DocFiles: CHANGES COPYING README

SplitOff: <<
    Package: libtbb4-shlibs

    Files: lib/libtbb.4.0.dylib lib/libtbbmalloc.4.0.dylib
    Shlibs: <<
        %p/lib/libtbb.4.0.dylib 0.0.0 %n (>= 4.0-1)
        %p/lib/libtbbmalloc.4.0.dylib 0.0.0 %n (>= 4.0-1)
    <<

    DocFiles: CHANGES COPYING README
<<
