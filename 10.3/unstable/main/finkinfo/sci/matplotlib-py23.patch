--- matplotlib/setup.py.orig	Tue Jul 13 05:34:31 2004
+++ matplotlib/setup.py	Tue Jul 13 05:40:01 2004
@@ -28,15 +28,15 @@
 BUILD_AGG = 1
 
 # Render Agg to the GTK canvas
-#BUILD_GTKAGG       = 0
-BUILD_GTKAGG       = 'auto'
+BUILD_GTKAGG       = 1
+#BUILD_GTKAGG       = 'auto'
 
 
 # build TK GUI with Agg renderer ; requires Tkinter Python extension
 # and Tk includes
 # Use False or 0 if you don't want to build
-#BUILD_TKAGG        = 0
-BUILD_TKAGG        = 'auto'
+BUILD_TKAGG        = 1
+#BUILD_TKAGG        = 'auto'
 
 # build a small extension to manage the focus on win32 platforms.
 #BUILD_WINDOWING        = 0
@@ -89,18 +89,12 @@
     
 if BUILD_GTKAGG:
     
-    try: import gtk
-    except ImportError: print 'GTKAgg requires pygtk'
-    else:
-        BUILD_AGG = 1
-        build_gtkagg(ext_modules, packages)
+    BUILD_AGG = 1
+    build_gtkagg(ext_modules, packages)
 
 if BUILD_TKAGG:
-    try: import Tkinter
-    except ImportError: print 'TKAgg requires TkInter'
-    else:
-        BUILD_AGG = 1
-        build_tkagg(ext_modules, packages)
+    BUILD_AGG = 1
+    build_tkagg(ext_modules, packages)
 
 
 
@@ -122,6 +116,8 @@
         mod.extra_compile_args.append('-DVERBOSE')
     if NUMERIX.lower().find('numarray')>=0:
         mod.extra_compile_args.append('-DNUMARRAY')
+    mod.include_dirs.append('@PREFIX@/include')
+    mod.library_dirs.append('@PREFIX@/lib')
 
 
     
--- matplotlib/setupext.py.orig	Tue Jul 13 05:34:37 2004
+++ matplotlib/setupext.py	Tue Jul 13 05:35:25 2004
@@ -35,7 +35,7 @@
     'win32'  : ['win32_static',],
     'linux2' : ['/usr/local', '/usr',],
     'linux'  : ['/usr/local', '/usr',],
-    'darwin' : [os.getenv('MPLIB_BASE') or '/usr/local', '/usr', '/sw'],
+    'darwin' : [os.getenv('MPLIB_BASE') or '/usr', '/usr/X11R6'],
     'freebsd4' : [os.getenv('MBLIB_BASE') or '/usr/local', '/usr'],
     'sunos5' : [os.getenv('MPLIB_BASE') or '/usr/local',],
 }
@@ -214,13 +214,9 @@
         module.libraries.extend(['tk84', 'tcl84'])
     else:
         o = find_tcltk()
-        if sys.platform == 'darwin' and '/Library/Framework' in o.tk_lib:
-            module.extra_link_args.extend(['-framework','Tcl'])
-            module.extra_link_args.extend(['-framework','Tk'])
-        else:
-            module.include_dirs.extend([o.tcl_inc, o.tk_inc])
-            module.library_dirs.extend([o.tcl_lib, o.tk_lib])
-            module.libraries.extend(['tk'+o.tkv, 'tcl'+o.tkv])
+        module.include_dirs.extend([o.tcl_inc, o.tk_inc])
+        module.library_dirs.extend([o.tcl_lib, o.tk_lib])
+        module.libraries.extend(['tk'+o.tkv, 'tcl'+o.tkv])
 
 
 def add_windowing_flags(module):
