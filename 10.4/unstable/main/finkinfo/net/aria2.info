Package: aria2
Version: 1.2.0
Revision: 1
Description: Downloader for HTTP/FTP/BitTorrent/Metalink
Homepage: http://aria2.sourceforge.net/
License: GPL
Maintainer: Daniel Johnson <daniel@daniel-johnson.org>
DescDetail: <<
	aria2 is a utility for downloading files. The supported protocols are
	HTTP(S), FTP, BitTorrent (DHT, PEX, MSE/PE), and Metalink.

	It can download one or more files individually or from multiple
	sources/protocols at the same time and tries to utilize your maximum
	download bandwidth (by using multiple threads and downloading data from
	HTTP(S)/FTP, while also uploading to the BitTorrent swarm).

	Using Metalink's chunk checksums, aria2 automatically validates chunks
	of data while downloading a file like BitTorrent.

	There are other alternative applications. But aria2 has 2 distinctive
	features: (1) aria2 can download a file from several
	URLs(http/ftp/BitTorrent) and (2) If you give aria2 list of URLs, then
	aria2 downloads them concurrently. You don't have to wait for the
	current download queue to finish one file at a time anymore. aria2 uses
	your maximum bandwidth and downloads files quickly.
<<

Source: mirror:sourceforge:%n/%n-%v.tar.bz2
Source-MD5: 97b7d1bdc073cca3185ef28397fbde58

PatchScript: <<
	#Prevent /usr/include and /usr/lib from being added to dirs
	perl -pi -e 's/LIBZ_LIBS=.*$/LIBZ_LIBS="-lz"/; s/LIBZ_CPPFLAGS=.*$/LIBZ_CPPFLAGS=""/' configure
<<

Depends: <<
	ca-bundle,
	libcares2-shlibs,
	libgettext3-shlibs,
	libiconv,
	libxml2-shlibs,
	sqlite3-shlibs
<<
BuildDepends: <<
	gettext-tools,
	libcares2,
	libgettext3-dev,
	libiconv-dev,
	libxml2,
	pkgconfig,
	sqlite3-dev,
	system-openssl-dev
<<
Conflicts: aria2c (<< 1.1.2-1)
Replaces: aria2c (<< 1.1.2-1)

SetCXXFLAGS: -Os

ConfigureParams: <<
	--disable-dependency-tracking \
	--without-gnutls \
	--with-ca-bundle='%p/etc/ssl/certs/ca-bundle.crt' \
	--with-sqlite3-prefix=%p \
	--with-openssl-prefix=%p/lib/system-openssl \
	--with-libcares-prefix=%p
<<

# Test suite is buggy (in a new way) and I hate C++:
# RequestGroupManTest.cc: In member function 'void aria2::RequestGroupManTest::testLoadServerStat()':
# RequestGroupManTest.cc:103: error: 'cerr' is not a member of 'std'
#InfoTest: <<
#	TestDepends: cppunit1.10.2
#	TestScript: make check || exit 2
#<<

InstallScript: make install DESTDIR=%d

DocFiles: AUTHORS ChangeLog COPYING LICENSE.OpenSSL NEWS

Splitoff: <<
	Package: %Nc
	Description: OBSOLETE use %N instead
	Depends: aria2, fink-obsolete-packages
	DocFiles: COPYING NEWS
<<
