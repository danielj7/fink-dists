--- mldonkey/config/configure	Mon May 26 00:29:46 2003
+++ mldonkey-patched/config/configure	Mon May 26 10:22:58 2003
@@ -1410,7 +1410,7 @@
   powerpc-*-linux*)             arch=power; model=ppc; system=elf;;
   powerpc-*-rhapsody*)          arch=power; model=ppc; system=rhapsody;;
   powerpc-*-darwin*)            arch=power; model=ppc; system=rhapsody
-    REQUIRED_OCAML=3.06+27
+    REQUIRED_OCAML=3.06
     
     echo "***************************************************"
     echo

--- mldonkey/downloads_expert.ini	Thu May 15 21:15:23 2003
+++ mldonkey-patched/downloads_expert.ini	Thu May 15 21:13:10 2003
@@ -0,0 +1,247 @@
+
+	(* Buffer writes and flush after buffer_writes_delay seconds (experimental) *)
+ buffer_writes_delay = 30.000000
+
+	(* Flush buffers if buffers exceed buffer_writes_threshold kB (experimental) *)
+ buffer_writes_threshold = 1024
+
+	(* Set to true if you also want mldonkey to run as a server (experimental) *)
+ enable_server = false
+
+	(* Set to true if you also want mldonkey to run as an audiogalaxy satellite (experimental) *)
+ enable_audiogalaxy = false
+
+	(* Set to true if you also want mldonkey to run as a OpenFT sub node (experimental) *)
+ enable_openft = false
+
+	(* A list of extensions of files that should be shared (".mp3",".avi" for examples). 
+	  Files with extensions not in the list will not be shared (except if the list 
+	   is empty :) *)
+ shared_extensions = []
+
+	(* Timeout on client connections when not queued *)
+ client_timeout = 40.000000
+
+	(* The size of the buffer between the client and its GUI. Can be useful
+	to increase when the connection between them has a small bandwith *)
+ interface_buffer = 1000000
+
+	(* The size long names will be shorten to in the interface *)
+ max_name_len = 50
+
+	(* Is the default terminal an ANSI terminal (escape sequences can be used) *)
+ term_ansi = true
+
+	(* Name of program used for preview (first arg is local filename, second arg
+	    is name of file as searched on eDonkey *)
+ previewer = mldonkey_previewer
+
+	(* Delay between updates to the GUI *)
+ update_gui_delay = 1.000000
+
+	(* The upload prio of the incoming directory *)
+ incoming_directory_prio = 0
+
+	(* The realm shown when connecting with a WEB browser *)
+ http_realm = MLdonkey
+
+	(* This option controls whether the WEB interface should use frames or not *)
+ use_html_frames = true
+
+	(* The height of the command frame in pixel (depends on your screen and browser sizes) *)
+ commands_frame_height = 80
+
+	(* Directory where mldonkey binaries are installed *)
+ mldonkey_bin = "@prefix@/bin"
+
+	(* Name of GUI to start *)
+ mldonkey_gui = "@prefix@/bin/mldonkey_gui"
+
+	(* Delay before two filtering on results (results
+	    are not displayed until filtered). Min is 1 second. *)
+ filter_search_delay = 5.000000
+
+	(* The size of the header of a TCP/IP packet on your connection (ppp adds
+	    14 bytes sometimes, so modify to take that into account) *)
+ tcpip_packet_size = 40
+
+	(* The size of the MTU of a TCP/IP packet on your connection *)
+ mtu_packet_size = 1500
+
+	(* The size of the minimal packet you want mldonkey to send when data is
+	available on the connection *)
+ minimal_packet_size = 600
+
+	(* URL where mldonkey can download update information on the network *)
+ network_update_url = ""
+
+	(* Message printed at startup (automatically downloaded from the previous
+	    URL directory *)
+ motd_html = "<pre>
+
+***************************************************************************
+
+                         Welcome to MLdonkey          
+			 
+			 The current stable version is 2.04r1 <br>
+			 The current unstable version is 2.04r1-3. <br>
+			 
+			 Please, ask your friends using old versions to
+                            upgrade as soon as possible.
+***************************************************************************
+</pre>
+"
+
+	(* Force compaction every <n> hours (in [1..24]) *)
+ compaction_delay = 2
+
+	(* The delay between reloads of the vd output in the WEB interface *)
+ vd_reload_delay = 120
+
+	(* The IP address used to bind the http server *)
+ http_bind_addr = "0.0.0.0"
+
+	(* The IP address used to bind the gui server *)
+ gui_bind_addr = "0.0.0.0"
+
+	(* The IP address used to bind the telnet server *)
+ telnet_bind_addr = "0.0.0.0"
+
+	(* port of the external chat application *)
+ chat_app_port = 5036
+
+	(* hostname of the external chat application *)
+ chat_app_host = localhost
+
+	(* port used by the external chat application to use the core as a proxy *)
+ chat_port = 4002
+
+	(* The IP address used to bind the chat server *)
+ chat_bind_addr = "0.0.0.0"
+
+	(* the id to use for communicating with the core console through chat interface *)
+ chat_console_id = "donkey console"
+
+	(* use the chat to indicate when a file has been downloaded *)
+ chat_warning_for_downloaded = true
+
+	(* Size of the minor heap in kB *)
+ minor_heap_size = 32
+
+	(* The minimal delay between two connections to the same client (in seconds) *)
+ min_reask_delay = 600
+
+	(* The maximal delay between two connections to the same client *)
+ max_reask_delay = 3600
+
+	(* Whether to use the modified WEB interface *)
+ html_mods = true
+
+	(* Which html_mods style to use (set with html_mods_style command) *)
+ html_mods_style = 0
+
+	(* Whether to use human readable GMk number format *)
+ html_mods_human_readable = true
+
+	(* Whether to use relative availability in the WEB interface *)
+ html_mods_use_relative_availability = true
+
+	(* Whether to display the Net column in vd output *)
+ html_mods_vd_network = false
+
+	(* Whether to display the Active Sources column in vd output *)
+ html_mods_vd_active_sources = false
+
+	(* Whether to display the Age column in vd output *)
+ html_mods_vd_age = true
+
+	(* Whether to display the Last column in vd output *)
+ html_mods_vd_last = true
+
+	(* Whether to display the Priority column in vd output *)
+ html_mods_vd_prio = false
+
+	(* Whether to display the Queues in vd # output *)
+ html_mods_vd_queues = true
+
+	(* Whether to display the pending slots in uploaders command *)
+ html_mods_show_pending = true
+
+	(* Whether to load the mldonkey_messages.ini file (false=use internal settings) *)
+ html_mods_load_message_file = false
+
+	(* Maximum chat messages to log in memory *)
+ html_mods_max_messages = 10
+
+	(* Whether to use checkboxes in the WEB interface *)
+ html_checkbox_file_list = true
+
+	(* Whether to display results already downloaded *)
+ display_downloaded_results = true
+
+	(* Minimal number of results for filter form to appear *)
+ filter_table_threshold = 50
+
+	(* Maximal size of the buffers of a client *)
+ client_buffer_size = 500000
+
+	(* The delay between two saves of the 'downloads.ini' file (default is 4 minutes) *)
+ save_options_delay = 900.000000
+
+	(* timeout when connecting to a server *)
+ server_connection_timeout = 15.000000
+
+	(* Use new display of search results (with tables,
+	    which might be slower for your browser to display) *)
+ new_print_search = false
+
+	(* The delay between one glance at a file and another *)
+ download_sample_rate = 1.000000
+
+	(* How many samples go into an estimate of transfer rates *)
+ download_sample_size = 10
+
+	(* This option defines a set of date at which some commands have to be executed *)
+ calendar = []
+
+	(* The time an ip address can be kept in the cache *)
+ ip_cache_timeout = 3600
+
+	(* A space-separated list of keywords. Each keyword triggers
+	  printing information on the corresponding messages:
+	  mc : debug client messages
+	  ms : debug server messages
+	  net : debug net
+	  verb : debug other
+	  loc : debug source research
+	  sp : debug source propagation 
+	  sm : debug source management
+	  do : some download warnings
+	  up : some upload warnings
+	  unk : unknown messages
+	  ov : overnet
+	  share: debug sharing
+	  md4 : md4 computation
+	 *)
+ verbosity = ""
+
+	(* The percentage of free memory before a compaction is triggered *)
+ compaction_overhead = 25
+
+	(* size of log in number of records *)
+ log_size = 300
+
+	(* Maximal number of results displayed for a search *)
+ max_displayed_results = 1000
+
+	(* (internal option) *)
+ options_version = 2
+
+	(* IP:port of the network redirector *)
+ redirector = "128.93.52.5:3999"
+
+	(* The file in which you want mldonkey to log its debug messages. If you
+	  set this option, mldonkey will log this info in the file until you use the
+	'close_log' command. The log file may become very large. You can
+	    also enable logging in a file after startup using the 'log_file' command. *)
+ log_file = "./mldonkey.log"

--- mldonkey/donkey	Thu May 15 22:27:05 2003
+++ mldonkey-patched/donkey	Fri May 23 22:34:55 2003
@@ -0,0 +1,35 @@
+#!/bin/sh
+#
+# Start/Stop script for mldonkey
+
+case "$1" in
+    start)
+        if [ ! -d ~/.mldonkey ]; then
+	        echo "Creating $HOME/.mldonkey"  
+                cd /sw/share; cp -r mldonkey $HOME/.mldonkey
+        fi
+        echo "Starting mldonkey"
+        cd ~/.mldonkey && exec @prefix@/bin/mlnet
+        ;;
+
+    daemon)
+        if [ ! -d ~/.mldonkey ]; then
+	        echo "Creating $HOME/.mldonkey"  
+                cd /sw/share; cp -r mldonkey $HOME/.mldonkey
+        fi
+        echo "Starting mldonkey as daemon"
+        cd ~/.mldonkey && exec @prefix@/bin/mlnet -daemon
+        ;;
+
+    stop)
+        echo "Stopping mldonkey"
+        killall mlnet
+        ;;
+    
+    *)
+        echo "Start/Stop script for mldonkey"
+        echo "Usage: $0 {start|daemon|stop}"
+        exit 1
+        ;;
+
+esac
