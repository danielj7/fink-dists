Package: db3
Version: 3.3.11
Revision: 12
Source: http://www.sleepycat.com/update/snapshot/db-%v.tar.gz
Patch: %f.patch
Conflicts: db, db4, db4-ssl, db31, db41, db41-ssl
Replaces: db, db4, db4-ssl, db31, db41, db41-ssl
Provides: db
Depends: db3-shlibs (= %v-%r)
BuildDepends: fink (>= 0.10.0)
BuildDependsOnly: true
NoSetLDFlags: true
NoSetCPPFlags: true
SetCFlags: -Os
SetCXXFlags: -Os
ConfigureParams: --enable-compat185 --enable-cxx --includedir=%p/include/db3
GCC: 3.1
CompileScript: <<
(cd build_unix;  ../dist/configure %c)
(cd build_unix; make UTIL_PROGS="")
(cd build_unix; rm .libs/libdb-3.3.dylib)
(cd build_unix; make SOLINK="cc -dynamiclib -compatibility_version 3.3 -current_version 3.3.11 -install_name %p/lib/libdb-3.3.dylib" SOFLAGS="" libso_target=".libs/libdb-3.3.dylib" UTIL_PROGS="")
(cd build_unix; rm .libs/libdb_cxx-3.3.dylib)
(cd build_unix; make SOLINK="c++ -dynamiclib -compatibility_version 3.3 -current_version 3.3.11 -install_name %p/lib/libdb_cxx-3.3.dylib" SOFLAGS="" libxso_target=".libs/libdb_cxx-3.3.dylib" UTIL_PROGS="")
(cd build_unix; make)
<<
InstallScript: <<
(cd build_unix; make install prefix=%I docdir=%I/share/doc/db3-doc/docs includedir=%I/include/db3)
<<
SplitOff: <<
 Package: %N-shlibs
 Description: Shared Libraries for db3
 Replaces: %N (<< 3.3.11-4)
 Shlibs: <<
  %p/lib/libdb-3.3.dylib %n (>= %v-%r)
  %p/lib/libdb_cxx-3.3.dylib %n (>= %v-%r)
 <<
 Files: lib/libdb-3.3.dylib lib/libdb_cxx-3.3.dylib
 DocFiles: LICENSE
<<
SplitOff2: <<
 Package: %N-bin
 Depends: %N-shlibs (= %v-%r)
 Conflicts: db4-bin, db4 (<< 4.0.14-3), db31 (<< 3.1.17-2), db4-ssl-bin, db41-ssl-bin, db41-bin
 Replaces: db4-bin, %N (<< 3.3.11-4), db31 (<< 3.1.17-2), db4-ssl-bin, db41-ssl-bin, db41-bin
 Description: Binary utilities for db3
 Files: bin/
 DocFiles: LICENSE
<<
SplitOff3: <<
 Package: %N-doc
 Conflicts: db31 (<< 3.1.17-2)
 Replaces: %N (<< 3.3.11-3), db31 (<< 3.1.17-2)
 Description: Documentation for db3
 Files: share/doc/db3-doc/
 DocFiles: LICENSE
<<
DocFiles: LICENSE README
License: OSI-Approved
Description: Berkeley DB embedded database
DescPort: <<
Small patch for 10.1 compatibility. Fixed shared lib install problems.
DB 1.85 compatibility is included, as is C++.
Rev 5:
SplitOff version.
Rev 4:
Updated for new shlibs policy.
Rev 3:
Upped revision number, had only checked my local tree :-(
Rev 2:
Added the remove/install script to put back the symlinks pointing at
db4 in the libs, removed the binaries and documentation from this package, and removed the syminks for the header files.
My thanks to:
David R. Morrison, Jan de Leeuw, Max Horn, Gordon Messmer
<<
DescPackaging: <<
Includes the libraries, headers and documentation. Headers are in include/db3 docs in share/db3/docs. Binary utilities are in a separate package. As is the documentation.
This package ought to work with, or without db4, and should not care about the order of installation. If this is not true, it is a bug, let me know.
<<
Homepage: http://www.sleepycat.com/
Maintainer: Peter O'Gorman <peter@pogma.com>
