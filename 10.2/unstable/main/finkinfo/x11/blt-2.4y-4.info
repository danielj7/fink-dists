Package: blt
Version: 2.4y
Revision: 4
Maintainer: Matt Stephenson <cattrap@users.sourceforge.net>
BuildDepends: tcltk-dev
Depends: %N-shlibs (= %v-%r)
Source: mirror:sourceforge:%N/BLT%v.tar.gz
Source-MD5: 949eaf9205168d7bdcfee22caca40fe5
SourceDirectory: %N%v
PatchScript: sed 's|@prefix@|%p|g' <%a/%f.patch | patch -p1
SetCFLAGS: -O3 -fno-common
UpdateConfigGuessInDirs: cf
InstallScript: <<
mkdir -p %i/bin
mkdir -p %i/include
mkdir -p %i/lib/blt2.4/dd_protocols
mkdir -p %i/lib/blt2.4/demos/bitmaps/fish
mkdir -p %i/lib/blt2.4/demos/bitmaps/hand
mkdir -p %i/lib/blt2.4/demos/images
mkdir -p %i/lib/blt2.4/demos/scripts
mkdir -p %i/share/man/man3
(cd demos; install -c -m 644 *.tcl %i/lib/blt2.4/demos)
(cd demos/bitmaps; install -c -m 644 *.xbm %i/lib/blt2.4/demos/bitmaps)
(cd demos/bitmaps/fish; install -c -m 644 *.xbm %i/lib/blt2.4/demos/bitmaps/fish)
(cd demos/bitmaps/hand; install -c -m 644 *.xbm %i/lib/blt2.4/demos/bitmaps/hand)
(cd demos/images; install -c -m 644 *.gif *.ps %i/lib/blt2.4/demos/images)
(cd demos/scripts; install -c -m 644 *.tcl %i/lib/blt2.4/demos/scripts)
(cd library; install -c -m 644 *.pro *.tcl *.xbm tclIndex %i/lib/blt2.4)
(cd library/dd_protocols; install -c -m 644 *.tcl tclIndex %i/lib/blt2.4/dd_protocols)
(cd man; install -c -m 644 *.3 %i/share/man/man3)
(cd src; install -c -m 0755 bltwish bltsh %i/bin)
(cd src; install -c -m 644 blt.h bltBind.h bltChain.h bltHash.h bltList.h bltPool.h bltTree.h bltVector.h %i/include)
(cd src; install -c -m 644 libBLT.a libBLTlite.a %i/lib)
(cd %i/lib; gcc -dynamiclib -o libBLT.2.4.dylib -install_name %p/lib/libBLT.2.dylib -compatibility_version 2.0 -current_version 2.4 -all_load libBLT.a -L%p/lib -ltk -ltcl -L/usr/X11R6/lib -lX11)
(cd %i/lib; ln -s libBLT.2.4.dylib libBLT.2.dylib; ln -s libBLT.2.4.dylib libBLT.dylib)
(cd %i/lib; gcc -dynamiclib -o libBLTlite.2.4.dylib -install_name %p/lib/libBLTlite.2.dylib -compatibility_version 2.0 -current_version 2.4 -all_load libBLTlite.a -L%p/lib -ltcl)
(cd %i/lib; ln -s libBLTlite.2.4.dylib libBLTlite.2.dylib; ln -s libBLTlite.2.4.dylib libBLTlite.dylib)
(cd %i/lib; ln -s libBLT.2.4.dylib libBLT24.dylib; ln -s libBLTlite.2.4.dylib libBLTlite24.dylib) 
<<
DocFiles: PROBLEMS NEWS README
SplitOff: <<
 Package: %N-shlibs
 Depends: tcltk
 Files: lib/*.*.dylib lib/*24.dylib
 Shlibs: <<
  %p/lib/libBLT.2.dylib %n (>= %v-%r)
  %p/lib/libBLTlite.2.dylib %n (>= %v-%r)
 <<
 DocFiles: PROBLEMS NEWS README
<<
SplitOff2: <<
 Package: %N-dev
 Depends: %N-shlibs (= %v-%r)
 Files: include lib/*.a lib/*.dylib
 DocFiles: PROBLEMS NEWS README
 BuildDependsOnly: True
<<
Description: Toolkit for tcl/tk
DescPort: Patch configure so the tcl/tk libraries can be found.
DescPackaging: <<
Everything installed mannually due to an evil install script.
<<
License: BSD
Homepage: http://sourceforge.net/projects/blt