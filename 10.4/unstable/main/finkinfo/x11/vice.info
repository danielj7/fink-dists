Package: vice
Version: 1.20
Revision: 11
Maintainer: None <fink-devel@lists.sourceforge.net>
GCC: 4.0
BuildDepends: libjpeg, libpng3, audiofile, esound, giflib, gnome-keyring-dev, libart2, libbonoboui2-dev, libgnome2-dev, libgnomecanvas2-dev, libgnomeui2-dev, readline5, libgettext3-dev, gettext-bin, gettext-tools, libnet1.0, libpcap, x11-dev
Depends: libjpeg-shlibs, libpng3-shlibs, audiofile-shlibs, giflib-shlibs, libgnomeui2, readline5-shlibs, libgettext3-shlibs, libpcap-shlibs, x11
#Source: ftp://ftp.funet.fi/pub/cbm/crossplatform/emulators/VICE/%n-%v.tar.gz
Source: http://www.zimmers.net/anonftp/pub/cbm/crossplatform/emulators/VICE/%n-%v.tar.gz
Source-MD5: d02fe05f0f9e839820105cdf51da6b4e
Source2: http://developer.apple.com/samplecode/HID_Utilities_Source/HID_Utilities_Source.zip
Source2-MD5: 78ba0e81baccda79839fef8252c4f5c9
Source2ExtractDir: %n-%v
DocFiles: AUTHORS COPYING ChangeLog FEEDBACK README
Patch: %n.patch
SetCPPFLAGS: -no-cpp-precomp -I.
SetLDFLAGS: -L.
ConfigureParams: --infodir=%p/share/info --mandir=%p/share/man --enable-gnomeui --enable-ethernet --disable-dependency-tracking --enable-fullscreen
CompileScript: <<
  #!/bin/sh
  for src in HID_Config_Utilities HID_Error_Handler HID_Name_Lookup HID_Queue_Utilities HID_Transaction_Utilities HID_Utilities
  do gcc -O3 -W -c "HID Utilities Source/$src.c"
  ar cr libHIDUtilities.a $src.o
  done ; ranlib libHIDUtilities.a
  cp "HID Utilities Source/HID_Utilities_External.h" .
  cp HID_Utilities_External.h libHIDUtilities.a src
  RANLIB="ranlib -c -s" ac_cv_lib_ungif_EGifPutLine=no ./configure %c
  make
<<
InstallScript: make install DESTDIR=%d docdir=%p/share/doc/vice
InfoDocs: vice.info
Description: Versatile Commodore Emulator
DescDetail: <<
VICE is a set of accurate emulators for the Commodore 64, 128, VIC20,
PET and CBM-II 8-bit computers, all of which run under the X Window
System.
<<
DescPort: <<
Apple's ld complains if we don't use ranlib -s to sort libs.  We need
-no-cpp-precomp or else src/drive/drivecpu.c fails to compile.
The -c flag to ranlib is needed to avoid undefined symbols errors.

Don't throw away -lintl for remainder of ./configure if it is found to
be a desireable flag. Otherwise gettext catalogs wind up in lib/
instead of share/

Multiple games required to pass docdir for various usages.

Use -lesd as a linker flag only, not a dependency
<<
DescPackaging: <<
  Force use of giflib (ungiflib would be detected first, but it may or
  may not really be a link to giflib, so no way to write a dependency).
  Removed the dependency on imlib-shlibs and the build dependency on
  imlib, but have not tried building on a system with neither installed.
  If the build fails, try installing imlib first.
<<
License: GPL
Homepage: http://www.viceteam.org/
