diff -ruN php-4.4.2.orig/configure php-4.4.2/configure
--- php-4.4.2.orig/configure	2006-01-12 11:24:23.000000000 -0700
+++ php-4.4.2/configure	2006-06-23 12:17:19.000000000 -0600
@@ -102002,10 +102002,10 @@
     #        cross-compilation, but unfortunately the echo tests do not
     #        yet detect zsh echo's removal of \ escapes.  Also zsh mangles
     #	     `"' quotes if we put them in here... so don't!
-    archive_cmds='$CC -r -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs && $CC $(test .$module = .yes && echo -bundle || echo -dynamiclib) $allow_undefined_flag -o $lib ${lib}-master.o $deplibs$linker_flags $(test .$module != .yes && echo -install_name $rpath/$soname $verstring)'
+    archive_cmds='$nonopt -r -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs && $nonopt $(test .$module = .yes && echo -bundle $allow_undefined_flag || echo -dynamiclib) -o $lib ${lib}-master.o $deplibs$linker_flags $(test .$module != .yes && echo -install_name $rpath/$soname $verstring)'
     # We need to add '_' to the symbols in $export_symbols first
     #archive_expsym_cmds="$archive_cmds"' && strip -s $export_symbols'
-    hardcode_direct=yes
+    hardcode_direct=no
     hardcode_shlibpath_var=no
     whole_archive_flag_spec='-all_load $convenience'
     ;;
diff -ruN php-4.4.2.orig/ext/gd/gdcache.c php-4.4.2/ext/gd/gdcache.c
--- php-4.4.2.orig/ext/gd/gdcache.c	2005-01-09 14:05:31.000000000 -0700
+++ php-4.4.2/ext/gd/gdcache.c	2006-06-23 12:17:19.000000000 -0600
@@ -52,8 +52,21 @@
 /* implementation                                        */
 /*********************************************************/
 
-
 /* create a new cache */
+#ifdef __APPLE__
+extern gdCache_head_t *
+gdCacheCreate(
+        int                                     size,
+        gdCacheTestFn_t         gdCacheTest,
+        gdCacheFetchFn_t        gdCacheFetch,
+        gdCacheReleaseFn_t      gdCacheRelease );
+
+extern void
+gdCacheDelete( gdCache_head_t *head );
+
+extern void *
+gdCacheGet( gdCache_head_t *head, void *keydata );
+#else
 gdCache_head_t *
 gdCacheCreate(
 	int					size,
@@ -130,7 +143,7 @@
 	elem->userdata = userdata;
 	return userdata;
 }
-
+#endif
 
 
 /*********************************************************/
diff -ruN php-4.4.2.orig/fink/php4.conf php-4.4.2/fink/php4.conf
--- php-4.4.2.orig/fink/php4.conf	1969-12-31 17:00:00.000000000 -0700
+++ php-4.4.2/fink/php4.conf	2006-06-23 12:16:08.000000000 -0600
@@ -0,0 +1,2 @@
+AddType application/x-httpd-php .php .phtml .php3
+AddType application/x-httpd-php-source .phps
diff -ruN php-4.4.2.orig/fink/php4.load php-4.4.2/fink/php4.load
--- php-4.4.2.orig/fink/php4.load	1969-12-31 17:00:00.000000000 -0700
+++ php-4.4.2/fink/php4.load	2006-06-23 16:24:35.000000000 -0600
@@ -0,0 +1 @@
+LoadModule php4_module @FINKPREFIX@/lib/apache2/modules/libphp4.so
