diff -urN fop-0.20.5.orig/fop.sh fop-0.20.5/fop.sh
--- fop-0.20.5.orig/fop.sh	2003-07-15 04:03:23.000000000 +0200
+++ fop-0.20.5/fop.sh	2004-02-11 16:33:45.000000000 +0100
@@ -11,7 +11,11 @@
 darwin=false;
 case "`uname`" in
   CYGWIN*) cygwin=true ;;
-  Darwin*) darwin=true ;;
+  Darwin*) darwin=true 
+           if [ -z "$JAVA_HOME" ] ; then
+             JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home
+           fi
+           ;;
 esac
 
 if [ -z "$FOP_HOME" ] ; then
@@ -100,5 +104,5 @@
   LOCALCLASSPATH=`cygpath --path --windows "$LOCALCLASSPATH"`
 fi
 
-$JAVACMD -classpath "$LOCALCLASSPATH" $FOP_OPTS org.apache.fop.apps.Fop "$@"
+$JAVACMD -Djava.awt.headless=true -classpath "$LOCALCLASSPATH" $FOP_OPTS org.apache.fop.apps.Fop "$@"
 
--- fop-0.20.5.orig/fop.sh	2004-05-29 16:40:53.000000000 +0200
+++ fop-0.20.5/fop.sh	2004-06-02 19:23:57.000000000 +0200
@@ -46,6 +46,8 @@
 
 fi
 
+FOP_HOME=@PREFIX@/share/java/fop
+
 # For Cygwin, ensure paths are in UNIX format before anything is touched
 if $cygwin ; then
   [ -n "$FOP_HOME" ] &&
@@ -80,10 +82,10 @@
 fi
 
 # add fop.jar, which resides in $FOP_HOME/build
-LOCALCLASSPATH=${FOP_HOME}/build/fop.jar:$LOCALCLASSPATH
+LOCALCLASSPATH=${FOP_HOME}/fop.jar:$LOCALCLASSPATH
 
 # add in the dependency .jar files, which reside in $FOP_HOME/lib
-DIRLIBS=${FOP_HOME}/lib/*.jar
+DIRLIBS=${FOP_HOME}/*.jar
 for i in ${DIRLIBS}
 do
     # if the directory is empty, then it will return the input string
