# HG changeset patch
# User Jesus Cea <jcea@jcea.es>
# Date 1326754366 -3600
# Node ID 36776da36249ee9c701391407aa3c1e4265356bc
# Parent  8b4a6123ce5b57c9601d9ecdf763dab2ecea1f4c
Erratic behaviour of DBEnv-

diff -r 8b4a6123ce5b -r 36776da36249 Modules/_bsddb.c
--- a/Modules/_bsddb.c	Mon Jan 16 20:35:06 2012 +0100
+++ b/Modules/_bsddb.c	Mon Jan 16 23:52:46 2012 +0100
@@ -7540,7 +7540,7 @@
     }
     CHECK_ENV_NOT_CLOSED(self);
     MYDB_BEGIN_ALLOW_THREADS;
-    err = self->db_env->rep_elect(self->db_env, nvotes, nvotes, 0);
+    err = self->db_env->rep_elect(self->db_env, nsites, nvotes, 0);
     MYDB_END_ALLOW_THREADS;
     RETURN_IF_ERR();
     RETURN_NONE();
