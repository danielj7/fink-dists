Package: clisp
Version: 2.46
Revision: 6
License: GPL
Description: ANSI Common Lisp implementation
Maintainer: elcepi <elcepi@users.sourceforge.net>

Depends: libgettext3-shlibs, libsigsegv-shlibs (>=1:2.5-3), libsigsegv-shlibs ( <<1:2.5-999), libncurses5-shlibs, libiconv, ffcall, readline5-shlibs
BuildDepends: libgettext3-dev, libsigsegv (>=1:2.5-3), libsigsegv ( <<1:2.5-999 ), libncurses5, fink (>= 0.24.12), libiconv-dev, readline5

Source: mirror:sourceforge:%n/%n-%v.tar.bz2
Source-MD5: 8c4d8ed0f40e01999c4d799328a86c39

GCC: 4.0
PatchFile: %n.patch
PatchFile-MD5: 3cf32587c2b70e64b2f73568a2b4d612
PatchScript: <<
  %{default_script}
  sed -i.bak -e '/sed -e .*s[/]\.\*[/][/]/s, sed, /usr/bin/sed,' -e '/lispbibl.* sed/s, sed, /usr/bin/sed,' src/makemake.in
<<
ConfigureParams: --with-libsigsegv-prefix=%p --with-ffcall-prefix=%p --with-dynamic-modules --docdir=%p/share/doc/%n
# What's wrong with " --with-dynamic-ffi" (assumming ffcall installed _ is latest version, from same author !) ??

CompileScript: <<
#!/bin/sh -ev
  ulimit -S -s 16384
  ./configure %c
  cd src
  make || ( rm config.cache ; make )
<<

InfoTest:<<
   TestScript: <<
     #!/bin/sh -ev
        ulimit -S -s 16384
        cd src
     	make check
   <<
<<

InstallScript: <<
#!/bin/sh -ev
  cd src
  make DESTDIR=%d install
  cd %i/lib/clisp-%v/base
  rm -f *
  ln -s ../full/* .
  chmod a+x %i/lib/clisp-%v/clisp-link
  rm -fR %i/bin/clisp.dSYM
  # remove duplicate files
  rm -f %i/share/doc/%n/doc/%n.*
<<

DescDetail: <<
A feature loaded common lisp programming environment with unicode
support, excellent ANSI compliance, and a full-featured MOP.
<<

DescPort: <<
There is a problem with the build script that causes make to fail.  Removing
src/config.cache and run make agains correct the problem.
FFI is not working.
<<

Homepage: http://clisp.cons.org
DocFiles: GNU-GPL COPYRIGHT SUMMARY doc/Why-CLISP-is-under-GPL
