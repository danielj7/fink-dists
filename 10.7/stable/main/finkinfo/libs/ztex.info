Package: ztex
Version: 110721
Revision: 1
Maintainer: Sjors Gielen <fink@sjorsgielen.nl>
Depends: system-java
BuildDepends: fink (>= 0.24.12), fpc, system-java-dev, sdcc

Source: http://www.ztex.de/downloads/%n-%v.tar.bz2
Source-MD5: d2b87cb400148771545dd61cb33db730
SourceDirectory: ztex

PatchFile: %n.patch
PatchFile-MD5: 5d5e27c5ac7dcdecfd64fbfc678d94b5
PatchScript: sed -e 's,@@PREFIX@@,%p,g' %{PatchFile} | patch -p1

CompileScript: <<
	make distclean
	make all
<<

InstallScript: <<
	/usr/bin/install -m 755 -d %i/share/%n
	/usr/bin/install -m 755 -d %i/share/doc/%n
	/usr/bin/install -m 644 Makefile.mk %i/share/%n

	/bin/cp -R docs/ %i/share/doc/%n/docs
	/bin/cp -R examples/ %i/share/doc/%n/examples
	/bin/cp -R bin/ %i/share/%n/bin
	/bin/cp -R java/ %i/share/%n/java
	/bin/cp -R include/ %i/share/%n/include
	/bin/cp -R libusbJava/ %i/share/%n/libusbJava
<<

Description: Firmware development kit for ZTEX USB board
Homepage: http://www.ztex.de/usb-1/usb-1.0.e.html
License: GPL3
DescDetail: <<
This SDK is especially designed for the ZTEX boards, but also works with other
EZ-USB FX2 based hardware. The SDK consists in a Firmware Development Kit for
EZ-USB FX2 devices and a Java API for the development of the host software.

A unique macro approach gives developers a maximum of flexibility in endpoint
setup just by calling a few macros and without the need of studying the USB
specification. These features distinguish the ZTEX SDK from the products of
competitors.
<<
DescPort: <<
- A distclean of bmp and libusbJava-src now also removes its install2 targets
- A `make all` actually builds all buildable files now, including those that are removed by the more aggressive distclean
- Use `bash` for bmp configure script instead of `sh`, as bash `echo` understands -n and -s and sh `echo` leaves them in literally, breaking the script
- Use -S with strip to tell it what to do
- Make sure the libraries are called .jnilib instead of .so, as Java wants them named like that
- Load libraries and headers from the Fink directories (this is a typical change you probably do not want to import at all)
- Remove linker options: Mac doesn't have soname
- In retrieving the operating system architecture, accept x86_64 as an alias to amd64
<<
