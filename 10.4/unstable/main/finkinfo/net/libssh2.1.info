Package: libssh2.1
Version: 0.18
Revision: 2
Description: Library implementing the SSH2 protocol
Maintainer: Daniel Johnson <daniel@daniel-johnson.org>
Homepage: http://www.libssh2.org
License: BSD
DescPackaging: <<
  The actual name of this library is libssh2; the "2" has
  nothing to do with the version number. The major version
  number is actually 1.
  
  No longer build static libs.
  
  Packages depending on libssh2.1 no longer need to depend on its dependencies,
  just Depend on libssh2.1-shlibs and BuildDepend on libssh2.1.
<<

Source: mirror:sourceforge:libssh2/libssh2-%v.tar.gz
Source-MD5: 5b9c83660aa4d1821ff2c05838e77e9d

Depends: %N-shlibs (= %v-%r)
BuildDepends: system-openssl-dev, fink (>= 0.24.12)
BuildDependsOnly: true
Conflicts: libssh2
Replaces: libssh2

NoSetCPPFLAGS: true
NoSetLDFLAGS: true
ConfigureParams: --with-openssl=%p/lib/system-openssl --with-libz=/usr --disable-dependency-tracking --disable-static

InstallScript: <<
  make install DESTDIR=%d
  #No need for dependency_libs in .la files if not building static libs
  perl -pi -e "s/dependency_libs=.*$/dependency_libs=''/" %i/lib/*.la
<<

DocFiles: AUTHORS ChangeLog COPYING INSTALL NEWS README

SplitOff: <<
  Package: %N-shlibs
  
  Files: lib/libssh2.1.0.0.dylib lib/libssh2.1.dylib
  Shlibs: %p/lib/libssh2.1.dylib 2.0.0 %n (>= 0.14.99-1)
  DocFiles: AUTHORS ChangeLog COPYING INSTALL NEWS README
<<

InfoTest: <<
  TestScript: make check || exit 2
<<
