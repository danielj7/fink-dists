diff -ru cffi-1.3.0.orig/testing/cffi1/test_recompiler.py cffi-1.3.0/testing/cffi1/test_recompiler.py
--- cffi-1.3.0.orig/testing/cffi1/test_recompiler.py	2015-10-21 06:51:22.000000000 -0400
+++ cffi-1.3.0/testing/cffi1/test_recompiler.py	2015-10-24 18:00:18.000000000 -0400
@@ -1204,7 +1204,7 @@
     assert foo_s.fields[1][1].type is ffi.typeof("void *")
 
 def test_restrict_fields():
-    if sys.platform == 'win32':
+    if sys.platform == 'win32' or sys.platform == 'darwin':
         py.test.skip("'__restrict__' probably not recognized")
     ffi = FFI()
     ffi.cdef("""struct foo_s { void * restrict b; };""")
diff -ru cffi-1.3.0.orig/testing/cffi1/test_verify1.py cffi-1.3.0/testing/cffi1/test_verify1.py
--- cffi-1.3.0.orig/testing/cffi1/test_verify1.py	2015-10-21 06:51:22.000000000 -0400
+++ cffi-1.3.0/testing/cffi1/test_verify1.py	2015-10-24 17:59:15.000000000 -0400
@@ -2102,7 +2102,7 @@
         ffi1 = FFI()
         ffi1.cdef("int foo_verify_dlopen_flags;")
         sys.setdlopenflags(ffi1.RTLD_GLOBAL | ffi1.RTLD_NOW)
-        lib1 = ffi1.verify("int foo_verify_dlopen_flags;")
+        lib1 = ffi1.verify("int foo_verify_dlopen_flags;", extra_link_args=["-Wl,-flat_namespace"])
     finally:
         sys.setdlopenflags(old)
 
@@ -2111,7 +2111,7 @@
     lib2 = ffi2.verify("""
         extern int foo_verify_dlopen_flags;
         static int *getptr(void) { return &foo_verify_dlopen_flags; }
-    """)
+    """, extra_link_args=["-Wl,-flat_namespace", "-Wl,-undefined,suppress"])
     p = lib2.getptr()
     assert ffi1.addressof(lib1, 'foo_verify_dlopen_flags') == p
 
