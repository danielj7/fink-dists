Package: udpcast
Version: 20090912
Revision: 4
BuildDependsOnly: false
Source: http://udpcast.linux.lu/download/%n-%v.tar.gz
Source-MD5: fc41aaabb982bb4e5e55b2adc146fb14
SetCFLAGS: -Os
ConfigureParams: --mandir=%p/share/man
PatchScript: perl -pi -e "s,-DUSE_ASSEMBLER,,g" Makefile.in
CompileScript: <<
	./configure %c
	%p/lib/coreutils/bin/echo -e "\n#include <stdlib.h>\n#ifndef HAVE_STRNDUP\nstatic void\*\nstrndup \(const char \*src\, size_t n\)\n\{\n       size_t i;\n       char \*dst;\n\n       if \(src == NULL\)\n               return NULL;\n\n       dst = \(char*\) malloc \(n + 1\);\n       if \(dst != NULL\) \{\n               for \(i = 0; i \< n \&\& src\[i\]; i++\)\n                       dst\[i\] = src\[i\];\n               dst\[i\] = '\\\0';\n       \}\n\n       return dst;\n\}\n#define HAVE_STRNDUP\n#endif" |sed 's,\\,,g' >> config.h
	make
<<
InstallScript: make install DESTDIR=%d
DocFiles: COPYING
License: GPL
# One file is BSD-licensed in fact, but GPL/BSD isn't accepted.
Homepage: http://udpcast.linux.lu
Maintainer: Jack Fink <jackfink@users.sourceforge.net>
Description: Multicast file transfer utility

