diff -ru teTeX-src-2.0-rc1/texk/klibtool teTeX-src-2.0-rc1-patched/texk/klibtool
--- teTeX-src-2.0-rc1/texk/klibtool	Mon Nov 11 04:43:05 2002
+++ teTeX-src-2.0-rc1-patched/texk/klibtool	Thu Jan 30 15:33:52 2003
@@ -322,6 +322,10 @@
         ;;
 
       *-*-darwin*)
+        shared_support=true
+        shared_ext=dylib
+        args_SHARED_compile='-fPIC -fno-common'
+        args_SHARED_archive='-dynamiclib -install_name @PREFIX@/lib/$lib_basename -compatibility_version $verstring -current_version $verstring'
         STATIC_postinstall='$STATIC_ranlib $libdir/$lib_basename'
         ;;
 
@@ -412,7 +416,7 @@
                 $verbose "$0: running $0 version $newarg."
                 verstring=`$0 version $newarg`
                 $verbose "$0: got version $verstring."
-                libname=`echo $newarg | sed 's/\.a$/\.'$shared_ext$verstring/`
+                libname=`echo $newarg | sed 's/\.a$/\.'$verstring'\.'$shared_ext/`
               else
                 libname=$newarg
               fi
@@ -422,7 +426,7 @@
                 lib_dir=.
               fi
               lib_basename=`basename $libname`
-              lib_base=`echo $lib_basename | sed 's/[.0-9]*$//'`
+              lib_base=`echo $lib_basename | sed 's/[.0-9]*\./\./'`
               
               # We might have to run a command after making the library.
               post=
@@ -609,7 +613,7 @@
         case $ot in
           SHARED) # needs shared extension and version number.
             verstring=`$0 version $arg`
-            libname=`echo $arg | sed 's/\.la$/\.'$shared_ext$verstring/`
+            libname=`echo $arg | sed 's/\.la$/\.'$verstring'\.'$shared_ext/`
             ;;
           STATIC) # just get rid of the `l'.
             libname=`echo $arg | sed 's/l\(.\)$/\1/'`
@@ -628,7 +632,7 @@
         #
         if test $ot = SHARED; then
           # Link libfoo.so to libfoo.so.1.2.3.
-          lib_base=`echo $lib_basename | sed 's/[.0-9]*$//'`          
+          lib_base=`echo $lib_basename | sed 's/[.0-9]*\./\./'`          
           $verbose "$0: linking $libdir/$lib_base to $lib_basename"
           (cd $libdir && rm -f $lib_base && ln -s $lib_basename $lib_base)
         fi
@@ -694,7 +698,7 @@
       exit 1
     fi
     $verbose "$0: dir = $dir, libname = $libname."
-    version=`awk '$1 == "'$libname'" { print "." $2 "." $3 "." $4 }' $verfile`
+    version=`awk '$1 == "'$libname'" { print $2 "." $3 "." $4 }' $verfile`
     $verbose "$0: version for $libname = $version."
     echo $version
     ;;
diff -ru tetex-src-2.0-rc2/Makefile.in tetex-src-2.0-rc2-patched/Makefile.in
--- tetex-src-2.0-rc2/Makefile.in	Thu Jan 23 15:17:54 2003
+++ tetex-src-2.0-rc2-patched/Makefile.in	Sat Feb  1 14:36:49 2003
@@ -60,18 +60,18 @@
 	done
 	$(srcdir)/selfautofix "$(bindir)" "$(texmf)/web2c"
 	cd $(bindir); for i in $(ALLPROGS); do test -f $$i && echo strip $$i && strip $$i || true; done
-	if test -f $(scriptdir)/mktexlsr; then \
-	  TEXMFMAIN=$(texmf) PATH=$(scriptdir):$(bindir):$(PATH) \
-	    $(scriptdir)/mktexlsr; \
-	else :; fi
-	if test -f $(scriptdir)/fmtutil; then \
-	  TEXMFMAIN=$(texmf) PATH=$(scriptdir):$(bindir):$(PATH) \
-	    $(scriptdir)/fmtutil --all; \
-	else :; fi
-	if test -f $(scriptdir)/texlinks; then \
-	  TEXMFMAIN=$(texmf) PATH=$(scriptdir):$(bindir):$(PATH) \
-	    $(scriptdir)/texlinks; \
-	else :; fi
+#	if test -f $(scriptdir)/mktexlsr; then \
+#	  TEXMFMAIN=$(texmf) PATH=$(scriptdir):$(bindir):$(PATH) \
+#	    $(scriptdir)/mktexlsr; \
+#	else :; fi
+#	if test -f $(scriptdir)/fmtutil; then \
+#	  TEXMFMAIN=$(texmf) PATH=$(scriptdir):$(bindir):$(PATH) \
+#	    $(scriptdir)/fmtutil --all; \
+#	else :; fi
+#	if test -f $(scriptdir)/texlinks; then \
+#	  TEXMFMAIN=$(texmf) PATH=$(scriptdir):$(bindir):$(PATH) \
+#	    $(scriptdir)/texlinks; \
+#	else :; fi
 
 install-exec:
 	for dir in $(ESUBDIRS); do \
diff -ru tetex-src-2.0-rc2/texk/kpathsea/texmf.in tetex-src-2.0-rc2-patched/texk/kpathsea/texmf.in
--- tetex-src-2.0-rc2/texk/kpathsea/texmf.in	Sun Jan 19 06:58:27 2003
+++ tetex-src-2.0-rc2-patched/texk/kpathsea/texmf.in	Sun Feb  2 10:28:22 2003
@@ -65,7 +65,7 @@
 %   VARTEXMF = @texmf@-var
 
 % User texmf trees can be catered for like this...
-HOMETEXMF = $HOME/texmf
+HOMETEXMF = $HOME/Library/texmf
 
 % Now, list all the texmf trees. If you have multiple trees you can
 % use shell brace notation, like this:
