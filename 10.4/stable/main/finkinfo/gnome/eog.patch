diff -Nurd -x'*~' eog-2.24.2.orig/bindings/python/Makefile.am eog-2.24.2/bindings/python/Makefile.am
--- eog-2.24.2.orig/bindings/python/Makefile.am	2008-10-20 12:31:55.000000000 -0400
+++ eog-2.24.2/bindings/python/Makefile.am	2008-11-27 12:09:53.000000000 -0500
@@ -13,7 +13,7 @@
 	$(PYTHON_EXTRA_LIBS)	\
 	$(PYGTK_LIBS)
 
-eog_la_CFLAGS = 					\
+eog_la_CPPFLAGS = 					\
 	-I$(top_srcdir)					\
 	-I$(top_builddir)				\
 	-I$(top_srcdir)/src				\
diff -Nurd -x'*~' eog-2.24.2.orig/configure.ac eog-2.24.2/configure.ac
--- eog-2.24.2.orig/configure.ac	2008-11-24 16:52:54.000000000 -0500
+++ eog-2.24.2/configure.ac	2008-11-27 12:54:37.000000000 -0500
@@ -32,8 +32,7 @@
 AC_PROG_LIBTOOL
 
 AC_ISC_POSIX
-AC_PROG_CC
-AM_PROG_CC_STDC
+AM_PROG_CC_C_O
 AC_HEADER_STDC
 AC_PATH_PROG([GLIB_GENMARSHAL], [glib-genmarshal])
 AC_PATH_PROG([GLIB_MKENUMS],[glib-mkenums])
@@ -109,6 +108,21 @@
 	     shared-mime-info >= $SHARED_MIME_INFO_REQUIRED"
 
 # ***************
+# ZLIB (required)
+# ***************
+
+have_zlib=yes
+AC_CHECK_HEADERS([zlib.h],
+	[AC_CHECK_LIB([z], [inflate],
+		[AC_CHECK_LIB([z], [crc32], [], [have_zlib=no])],
+		[have_zlib=no])],
+	[have_zlib=no])
+
+if test x$have_zlib = xno; then
+	AC_MSG_ERROR([No sufficient zlib library found on your system.])
+fi
+
+# ***************
 # EXIF (optional)
 # ***************
 
diff -Nurd -x'*~' eog-2.24.2.orig/cut-n-paste/toolbar-editor/Makefile.am eog-2.24.2/cut-n-paste/toolbar-editor/Makefile.am
--- eog-2.24.2.orig/cut-n-paste/toolbar-editor/Makefile.am	2008-10-20 12:31:55.000000000 -0400
+++ eog-2.24.2/cut-n-paste/toolbar-editor/Makefile.am	2008-11-27 12:11:21.000000000 -0500
@@ -21,12 +21,10 @@
 
 libtoolbareditor_la_CPPFLAGS = \
 	-I$(top_builddir)/lib/egg		\
-	$(AM_CPPFLAGS)
-
-libtoolbareditor_la_CFLAGS = \
 	$(EOG_CFLAGS)				\
 	$(WARN_CFLAGS)				\
-	-DCURSOR_DIR=\"$(pkgdatadir)\"
+	-DCURSOR_DIR=\"$(pkgdatadir)\"		\
+	$(AM_CPPFLAGS)
 
 BUILT_SOURCES = \
 	eggmarshalers.c \
diff -Nurd -x'*~' eog-2.24.2.orig/cut-n-paste/totem-screensaver/Makefile.am eog-2.24.2/cut-n-paste/totem-screensaver/Makefile.am
--- eog-2.24.2.orig/cut-n-paste/totem-screensaver/Makefile.am	2008-10-20 12:31:55.000000000 -0400
+++ eog-2.24.2/cut-n-paste/totem-screensaver/Makefile.am	2008-11-27 12:09:26.000000000 -0500
@@ -4,7 +4,7 @@
 	totem-scrsaver.h \
 	totem-scrsaver.c
 
-libtotemscrsaver_la_CFLAGS = \
+libtotemscrsaver_la_CPPFLAGS = \
 	-I$(top_srcdir)/src	\
 	$(EOG_CFLAGS)		\
 	$(WARN_CFLAGS)
diff -Nurd -x'*~' eog-2.24.3.orig/src/Makefile.am eog-2.24.3/src/Makefile.am
--- eog-2.24.3.orig/src/Makefile.am	2008-12-13 06:53:59.000000000 -0500
+++ eog-2.24.3/src/Makefile.am	2009-01-13 03:36:48.000000000 -0500
@@ -141,7 +141,7 @@
 	eog-exif-details.c
 endif
 
-libeog_la_CFLAGS =						\
+libeog_la_CPPFLAGS =						\
 	-I$(top_srcdir)/jpegutils				\
 	-I$(top_srcdir)/cut-n-paste/toolbar-editor		\
 	-I$(top_srcdir)/cut-n-paste/totem-screensaver		\
@@ -155,11 +155,10 @@
 	-DEOG_PLUGIN_DIR=\""$(libdir)/eog/plugins"\"
 
 libeog_la_LIBADD = \
-	$(EOG_LIBS) \
-	-lz
+	$(EOG_LIBS)
 
 if ENABLE_PYTHON
-libeog_la_CFLAGS += 			\
+libeog_la_CPPFLAGS += 			\
 	$(NO_STRICT_ALIASING_CFLAGS)	\
 	$(PYGTK_CFLAGS)			\
 	$(PYTHON_CFLAGS)		\
@@ -179,7 +178,7 @@
 	$(toolbar_DEPS)     \
 	$(screensaver_DEPS)
 
-eog_CFLAGS = 							\
+eog_CPPFLAGS = 							\
 	-I$(top_srcdir)/cut-n-paste/toolbar-editor		\
 	-I$(top_srcdir)/cut-n-paste/totem-screensaver		\
 	$(EOG_CFLAGS)						\
diff -Nurd -x'*~' eog-2.24.2.orig/src/eog-metadata-reader-png.c eog-2.24.2/src/eog-metadata-reader-png.c
--- eog-2.24.2.orig/src/eog-metadata-reader-png.c	2008-10-20 12:31:54.000000000 -0400
+++ eog-2.24.2/src/eog-metadata-reader-png.c	2008-11-27 12:58:33.000000000 -0500
@@ -79,7 +79,6 @@
 	gsize      bytes_read;
 	guint	   sub_step;
 	guchar	   chunk_name[4];
-	guint32	   chunk_name_crc;
 	gpointer   *crc_chunk;
 	guint32	   *crc_len;
 	guint32    target_crc;
@@ -253,10 +252,7 @@
 
 			priv->chunk_name[priv->sub_step] = buf[i];
 
-			if (priv->sub_step++ == 3)
-				/* Take the CRC32 from the chunk name for later */
-				priv->chunk_name_crc = crc32 (crc32 (0L, Z_NULL, 0), priv->chunk_name, 4);
-			else
+			if (priv->sub_step++ != 3)
 				break;
 
 			if (G_UNLIKELY (!priv->hasIHDR)) {
@@ -325,11 +321,9 @@
 			if (priv->sub_step++ != 3)
 				break;
 
-			/* ...generate the chunks CRC32, merge it with the 
-			 * chunk name's CRC32 value... */
-			chunk_crc = crc32 (0L, Z_NULL, 0);
+			/* ...generate the chunks CRC32,... */
+			chunk_crc = crc32 (crc32 (0L, Z_NULL, 0), priv->chunk_name, 4);
 			chunk_crc = crc32 (chunk_crc, *priv->crc_chunk, *priv->crc_len);
-			chunk_crc = crc32_combine (priv->chunk_name_crc, chunk_crc, *priv->crc_len);
 
 			eog_debug_message (DEBUG_IMAGE_DATA, "Checking CRC: Chunk: 0x%X - Target: 0x%X", chunk_crc, priv->target_crc);
 
