Package: emboss
Version: 3.0.0
Revision: 100
Depends: %N-ajax3-shlibs (>= %v-%r), %N-nucleus3-shlibs (>= %v-%r), %N-plplot5-shlibs (>= %v-%r), x11, libpng3-shlibs, libjpeg-shlibs, gd2-shlibs, system-java14
BuildDepends: libpng3, libjpeg, gd2, libiconv-dev, x11-dev, system-java14-dev
#Replaces: emboss (<< 2.7.1-2)
Source: mirror:custom:EMBOSS-%v.tar.gz
CustomMirror: <<
  Primary: ftp://emboss.open-bio.org/pub/EMBOSS/
<<
Source-MD5: fa72feded9ab9272e3e731c09f545dcc
Patch: %n.patch
PatchScript: <<
  perl -pi -e 's,([<"])(pcre)(.*.h[>"]),\1EMBOSS/\2\3,' ajax/*
  perl -pi -e 's,(pcre\S*\.h),EMBOSS/\1,g' ajax/Makefile.in
  mkdir ajax/EMBOSS
  mv ajax/pcre*.h ajax/EMBOSS
<<
ConfigureParams: --with-java=/System/Library/Frameworks/JavaVM.framework/Versions/1.4.2/Home --with-javaos=/System/Library/Frameworks/JavaVM.framework/Versions/1.4.2/Home/include --disable-dependency-tracking --libdir=%p/lib/EMBOSS
Installscript: <<
  make install DESTDIR=%d
  mkdir -p %i/include/EMBOSS
  mv %i/include/*.* %i/include/EMBOSS/
  ln -s EMBOSS/lib{ajax,ajaxg,nucleus,plplot}.dylib %i/lib
  mv %i/lib/EMBOSS/*.*a %i/lib
<<

SplitOff10: <<
  Package: %N-ajax3-shlibs
  Depends: %N-plplot5-shlibs (>= %v-%r), libpng3-shlibs, libjpeg-shlibs, gd2-shlibs, libiconv
  DocFiles: ChangeLog COPYING README
  Files: <<
    lib/EMBOSS/libajax.3*.dylib
    lib/EMBOSS/libajaxg.3*.dylib
  <<
  Shlibs: <<
    %p/lib/EMBOSS/libajax.3.dylib 4.0.0 %n (>= 3.0.0-4)
    %p/lib/EMBOSS/libajaxg.3.dylib 4.0.0 %n (>= 3.0.0-4)
  <<
<<
SplitOff11: <<
  Package: %N-ajax3-dev
  Depends: %N-ajax3-shlibs (= %v-%r)
  Conflicts: %N-dev
  Replaces: %N-dev
  DocFiles: ChangeLog COPYING README
  Files: <<
    lib/libajax*
    lib/EMBOSS/libajax*
    include/EMBOSS/aj*.h
    include/EMBOSS/pcre*
  <<
  BuildDependsOnly: True
<<
