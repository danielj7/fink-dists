diff -Naur EMBOSS-2.8.0/emboss/cirdna.c EMBOSS-2.8.0-patched/emboss/cirdna.c
--- EMBOSS-2.8.0/emboss/cirdna.c	Fri Aug 15 04:45:26 2003
+++ EMBOSS-2.8.0-patched/emboss/cirdna.c	Wed Dec  3 19:56:44 2003
@@ -25,6 +25,13 @@
 #include <stdio.h>
 #include <string.h>
 #include <stdlib.h>
+
+#if __APPLE__
+#include <sys/types.h>
+#include <sys/time.h>
+#include <sys/resource.h>
+#endif
+
 #define MAXGROUPS 20
 #define MAXLABELS 10000
 
@@ -134,8 +141,9 @@
 static float cirdna_ComputeAngle(float RealLength, float Length,
 				 float OriginAngle);
 
-
-
+#if __APPLE__
+static void newmain(int argc, char **argv);
+#endif
 
 static AjPStr Style[MAXGROUPS][MAXLABELS];
 static AjPStr Name[MAXGROUPS][MAXLABELS];
@@ -151,6 +159,23 @@
 
 int main(int argc, char **argv)
 {
+#if __APPLE__
+    struct rlimit rlim;
+    
+    if ( getrlimit(RLIMIT_STACK, &rlim) == 0 )
+    {
+        rlim.rlim_cur = rlim.rlim_max;
+        setrlimit (RLIMIT_STACK, &rlim);
+    }
+    
+    newmain( argc, argv );
+    
+    return 0;
+}
+
+static void newmain(int argc, char **argv)
+{
+#endif
     AjPGraph graph;
     ajint i;
     ajint j;
@@ -450,8 +475,11 @@
     ajGraphCloseWin();
 
     ajExit();
-
-    return 0;
+    
+    #if __APPLE__
+    #else
+        return 0;
+    #endif
 }
 
 
diff -Naur EMBOSS-2.8.0/emboss/lindna.c EMBOSS-2.8.0-patched/emboss/lindna.c
--- EMBOSS-2.8.0/emboss/lindna.c	Sun Aug 17 06:45:36 2003
+++ EMBOSS-2.8.0-patched/emboss/lindna.c	Wed Dec  3 19:56:38 2003
@@ -26,6 +26,12 @@
 #include <string.h>
 #include <stdlib.h>
 
+#if __APPLE__
+#include <sys/types.h>
+#include <sys/time.h>
+#include <sys/resource.h>
+#endif
+
 #define MAXGROUPS 20
 #define MAXLABELS 10000
 
@@ -127,6 +133,9 @@
 static float lindna_VerTextSeqHeightMax(AjPStr Name, float postext,
 					ajint NumNames);
 
+#if __APPLE__
+static void newmain(int argc, char **argv);
+#endif
 
 
 
@@ -138,6 +147,23 @@
 
 int main(int argc, char **argv)
 {
+#if __APPLE__
+    struct rlimit rlim;
+    
+    if ( getrlimit(RLIMIT_STACK, &rlim) == 0 )
+    {
+        rlim.rlim_cur = rlim.rlim_max;
+        setrlimit (RLIMIT_STACK, &rlim);
+    }
+    
+    newmain( argc, argv );
+    
+    return 0;
+}
+
+static void newmain(int argc, char **argv)
+{
+#endif
     AjPGraph graph;
     ajint i;
     ajint j;
@@ -421,7 +447,10 @@
 
     ajExit();
 
-    return 0;
+    #if __APPLE__
+    #else
+        return 0;
+    #endif
 }
 
 
diff -Naur EMBOSS-2.8.0/jemboss/Makefile.in EMBOSS-2.8.0-patched/jemboss/Makefile.in
--- EMBOSS-2.8.0/jemboss/Makefile.in	Sun Nov 30 08:06:32 2003
+++ EMBOSS-2.8.0-patched/jemboss/Makefile.in	Mon Dec  1 21:15:00 2003
@@ -506,12 +506,12 @@
 	fi
 
 install-exec-hook:
-	rm -f $(bindir)/runJemboss.csh; \
-	echo "#!/bin/csh" >> $(bindir)/runJemboss.csh; \
-	echo "setenv LD_LIBRARY_PATH $(libdir)" >> $(bindir)/runJemboss.csh; \
-	echo "setenv CLASSPATH $(prefix)/share/$(PACKAGE)/jemboss/lib/JembossPrintAlignment.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/xerces.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/mail.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/activation.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/jakarta-regexp-1.2.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/jalview.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/jcert.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/jnet.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/jsse.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/axis-ant.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/axis.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/commons-discovery.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/commons-logging.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/jaxrpc.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/log4j-1.2.4.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/saaj.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/wsdl4j.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/grout.jar:$(prefix)/share/$(PACKAGE)/jemboss" >> $(bindir)/runJemboss.csh; \
-	echo "(cd $(prefix)/share/$(PACKAGE)/jemboss; java org/emboss/jemboss/Jemboss &)" >> $(bindir)/runJemboss.csh; \
-	chmod 755 $(bindir)/runJemboss.csh;
+	rm -f $(DESTDIR)$(bindir)/runJemboss.csh; \
+	echo "#!/bin/csh" >> $(DESTDIR)$(bindir)/runJemboss.csh; \
+	echo "setenv LD_LIBRARY_PATH $(libdir)" >> $(DESTDIR)$(bindir)/runJemboss.csh; \
+	echo "setenv CLASSPATH $(prefix)/share/$(PACKAGE)/jemboss/lib/JembossPrintAlignment.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/xerces.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/mail.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/activation.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/jakarta-regexp-1.2.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/jalview.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/jcert.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/jnet.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/jsse.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/axis-ant.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/axis.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/commons-discovery.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/commons-logging.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/jaxrpc.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/log4j-1.2.4.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/saaj.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/axis/wsdl4j.jar:$(prefix)/share/$(PACKAGE)/jemboss/lib/grout.jar:$(prefix)/share/$(PACKAGE)/jemboss" >> $(DESTDIR)$(bindir)/runJemboss.csh; \
+	echo "(cd $(prefix)/share/$(PACKAGE)/jemboss; java org/emboss/jemboss/Jemboss &)" >> $(DESTDIR)$(bindir)/runJemboss.csh; \
+	chmod 755 $(DESTDIR)$(bindir)/runJemboss.csh;
 
 # tar to pick up the other directories
 # then remove any CVS subdirectories
diff -Naur EMBOSS-2.8.0/jemboss/org/emboss/jemboss/Makefile.in EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/Makefile.in
--- EMBOSS-2.8.0/jemboss/org/emboss/jemboss/Makefile.in	Sun Nov 30 08:06:34 2003
+++ EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/Makefile.in	Mon Dec  1 22:14:24 2003
@@ -485,9 +485,9 @@
 	@if test "${JAVA_OK}" != "yes" ; then \
 	  echo "No class files to copy"; \
 	else \
-	  $(top_srcdir)/mkinstalldirs $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss; \
+	  $(top_srcdir)/mkinstalldirs $(DESTDIR)$(pkgdatadir); \
 	for i in *.class; do \
-	  ${INSTALL_DATA} $$i $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss; \
+	  ${INSTALL_DATA} $$i $(DESTDIR)$(pkgdatadir); \
 	done; \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Naur EMBOSS-2.8.0/jemboss/org/emboss/jemboss/gui/Makefile.in EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/gui/Makefile.in
--- EMBOSS-2.8.0/jemboss/org/emboss/jemboss/gui/Makefile.in	Sun Nov 30 08:06:34 2003
+++ EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/gui/Makefile.in	Mon Dec  1 22:14:07 2003
@@ -491,9 +491,9 @@
 	@if test "${JAVA_OK}" != "yes" ; then \
 	  echo "No class files to copy"; \
 	else \
-	  $(top_srcdir)/mkinstalldirs $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/gui; \
+	  $(top_srcdir)/mkinstalldirs $(DESTDIR)$(pkgdatadir); \
 	for i in *.class; do \
-	  ${INSTALL_DATA} $$i $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/gui; \
+	  ${INSTALL_DATA} $$i $(DESTDIR)$(pkgdatadir); \
 	done; \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Naur EMBOSS-2.8.0/jemboss/org/emboss/jemboss/gui/filetree/Makefile.in EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/gui/filetree/Makefile.in
--- EMBOSS-2.8.0/jemboss/org/emboss/jemboss/gui/filetree/Makefile.in	Sun Nov 30 08:06:34 2003
+++ EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/gui/filetree/Makefile.in	Mon Dec  1 22:15:04 2003
@@ -336,9 +336,9 @@
 	@if test "${JAVA_OK}" != "yes" ; then \
 	  echo "No class files to copy"; \
 	else \
-	$(top_srcdir)/mkinstalldirs $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/gui/filetree; \
+	$(top_srcdir)/mkinstalldirs $(DESTDIR)$(pkgdatadir); \
 	for i in *.class; do \
-	  ${INSTALL_DATA} $$i $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/gui/filetree; \
+	  ${INSTALL_DATA} $$i $(DESTDIR)$(pkgdatadir); \
 	done; \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Naur EMBOSS-2.8.0/jemboss/org/emboss/jemboss/gui/form/Makefile.in EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/gui/form/Makefile.in
--- EMBOSS-2.8.0/jemboss/org/emboss/jemboss/gui/form/Makefile.in	Sun Nov 30 08:06:34 2003
+++ EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/gui/form/Makefile.in	Mon Dec  1 22:15:38 2003
@@ -338,9 +338,9 @@
 	@if test "${JAVA_OK}" != "yes" ; then \
 	  echo "No class files to copy"; \
 	else \
-	  $(top_srcdir)/mkinstalldirs $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/gui/form; \
+	  $(top_srcdir)/mkinstalldirs $(DESTDIR)$(pkgdatadir); \
 	for i in *.class; do \
-	  ${INSTALL_DATA} $$i $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/gui/form; \
+	  ${INSTALL_DATA} $$i $(DESTDIR)$(pkgdatadir); \
 	done; \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Naur EMBOSS-2.8.0/jemboss/org/emboss/jemboss/gui/sequenceChooser/Makefile.in EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/gui/sequenceChooser/Makefile.in
--- EMBOSS-2.8.0/jemboss/org/emboss/jemboss/gui/sequenceChooser/Makefile.in	Sun Nov 30 08:06:34 2003
+++ EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/gui/sequenceChooser/Makefile.in	Mon Dec  1 22:16:10 2003
@@ -336,9 +336,9 @@
 	@if test "${JAVA_OK}" != "yes" ; then \
 	  echo "No class files to copy"; \
 	else \
-	  $(top_srcdir)/mkinstalldirs $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/gui/sequenceChooser; \
+	  $(top_srcdir)/mkinstalldirs $(DESTDIR)$(pkgdatadir); \
 	for i in *.class; do \
-	  ${INSTALL_DATA} $$i $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/gui/sequenceChooser; \
+	  ${INSTALL_DATA} $$i $(DESTDIR)$(pkgdatadir); \
 	done; \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Naur EMBOSS-2.8.0/jemboss/org/emboss/jemboss/gui/startup/Makefile.in EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/gui/startup/Makefile.in
--- EMBOSS-2.8.0/jemboss/org/emboss/jemboss/gui/startup/Makefile.in	Sun Nov 30 08:06:35 2003
+++ EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/gui/startup/Makefile.in	Mon Dec  1 22:16:44 2003
@@ -333,9 +333,9 @@
 	@if test "${JAVA_OK}" != "yes" ; then \
 	  echo "No class files to copy"; \
 	else \
-	  $(top_srcdir)/mkinstalldirs $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/gui/startup; \
+	  $(top_srcdir)/mkinstalldirs $(DESTDIR)$(pkgdatadir); \
 	for i in *.class; do \
-	  ${INSTALL_DATA} $$i $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/gui/startup; \
+	  ${INSTALL_DATA} $$i $(DESTDIR)$(pkgdatadir); \
 	done; \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Naur EMBOSS-2.8.0/jemboss/org/emboss/jemboss/parser/Makefile.in EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/parser/Makefile.in
--- EMBOSS-2.8.0/jemboss/org/emboss/jemboss/parser/Makefile.in	Sun Nov 30 08:06:35 2003
+++ EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/parser/Makefile.in	Mon Dec  1 22:17:30 2003
@@ -488,9 +488,9 @@
 	@if test "${JAVA_OK}" != "yes" ; then \
 	  echo "No class files to copy"; \
 	else \
-	  $(top_srcdir)/mkinstalldirs $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/parser; \
+	  $(top_srcdir)/mkinstalldirs $(DESTDIR)$(pkgdatadir); \
 	for i in *.class; do \
-	  ${INSTALL_DATA} $$i $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/parser; \
+	  ${INSTALL_DATA} $$i $(DESTDIR)$(pkgdatadir); \
 	done; \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Naur EMBOSS-2.8.0/jemboss/org/emboss/jemboss/parser/acd/Makefile.in EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/parser/acd/Makefile.in
--- EMBOSS-2.8.0/jemboss/org/emboss/jemboss/parser/acd/Makefile.in	Sun Nov 30 08:06:35 2003
+++ EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/parser/acd/Makefile.in	Mon Dec  1 22:18:01 2003
@@ -333,9 +333,9 @@
 	@if test "${JAVA_OK}" != "yes" ; then \
 	  echo "No class files to copy"; \
 	else \
-	  $(top_srcdir)/mkinstalldirs $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/parser/acd; \
+	  $(top_srcdir)/mkinstalldirs $(DESTDIR)$(pkgdatadir); \
 	for i in *.class; do \
-	  ${INSTALL_DATA} $$i $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/parser/acd; \
+	  ${INSTALL_DATA} $$i $(DESTDIR)$(pkgdatadir); \
 	done; \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Naur EMBOSS-2.8.0/jemboss/org/emboss/jemboss/programs/Makefile.in EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/programs/Makefile.in
--- EMBOSS-2.8.0/jemboss/org/emboss/jemboss/programs/Makefile.in	Sun Nov 30 08:06:35 2003
+++ EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/programs/Makefile.in	Mon Dec  1 22:18:29 2003
@@ -336,9 +336,9 @@
 	@if test "${JAVA_OK}" != "yes" ; then \
 	  echo "No class files to copy"; \
 	else \
-	  $(top_srcdir)/mkinstalldirs $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/programs; \
+	  $(top_srcdir)/mkinstalldirs $(DESTDIR)$(pkgdatadir); \
 	for i in *.class; do \
-	  ${INSTALL_DATA} $$i $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/programs; \
+	  ${INSTALL_DATA} $$i $(DESTDIR)$(pkgdatadir); \
 	done; \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Naur EMBOSS-2.8.0/jemboss/org/emboss/jemboss/server/Makefile.in EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/server/Makefile.in
--- EMBOSS-2.8.0/jemboss/org/emboss/jemboss/server/Makefile.in	Sun Nov 30 08:06:35 2003
+++ EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/server/Makefile.in	Mon Dec  1 22:18:56 2003
@@ -336,9 +336,9 @@
 	@if test "${JAVA_OK}" != "yes" ; then \
 	  echo "No class files to copy"; \
 	else \
-	  $(top_srcdir)/mkinstalldirs $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/server; \
+	  $(top_srcdir)/mkinstalldirs $(DESTDIR)$(pkgdatadir); \
 	  if test -f JembossServer.class ; then \
-	    ${INSTALL_DATA} *.class $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/server; \
+	    ${INSTALL_DATA} *.class $(DESTDIR)$(pkgdatadir); \
 	  fi \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Naur EMBOSS-2.8.0/jemboss/org/emboss/jemboss/soap/Makefile.in EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/soap/Makefile.in
--- EMBOSS-2.8.0/jemboss/org/emboss/jemboss/soap/Makefile.in	Sun Nov 30 08:06:35 2003
+++ EMBOSS-2.8.0-patched/jemboss/org/emboss/jemboss/soap/Makefile.in	Mon Dec  1 22:19:24 2003
@@ -340,9 +340,9 @@
 	@if test "${JAVA_OK}" != "yes" ; then \
 	  echo "No class files to copy"; \
 	else \
-	  $(top_srcdir)/mkinstalldirs $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/soap; \
+	  $(top_srcdir)/mkinstalldirs $(DESTDIR)$(pkgdatadir); \
 	for i in *.class; do \
-	  ${INSTALL_DATA} $$i $(prefix)/share/$(PACKAGE)/jemboss/org/emboss/jemboss/soap; \
+	  ${INSTALL_DATA} $$i $(DESTDIR)$(pkgdatadir); \
 	done; \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Naur EMBOSS-2.8.0/jemboss/resources/Makefile.in EMBOSS-2.8.0-patched/jemboss/resources/Makefile.in
--- EMBOSS-2.8.0/jemboss/resources/Makefile.in	Sun Nov 30 08:06:35 2003
+++ EMBOSS-2.8.0-patched/jemboss/resources/Makefile.in	Mon Dec  1 22:20:47 2003
@@ -332,14 +332,14 @@
 
 install-exec-hook:
 	  @if test "${JAVA_OK}" = "yes" ; then \
-	          (if test -d $(prefix)/share/$(PACKAGE)/jemboss/resources; then \
+	          (if test -d $(DESTDIR)$(pkgdatadir); then \
 			echo "resources exists"; \
 		   else \
-			mkdir $(prefix)/share/$(PACKAGE)/jemboss/resources; \
+			mkdir $(DESTDIR)$(pkgdatadir); \
 		   fi); \
-	          rm -f $(prefix)/share/$(PACKAGE)/jemboss/resources/acdstore.jar; \
+	          rm -f $(DESTDIR)$(pkgdatadir)/acdstore.jar; \
 		  cd $(EMBOSS_TOP)/emboss/acd; \
-		  jar cvf $(prefix)/share/$(PACKAGE)/jemboss/resources/acdstore.jar *.acd; \
+		  jar cvf $(DESTDIR)$(pkgdatadir)/acdstore.jar *.acd; \
 	  fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
