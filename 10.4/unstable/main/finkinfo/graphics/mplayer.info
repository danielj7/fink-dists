Info2: <<
Package: mplayer%type_pkg[-altivec]
Version: 1.0.0rc1
Revision: 1021
Description: MPEG 1/2, .ogm and AVI movie player
License: GPL
Maintainer: Chris Zubrzycki <beren12@users.sourceforge.net>
Type: -altivec (boolean)

Depends: <<
	aalib-shlibs (>= 1.4rc5-2),
	arts-shlibs,
	audiofile-shlibs,
	esound-shlibs (>= 0.2.38-1),
	faac-shlibs,
	fontconfig2-shlibs,
	freetype219-shlibs,
	fribidi-shlibs,
	giflib-shlibs,
	glib-shlibs,
	glib2-shlibs (>= 2.12.0-1),
	gtk+-shlibs,
	jack-shlibs,
	lame-shlibs,
	libcdio7-shlibs,
	libcdparanoia0-shlibs,
	libdv4-shlibs,
	libgettext3-shlibs,
	libggi2-shlibs,
	libiconv,
	libjpeg-shlibs,
	libmad-shlibs,
	libmpcdec3-shlibs,
	libncurses5-shlibs,
	libogg-shlibs,
	libpng3-shlibs,
	libtheora0-shlibs,
	libvorbis0-shlibs,
	lynx | lynx-ssl | www-browser,
	lzo-shlibs,
	mplayer-skin,
	sdl-shlibs (>= 1.2.9-1001),
	slang-shlibs,
	speex3-shlibs,
	twolame-shlibs,
	x11,
	xmms-shlibs,
	xvidcore-shlibs
<<
BuildDepends: <<
	aalib (>= 1.4rc5-2),
	arts-dev (>= 1.1.0-1022),
	audiofile,
	esound (>= 0.2.38-1),
	faac-dev,
	fink (>= 0.26.0-1),
	fontconfig2-dev,
	freetype219,
	fribidi-dev,
	gettext-bin,
	giflib,
	glib,
	glib2-dev (>= 2.12.0-1),
	gtk+,
	jack-dev,
	lame,
	libcdio-dev,
	libcdparanoia0-dev,
	libdv4,
	libggi2-dev,
	libgettext3-dev,
	libiconv-dev,
	libjpeg,
	libmad,
	libmpcdec3,
	libncurses5,
	libogg,
	libpng3,
	libtheora0,
	libvorbis0,
	lzo,
	pkgconfig,
	sdl (>= 1.2.9-1001),
	slang,
	speex3,
	twolame-dev,
	x11-dev,
	xmms,
	xvidcore
<<
Provides: x-media-player
Conflicts: <<
	mplayer,
	mplayer-altivec,
	mplayer-custom,
	mplayer0.9
<<
Replaces: <<
	mplayer,
	mplayer-altivec,
	mplayer-custom,
	mplayer0.9
<<

CustomMirror: <<
	eur-CH: http://www1.mplayerhq.hu/MPlayer/releases/
	eur-CH: ftp://ftp1.mplayerhq.hu/MPlayer/releases/
	eur-HU: http://www2.mplayerhq.hu/MPlayer/releases/
	eur-HU: ftp://ftp2.mplayerhq.hu/MPlayer/releases/
	nam-US: http://www3.mplayerhq.hu/MPlayer/releases/
	nam-US: ftp://ftp4.mplayerhq.hu/MPlayer/releases/
	nam-US: http://www4.mplayerhq.hu/MPlayer/releases/
	asi-KR: http://www5.mplayerhq.hu/MPlayer/releases/
	asi-KR: ftp://ftp5.mplayerhq.hu/MPlayer/releases/
	eur-DE: http://www7.mplayerhq.hu/MPlayer/releases/
	eur-DE: ftp://ftp7.mplayerhq.hu/MPlayer/releases/
	eur-DE: ftp://ftp.fu-berlin.de/unix/X11/multimedia/MPlayer/releases/
	eur-FR: ftp://ftp.free.fr/mirrors/mplayerhq.hu/MPlayer/releases/
<<
Source: mirror:custom:MPlayer-1.0rc1.tar.bz2
Source-MD5: 18c05d88e22c3b815a43ca8d7152ccdc
Patch: %{Ni}.patch

SetCPPFLAGS: -I%p/include/libcdparanoia -I%p/lib/freetype219/include -I%p/lib/fontconfig2/include
SetLDFLAGS: -L%p/lib/freetype219/lib -L%p/lib/fontconfig2/lib
ConfigureParams: --mandir="%p/share/man" --enable-menu --enable-gui --enable-xmms --with-dvdnav-config=%p/bin/dvdnav-config --with-freetype-config=%p/lib/freetype219/bin/freetype-config (%type_raw[-altivec] = .) --disable-altivec (%type_raw[-altivec] = -altivec) --enable-altivec
CompileScript: <<
	export PATH="%p/lib/freetype219/bin:%p/lib/fontconfig2/bin:$PATH"
	export PKG_CONFIG_PATH="%p/lib/freetype219/lib/pkgconfig:%p/lib/fontconfig2/lib/pkconfig:$PKG_CONFIG_PATH"
	./configure %c
	make
<<

InstallScript: <<
	make -j1 install DESTDIR=%d

	install -d -m 755 %i/etc/mplayer
	install -c -m 644 etc/codecs.conf etc/input.conf %i/etc/mplayer/
	install -c -m 644 etc/example.conf %i/etc/mplayer/mplayer.conf

	rm -rf %i/share/%{Ni}/font

	install -d -m 755 %i/share/doc/%N/
	cp -r DOCS/* %i/share/doc/%N/
	mv TOOLS %i/share/doc/%N/tools
<<
DocFiles: AUTHORS ChangeLog Copyright LICENSE README

ConfFiles: <<
	%p/etc/mplayer/mplayer.conf
	%p/etc/mplayer/codecs.conf
	%p/etc/mplayer/input.conf
<<

Homepage: http://www.mplayerhq.hu/
DescDetail: <<
MPlayer is a movie and animation player based on the 0.2.0 version of
libmpeg2 (mpeg2dec) and the Avifile library. It uses mpeg2dec/libmpeg2
for MPEG decoding. The supported file formats are MPEG 1/2 (MPG, DAT,
BIN, VOB) and AVI/ASF/WMF(Mpeg/PCM/AC3/DivX/MS-ADPCM/aLaw audio,
MPEG4/DivX/Indeo/CVID/WMF video codecs and many more). It supports
hardware YUV colorspace conversion and scaling via mga_vid/syncfb
devices or the X11 Xv extension.
<<
DescPackaging: --disable-dvdnav because of a missing symbol: http://lists-archives.org/mplayer-dev-eng/14284-here-s-my-hack-for-udffindfile-missing-on-darwin-macosx.html
<<
