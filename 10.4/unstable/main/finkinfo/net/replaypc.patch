diff -ur replaypc-0.4.0.bak/addressbook.h replaypc-0.4.0/addressbook.h
--- replaypc-0.4.0.bak/addressbook.h	2002-06-16 17:17:37.000000000 -0700
+++ replaypc-0.4.0/addressbook.h	2005-06-13 16:10:15.000000000 -0700
@@ -15,6 +15,8 @@
 #ifndef ADDRESSBOOK_H
 #define ADDRESSBOOK_H
 
+#include "dump.h"
+
 extern struct mapping addressbook_entry_flag_bitmapping[];
 
 struct addressbook_header {
diff -ur replaypc-0.4.0.bak/headend.h replaypc-0.4.0/headend.h
--- replaypc-0.4.0.bak/headend.h	2002-03-21 15:28:43.000000000 -0800
+++ replaypc-0.4.0/headend.h	2005-06-13 16:10:29.000000000 -0700
@@ -16,6 +16,7 @@
 #define HEADEND_H
 
 #include "rtv.h"
+#include "dump.h"
 
 extern struct mapping device_mapping[];
 extern struct mapping device_bitmapping[];
diff -ur replaypc-0.4.0.bak/zipcode.h replaypc-0.4.0/zipcode.h
--- replaypc-0.4.0.bak/zipcode.h	2002-03-21 15:28:43.000000000 -0800
+++ replaypc-0.4.0/zipcode.h	2005-06-13 16:10:39.000000000 -0700
@@ -15,6 +15,8 @@
 #ifndef ZIPCODE_H
 #define ZIPCODE_H
 
+#include "dump.h"
+
 extern struct mapping headend_type_mapping[];
 
 struct zipcode2_headend {

--- replaypc-0.4.0.bak/crypt.c.orig	2009-04-23 22:02:50.000000000 -0700
+++ replaypc-0.4.0/crypt.c	2009-04-23 22:04:55.000000000 -0700
@@ -18,14 +18,7 @@
 #include <stdlib.h>
 #include <time.h>
 
-#ifdef __APPLE__
-#define MD5Init MD5_Init
-#define MD5Update MD5_Update
-#define MD5Final MD5_Final
-#include <sys/md5.h>
-#else
 #include <openssl/md5.h>
-#endif
 
 static void checksum(unsigned char * dest, unsigned const char * src, u32 len,
                      int checksum_num)
