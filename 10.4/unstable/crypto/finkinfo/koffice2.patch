diff -Nurd koffice-1.9.99.0/kchart/kdchart/kdablibfakes/src/KDABLibFakes.h koffice-1.9.99.0-new/kchart/kdchart/kdablibfakes/src/KDABLibFakes.h
--- koffice-1.9.99.0/kchart/kdchart/kdablibfakes/src/KDABLibFakes.h	2009-04-01 05:07:27.000000000 -0400
+++ koffice-1.9.99.0-new/kchart/kdchart/kdablibfakes/src/KDABLibFakes.h	2009-04-07 12:42:05.000000000 -0400
@@ -43,7 +43,7 @@
 #ifndef KDAB_LIB_FAKES_H
 #define KDAB_LIB_FAKES_H
 
-#if defined Q_OS_DARWIN
+#if defined(Q_OS_DARWIN) || defined(Q_OS_MAC)
 /* On Mac OS X, ensure that <cmath> will define std::isnan */
 #define _GLIBCPP_USE_C99 1
 #endif
@@ -72,7 +72,7 @@
 #include <float.h>
 #define ISNAN(x ) _isnan(x )
 #define ISINF(x ) (!(_finite(x ) + _isnan(x ) ) )
-#elif defined (Q_OS_DARWIN) || defined (Q_OS_CYGWIN)
+#elif defined (Q_OS_DARWIN) || defined(Q_OS_MAC) || defined (Q_OS_CYGWIN)
 #define ISNAN(x) std::isnan(x)
 #define ISINF(x) std::isinf(x)
 #else
diff -Nurd koffice-1.9.99.0/krita/image/kis_random_generator.cc koffice-1.9.99.0-new/krita/image/kis_random_generator.cc
--- koffice-1.9.99.0/krita/image/kis_random_generator.cc	2009-04-01 05:06:34.000000000 -0400
+++ koffice-1.9.99.0-new/krita/image/kis_random_generator.cc	2009-04-07 12:42:12.000000000 -0400
@@ -19,8 +19,8 @@
  */
 
 #include "kis_random_generator.h"
-#include <stdlib.h>
 #define __STDC_LIMIT_MACROS
+#include <stdlib.h>
 #include <stdint.h>
 #include <math.h>
 
diff -Nurd koffice-1.9.99.0/libs/flake/CMakeLists.txt koffice-1.9.99.0-new/libs/flake/CMakeLists.txt
--- koffice-1.9.99.0/libs/flake/CMakeLists.txt	2009-04-01 05:12:00.000000000 -0400
+++ koffice-1.9.99.0-new/libs/flake/CMakeLists.txt	2009-04-07 12:42:05.000000000 -0400
@@ -1,4 +1,4 @@
-include_directories( ${KDE4_INCLUDE_DIR} ${QT_INCLUDES} ${KOMAIN_INCLUDES} ${PIGMENT_INCLUDES})
+include_directories( ${KDE4_INCLUDE_DIR} ${QT_INCLUDES} ${KOMAIN_INCLUDES} ${PIGMENT_INCLUDES} ${OPENGL_INCLUDE_DIR})
 
 if(KDE4_BUILD_TESTS)
     # only with this definition will the FLAKE_TEST_EXPORT macro do something
