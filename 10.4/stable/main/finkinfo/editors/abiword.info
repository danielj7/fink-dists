Package: abiword
Version: 2.6.8
Revision: 3
Depends: <<
	applesystemfonts,
	atk1-shlibs (>= 1.24.0-1),
	cairo-shlibs (>= 1.8-1),
	enchant1-shlibs (>= 1.4.2-1),
	fontconfig2-shlibs (>= 2.4.1-1),
	freetype219-shlibs (>= 2.3.7-7),
	fribidi-shlibs (>= 0.10.9-1),
	gconf2 (>= 2.24.0-1),
	gconf2-shlibs (>= 2.24.0-1),
	glib2-shlibs (>= 2.18.0-1),
	gnome-vfs2-unified-shlibs (>= 1:2.24.0-1),
	gtk+2-shlibs (>= 2.14.0-1),
	libart2-shlibs,
	libbonobo2-shlibs (>= 2.24.0-1),
	libbonoboui2-shlibs (>= 2.24.0-1),
	libgettext3-shlibs,
	libglade2-shlibs (>= 2.6.3-1),
	libgnome2-shlibs (>= 2.24.0-1),
	libgnomecanvas2-shlibs (>= 2.20.1.1-2),
	libgnomeprint2.2-shlibs (>= 2.18.5-1),
	libgnomeprintui2.2-shlibs (>= 2.18.3-1),
	libgnomeui2-shlibs (>= 2.24.0-1),
	libgsf1.114-gnome-shlibs (>= 1.14.11-1),
	libgsf1.114-shlibs (>= 1.14.11-1),
	libiconv,
	libpng3-shlibs,
	libwv1-shlibs,
	libxml2-shlibs (>= 2.6.30-1),
	orbit2-shlibs (>= 2.14.16-1),
	pango1-xft2-ft219-shlibs (>= 1.22.4-1),
	popt-shlibs,
	x11-shlibs
<<
BuildDepends: <<
	applesystemfonts,
	atk1 (>= 1.24.0-1),
	audiofile,
	cairo (>= 1.8-1),
	dbus-dev (>= 1.2.1-1),
	enchant1-dev (>= 1.4.2-1),
	esound,
	expat1,
	fink (>= 0.24.12-1),
	fontconfig2-dev (>= 2.4.1-1),
	freetype219 (>= 2.3.7-7),
	fribidi (>= 0.10.9-1),
	fribidi-dev,
	gconf2-dev (>= 2.24.0-1),
	gettext-bin,
	gettext-tools,
	glib2-dev (>= 2.18.0-1),
	glitz,
	gnome-keyring-dev (>= 0.8.1-1),
	gnome-vfs2-unified-dev (>= 1:2.24.0-1),
	gtk+2-dev (>= 2.14.0-1),
	libart2,
	libbonobo2-dev (>= 2.24.0-1),
	libbonoboui2-dev (>= 2.24.0-1),
	libgettext3-dev,
	libglade2 (>= 2.6.3-1),
	libgnome2-dev (>= 2.24.0-1),
	libgnomecanvas2-dev (>= 2.20.1.1-2),
	libgnomeprint2.2-dev (>= 2.18.5-1),
	libgnomeprintui2.2-dev (>= 2.18.3-1),
	libgnomeui2-dev (>= 2.24.0-1),
	libgsf1.114-gnome-dev (>= 1.14.11-1),
	libgsf1.114-dev (>= 1.14.11-1),
	libiconv-dev,
	libpng3,
	libwv1,
	libxml2 (>= 2.6.30-1),
	orbit2-dev (>= 2.14.16-1),
	pango1-xft2-ft219-dev (>= 1.22.4-1),
	pixman (>= 0.12.0-1),
	pkgconfig (>= 0.23),
	popt,
	x11-dev,
	xft2-dev
<<
BuildConflicts: libgoffice, libgoffice-0.6
Recommends: abiword-docs
PatchFile: %n.patch
PatchFile-MD5: 293e295814d941c57d907cbe56f85fea
PatchScript: <<
	sed 's|@PREFIX@|%p|g' < %{PatchFile} | patch -p1
	perl -pi -e 's,(GOFFICE_VERSION_REQUIRED=).*,${1}99999.FORCE.NONDETECT,' configure
	perl -pi -e 's/-pedantic//g' configure
<<
Description: Open-source word processor
DescUsage: <<

	Default help viewer might be your OS X default web-browser.
	Setting the BROWSER environment variable to an alternate
	command (for example, "firefox" if you have %p/bin/firefox)
	might override.

	As of 2.6.8, the docs are separated into their own package
	(abiword-docs).
<<
Source: http://www.abiword.com/downloads/%n/%v/source/%n-%v.tar.gz
Source-MD5: fab04d8ef999c303f720197adf261310
GCC: 4.0
ConfigureParams: --enable-gnomevfs --enable-gnomeui --disable-Cocoa --with-libxml2 --disable-gucharmap --without-epath --disable-dependency-tracking PKG_CONFIG_PATH="%p/lib/fontconfig2/lib/pkgconfig:$PKG_CONFIG_PATH"
NoSetMAKEFLAGS: true
SetMAKEFLAGS: -j1
SetCPPFLAGS: -I%p/lib/fontconfig2/include
SetLDFLAGS: -L%p/lib/fontconfig2/lib
SetCFLAGS: -Os -pipe -g
SetCXXFLAGS: -Os -pipe -g
CompileScript: <<
	./configure %c
	make
<<
InstallScript: <<
	make -j1 install DESTDIR=%d

	# make abiword a shell script that sets symlinks for applettf
	# fonts in ~/.fonts (if necessary) on launch.
	# move actual abiword executable
	mv %i/bin/abiword %i/bin/abiword.exe
	# install abiword startup script
	install -m 755 abiword.sh %i/bin/abiword
<<
DescPort: <<
	Patch to use 'open' as default help browser (set the BROWSER
	environment variable to override this).
	abiword is a wrapper script that sets up symlinks to applettf
	fonts in ~/.fonts, so that abiword will find them.

	-pedantic fails b/c %p/include/popt.h has "long long". See:
	http://trac.macports.org/ticket/17714

	Got a bunch of realloc diagnostics while reading fonts (font
	pulldown or format menu) but oh well. See:
	http://bugzilla.abisource.com/show_bug.cgi?id=12024
<<
DescPackaging: <<
	Uses libgnomeprint directly. Fixed in 2.7 dev cycle.

	Wants gucharmap (old, unavailable in fink) not gucharmap-2.
	Fixed in 2.7 dev cycle.

	Wants libgoffice-0.4 (old, unavailable in fink) not
	libgoffice-0.6. Instead builds a local lib fragment, so need
	to make we don't accidentally see the installed wrong-version.
<<
DocFiles: BUILD.TXT BiDiReadme.txt COPYING COPYRIGHT.TXT CREDITS.TXT README.TXT
License: GPL
Homepage: http://www.abiword.com
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
