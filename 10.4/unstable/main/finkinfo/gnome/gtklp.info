Package: gtklp
Version: 1.2.6
Revision: 1

Source: mirror:sourceforge:%n/%n-%v.src.tar.gz
Source-MD5: 69938c99e3163c9ef25e1ed559c74c65
SourceDirectory: %n-%v

BuildDepends: <<
	atk1 (>= 1.20.0-1),
	cairo (>= 1.6-1),
	expat1,
	fink (>= 0.24.12-1),
	fontconfig2-dev (>= 2.4.1-1),
	freetype219 (>= 2.3.5-1),
	gettext-bin,
	gettext-tools,
	glib2-dev (>= 2.14.0-1),
	glitz,
	gtk+2-dev (>= 2.12.3-1),
	libgettext3-dev,
	libiconv-dev,
	libjpeg,
	libpng3 (>= 1.2.5-4),
	pango1-xft2-ft219-dev (>= 1.18.4-4),
	pixman (>= 0.10.0-1),
	pkgconfig (>= 0.22-1),
	system-openssl-dev,
	x11-dev,
	xft2-dev
<<
Depends: <<
	atk1-shlibs (>= 1.20.0-1),
	cairo-shlibs (>= 1.6-1),
	expat1-shlibs,
	fontconfig2-shlibs (>= 2.4.1-1),
	freetype219-shlibs (>= 2.3.5-1),
	glib2-shlibs (>= 2.14.0-1),
	glitz-shlibs,
	gtk+2-shlibs (>= 2.12.3-1),
	libgettext3-shlibs,
	libiconv,
	libpng3-shlibs (>= 1.2.5-4),
	pango1-xft2-ft219-shlibs (>= 1.18.4-4),
	x11
<<

PatchFile: %n.patch
PatchFile-MD5: 79e4d462228546ea4d16273564ddd87d
PatchScript: <<
	# fix -I ordering (local before global)
	patch -p1 < %{PatchFile}

	# move to fink hierarchy
	perl -pi -e 's,/etc,%p/etc,' include/defaults.h man/*.1 USAGE

	# cruft from upstream build
	rm -f libgtklp/libgtklp.la

	# don't redo autostuff (file isn't needed, but it's a dep)
	touch -r Makefile.in aclocal.m4
<<

SetCPPFLAGS: -I%p/lib/pango-ft219/include/pango-1.0 -I%p/lib/pango-ft219/include -I%p/lib/freetype219/include/freetype2 -I%p/lib/freetype219/include -I%p/lib/fontconfig2/include -I%p/lib/system-openssl/include
SetLDFLAGS: -L%p/lib/pango-ft219/lib -L%p/lib/freetype219/lib -L%p/lib/fontconfig2/lib -L%p/lib/system-openssl/lib
SetCFLAGS: -Os
SetCXXFLAGS: -Os
ConfigureParams: --disable-dependency-tracking PKG_CONFIG_PATH="%p/lib/pango-ft219/lib/pkgconfig:%p/lib/fontconfig2/lib/pkgconfig:%p/lib/freetype219/lib/pkgconfig:$PKG_CONFIG_PATH" FREETYPE_CONFIG=%p/lib/freetype219/bin/freetype-config

InstallScript: make install DESTDIR=%d
DocFiles: ABOUT-NLS AUTHORS BUGS COPYING ChangeLog NEWS README README.FAQ TODO USAGE

Description: Graphical interface for printing via CUPS
License: GPL
Homepage: http://gtklp.sourceforge.net
Maintainer: Daniel Macks <dmacks@netspace.org>
