diff -uNr whatcheck/Makefile_whatcheck whatcheck.new/Makefile_whatcheck
--- whatcheck/Makefile_whatcheck	2008-04-07 18:17:15.000000000 -0400
+++ whatcheck.new/Makefile_whatcheck	2008-04-10 23:16:54.000000000 -0400
@@ -3,12 +3,12 @@
 
 DEFINES=-DUNIX -DCTEXT -DF2C -DGLX11 -DX11 -DDX4 -DLITE -DWHATCHECK
 OPTFLAGS=-O3
-LIBS= -L/usr/X11R6/lib -lX11 -lm -lcrypt
+LIBS= -L/usr/X11R6/lib -lX11 -lm
 ANSICC=cc
 KRCC=cc
 INCLUDES= -I/usr/X11R6/include -I.
-F77=g77 -xf77-cpp-input -Wsurprising
-LD=g77
+F77=gfortran -xf77-cpp-input -Wsurprising -fbackslash
+LD=gfortran
 
 # End-Of-Configuration: Do not delete this line!!!
 
@@ -55,10 +55,10 @@
 	@echo please ignore error message and re-execute make
 	exit 3
 
-SRCFILES = $(addprefix ../whatif/src/, $(OBJECTS:%.o=%.f))
+SRCFILES = $(addprefix ., $(OBJECTS:%.o=%.f))
 DSTFILES = $(notdir $(SRCFILES:%.f=%.F))
 
-%.F: ../whatif/src/%.f
+%.F: ./%.f
 	sed -r "s/^[Cc].+//" $< | g77  -xf77-cpp-input -E $(DEFINES) - | sed -r "s/^#.+//" > $@
 
 %.INC: ../whatif/src/%.INC
@@ -67,8 +67,8 @@
 obfuscated.f: $(DSTFILES)
 	cat $(DSTFILES) > obfuscated.f
 
 support.o: support.c
-	gcc $(DEFINES) -c -o $@ $<
+	gcc -O3 -I /usr/include $(DEFINES) -c -o $@ $<
 
 version.f: $(OBJECTS)
 	./mkversion
diff -uNr whatcheck/WHATIF.FIG whatcheck.new/WHATIF.FIG
--- whatcheck/WHATIF.FIG	2008-03-10 15:09:12.000000000 -0400
+++ whatcheck.new/WHATIF.FIG	2008-04-10 21:23:06.000000000 -0400
@@ -1,4 +1,4 @@
-/home/vriend/whatcheck/dbdata/
+@FINKPREFIX@/share/whatcheck/dbdata/
 YES DATABASE
-/home/vriend/whatcheck/qualty/
+@FINKPREFIX@/share/whatcheck/qualty/
 IRIF  FFTFFFTFFFFFFFTFFFFF
diff -uNr whatcheck/scatterdir/support.c whatcheck.new/scatterdir/support.c
--- whatcheck/scatterdir/support.c	2007-07-26 09:13:28.000000000 -0400
+++ whatcheck.new/scatterdir/support.c	2008-04-10 21:23:52.000000000 -0400
@@ -15,7 +15,8 @@
 #endif
 #if !defined(ESV)
 #include <unistd.h>
-#include <malloc.h>
+#include <sys/malloc.h>
+#include <stdio.h>
 #else
 #include "/usr/include/unistd.h"
 #endif
--- whatcheck.org/support.c	2008-04-11 19:05:12.000000000 -0400
+++ whatcheck/support.c	2008-04-11 19:05:26.000000000 -0400
@@ -52,7 +52,7 @@
   #include "/usr/include/unistd.h" 
 #else 
   #include <unistd.h> 
-  #include <malloc.h> 
+  #include <sys/malloc.h> 
 #endif 
 #include <stdio.h> 
 #include <stdlib.h> 
--- whatcheck.org/scatterdir/Makefile	2008-04-11 19:31:50.000000000 -0400
+++ whatcheck/scatterdir/Makefile	2008-04-11 19:32:32.000000000 -0400
@@ -5,8 +5,8 @@
 OBJS = data.o general_fit.o figfile.o lines.o\
        polyno.o recipes.o scatter.o tools.o support.o
 
-FFLAGS = -O2 #-automatic
-CFLAGS = -O2 #-DF2C
+FFLAGS = -std=legacy -O3 #-automatic
+CFLAGS = -O3 #-DF2C
 
 LIBS= #-lf2c
 
--- whatcheck.org/DO_WHATCHECK.COM	2008-04-12 10:36:17.000000000 -0400
+++ whatcheck/DO_WHATCHECK.COM	2008-04-12 10:38:23.000000000 -0400
@@ -1,5 +1,5 @@
 #!/bin/sh
-DIR=/home/vriend/whatcheck
+DIR=@FINKPREFIX@/share/whatcheck
 umask 001
 stty intr '^C' > /dev/null
 [ -f WHATIF.FIG -a ! $DIR = `pwd` ] && /bin/rm WHATIF.FIG
