diff -ru jbig2dec-0.10.orig/Makefile.am jbig2dec-0.10/Makefile.am
--- jbig2dec-0.10.orig/Makefile.am	2009-05-29 00:37:34.000000000 -0400
+++ jbig2dec-0.10/Makefile.am	2009-06-19 15:02:01.000000000 -0400
@@ -3,10 +3,10 @@
 # require automake 1.7
 AUTOMAKE_OPTIONS = foreign 1.7 dist-bzip2 dist-zip -Wall
 
-lib_LIBRARIES = libjbig2dec.a
+lib_LTLIBRARIES = libjbig2dec.la
 include_HEADERS = jbig2.h
 
-libjbig2dec_a_SOURCES = jbig2.c \
+libjbig2dec_la_SOURCES = jbig2.c \
 	jbig2_arith.c jbig2_arith_int.c jbig2_arith_iaid.c jbig2_huffman.c \
 	jbig2_segment.c jbig2_page.c \
 	jbig2_symbol_dict.c jbig2_text.c \
@@ -26,7 +26,7 @@
 jbig2dec_SOURCES = jbig2dec.c sha1.c sha1.h \
 	jbig2.h jbig2_image.h getopt.h \
 	os_types.h config_types.h config_win32.h
-jbig2dec_LDADD = libjbig2dec.a @LIBOBJS@
+jbig2dec_LDADD = libjbig2dec.la @LIBOBJS@
 
 EXTRA_DIST = test_jbig2dec.py msvc.mak LICENSE CHANGES
 
@@ -39,9 +39,9 @@
 
 test_arith_SOURCES = jbig2_arith.c
 test_arith_CFLAGS = -DTEST
-test_arith_LDADD = libjbig2dec.a
+test_arith_LDADD = libjbig2dec.la
 
 test_huffman_SOURCES = jbig2_huffman.c
 test_huffman_CFLAGS = -DTEST
-test_huffman_LDADD = libjbig2dec.a
+test_huffman_LDADD = libjbig2dec.la
 
diff -ru jbig2dec-0.10.orig/configure.ac jbig2dec-0.10/configure.ac
--- jbig2dec-0.10.orig/configure.ac	2009-05-29 00:39:27.000000000 -0400
+++ jbig2dec-0.10/configure.ac	2009-06-19 15:02:01.000000000 -0400
@@ -10,7 +10,7 @@
 # Checks for programs.
 AC_PROG_CC
 AM_PROG_CC_C_O
-AC_PROG_RANLIB
+AC_PROG_LIBTOOL
 
 # platform specific compiler flags
 if test "x$GCC" = xyes; then
diff -ru jbig2dec-0.10.orig/jbig2_halftone.c jbig2dec-0.10/jbig2_halftone.c
--- jbig2dec-0.10.orig/jbig2_halftone.c	2009-04-16 03:21:57.000000000 -0400
+++ jbig2dec-0.10/jbig2_halftone.c	2009-06-19 15:02:51.000000000 -0400
@@ -200,7 +200,7 @@
   Jbig2PatternDictParams params;
   Jbig2ArithCx *GB_stats = NULL;
   byte flags;
-  int offset;
+  int offset = 0;
 
   /* 7.4.4.1 - Data header */
   if (segment->data_length < 7) {
