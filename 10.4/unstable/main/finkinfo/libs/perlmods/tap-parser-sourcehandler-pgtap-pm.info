Info2: <<
Package: tap-parser-sourcehandler-pgtap-pm%type_pkg[perl]
Version: 3.23
Revision: 1
Architecture: (%type_pkg[perl] = 581) powerpc, (%type_pkg[perl] = 584) powerpc
Distribution: (%type_pkg[perl] = 581) 10.4, (%type_pkg[perl] = 584) 10.4, (%type_pkg[perl] = 586) 10.4, (%type_pkg[perl] = 586) 10.5, (%type_pkg[perl] = 5100) 10.5, (%type_pkg[perl] = 5100) 10.6
Type: perl (5.8.1 5.8.4 5.8.6 5.8.8 5.10.0)

BuildDepends: <<
	module-build-pm%type_pkg[perl]
<<
Depends: <<
	dbd-pg-unified-pm%type_pkg[perl],
	dbi-pm%type_pkg[perl],
	dpkg-base-files,
	perl%type_pkg[perl]-core,
	test-harness-pm%type_pkg[perl] (>= 3.22-1)
<<
Replaces: test-harness-pm%type_pkg[perl] (<< 3.22-1)


Source: mirror:cpan:authors/id/D/DW/DWHEELER/TAP-Parser-SourceHandler-pgTAP-%v.tar.gz
Source-MD5: 0caf14705b47bc6d8ac4b9a9997c52c8

CompileScript: <<
#!/bin/sh -ex
	exec 2>&1
	perlversion=%type_raw[perl]
	perlcmd="perl$perlversion"
	if dpkg --compare-versions "$perlversion" ">=" "5.10.0" && [ "%m" != "powerpc" ]; then
		export ARCHFLAGS=""
		perlcmd="/usr/bin/arch -%m $perlcmd"
	fi
	eval "`$perlcmd -V:archname`"
	$perlcmd Build.PL \
		--install_path arch=%i/lib/perl5/$perlversion/$archname \
		--install_path bin=%i/bin \
		--install_path bindoc=%i/lib/perl5/$perlversion/man/man1 \
		--install_path lib=%i/lib/perl5/$perlversion \
		--install_path libdoc=%i/lib/perl5/$perlversion/man/man3 \
		--install_path script=%i/bin
	./Build
<<

InfoTest: <<
	TestScript: ./Build test || exit 2
<<

InstallScript: <<
	./Build install
	mv %i/bin/pg_prove %i/bin/pg_prove-%type_pkg[perl]
	mv %i/bin/pg_tapgen %i/bin/pg_tapgen-%type_pkg[perl]
<<
DocFiles: Changes README

UpdatePOD: true

PostInstScript: <<
	update-alternatives --install %p/bin/pg_prove pg_prove %p/bin/pg_prove-%type_pkg[perl] %type_pkg[perl]
	update-alternatives --install %p/bin/pg_tapgen pg_tapgen %p/bin/pg_tapgen-%type_pkg[perl] %type_pkg[perl]
<<
PreRmScript: <<
	update-alternatives --remove pg_tapgen %p/bin/pg_tapgen-%type_pkg[perl]
<<

Description: PostgreSQL tests for Test::Harness suite
DescDetail: <<
Note: This module was formerly part of the Test::Harness suite.
<<
DescPackaging: <<
	Cannot TestDepends:test-pod* due to circular dependencies via
	their (or their deps') BuildDepends:test-simple
<<
Homepage: http://search.cpan.org/dist/TAP-Parser-SourceHandler-pgTAP
License: Artistic/GPL
Maintainer: Daniel Macks <dmacks@netspace.org>
<<
