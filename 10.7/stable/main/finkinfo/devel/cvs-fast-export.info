Package: cvs-fast-export
Version: 1.9
Revision: 1
Description: Export CVS to fast-import stream
DescDetail: <<
Export an RCS or CVS history as a fast-import stream. This program
analyzes a collection of RCS files in a CVS repository (or outside of
one) and, when possible, emits an equivalent history in the form of a
fast-import stream. Not all possible histories can be rendered this way;
the program tries to emit useful warnings when it can't. The program can
also produce a visualization of the resulting commit DAG in the DOT
format handled by the graphviz suite.
<<
Homepage: http://www.catb.org/~esr/cvs-fast-export/
License: GPL2
Maintainer: Daniel Johnson <daniel@daniel-johnson.org>

#Source: http://www.catb.org/~esr/%n/%n-%v.tar.gz
# Release tarball is missing some files. Use snapshot from
# gitorious instead.
Source: https://gitorious.org/cvs-fast-export/cvs-fast-export/archive/bb3d9301fc6152dc6ec0d0662d836d31d36e5918.tar.gz
SourceRename: %n-%v.tar.gz
SourceDirectory: %n-%n
Source-MD5: 07fa7748a7375816412bdfa335f1bb86

PatchScript: <<
	# Fix hardcoded path in test.
	perl -pi -e 's|/home/esr/public_html/cvs-fast-export|%b|' tests/t9603.err
	# Replace 'echo -n' with 'printf' in tests/Makefile
	perl -pi -e 's/echo -n/printf/' tests/Makefile
<<

# These are needed to build the manpage.
BuildDepends: <<
	asciidoc-a2x,
	docbook-dtd,
	docbook-xsl,
	libxml2-bin
<<

CompileScript: make prefix=%p

InfoTest: <<
	TestDepends: cvs, rcs
	TestScript: make check || exit 2
<<

InstallScript: <<
	make cvs-fast-export.html cvssync.html install prefix=%p DESTDIR=%d
<<

DocFiles: AUTHORS COPYING NEWS README cvs-fast-export.html cvssync.html docbook-xsl.css
