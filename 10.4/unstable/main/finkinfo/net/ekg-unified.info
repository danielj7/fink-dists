Package: ekg-unified
Version: 1.6
Revision: 1029
Description: Gadu-Gadu program
License: GPL/LGPL
Maintainer: Benjamin Reed <ekg@fink.racoonfink.com>

Depends: %N-shlibs (>= %v-%r), libjpeg-shlibs, readline5-shlibs (>= 5.0-1004), libncurses5-shlibs (>= 5.4-20041023-1006), bind9-ssl-shlibs | bind9-shlibs
BuildDepends: gsm, libjpeg, libtool14, libncurses5 (>= 5.4-20041023-1006), system-openssl-dev, readline5 (>= 5.0-1004), sed, fink (>= 0.28.0-1), pkgconfig, bind9-ssl-dev | bind9-dev, fink (>= 0.24.12-1)
Replaces: ekg (<< %v-%r), ekg-ssl (<< %v-%r)

CustomMirror: <<
	eur-PL: http://dev.null.pl/ekg
	nam-US: http://ranger.befunk.com/fink
	nam-US: http://astrange.ithinksw.net/~astrange/ranger-fink
	nam-CA: http://www.southofheaven.net/befunk
<<
Source: mirror:custom:ekg-%v.tar.gz
SourceDirectory: ekg-%v
Source-MD5: 1094eee5062d9b9900c4b28bd68fb564
PatchFile: %n.patch
PatchFile-MD5: 904cb8d6c195b3fac587f1d12a38eb95

SetCFLAGS: -Os -I%p/lib/system-openssl/include
SetLDFLAGS: -L%p/lib/system-openssl/lib
SetMAKEFLAGS: -j1
NoSetMAKEFLAGS: true
ConfigureParams: --enable-dynamic --enable-shared --enable-ui-readline --enable-ui-ncurses --with-ncurses=%p --with-readline=%p --with-libgsm --with-python=no --with-openssl --with-pthread --disable-ioctld --sysconfdir=%p/etc --mandir=%p/share/man --disable-dependency-tracking
# would use --with-python=yes to activate python stuff
# and export ac_cv_path_PYTHON=%p/bin/python2.5 to get the right path setups
CompileScript: <<
#!/bin/sh -ex

  export PKG_CONFIG_PATH="%p/lib/system-openssl/lib/pkgconfig:$PKG_CONFIG_PATH"
  export lt_cv_sys_max_cmd_len=65536
# export ac_cv_path_PYTHON=%p/bin/python2.5
  ./configure %c
<<

InstallScript: <<
#!/bin/sh -ex
  make install DESTDIR=%d
  mkdir -p %i/share/doc/%n
  pushd docs
  tar -cf - . | (cd %i/share/doc/%n; tar -xf -)
  popd
  rm -Rf %i/share/doc/%n/CVS/
  rm -Rf %i/share/doc/%n/api/CVS/
<<
DocFiles: ChangeLog* lib/COPYING
SplitOff: <<
	Package: %N-dev
	Description: headers and development libraries for ekg
	Depends: %N (= %v-%r)
	Replaces: ekg-dev (<< %v-%r), ekg-ssl-dev (<< %v-%r), ekg-ssl (<< %v-%r), ekg (<< %v-%r)
	BuildDependsOnly: true
	DocFiles: ChangeLog* lib/COPYING
	Files: <<
		include
		lib/libgadu.dylib
		lib/*.la
		lib/*.a
		lib/pkgconfig
	<<
<<
SplitOff2: <<
	Package: %N-shlibs
	Description: shared libraries for ekg
	Depends: bind9-ssl-shlibs | bind9-shlibs
	Replaces: ekg-shlibs (<< %v-%r), ekg-ssl-shlibs (<< %v-%r)
	DocFiles: ChangeLog* lib/COPYING
	Files: lib
	Shlibs: %p/lib/libgadu.3.dylib 4.0.0 %N-shlibs (>= 1.6-3)
<<
SplitOff3: <<
	Package: ekg
	Description: Upgrade package for ekg
	Depends: %N (= %v-%r), fink-obsolete-packages
	DocFiles: ChangeLog* lib/COPYING
<<
SplitOff4: <<
	Package: ekg-shlibs
	Description: Upgrade package for ekg-shlibs
	Depends: %N-shlibs (= %v-%r), fink-obsolete-packages
	DocFiles: ChangeLog* lib/COPYING
<<
SplitOff5: <<
	Package: ekg-dev
	Description: Upgrade package for ekg-dev
	Depends: %N-dev (= %v-%r), fink-obsolete-packages
	DocFiles: ChangeLog* lib/COPYING
<<
SplitOff6: <<
	Package: ekg-ssl
	Description: Upgrade package for ekg-ssl
	Depends: %N (= %v-%r), fink-obsolete-packages
	DocFiles: ChangeLog* lib/COPYING
<<
SplitOff7: <<
	Package: ekg-ssl-shlibs
	Description: Upgrade package for ekg-ssl-shlibs
	Depends: %N-shlibs (= %v-%r), fink-obsolete-packages
	DocFiles: ChangeLog* lib/COPYING
<<
SplitOff8: <<
	Package: ekg-ssl-dev
	Description: Upgrade package for ekg-ssl-dev
	Depends: %N-dev (= %v-%r), fink-obsolete-packages
	DocFiles: ChangeLog* lib/COPYING
<<

Homepage: http://dev.null.pl/ekg/

