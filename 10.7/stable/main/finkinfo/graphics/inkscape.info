Package: inkscape
Version: 0.48.4
Revision: 13
GCC: 4.0
Maintainer: Daniel Macks <dmacks@netspace.org>
Depends: <<
	aspell-shlibs (>= 0.60.5-1002),
	atk1-shlibs (>= 1.32.0-1),
	cairo-shlibs (>= 1.12.8-1),
	cairomm1-shlibs (>= 1.8.2-3),
	default-icon-theme,
	fontconfig2-shlibs (>= 2.10.0-1),
	freetype219-shlibs (>= 2.4.11-1),
	gc-shlibs (>= 6.4-1001),
	gconf2-shlibs (>= 2.28.0-1),
	glib2-shlibs (>= 2.22.0-1),
	glibmm2.4-shlibs (>= 2.22.0-1),
	gnome-vfs2-unified-shlibs (>= 1:2.24.0-1),
	gsl-shlibs (>= 1.15-1),
	gtk+2-shlibs (>= 2.18.0-1),
	gtkmm2.4-shlibs (>= 2.18.0-1),
	gtkspell2-shlibs (>= 2.0.14-1),
	lcms-shlibs (>= 1.13-1),
	libgettext8-shlibs,
	libiconv,
	libmagick++6.q16.3-shlibs,
	libmagickcore6.q16.2-shlibs,
	libmagickwand6.q16.2-shlibs,
	libpng16-shlibs,
	libsigc++2-shlibs (>= 2.0.17-1001),
	libwpd-0.9-shlibs,
	libwpg-0.2-shlibs,
	libxml2-shlibs (>= 2.9.1-1),
	libxslt-shlibs (>= 1.1.22-1),
	pango1-xft2-ft219 (>= 1.24.5-4),
	pango1-xft2-ft219-shlibs (>= 1.24.5-4),
	pangomm1.4.1-shlibs,
	poppler37-shlibs,
	poppler8-glib-shlibs (>= 0.22.5-1),
	popt-shlibs,
	x11
<<
BuildDepends: <<
	aspell-dev (>= 0.60.5-1002),
	atk1 (>= 1.32.0-1),
	autoconf2.6,
	automake1.14,
	boost1.55-nopython,
	cairo (>= 1.12.8-1),
	cairomm1 (>= 1.8.2-3),
	evince,
	fink (>= 0.30.0),
	fink-package-precedence,
	fontconfig2-dev (>= 2.10.0-1),
	freetype219 (>= 2.4.11-1),
	gc (>= 6.4-1001),
	gconf2-dev (>= 2.28.0-1),
	gettext-bin,
	gettext-tools,
	glib2-dev (>= 2.22.0-1),
	glibmm2.4-dev (>= 2.22.0-1),
	gnome-vfs2-unified-dev (>= 1:2.24.2-1),
	gsl (>= 1.15-1),
	gtk+2-dev (>= 2.18.0-1),
	gtkmm2.4-gtk-dev (>= 2.18.0-1),
	gtkspell2-dev (>= 2.0.14-1),
	intltool40,
	lcms (>= 1.13-1),
	libgettext8-dev,
	libiconv-dev,
	libmagick++6.q16.3-dev,
	libmagickcore6.q16.2-dev,
	libmagickwand6.q16.2-dev,
	libpng16,
	libsigc++2 (>= 2.0.17-1001),
	libwpd-0.9-dev,
	libwpg-0.2-dev,
	libxml2 (>= 2.9.1-1),
	libxslt (>= 1.1.22-1),
	pango1-xft2-ft219-dev (>= 1.24.5-4),
	pangomm1.4.1,
	pkgconfig (>= 0.23),
	poppler37,
	poppler37-xpdf,
	poppler8-glib (>= 0.22.5-1),
	popt,
	x11-dev
<<
Source: mirror:sourceforge:%n/%n-%v.tar.bz2
Source-MD5: 47bd8546e42ba396624eef9eb66b9b6c
SetCPPFLAGS: -I%p/opt/boost-1_55/include
ConfigureParams: --mandir=%p/share/man --enable-dependency-tracking --with-gnome-vfs --enable-lcms
PatchFile: %n.patch
PatchFile-MD5: 07995161ac05df05428cd7373690958f

# Changes up to http://bazaar.launchpad.net/~inkscape.dev/inkscape/RELEASE_0_48_BRANCH/files/9985
PatchFile2: inkscape_patch-thru-r9985.patch
PatchFile2-MD5: c0271fed8e4664e95092799cb39fcafe

# modified from http://bazaar.launchpad.net/~inkscape.dev/inkscape/trunk/revision/10062
PatchFile3: inkscape_rev10062-preferences.patch
PatchFile3-MD5: 9672c725e096bbd8087244d82ad99e20


PatchScript: <<
	patch -p1 < %{PatchFile}
	patch -p0 < %{PatchFile2}
	patch -p1 < %{PatchFile3}

	# fink doesn't have gtk >= 2.22 yet, make sure
	# we get consistent build results when it does
	perl -pi -e 's/(gtkmm-2.4 >=) 2\.22/${1} >= 99999.FORCE.NONDETECT/g' configure
	perl -pi -e 's/(gtkmm-2.4 >=) 2\.24/${1} >= 99999.FORCE.NONDETECT/g' configure
	perl -pi -e 's/(glibmm-2.4 >=) 2\.28/${1} >= 99999.FORCE.NONDETECT/g' configure
<<
CompileScript: <<
#!/bin/sh -ev

	if [[ $(sw_vers -productVersion | cut -d. -f1-2) > 10.8 ]]; then
	  export CXXFLAGS="$CXXFLAGS -std=c++11 -g -O2"
	fi
	autoreconf -vfi
	./configure %c
	make V=1
	fink-package-precedence .
<<
InstallScript: make install DESTDIR=%d
DocFiles: AUTHORS COPYING* ChangeLog po/ChangeLog:ChangeLog.po NEWS README* TRANSLATORS
Description: SVG application
DescPort: <<
#	Add explicit link to libX11. See:
#	https://bugs.launchpad.net/inkscape/+bug/282338
	-lX11 is there but need -L to find it (and may as well do -I
	for symmetry).

	inkscape-preferences.cpp
		variable length array of non-POD element type 'Glib::ustring'
		Modified from http://bazaar.launchpad.net/~inkscape.dev/inkscape/trunk/revision/10062   

Add patch with RELEASE_0_48_BRANCH changes to revsion 9985 and add
missing libc++ fix to existing inkscape.patch. Builds against libc++
must pass -std=c++11 on CXXFLAGS.
<<
DescPackaging: <<
	Formerly maintained by Michael Wybrow
	then by Todai Fink Team

	Needs the older xpdf interface to poppler. See:
	https://bugs.launchpad.net/inkscape/+bug/903919

	Could convert to use external potrace?
	Could convert to use external croco?
		See: https://bugs.launchpad.net/inkscape/+bug/648246
	Could convert to use external libgdl?
		See: https://bugs.launchpad.net/inkscape/+bug/792115

	Uptream claims lcms2 2.2 and 2.3 are buggy on OS X, so staying
	with older lcms lib for now. See also (NB: we don't link both)
	https://bugs.launchpad.net/inkscape/+bug/1024344

	Added evince dependency so that Print Preview works.

	Upstream clang fix:
	http://bazaar.launchpad.net/~inkscape.dev/inkscape/trunk/revision/12778
<<
Homepage: http://www.inkscape.org/
License: GPL
