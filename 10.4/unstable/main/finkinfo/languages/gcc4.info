Package: gcc4
Version: 4.1.99999
Revision: 20060617
Epoch: 2
Source: ftp://gcc.gnu.org/pub/gcc/snapshots/4.2-%r/gcc-4.2-%r.tar.bz2
Source-MD5: 620d8821f9c9e881f2846eb28ae76066
NoSetCPPFLAGS: True
NoSetLDFLAGS: True
Conflicts: gcc42
Replaces: gcc42
Depends: gmp-shlibs (>= 4.2.1-1), libmpfr1-shlibs (>= 2.2.0-2), odcctools (>= 590-20060608), %N-shlibs (>= %e:%v-%r), libiconv, libgettext3-shlibs, fink-obsolete-packages
BuildDepends: gmp (>= 4.2.1-1), libmpfr1 (>= 2.2.0-2), libiconv-dev, gettext-tools, libgettext3-dev
ConfigureParams: <<
  --prefix=%p/lib/gcc4 --mandir=%p/share/man --infodir=%p/share/info --enable-languages=c,c++,fortran,objc,java \
  `cc -v 2>&1|grep '^Configured'|tr ' ' '\n'|egrep '^\-\-(with\-arch|host)='|xargs` --disable-multilib \
  --with-as=%p/lib/odcctools/bin/as --with-ld=%p/lib/odcctools/bin/ld --with-nm=%p/lib/odcctools/bin/nm \
  --with-gmp=%p --with-libiconv-prefix=%p --with-system-zlib
<<
PatchScript: <<
 #!/bin/sh -ev
 # make sure odcctools libtool being used.
 perl -pi -e 's,/usr/bin/libtool,%p/lib/odcctools/bin/libtool,;' gcc/config/darwin.h
 perl -pi -e 's,nm -P,%p/lib/odcctools/bin/nm -P,;' libstdc++-v3/scripts/make_exports.pl
<<
Patch: %n.patch
NoSetMACOSX_DEPLOYMENT_TARGET: True
CompileScript: <<
 #!/bin/sh -ev
 ulimit -S -s unlimited
 mkdir ../darwin_objdir
 cd ../darwin_objdir
 ../gcc-4.2-%r/configure %c
 make
 # make check requires autogen, dejagnu and expect.
 #make check-gcc
<<
InstallScript: <<
 #!/bin/sh -ev
 cd ../darwin_objdir
 make install DESTDIR=%d 
 touch %i/lib/gcc4/lib/libgcc-math.0.dylib
 touch %i/lib/gcc4/lib/libgcc-math.dylib
 touch %i/lib/gcc4/lib/libgcc-math.0.0.0.dylib
 mkdir -p %i/bin
 cd %i/bin
 ln -s %p/lib/gcc4/bin/gfortran gfortran
 ln -s %p/lib/gcc4/bin/gcc gcc-4
 ln -s %p/lib/gcc4/bin/g++ g++-4
 ln -s %p/lib/gcc4/bin/c++ c++-4
 ln -s %p/lib/gcc4/bin/cpp cpp-4
 ln -s %p/lib/gcc4/bin/gcov gcov-4
 ln -s %p/lib/gcc4/bin/gcj gcj
 ln -s %p/lib/gcc4/bin/gcj-dbtool gcj-dbtool
 ln -s %p/lib/gcc4/bin/gcjh gcjh
 ln -s %p/lib/gcc4/bin/gij gij
 ln -s %p/lib/gcc4/bin/gjnih gjnih
 ln -s %p/lib/gcc4/bin/grmiregistry grmiregistry
 ln -s %p/lib/gcc4/bin/grmic grmic
 ln -s %p/lib/gcc4/bin/jcf-dump jcf-dump
 ln -s %p/lib/gcc4/bin/jv-convert jv-convert
 ln -s %p/lib/gcc4/bin/jv-scan jv-scan
 mv %i/share/info/cpp.info %i/share/info/cpp-4.info
 mv %i/share/info/gcc.info %i/share/info/gcc-4.info
 mv %i/share/man/man1/cpp.1 %i/share/man/man1/cpp-4.1
 mv %i/share/man/man1/g++.1 %i/share/man/man1/g++-4.1
 mv %i/share/man/man1/gcc.1 %i/share/man/man1/gcc-4.1
 mv %i/share/man/man1/gcov.1 %i/share/man/man1/gcov-4.1
 # remove build path from .la files
 perl -pi -e "s, \-L`sed -e 's,/[^/]*$,,'<<<'%b'`[^ ']*,,g" `find %i/lib/gcc4/lib -name '*.la'`
<<
SplitOff: <<
  Package: %N-shlibs
  Replaces: gcc4 (<= 20050130-4), gfortran-shlibs
  Provides: gfortran-shlibs
  Description: Shared libraries for gcc4
  DocFiles: gcc/COPYING gcc/COPYING.LIB
  Homepage: http://gcc.gnu.org/
  Files: <<
    lib/gcc4/lib/libgcc_s.1.dylib
    lib/gcc4/lib/libgfortran.1.dylib
    lib/gcc4/lib/libgfortran.1.0.0.dylib
    lib/gcc4/lib/libssp.0.dylib
    lib/gcc4/lib/libssp.0.0.0.dylib
    lib/gcc4/lib/libgcc_s.10.4.dylib
    lib/gcc4/lib/libgcc_s.10.5.dylib
    lib/gcc4/lib/libobjc-gnu.2.dylib
    lib/gcc4/lib/libobjc-gnu.2.0.0.dylib
    lib/gcc4/lib/libstdc++.6.dylib
    lib/gcc4/lib/libstdc++.6.0.9.dylib
    lib/gcc4/lib/libgomp.1.dylib
    lib/gcc4/lib/libgomp.1.0.0.dylib
    lib/gcc4/lib/libgcc-math.0.dylib
    lib/gcc4/lib/libgcc-math.0.0.0.dylib
    lib/gcc4/lib/libffi.4.0.1.dylib
    lib/gcc4/lib/libffi.4.dylib
    lib/gcc4/lib/libgcj.7.0.0.dylib
    lib/gcc4/lib/libgcj.7.dylib
    lib/gcc4/lib/libgij.7.0.0.dylib
    lib/gcc4/lib/libgij.7.dylib
  <<
  Shlibs: <<
    %p/lib/gcc4/lib/libgfortran.1.dylib 2.0.0 %n (>= 4.1-1)
    %p/lib/gcc4/lib/libffi.4.dylib 5.0.0 %n (>= 20050130-5)
    %p/lib/gcc4/lib/libstdc++.6.dylib 5.0.0 %n (>= 4.1-1)
    %p/lib/gcc4/lib/libgcc_s.1.dylib 1.0.0 %n (>= 4.1-1)
    %p/lib/gcc4/lib/libgcj.7.dylib 8.0.0 %n (>= 4.1-1)
    %p/lib/gcc4/lib/libgij.7.dylib 8.0.0 %n (>= 4.1-1)
    %p/lib/gcc4/lib/libssp.0.dylib 1.0.0 %n (>= 4.1-1)
    %p/lib/gcc4/lib/libobjc-gnu.1.dylib 2.0.0 %n (>= 20050130-5)
    %p/lib/gcc4/lib/libgomp.1.dylib 2.0.0 %n (>= 2:4.1.99-20060513)
    %p/lib/gcc4/lib/libgcc-math.0.dylib 1.0.0 %n (>= 2:4.1.99-20060513)
  <<
<<
License: GPL
Description: GNU Compiler Collection Version 4
InfoDocs: cpp-4.info cppinternals.info gcc-4.info gccinstall.info gccint.info gcj.info gfortran.info
DescDetail: <<
 GCC, the GNU Compiler Collection, includes front ends for
 C, C++, Objective-C, Objective-C++, Fortran, Java, and Ada.
 .
 C, C++, Objective C and Fortran and Java are included in this package.
 .
 The C and C++ compilers are named gcc-4 and g++-4 to avoid
 conflicts with gcc and g++ installed by the Apple Developer Tools
<<
Homepage: http://gcc.gnu.org/
Maintainer: Jack Howarth <howarth@bromo.med.uc.edu>

 	  	 
