Package: sbcl
Version: 0.8.12
Revision: 2
Description: Steel Bank Common Lisp
License: BSD
Maintainer: Lars Rosengreen <lars@margay.org>

# NOTE: The version of the bootstrap binary does not automatically
# change when the version field is updated!  CompileScript and Source2
# need to be updated by hand when moving to a new version of the
# bootstap binary


Depends: gnupg
BuildDepends: texinfo (>= 4.6)


Source: mirror:sourceforge:%n/%n-%v-source.tar.bz2
Source2: mirror:sourceforge:%n/%n-0.8.9-ppc-darwin-binary.tar.bz2
Source-MD5:  f23a177b2813740563f9e3f364e1dee8
Source2-MD5: 11035de9d5c82a0fde4e610198c6d2e1

SourceDirectory: %n-%v

CompileScript: <<
  unset LD_PREBIND ; sh make.sh "../%n-0.8.9-ppc-darwin/src/runtime/sbcl --core ../%n-0.8.9-ppc-darwin/output/sbcl.core --disable-debugger --sysinit /dev/null --userinit /dev/null"
  cd doc/manual ; make html info
<<


# sbcl.info is removed from doc/manual so the install.sh script
# included with SBCL doesn't find it and try to pass it to install-info 
InstallScript: <<
  find %b -type d -name CVS -depth -exec rm -rf {} \;
  find %b -type f -name .cvsignore -depth -exec rm -f {} \;
  install -m 755 -d  %i/share/info
  install -m 644 doc/manual/%n.info %i/share/info
  rm doc/manual/%n.info
  unset SBCL_HOME ; INSTALL_ROOT=%i sh install.sh
  mv %i/bin/%n %i/lib/%n/%n.bin
  echo '#! /bin/sh' > %i/bin/%n
  echo 'SBCL_HOME=%p/lib/%n/ exec %p/lib/%n/%n.bin $@' >> %i/bin/%n
  chmod 755 %i/bin/%n
<<

InfoDocs: %n.info

DocFiles: BUGS COPYING CREDITS NEWS README


Homepage: http://www.sbcl.org/

DescDetail: <<
Steel Bank Common Lisp (SBCL) is an open source development system for
ANSI Common Lisp.  It provides an interactive environment including an
integrated high quality native compiler, interpreter, and a debugger.
<< 

DescPort: << 
Uses a binary version of SBCL for bootstrapping.  gnupg is needed to
validate common lisp packages downloaded with asdf-install.
<<
