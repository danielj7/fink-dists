diff -Nurd -x'*~' gtk+-2.14.3.orig/Makefile.in gtk+-2.14.3/Makefile.in
--- gtk+-2.14.3.orig/Makefile.in	2008-09-23 23:11:35.000000000 -0400
+++ gtk+-2.14.3/Makefile.in	2008-10-10 01:11:47.000000000 -0400
@@ -516,7 +516,7 @@
 	&& DISPLAY=:$$XID && export DISPLAY
 
 
-SRC_SUBDIRS = gdk-pixbuf gdk gtk modules demos tests perf contrib
+SRC_SUBDIRS = gdk-pixbuf gdk gtk modules             perf contrib
 SUBDIRS = po po-properties $(SRC_SUBDIRS) docs m4macros
 
 # require automake 1.4
diff -Nurd -x'*~' gtk+-2.14.3.orig/configure gtk+-2.14.3/configure
--- gtk+-2.14.3.orig/configure	2008-09-23 23:11:45.000000000 -0400
+++ gtk+-2.14.3/configure	2008-10-16 00:38:12.000000000 -0400
@@ -33739,16 +33739,6 @@
 fi
 
 
-  # Check for the RANDR extension
-  if $PKG_CONFIG --exists "xrandr >= 1.2" ; then
-
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_RANDR 1
-_ACEOF
-
-
-     X_PACKAGES="$X_PACKAGES xrandr"
-  fi
 
   # Checks for Xcursor library
 
diff -Nurd -x'*~' gtk+-2.14.3.orig/docs/tools/shooter.c gtk+-2.14.3/docs/tools/shooter.c
--- gtk+-2.14.3.orig/docs/tools/shooter.c	2008-09-19 00:44:09.000000000 -0400
+++ gtk+-2.14.3/docs/tools/shooter.c	2008-10-10 01:11:47.000000000 -0400
@@ -16,7 +16,11 @@
 #include <stdlib.h>
 #include <fcntl.h>
 #include <errno.h>
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 #include "widgets.h"
 #include "shadow.h"
 
diff -Nurd -x'*~' gtk+-2.14.3.orig/gdk/Makefile.in gtk+-2.14.3/gdk/Makefile.in
--- gtk+-2.14.3.orig/gdk/Makefile.in	2008-09-23 23:11:38.000000000 -0400
+++ gtk+-2.14.3/gdk/Makefile.in	2008-10-11 13:13:23.000000000 -0400
@@ -577,7 +577,7 @@
 libgdk_x11_2_0_la_LIBADD = x11/libgdk-x11.la $(GDK_DEP_LIBS) \
   $(top_builddir)/gdk-pixbuf/libgdk_pixbuf-$(GTK_API_VERSION).la
 
-libgdk_x11_2_0_la_LDFLAGS = $(LDADD)
+libgdk_x11_2_0_la_LDFLAGS = $(LDADD) -lXrender
 
 libgdk_quartz_2_0_la_SOURCES = $(common_sources) gdkkeynames.c
 libgdk_quartz_2_0_la_LIBADD = quartz/libgdk-quartz.la $(GDK_DEP_LIBS) \
diff -Nurd -x'*~' gtk+-2.14.3.orig/gdk/directfb/gdkim-directfb.c gtk+-2.14.3/gdk/directfb/gdkim-directfb.c
--- gtk+-2.14.3.orig/gdk/directfb/gdkim-directfb.c	2008-09-19 00:44:41.000000000 -0400
+++ gtk+-2.14.3/gdk/directfb/gdkim-directfb.c	2008-10-10 01:11:47.000000000 -0400
@@ -33,7 +33,11 @@
 #include "config.h"
 
 #include <string.h>
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 
 #include "gdkdirectfb.h"
 
diff -Nurd -x'*~' gtk+-2.14.3.orig/gdk/x11/gdkdrawable-x11.c gtk+-2.14.3/gdk/x11/gdkdrawable-x11.c
--- gtk+-2.14.3.orig/gdk/x11/gdkdrawable-x11.c	2008-09-19 00:44:44.000000000 -0400
+++ gtk+-2.14.3/gdk/x11/gdkdrawable-x11.c	2008-10-10 01:11:47.000000000 -0400
@@ -959,11 +959,19 @@
    * RENDER's preferred order
    */
   pf.direct.alphaMask = 0;
-  /* ARGB */
-  pf.direct.red = 16;
-  pf.direct.green = 8;
-  pf.direct.blue = 0;
-  
+  if (ImageByteOrder (xdisplay) == LSBFirst)
+    {
+      /* ARGB */
+      pf.direct.red = 16;
+      pf.direct.green = 8;
+      pf.direct.blue = 0;
+    } else {
+      /* BGRA */
+      pf.direct.red = 8;
+      pf.direct.green = 16;
+      pf.direct.blue = 24;
+    }
+
   *format = XRenderFindFormat (xdisplay,
 			       (PictFormatType | PictFormatDepth |
 				PictFormatRedMask | PictFormatRed |
@@ -974,7 +982,14 @@
 			       0);
 
   pf.direct.alphaMask = 0xff;
-  pf.direct.alpha = 24;
+  if (ImageByteOrder (xdisplay) == LSBFirst)
+    {
+      /* ARGB */
+      pf.direct.alpha = 24;
+    } else {
+      /* BGRA */
+      pf.direct.alpha = 0;
+    }
   
   *mask = XRenderFindFormat (xdisplay,
 			     (PictFormatType | PictFormatDepth |
@@ -991,11 +1006,19 @@
 
   pf.type = PictTypeDirect;
   pf.depth = 32;
-  pf.direct.red = 16;
-  pf.direct.green = 8;
-  pf.direct.blue = 0;
+  if (ImageByteOrder (xdisplay) == LSBFirst)
+    {
+      pf.direct.red = 16;
+      pf.direct.green = 8;
+      pf.direct.blue = 0;
+      pf.direct.alpha = 24;
+    } else {
+      pf.direct.red = 8;
+      pf.direct.green = 16;
+      pf.direct.blue = 24;
+      pf.direct.alpha = 0;
+    }
   pf.direct.alphaMask = 0xff;
-  pf.direct.alpha = 24;
 
   *format = XRenderFindFormat (xdisplay,
 			       (PictFormatType | PictFormatDepth |
diff -Nurd -x'*~' gtk+-2.14.3.orig/gdk/x11/gdkfont-x11.c gtk+-2.14.3/gdk/x11/gdkfont-x11.c
--- gtk+-2.14.3.orig/gdk/x11/gdkfont-x11.c	2008-09-19 00:44:44.000000000 -0400
+++ gtk+-2.14.3/gdk/x11/gdkfont-x11.c	2008-10-10 01:11:47.000000000 -0400
@@ -29,7 +29,11 @@
 #include "config.h"
 #include <X11/Xlib.h>
 #include <X11/Xos.h>
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 
 #include "gdkx.h"
 #include "gdkfont.h"
diff -Nurd -x'*~' gtk+-2.14.3.orig/gdk/x11/gdkim-x11.c gtk+-2.14.3/gdk/x11/gdkim-x11.c
--- gtk+-2.14.3.orig/gdk/x11/gdkim-x11.c	2008-09-19 00:44:44.000000000 -0400
+++ gtk+-2.14.3/gdk/x11/gdkim-x11.c	2008-10-10 01:11:47.000000000 -0400
@@ -26,7 +26,11 @@
 
 #include "config.h"
 
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 #include <stdlib.h>
 #include <string.h>
 
diff -Nurd -x'*~' gtk+-2.14.3.orig/gtk/gtkimmulticontext.c gtk+-2.14.3/gtk/gtkimmulticontext.c
--- gtk+-2.14.3.orig/gtk/gtkimmulticontext.c	2008-09-19 10:34:52.000000000 -0400
+++ gtk+-2.14.3/gtk/gtkimmulticontext.c	2008-10-10 01:11:47.000000000 -0400
@@ -20,7 +20,11 @@
 #include "config.h"
 
 #include <string.h>
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 
 #include "gtkimmulticontext.h"
 #include "gtkimmodule.h"
diff -Nurd -x'*~' gtk+-2.14.3.orig/gtk/gtkmain.c gtk+-2.14.3/gtk/gtkmain.c
--- gtk+-2.14.3.orig/gtk/gtkmain.c	2008-09-19 00:44:04.000000000 -0400
+++ gtk+-2.14.3/gtk/gtkmain.c	2008-10-10 01:11:47.000000000 -0400
@@ -29,7 +29,11 @@
 #include <glib.h>
 #include "gdkconfig.h"
 
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 
 #include <stdio.h>
 #include <stdlib.h>
diff -Nurd -x'*~' gtk+-2.14.3.orig/gtk/gtkpagesetupunixdialog.c gtk+-2.14.3/gtk/gtkpagesetupunixdialog.c
--- gtk+-2.14.3.orig/gtk/gtkpagesetupunixdialog.c	2008-09-19 00:44:04.000000000 -0400
+++ gtk+-2.14.3/gtk/gtkpagesetupunixdialog.c	2008-10-10 01:11:47.000000000 -0400
@@ -21,7 +21,11 @@
 
 #include "config.h"
 #include <string.h>
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 
 #ifdef HAVE__NL_MEASUREMENT_MEASUREMENT
 #include <langinfo.h>
diff -Nurd -x'*~' gtk+-2.14.3.orig/gtk/gtkpapersize.c gtk+-2.14.3/gtk/gtkpapersize.c
--- gtk+-2.14.3.orig/gtk/gtkpapersize.c	2008-09-19 00:44:05.000000000 -0400
+++ gtk+-2.14.3/gtk/gtkpapersize.c	2008-10-10 01:11:47.000000000 -0400
@@ -22,7 +22,11 @@
 #include "config.h"
 #include <string.h>
 #include <stdlib.h>
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 #if defined(HAVE__NL_PAPER_HEIGHT) && defined(HAVE__NL_PAPER_WIDTH)
 #include <langinfo.h>
 #endif
diff -Nurd -x'*~' gtk+-2.14.3.orig/gtk/gtkrc.c gtk+-2.14.3/gtk/gtkrc.c
--- gtk+-2.14.3.orig/gtk/gtkrc.c	2008-09-19 00:44:05.000000000 -0400
+++ gtk+-2.14.3/gtk/gtkrc.c	2008-10-10 01:11:47.000000000 -0400
@@ -26,7 +26,11 @@
 
 #include "config.h"
 
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 #ifdef HAVE_UNISTD_H
 #include <unistd.h>
 #endif
diff -Nurd -x'*~' gtk+-2.14.3.orig/gtk/gtkspinbutton.c gtk+-2.14.3/gtk/gtkspinbutton.c
--- gtk+-2.14.3.orig/gtk/gtkspinbutton.c	2008-09-23 18:21:10.000000000 -0400
+++ gtk+-2.14.3/gtk/gtkspinbutton.c	2008-10-10 01:11:47.000000000 -0400
@@ -32,7 +32,11 @@
 #include <stdlib.h>
 #include <math.h>
 #include <string.h>
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 #include "gdk/gdkkeysyms.h"
 #include "gtkbindings.h"
 #include "gtkspinbutton.h"
diff -Nurd -x'*~' gtk+-2.14.3.orig/gtk/gtkwidget.c gtk+-2.14.3/gtk/gtkwidget.c
--- gtk+-2.14.3.orig/gtk/gtkwidget.c	2008-09-19 00:44:03.000000000 -0400
+++ gtk+-2.14.3/gtk/gtkwidget.c	2008-10-10 01:11:47.000000000 -0400
@@ -27,7 +27,11 @@
 #include "config.h"
 #include <stdarg.h>
 #include <string.h>
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 #include "gtkcontainer.h"
 #include "gtkaccelmap.h"
 #include "gtkclipboard.h"
diff -Nurd -x'*~' gtk+-2.14.3.orig/ltmain.sh gtk+-2.14.3/ltmain.sh
--- gtk+-2.14.3.orig/ltmain.sh	2008-08-29 18:27:25.000000000 -0400
+++ gtk+-2.14.3/ltmain.sh	2008-10-10 01:11:47.000000000 -0400
@@ -771,6 +771,7 @@
       exit $EXIT_FAILURE
       ;;
     *)
+
       # Get the name of the library object.
       [ -z "$libobj" ] && libobj=`$echo "X$srcfile" | $Xsed -e 's%^.*/%%'`
       ;;
@@ -2924,100 +2925,72 @@
 	    fi
 	    tmp_libs="$tmp_libs $deplib"
 	  done
-
-	  if test "$link_all_deplibs" != no; then
-	    # Add the search paths of all dependency libraries
-	    for deplib in $dependency_libs; do
-	      case $deplib in
-	      -L*) path="$deplib" ;;
-	      *.la)
-		dir=`$echo "X$deplib" | $Xsed -e 's%/[^/]*$%%'`
-		test "X$dir" = "X$deplib" && dir="."
-		# We need an absolute path.
-		case $dir in
-		[\\/]* | [A-Za-z]:[\\/]*) absdir="$dir" ;;
-		*)
-		  absdir=`cd "$dir" && pwd`
-		  if test -z "$absdir"; then
-		    $echo "$modename: warning: cannot determine absolute directory name of \`$dir'" 1>&2
-		    absdir="$dir"
-		  fi
-		  ;;
-		esac
-		if grep "^installed=no" $deplib > /dev/null; then
-		  path="$absdir/$objdir"
-		else
-		  eval libdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $deplib`
-		  if test -z "$libdir"; then
-		    $echo "$modename: \`$deplib' is not a valid libtool archive" 1>&2
-		    exit $EXIT_FAILURE
-		  fi
-		  if test "$absdir" != "$libdir"; then
-		    $echo "$modename: warning: \`$deplib' seems to be moved" 1>&2
-		  fi
-		  path="$absdir"
-		fi
-		depdepl=
-		case $host in
-		*-*-darwin*)
-		  # we do not want to link against static libs,
-		  # but need to link against shared
-		  eval deplibrary_names=`${SED} -n -e 's/^library_names=\(.*\)$/\1/p' $deplib`
-		  eval deplibdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $deplib`
-		  if test -n "$deplibrary_names" ; then
-		    for tmp in $deplibrary_names ; do
-		      depdepl=$tmp
-		    done
-		    if test -f "$deplibdir/$depdepl" ; then
-		      depdepl="$deplibdir/$depdepl"
-	      	    elif test -f "$path/$depdepl" ; then
-		      depdepl="$path/$depdepl"
-		    else
-		      # Can't find it, oh well...
-		      depdepl=
-		    fi
-		    # do not add paths which are already there
-		    case " $newlib_search_path " in
-		    *" $path "*) ;;
-		    *) newlib_search_path="$newlib_search_path $path";;
-		    esac
-		  fi
-		  path=""
-		  ;;
-		*)
-		  path="-L$path"
-		  ;;
-		esac
-		;;
-	      -l*)
-		case $host in
-		*-*-darwin*)
-		  # Again, we only want to link against shared libraries
-		  eval tmp_libs=`$echo "X$deplib" | $Xsed -e "s,^\-l,,"`
-		  for tmp in $newlib_search_path ; do
-		    if test -f "$tmp/lib$tmp_libs.dylib" ; then
-		      eval depdepl="$tmp/lib$tmp_libs.dylib"
-		      break
-		    fi
-		  done
-		  path=""
-		  ;;
-		*) continue ;;
-		esac
-		;;
-	      *) continue ;;
-	      esac
-	      case " $deplibs " in
-	      *" $path "*) ;;
-	      *) deplibs="$path $deplibs" ;;
-	      esac
-	      case " $deplibs " in
-	      *" $depdepl "*) ;;
-	      *) deplibs="$depdepl $deplibs" ;;
-	      esac
-	    done
-	  fi # link_all_deplibs != no
-	fi # linkmode = lib
+          if test "$link_all_deplibs" != no; then
+            # Add the search paths of all dependency libraries
+            for deplib in $dependency_libs; do
+              case $deplib in
+              -L*) path="$deplib" ;;
+              *.la)
+#               func_dirname "$deplib" "" "."
+#               dir="$func_dirname_result"
+                case "$deplib" in
+                  */*) dir="${deplib%/*}" ;;
+                  *  ) dir="." ;;
+                esac
+                # We need an absolute path.
+                case $dir in
+                [\\/]* | [A-Za-z]:[\\/]*) absdir="$dir" ;;
+                *)
+                  absdir=`cd "$dir" && pwd`
+                  if test -z "$absdir"; then
+                    $echo "$modename: warning: cannot determine absolute directory name of \`$dir'" 1>&2
+                    absdir="$dir"
+                  fi
+                  ;;
+                esac
+                if grep "^installed=no" $deplib > /dev/null; then
+                case $host in
+                *-*-darwin*)
+                  depdepl=
+                  eval deplibrary_names=`${SED} -n -e 's/^library_names=\(.*\)$/\1/p' $deplib`
+                  if test -n "$deplibrary_names" ; then
+                    for tmp in $deplibrary_names ; do
+                      depdepl=$tmp
+                    done
+                    if test -f "$absdir/$objdir/$depdepl" ; then
+                      depdepl="$absdir/$objdir/$depdepl"
+                      darwin_install_name=`otool -L $depdepl | awk '{if (NR == 2) {print $1;exit}}'`
+                      if test -z "$darwin_install_name"; then
+                          darwin_install_name=`otool64 -L $depdepl  | awk '{if (NR == 2) {print $1;exit}}'`
+                      fi
+                      compiler_flags="$compiler_flags ${wl}-dylib_file ${wl}${darwin_install_name}:${depdepl}"
+                      linker_flags="$linker_flags -dylib_file ${darwin_install_name}:${depdepl}"
+                      path=
+                    fi
+                  fi
+                  ;;
+                *)
+                  path="-L$absdir/$objdir"
+                  ;;
+                esac
+                else
+                  eval libdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $deplib`
+                  test -z "$libdir" && \
+                    $echo "\`$deplib' is not a valid libtool archive" 1>&2
+                  test -z "$libdir" && exit 1
+                  test "$absdir" != "$libdir" && \
+                    $echo "\`$deplib' seems to be moved" 1>&2
+                  path="-L$absdir"
+                fi
+                ;;
+              esac
+              case " $deplibs " in
+              *" $path "*) ;;
+              *) deplibs="$path $deplibs" ;;
+              esac
+            done
+          fi # link_all_deplibs != no
+        fi # linkmode = lib
       done # for deplib in $libs
       dependency_libs="$newdependency_libs"
       if test "$pass" = dlpreopen; then
diff -Nurd -x'*~' gtk+-2.14.3.orig/modules/input/Makefile.in gtk+-2.14.3/modules/input/Makefile.in
--- gtk+-2.14.3.orig/modules/input/Makefile.in	2008-09-23 23:11:41.000000000 -0400
+++ gtk+-2.14.3/modules/input/Makefile.in	2008-10-10 01:20:30.000000000 -0400
@@ -1331,19 +1331,7 @@
 # install-data-am, and not install-exec-am. We need to ensure this gets run
 # after the libraries are installed in their final locations.
 install-data-hook:
-	@if $(RUN_QUERY_IMMODULES_TEST) ; then \
-	  echo $(mkinstalldirs) $(DESTDIR)$(sysconfdir)/gtk-2.0 ; \
-	  $(mkinstalldirs) $(DESTDIR)$(sysconfdir)/gtk-2.0 ; \
-	  echo "$(top_builddir)/gtk/gtk-query-immodules-2.0 > $(DESTDIR)$(sysconfdir)/gtk-2.0/gtk.immodules" ; \
-	  $(top_builddir)/gtk/gtk-query-immodules-2.0 > $(DESTDIR)$(sysconfdir)/gtk-2.0/gtk.immodules ; \
-	else \
-	  echo "***" ; \
-	  echo "*** Warning: gtk.immodules not built" ; \
-	  echo "***" ; \
-	  echo "*** Generate this file manually on host" ; \
-	  echo "*** system using gtk-query-immodules-2.0" ; \
-	  echo "***" ; \
-        fi
+	$(mkinstalldirs) $(DESTDIR)$(sysconfdir)/gtk-2.0
 
 uninstall-local:
 	rm -f $(DESTDIR)$(sysconfdir)/gtk-2.0/gtk.immodules
@@ -1351,7 +1339,7 @@
 included-modules: $(noinst_LTLIBRARIES)
 
 gtk.immodules: Makefile.am $(module_LTLIBRARIES)
-	$(top_builddir)/gtk/gtk-query-immodules-2.0 $(module_LTLIBRARIES) > gtk.immodules
+#	$(top_builddir)/gtk/gtk-query-immodules-2.0 $(module_LTLIBRARIES) > gtk.immodules
 
 @CROSS_COMPILING_FALSE@all-local: gtk.immodules
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -Nurd -x'*~' gtk+-2.14.3.orig/modules/input/gtkimcontextxim.c gtk+-2.14.3/modules/input/gtkimcontextxim.c
--- gtk+-2.14.3.orig/modules/input/gtkimcontextxim.c	2008-09-19 00:44:17.000000000 -0400
+++ gtk+-2.14.3/modules/input/gtkimcontextxim.c	2008-10-10 01:15:00.000000000 -0400
@@ -18,7 +18,11 @@
  */
 
 #include "config.h"
-#include "locale.h"
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
+#include <locale.h>
+#endif
 #include <string.h>
 #include <stdlib.h>
 
diff -Nurd -x'*~' gtk+-2.14.3.orig/modules/other/gail/tests/Makefile.in gtk+-2.14.3/modules/other/gail/tests/Makefile.in
--- gtk+-2.14.3.orig/modules/other/gail/tests/Makefile.in	2008-09-23 23:11:42.000000000 -0400
+++ gtk+-2.14.3/modules/other/gail/tests/Makefile.in	2008-10-11 17:10:26.000000000 -0400
@@ -458,6 +458,7 @@
 
 @OS_WIN32_FALSE@libferret_la_LDFLAGS = \
 @OS_WIN32_FALSE@	-rpath $(moduledir) -module -avoid-version \
+@OS_WIN32_FALSE@	$(top_builddir)/gtk/$(gtktargetlib) \
 @OS_WIN32_FALSE@	$(GTK_DEP_LIBS)	\
 @OS_WIN32_FALSE@	$(LDFLAGS)
 
diff -Nurd -x'*~' gtk+-2.14.3.orig/tests/testicontheme.c gtk+-2.14.3/tests/testicontheme.c
--- gtk+-2.14.3.orig/tests/testicontheme.c	2008-09-19 00:44:16.000000000 -0400
+++ gtk+-2.14.3/tests/testicontheme.c	2008-10-10 01:11:47.000000000 -0400
@@ -21,7 +21,11 @@
 #include <gtk/gtk.h>
 #include <stdlib.h>
 #include <string.h>
+#if defined(X_LOCALE)
+#include <X11/Xlocale.h>
+#else
 #include <locale.h>
+#endif
 
 static void
 usage (void)
diff -Nurd -x'*~' gtk+-2.14.3.orig/update-gdk-pixbuf-loaders gtk+-2.14.3/update-gdk-pixbuf-loaders
--- gtk+-2.14.3.orig/update-gdk-pixbuf-loaders	1969-12-31 19:00:00.000000000 -0500
+++ gtk+-2.14.3/update-gdk-pixbuf-loaders	2008-10-10 01:11:47.000000000 -0400
@@ -0,0 +1,21 @@
+#!/bin/sh -e
+#
+# update-gdk-pixbuf-loaders
+#
+#   Packages which install gdk-pixbuf loader(s) should call update-gdk-
+#   pixbuf-loaders in their PostInstScript and PostRmScript to update the
+#   gdk-pixbuf.loaders file.
+#
+
+CONFDIR=@PREFIX@/etc/gtk-2.0
+CONFFILE=$CONFDIR/gdk-pixbuf.loaders
+
+mkdir -p $CONFDIR
+
+TMPFILE=`tempfile`
+gdk-pixbuf-query-loaders >$TMPFILE
+
+mv -f $TMPFILE $CONFFILE
+chmod 0644 $CONFFILE
+
+exit 0
diff -Nurd -x'*~' gtk+-2.14.3.orig/update-gtk-immodules gtk+-2.14.3/update-gtk-immodules
--- gtk+-2.14.3.orig/update-gtk-immodules	1969-12-31 19:00:00.000000000 -0500
+++ gtk+-2.14.3/update-gtk-immodules	2008-10-10 01:11:47.000000000 -0400
@@ -0,0 +1,20 @@
+#!/bin/sh -e
+#
+# update-gtk-immodules
+#
+#   Packages which install gtk immodule(s) should call update-gtk-immodules
+#   in their PostInstScript and PostRmScript to update the gtk.immodules file.
+#
+
+CONFDIR=@PREFIX@/etc/gtk-2.0
+CONFFILE=$CONFDIR/gtk.immodules
+
+mkdir -p $CONFDIR
+
+TMPFILE=`tempfile`
+gtk-query-immodules-2.0 >$TMPFILE
+
+mv -f $TMPFILE $CONFFILE
+chmod 0644 $CONFFILE
+
+exit 0
