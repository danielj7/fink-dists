Package: libimobiledevice
Version: 1.0.4
Revision: 1
Description: Library to talk to iDevices
License: LGPL

# Dependencies:
BuildDependsOnly: true
Depends: %N-shlibs (= %v-%r)
BuildDepends: pkgconfig, swig, python25 | python26 | python27 | python31

# Unpack Phase:
Source: http://www.libimobiledevice.org/downloads/libimobiledevice-%v.tar.bz2
Source-MD5: dbf62f2fddaa87558b6f1ebc76abb549

CompileScript: <<
#!/bin/sh -ev
  pythonversion=`python -V 2>&1 | cut -c 8-10`
  ./configure %c LDFLAGS="-L%p/lib/python"$pythonversion"/config -L%p/lib"
  make
<<

# Install Phase:
DocFiles: AUTHORS COPYING* NEWS README
InstallScript: <<
#!/bin/sh -ev
  make install DESTDIR=%i/..
  install_name_tool -id %p/lib/libimobiledevice.dylib %i/lib/libimobiledevice.1.dylib
<<

SplitOff: <<
 Package: %N-shlibs
 Depends: usbmuxd-shlibs

 Files: <<
  lib/libimobiledevice.1.dylib
  lib/libimobiledevice.dylib
 <<
 Shlibs: <<
  %p/lib/libimobiledevice.dylib 2.0.0 libimobiledevice (>= 1.0.4-1)
 <<
 DocFiles:  README
<<

# Additional Info
DescDetail: <<
libimobiledevice is a software library that talks the protocols to support
iPhone, iPod Touch, iPad and Apple TV devices.  Unlike other projects, it
does not depend on using any existing proprietary libraries and does not
require jailbreaking.  It allows other software to easily access the
device's filesystem, retrieve information about the device and it's
internals, backup/restore the device, manage SpringBoard icons, manage
installed applications, retrieve addressbook/calendars/notes and bookmarks
and synchronize music and video to the device.  The library is in
development since August 2007 with the goal to bring support for these
devices to the Linux Desktop.
<<

Homepage: http://www.libimobiledevice.org/
Maintainer: Karl-Michael Schindler <karl-michael.schindler@web.de>
