Package: fpc-arm-cross
Version: 2.2.4
Revision: 1
Architecture: powerpc, i386, x86_64
# For arm-cross binutils are needed. 
# As soon as fpc has a builtin assembler and linker, 
# the dependence on arm-nds-binutils can be removed.
Depends: arm-linux-binutils, arm-wince-binutils, fpc-config, fpc
# not yet:  arm-gba-binutils, arm-nds-binutils, 
Recommends: fpc-doc

CustomMirror: <<
eur-AT: ftp://gd.tuwien.ac.at/languages/pascal/fpc/
eur-BE: ftp://ftp.freepascal.org/pub/fpc/
eur-HU: ftp://ftp.hu.freepascal.org/pub/fpc/
eur-IL: http://mirror.mirimar.net/freepascal/
eur-NL: ftp://freepascal.stack.nl/mirrors/fpc/
eur-NO: ftp://ftp.no.freepascal.org/pub/fpc/
eur-RU: ftp://ftp.chg.ru/pub/lang/pascal/fpc/
Primary: ftp://ftp.freepascal.org/pub/fpc/
<<
Source: mirror:custom:/dist/%v/source/fpcbuild-%v.tar.gz
Source-MD5: 20bb9a4a9f1449e2249c80d7aba7c245

SourceDirectory: fpcbuild-%v/fpcsrc

CompileScript: <<
# compile the crosscompiler, rtl and packages
  make all PP=fpc CPU_TARGET=arm OS_TARGET=linux OPT="-CX"
  make all PP=fpc CPU_TARGET=arm OS_TARGET=wince OPT="-CX"
# not yet working, wait for next version:
#  make rtl PP=%b/compiler/ppcrossarm CPU_TARGET=arm OS_TARGET=nds
#  make rtl PP=%b/compiler/ppcrossarm CPU_TARGET=arm OS_TARGET=gba
<<

InstallScript: <<
#!/bin/sh -ev
#  make compiler_install would also install all tools, but the crosscompiler is all what is wanted
  install -m 755 -d %i/lib/fpc/%v
  install -c -m 755 %b/compiler/ppcrossarm %i/lib/fpc/%v/ppcrossarm
  install -m 755 -d %i/bin
  ln -sf ../lib/fpc/%v/ppcrossarm %i/bin/ppcarm
# install all units from the rtl and packages
  make rtl_install      OS_TARGET=linux CPU_TARGET=arm INSTALL_PREFIX=%i CROSSINSTALL=1 PP=%b/compiler/ppcrossarm
  make packages_install OS_TARGET=linux CPU_TARGET=arm INSTALL_PREFIX=%i CROSSINSTALL=1 PP=%b/compiler/ppcrossarm

  make rtl_install      OS_TARGET=wince CPU_TARGET=arm INSTALL_PREFIX=%i CROSSINSTALL=1 PP=%b/compiler/ppcrossarm
  make packages_install OS_TARGET=wince CPU_TARGET=arm INSTALL_PREFIX=%i CROSSINSTALL=1 PP=%b/compiler/ppcrossarm

#  make rtl_install      OS_TARGET=nds CPU_TARGET=arm INSTALL_PREFIX=%i CROSSINSTALL=1 PP=%b/compiler/ppcrossarm
#  make rtl_install      OS_TARGET=gba CPU_TARGET=arm INSTALL_PREFIX=%i CROSSINSTALL=1 PP=%b/compiler/ppcrossarm
<<

RuntimeVars: <<
FPCDIR: %p
PPC_CONFIG_PATH: %p/etc/
<<

License: GPL/LGPL

Description: Free Pascal cross compiler for arm

DescDetail: <<
Free Pascal (aka FPK Pascal) is a 32 and 64 bit professional Pascal
compiler. Supported processors: Intel x86, Amd64/x86 64, PowerPC, 
Sparc, ARM.
Supported operating systems: nds, FreeBSD, Mac OS X/Darwin, 
Mac OS classic, DOS, Win32, OS/2, Netware (libc and classic) and MorphOS.

The language syntax has excellent compatibility with TP 7.0 as well as 
with most versions of Delphi (classes, rtti, exceptions, ansistrings,
widestrings, interfaces). A Mac Pascal compatibility mode is also provided
to assist users of previous Pascal compilers for the Mac. 
Furthermore, Free Pascal supports function overloading, operator 
overloading, global properties and other modern features.

http://wiki.freepascal.org/User_Changes_2.2.4 also lists changes in fpc 2.2.4.
<<

DescUsage: <<
 This Pascal crosscompiler produces arm executables, which run 
 natively on linux, wince, nds and gba systems.
 get help with: fpc -h
 compile and link a Pascal file with:
 
 fpc -Tnds -Parm FILENAME

 For more documentation about Free Pascal in HTML and pdf, install fpc-doc
<<

DescPort: <<
 Please report if it works for you.
<<

Homepage: http://www.freepascal.org
Maintainer: Karl-Michael Schindler <karl-michael.schindler@web.de>
