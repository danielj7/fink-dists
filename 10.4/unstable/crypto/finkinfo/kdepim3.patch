--- kdepim-3.5.0/akregator/src/Makefile.am	2005-10-10 11:02:17.000000000 -0400
+++ kdepim-3.5.0-new/akregator/src/Makefile.am	2005-12-04 13:02:32.000000000 -0500
@@ -16,12 +16,13 @@
 #########################################################################
 # this is the program that gets installed.  it's name is used for all
 # of the other Makefile.am variables
-bin_PROGRAMS = akregator
+bin_PROGRAMS = 
+kdeinit_LTLIBRARIES = akregator.la
 
 # the application source, library search path, and link libraries
-akregator_SOURCES = main.cpp mainwindow.cpp
-akregator_LDFLAGS = $(KDE_RPATH) $(all_libraries)
-akregator_LDADD = $(LIB_KPARTS) libakregatorprivate.la
+akregator_la_SOURCES = main.cpp mainwindow.cpp
+akregator_la_LDFLAGS = $(KDE_PLUGIN) $(all_libraries) -module
+akregator_la_LIBADD = $(LIB_KPARTS) libakregatorprivate.la
 #akregator_LDADD = $(LIB_KPARTS) libakregatorprivate.la $(top_builddir)/libkdepim/libkdepim.la
 
 # this is where the desktop file will go
@@ -75,7 +76,7 @@
                                 dragobjects.cpp \
                                 utils.cpp
 				
-libakregatorprivate_la_LDFLAGS = $(all_libraries) -avoid-version -no-undefined 
+libakregatorprivate_la_LDFLAGS = $(all_libraries) -no-undefined 
 libakregatorprivate_la_LIBADD =	$(top_builddir)/libkdepim/libkdepim.la \
 	$(top_builddir)/akregator/src/librss/librsslocal.la $(LIB_KHTML)
 
--- kdepim-3.5.0/akregator/src/main.cpp	2005-09-10 04:23:38.000000000 -0400
+++ kdepim-3.5.0-new/akregator/src/main.cpp	2005-12-04 11:37:56.000000000 -0500
@@ -83,7 +83,7 @@
 
 } // namespace Akregator
 
-int main(int argc, char **argv)
+extern "C" int kdemain(int argc, char **argv)
 {
     Akregator::AboutData about;
     KCmdLineArgs::init(argc, argv, &about);
--- kdepim-3.5.0/certmanager/Makefile.am	2005-09-10 04:23:51.000000000 -0400
+++ kdepim-3.5.0-new/certmanager/Makefile.am	2005-12-04 11:37:53.000000000 -0500
@@ -4,9 +4,11 @@
 
 INCLUDES = -I$(srcdir)/lib -I$(top_srcdir)/libkdenetwork $(GPGME_CFLAGS) $(all_includes)
 
-bin_PROGRAMS = kleopatra
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = kleopatra.la
 
-kleopatra_SOURCES = \
+kleopatra_la_SOURCES = \
 	customactions.cpp \
 	aboutdata.cpp \
 	main.cpp certmanager.cpp \
@@ -17,8 +19,8 @@
 
 METASOURCES = AUTO
 
-kleopatra_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kleopatra_LDADD   = conf/libconf.la lib/libkleopatra.la $(LIB_KUTILS) $(LIB_KABC)
+kleopatra_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+kleopatra_la_LIBADD  = conf/libconf.la lib/libkleopatra.la $(LIB_KUTILS) $(LIB_KABC)
 
 rcdir = $(kde_datadir)/kleopatra
 rc_DATA = kleopatraui.rc
--- kdepim-3.5.0/certmanager/conf/Makefile.am	2005-10-10 11:02:19.000000000 -0400
+++ kdepim-3.5.0-new/certmanager/conf/Makefile.am	2005-12-04 13:02:46.000000000 -0500
@@ -15,7 +15,7 @@
 	appearanceconfigwidget.cpp \
 	dnorderconfigpage.cpp
 
-kcm_kleopatra_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined
+kcm_kleopatra_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -no-undefined
 kcm_kleopatra_la_LIBADD = ../lib/libkleopatra.la $(LIB_KDEUI)
 
 kde_services_DATA = \
--- kdepim-3.5.0/certmanager/kwatchgnupg/Makefile.am	2005-09-10 04:23:49.000000000 -0400
+++ kdepim-3.5.0-new/certmanager/kwatchgnupg/Makefile.am	2005-12-04 11:37:53.000000000 -0500
@@ -2,9 +2,11 @@
 
 INCLUDES = -I$(top_srcdir)/certmanager/lib -I$(top_srcdir)/libkdenetwork $(GPGME_CFLAGS) $(all_includes)
 
-bin_PROGRAMS = kwatchgnupg
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = kwatchgnupg.la
 
-kwatchgnupg_SOURCES = \
+kwatchgnupg_la_SOURCES = \
 	kwatchgnupgmainwin.cpp \
 	kwatchgnupgconfig.cpp \
 	aboutdata.cpp \
@@ -13,8 +15,8 @@
 
 METASOURCES = AUTO
 
-kwatchgnupg_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kwatchgnupg_LDADD   = ../conf/libconf.la ../lib/libkleopatra.la $(LIB_KUTILS) $(LIB_KABC)
+kwatchgnupg_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+kwatchgnupg_la_LIBADD  = ../conf/libconf.la ../lib/libkleopatra.la $(LIB_KUTILS) $(LIB_KABC)
 
 rcdir = $(kde_datadir)/kwatchgnupg
 rc_DATA = kwatchgnupgui.rc
--- kdepim-3.5.0/certmanager/kwatchgnupg/main.cpp	2005-09-10 04:23:49.000000000 -0400
+++ kdepim-3.5.0-new/certmanager/kwatchgnupg/main.cpp	2005-12-04 11:37:53.000000000 -0500
@@ -74,7 +74,7 @@
   return KUniqueApplication::newInstance();
 }
 
-int main( int argc, char** argv )
+extern "C" int kdemain( int argc, char** argv )
 {
   AboutData aboutData;
 
--- kdepim-3.5.0/certmanager/main.cpp	2005-09-10 04:23:51.000000000 -0400
+++ kdepim-3.5.0-new/certmanager/main.cpp	2005-12-04 11:37:53.000000000 -0500
@@ -46,7 +46,7 @@
 #include <kglobal.h>
 #include <kiconloader.h>
 
-int main( int argc, char** argv )
+extern "C" int kdemain( int argc, char** argv )
 {
   AboutData aboutData;
 
--- kdepim-3.5.0/kabc/frontend/Makefile.am	2005-09-10 04:24:24.000000000 -0400
+++ kdepim-3.5.0-new/kabc/frontend/Makefile.am	2005-12-04 11:37:53.000000000 -0500
@@ -2,9 +2,11 @@
 
 METASOURCES = AUTO
 
-bin_PROGRAMS = kabcfrontend
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = kabcfrontend.la
 
-kabcfrontend_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kabcfrontend_LDADD = -lkabc $(LIB_KDECORE)
-kabcfrontend_SOURCES = main.cpp mainWindow.ui
+kabcfrontend_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+kabcfrontend_la_LIBADD = -lkabc $(LIB_KDECORE)
+kabcfrontend_la_SOURCES = main.cpp mainWindow.ui
 
--- kdepim-3.5.0/kabc/frontend/main.cpp	2005-09-10 04:24:24.000000000 -0400
+++ kdepim-3.5.0-new/kabc/frontend/main.cpp	2005-12-04 11:37:53.000000000 -0500
@@ -6,7 +6,7 @@
 
 #include "mainWindow.h"
 
-int main( int argc, char ** argv )
+extern "C" int kdemain( int argc, char ** argv )
 {
   KAboutData aboutData("testkabc",I18N_NOOP("TestKabc"),"0.1");
   KCmdLineArgs::init(argc,argv,&aboutData);
--- kdepim-3.5.0/kabc/kabc2mutt/Makefile.am	2005-09-10 04:24:24.000000000 -0400
+++ kdepim-3.5.0-new/kabc/kabc2mutt/Makefile.am	2005-12-04 11:37:53.000000000 -0500
@@ -2,11 +2,13 @@
 
 METASOURCES = AUTO
 
-bin_PROGRAMS = kabc2mutt
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = kabc2mutt.la
 
-kabc2mutt_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kabc2mutt_LDADD = -lkabc $(LIB_KDECORE)
-kabc2mutt_SOURCES = kabc2mutt.cpp main.cpp
+kabc2mutt_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+kabc2mutt_la_LIBADD = -lkabc $(LIB_KDECORE)
+kabc2mutt_la_SOURCES = kabc2mutt.cpp main.cpp
 
 messages: rc.cpp
 	$(XGETTEXT) *.cpp -o $(podir)/kabc2mutt.pot
--- kdepim-3.5.0/kabc/kabc2mutt/main.cpp	2005-09-10 04:24:24.000000000 -0400
+++ kdepim-3.5.0-new/kabc/kabc2mutt/main.cpp	2005-12-04 11:37:53.000000000 -0500
@@ -41,7 +41,7 @@
 };
 
 
-int main( int argc, char **argv )
+extern "C" int kdemain( int argc, char **argv )
 {
   KApplication::disableAutoDcopRegistration();
   KCmdLineArgs::init( argc, argv, appName, programName, description, version );
--- kdepim-3.5.0/kaddressbook/Makefile.am	2005-10-10 11:02:25.000000000 -0400
+++ kdepim-3.5.0-new/kaddressbook/Makefile.am	2005-12-04 13:01:19.000000000 -0500
@@ -15,11 +15,12 @@
           -I$(top_srcdir)/akregator/src \
           $(all_includes)
 
-bin_PROGRAMS = kaddressbook
+bin_PROGRAMS = 
+kdeinit_LTLIBRARIES = kaddressbook.la
 
-kaddressbook_SOURCES = main.cpp kaddressbookmain.cpp
-kaddressbook_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kaddressbook_LDADD = libkaddressbook.la
+kaddressbook_la_SOURCES = main.cpp kaddressbookmain.cpp
+kaddressbook_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+kaddressbook_la_LIBADD = libkaddressbook.la
 
 kde_module_LTLIBRARIES = libkaddressbookpart.la
 
@@ -68,7 +69,7 @@
     viewconfigurefilterpage.h viewconfigurewidget.h viewmanager.h xxportmanager.h \
     xxportselectdialog.h advancedcustomfields.h imeditwidget.h
 
-kaddressbook_METASOURCES = AUTO
+kaddressbook_la_METASOURCES = AUTO
 
 rcdir = $(kde_datadir)/kaddressbook
 rc_DATA = kaddressbookui.rc kaddressbook_part.rc
--- kdepim-3.5.0/kaddressbook/main.cpp	2005-11-08 17:33:33.000000000 -0500
+++ kdepim-3.5.0-new/kaddressbook/main.cpp	2005-12-04 11:37:53.000000000 -0500
@@ -109,7 +109,7 @@
   return 0;
 }
 
-int main( int argc, char *argv[] )
+extern "C" int kdemain( int argc, char *argv[] )
 {
   KLocale::setMainCatalogue( "kaddressbook" );
 
--- kdepim-3.5.0/kandy/src/Makefile.am	2005-09-10 04:24:42.000000000 -0400
+++ kdepim-3.5.0-new/kandy/src/Makefile.am	2005-12-04 13:03:00.000000000 -0500
@@ -1,10 +1,12 @@
-bin_PROGRAMS = kandy kandy_client
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = kandy.la kandy_client.la
 
 INCLUDES = -I$(top_srcdir) $(all_includes)
 
-kandy_LDFLAGS = $(KDE_RPATH) $(all_libraries)
-kandy_LDADD   = $(KANDY_LIBLOCKDEV) $(LIB_KFILE) -lkabc $(top_builddir)/libkdepim/libkdepim.la
-kandy_SOURCES =	main.cpp kandy.cpp \
+kandy_la_LDFLAGS = $(KDE_RPATH) $(all_libraries) -module
+kandy_la_LIBADD  = $(KANDY_LIBLOCKDEV) $(LIB_KFILE) -lkabc $(top_builddir)/libkdepim/libkdepim.la
+kandy_la_SOURCES =	main.cpp kandy.cpp \
                 cmdpropertiesdialog_base.ui cmdpropertiesdialog.cpp \
                 kandyview.cpp \
 		kandyiface.skel \
@@ -17,9 +19,9 @@
 noinst_HEADERS   = kandy.h kandyview.h modem.h atcommand.h \
                    commanditem.h mobilegui.h commandscheduler.h
 
-kandy_client_LDFLAGS = $(KDE_RPATH) $(all_libraries)
-kandy_client_LDADD   = $(LIB_KDECORE)
-kandy_client_SOURCES = kandy_client.cpp
+kandy_client_la_LDFLAGS = $(KDE_RPATH) -module $(all_libraries)
+kandy_client_la_LIBADD  = $(LIB_KDECORE)
+kandy_client_la_SOURCES = kandy_client.cpp
 
 METASOURCES = AUTO
 
--- kdepim-3.5.0/kandy/src/kandy_client.cpp	2005-09-10 04:24:42.000000000 -0400
+++ kdepim-3.5.0-new/kandy/src/kandy_client.cpp	2005-12-04 11:37:54.000000000 -0500
@@ -27,7 +27,7 @@
 #include <qdatastream.h>
 #include <qstring.h>
 
-int main(int argc, char **argv)
+extern "C" int kdemain(int argc, char **argv)
 {
     KApplication app(argc, argv, "kandy_client", false);
 
--- kdepim-3.5.0/kandy/src/main.cpp	2005-09-10 04:24:42.000000000 -0400
+++ kdepim-3.5.0-new/kandy/src/main.cpp	2005-12-04 11:37:54.000000000 -0500
@@ -85,7 +85,7 @@
 #endif
 }
 
-int main(int argc, char **argv)
+extern "C" int kdemain(int argc, char **argv)
 {
   KAboutData about("kandy", I18N_NOOP("Kandy"), version, description,
                    KAboutData::License_GPL, "(C) 2001 Cornelius Schumacher",0,
--- kdepim-3.5.0/kitchensync/kitchensync/Makefile.am	2005-09-10 04:24:23.000000000 -0400
+++ kdepim-3.5.0-new/kitchensync/kitchensync/Makefile.am	2005-12-04 11:37:54.000000000 -0500
@@ -8,10 +8,12 @@
 
 METASOURCES = AUTO
 
-bin_PROGRAMS = kitchensync
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = kitchensync.la
 
-kitchensync_SOURCES = main.cpp splash.cpp
+kitchensync_la_SOURCES = main.cpp splash.cpp
 
-kitchensync_LDADD = ../libkonnector2/libkonnector.la ./lib/libkitchensyncui.la \
+kitchensync_la_LIBADD = ../libkonnector2/libkonnector.la ./lib/libkitchensyncui.la \
   ../libksync/libksync2.la
-kitchensync_LDFLAGS = $(KDE_RPATH) $(all_libraries)
+kitchensync_la_LDFLAGS = $(KDE_RPATH) -module $(all_libraries)
--- kdepim-3.5.0/kitchensync/kitchensync/main.cpp	2005-09-10 04:24:23.000000000 -0400
+++ kdepim-3.5.0-new/kitchensync/kitchensync/main.cpp	2005-12-04 11:37:54.000000000 -0500
@@ -37,7 +37,7 @@
   KCmdLineLastOption
 };
 
-int main( int argc, char *argv[] )
+extern "C" int kdemain( int argc, char *argv[] )
 {
   KSync::AboutData aboutData;
 
--- kdepim-3.5.0/kitchensync/libkonnector2/plugins/dummy/Makefile.am	2005-09-10 04:24:23.000000000 -0400
+++ kdepim-3.5.0-new/kitchensync/libkonnector2/plugins/dummy/Makefile.am	2005-12-04 13:17:49.000000000 -0500
@@ -1,4 +1,4 @@
-lib_LTLIBRARIES = libdummykonnector.la
+kde_module_LTLIBRARIES = libdummykonnector.la
 
 INCLUDES = -I$(top_srcdir)/ -I$(top_srcdir)/kitchensync/libksync -I$(top_srcdir)/kitchensync/libkonnector2 -I$(top_srcdir)/libkcal $(all_includes)
 
--- kdepim-3.5.0/kitchensync/libkonnector2/plugins/kabc/Makefile.am	2005-09-10 04:24:23.000000000 -0400
+++ kdepim-3.5.0-new/kitchensync/libkonnector2/plugins/kabc/Makefile.am	2005-12-04 13:17:53.000000000 -0500
@@ -1,4 +1,4 @@
-lib_LTLIBRARIES = libkabckonnector.la
+kde_module_LTLIBRARIES = libkabckonnector.la
 
 INCLUDES = -I$(top_srcdir)/ -I$(top_srcdir)/kitchensync/libksync \
            -I$(top_srcdir)/kitchensync/libkonnector2 $(all_includes)
--- kdepim-3.5.0/kitchensync/libkonnector2/plugins/kcal/Makefile.am	2005-09-10 04:24:23.000000000 -0400
+++ kdepim-3.5.0-new/kitchensync/libkonnector2/plugins/kcal/Makefile.am	2005-12-04 13:17:57.000000000 -0500
@@ -1,4 +1,4 @@
-lib_LTLIBRARIES = libkcalkonnector.la
+kde_module_LTLIBRARIES = libkcalkonnector.la
 
 INCLUDES = -I$(top_srcdir)/ -I$(top_srcdir)/kitchensync/libksync \
            -I$(top_srcdir)/kitchensync/libkonnector2 $(all_includes)
--- kdepim-3.5.0/kitchensync/libkonnector2/plugins/local/Makefile.am	2005-09-10 04:24:23.000000000 -0400
+++ kdepim-3.5.0-new/kitchensync/libkonnector2/plugins/local/Makefile.am	2005-12-04 13:18:01.000000000 -0500
@@ -1,4 +1,4 @@
-lib_LTLIBRARIES = liblocalkonnector.la
+kde_module_LTLIBRARIES = liblocalkonnector.la
 
 INCLUDES = -I$(top_srcdir)/ -I$(top_srcdir)/kitchensync/libksync -I$(top_srcdir)/kitchensync/libkonnector2 \
            -I$(top_srcdir)/libkcal $(all_includes)
--- kdepim-3.5.0/kitchensync/libkonnector2/plugins/qtopia/Makefile.am	2005-09-10 04:24:23.000000000 -0400
+++ kdepim-3.5.0-new/kitchensync/libkonnector2/plugins/qtopia/Makefile.am	2005-12-04 13:18:09.000000000 -0500
@@ -18,7 +18,7 @@
 
 #SUBDIRS = tests
 
-lib_LTLIBRARIES = libqtopiakonnector.la
+kde_module_LTLIBRARIES = libqtopiakonnector.la
 
 INCLUDES = -I$(top_srcdir)/ -I$(top_srcdir)/kitchensync/libksync -I$(top_srcdir)/kitchensync/libkonnector2 -I$(top_srcdir)/libkcal \
  $(all_includes)
--- kdepim-3.5.0/kitchensync/libkonnector2/plugins/remote/Makefile.am	2005-09-10 04:24:23.000000000 -0400
+++ kdepim-3.5.0-new/kitchensync/libkonnector2/plugins/remote/Makefile.am	2005-12-04 13:18:18.000000000 -0500
@@ -1,4 +1,4 @@
-lib_LTLIBRARIES = libremotekonnector.la
+kde_module_LTLIBRARIES = libremotekonnector.la
 
 INCLUDES = -I$(top_srcdir)/ -I$(top_srcdir)/kitchensync/libksync -I$(top_srcdir)/kitchensync/libkonnector2 \
            -I$(top_srcdir)/libkcal $(all_includes)
--- kdepim-3.5.0/kitchensync/libkonnector2/plugins/threadedkonnector/Makefile.am	2005-09-10 04:24:23.000000000 -0400
+++ kdepim-3.5.0-new/kitchensync/libkonnector2/plugins/threadedkonnector/Makefile.am	2005-12-04 13:18:25.000000000 -0500
@@ -16,7 +16,7 @@
 #    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 #    Boston, MA 02110-1301, USA.
 
-lib_LTLIBRARIES = libthreadedkonnector.la
+kde_module_LTLIBRARIES = libthreadedkonnector.la
 
 INCLUDES = -I$(top_srcdir)/ -I$(top_srcdir)/kitchensync/libksync -I$(top_srcdir)/kitchensync/libkonnector2 -I$(top_srcdir)/libkcal $(all_includes)
 
--- kdepim-3.5.0/kitchensync/multisynk/Makefile.am	2005-09-10 04:24:19.000000000 -0400
+++ kdepim-3.5.0-new/kitchensync/multisynk/Makefile.am	2005-12-04 11:37:54.000000000 -0500
@@ -7,11 +7,12 @@
             $(all_includes)
 
 # Application
-bin_PROGRAMS = multisynk
+bin_PROGRAMS = 
+kdeinit_LTLIBRARIES = multisynk.la
 
-multisynk_SOURCES = main.cpp multisynk_main.cpp
-multisynk_LDFLAGS = $(KDE_RPATH) $(all_libraries)
-multisynk_LDADD = libmultisynk.la
+multisynk_la_SOURCES = main.cpp multisynk_main.cpp
+multisynk_la_LDFLAGS = $(KDE_RPATH) -module $(all_libraries)
+multisynk_la_LIBADD = libmultisynk.la
 
 xdg_apps_DATA = multisynk.desktop
 
--- kdepim-3.5.0/kitchensync/multisynk/main.cpp	2005-09-10 04:24:19.000000000 -0400
+++ kdepim-3.5.0-new/kitchensync/multisynk/main.cpp	2005-12-04 11:37:54.000000000 -0500
@@ -34,7 +34,7 @@
   KCmdLineLastOption
 };
 
-int main( int argc, char **argv )
+extern "C" int kdemain( int argc, char **argv )
 {
   KAboutData *about = MainWidget::aboutData();
 
--- kdepim-3.5.0/kmail/Makefile.am	2005-11-08 17:33:29.000000000 -0500
+++ kdepim-3.5.0-new/kmail/Makefile.am	2005-12-04 13:25:45.000000000 -0500
@@ -23,21 +23,21 @@
 endif
 
 lib_LTLIBRARIES = libkmailprivate.la
-libkmailprivate_la_LDFLAGS = $(all_libraries) -avoid-version -no-undefined
+libkmailprivate_la_LDFLAGS = $(all_libraries) -no-undefined
 libkmailprivate_la_LIBADD  = $(LIB_KHTML) $(LIB_KSPELL) $(LIB_KABC) \
         ../libkmime/libkmime.la ../libkpgp/libkpgp.la ../libkdepim/libkdepim.la \
         ../libkpimidentities/libkpimidentities.la ../mimelib/libmimelib.la \
         ../libksieve/libksieve.la ../libemailfunctions/libemailfunctions.la \
         ../certmanager/lib/libkleopatra.la $(INDEXLIB) \
-        ../libkcal/libkcal.la
+        ../libkcal/libkcal.la $(LIBZ)
 
 kde_module_LTLIBRARIES = kcm_kmail.la libkmailpart.la libkmail_bodypartformatter_application_octetstream.la
-libkmailpart_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version -no-undefined
-libkmailpart_la_LIBADD  = libkmailprivate.la
+libkmailpart_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module
+libkmailpart_la_LIBADD  = libkmailprivate.la $(LIBZ)
 
 kcm_kmail_la_SOURCES = kcm_kmail.cpp
-kcm_kmail_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined
-kcm_kmail_la_LIBADD = libkmailprivate.la $(LIB_KDECORE)
+kcm_kmail_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module
+kcm_kmail_la_LIBADD  = libkmailprivate.la $(LIB_KDECORE) $(LIBZ)
 
 libkmail_bodypartformatter_application_octetstream_la_SOURCES = app_octetstream.cpp
 libkmail_bodypartformatter_application_octetstream_la_LDFLAGS = $(all_libraries) -module $(KDE_PLUGIN)
@@ -45,9 +45,11 @@
 linkdir = $(kde_datadir)/kmail/plugins/bodypartformatter
 link_DATA = application_octetstream.desktop
 
-bin_PROGRAMS = kmail
-kmail_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kmail_LDADD   = libkmailprivate.la
+bin_PROGRAMS = 
+kdeinit_LTLIBRARIES = kmail.la
+
+kmail_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module $(LIBZ)
+kmail_la_LIBADD  = libkmailprivate.la $(LIBZ)
 
 libkmailprivate_la_SOURCES = kmmessage.cpp kmmainwin.cpp configuredialog.cpp \
                 configuredialog_p.cpp klistviewindexedsearchline.cpp \
@@ -126,7 +128,7 @@
                 managesievescriptsdialog.cpp chiasmuskeyselector.cpp \
                 util.cpp
 
-kmail_SOURCES = main.cpp
+kmail_la_SOURCES = main.cpp
 
 libkmailpart_la_SOURCES =  kmailpartIface.skel  kmail_part.cpp
 
--- kdepim-3.5.0/kmail/main.cpp	2005-09-10 04:24:02.000000000 -0400
+++ kdepim-3.5.0-new/kmail/main.cpp	2005-12-04 11:37:54.000000000 -0500
@@ -64,7 +64,7 @@
   return 0;
 }
 
-int main(int argc, char *argv[])
+extern "C" int kdemain(int argc, char *argv[])
 {
   // WABA: KMail is a KUniqueApplication. Unfortunately this makes debugging
   // a bit harder: You should pass --nofork as commandline argument when using
--- kdepim-3.5.0/kmailcvt/Makefile.am	2005-09-10 04:24:16.000000000 -0400
+++ kdepim-3.5.0-new/kmailcvt/Makefile.am	2005-12-04 11:37:54.000000000 -0500
@@ -1,6 +1,9 @@
 
-bin_PROGRAMS = kmailcvt
-kmailcvt_SOURCES = kimportpagedlg.ui kimportpage.cpp kselfilterpagedlg.ui \
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = kmailcvt.la
+
+kmailcvt_la_SOURCES = kimportpagedlg.ui kimportpage.cpp kselfilterpagedlg.ui \
                    kselfilterpage.cpp filters.cxx filter_oe.cxx kmailcvt.cpp \
                    main.cpp filter_pmail.cxx filter_plain.cxx filter_outlook.cxx \
                    filter_mbox.cxx filter_evolution.cxx filter_mailapp.cxx \
@@ -8,7 +11,7 @@
                    filter_kmail_maildir.cxx filter_sylpheed.cxx filter_thebat.cxx \
                    filter_lnotes.cxx
                 
-kmailcvt_LDADD   = $(LIB_KFILE)
+kmailcvt_la_LIBADD   = $(LIB_KFILE)
 
 EXTRA_DIST = main.cpp kmailcvt.cpp kimportpage.cpp kimportpage.h \
              kselfilterpage.cpp kselfilterpage.h kmailcvt.h \
@@ -36,10 +39,10 @@
 # set the include path for X, qt and KDE
 INCLUDES= $(all_includes)
 
-kmailcvt_METASOURCES = AUTO
+kmailcvt_la_METASOURCES = AUTO
 
 # the library search path. 
-kmailcvt_LDFLAGS = $(all_libraries) $(KDE_RPATH)
+kmailcvt_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
 
 KDE_ICON=AUTO
 
--- kdepim-3.5.0/kmailcvt/main.cpp	2005-09-10 04:24:16.000000000 -0400
+++ kdepim-3.5.0-new/kmailcvt/main.cpp	2005-12-04 11:37:54.000000000 -0500
@@ -26,7 +26,7 @@
   KCmdLineLastOption
 };
 
-int main(int argc, char *argv[])
+extern "C" int kdemain(int argc, char *argv[])
 {
   KLocale::setMainCatalogue("kmailcvt");
 
--- kdepim-3.5.0/kmobile/Makefile.am	2005-09-10 04:23:39.000000000 -0400
+++ kdepim-3.5.0-new/kmobile/Makefile.am	2005-12-04 11:37:54.000000000 -0500
@@ -2,15 +2,16 @@
 
 SUBDIRS = . devices		# kioslave
 
-bin_PROGRAMS = kmobile 
+kdeinit_LTLIBRARIES = kmobile.la
+bin_PROGRAMS = 
 
 lib_LTLIBRARIES = libkmobiledevice.la libkmobileclient.la
 
 INCLUDES         = $(all_includes)
 
-kmobile_LDFLAGS = $(KDE_RPATH) $(all_libraries)
-kmobile_LDADD   = $(LIB_KFILE) $(LIB_KABC) libkmobiledevice.la
-kmobile_SOURCES = main.cpp kmobile.cpp kmobileview.cpp kmobileitem.cpp\
+kmobile_la_LDFLAGS = $(KDE_RPATH) -module $(all_libraries)
+kmobile_la_LIBADD  = $(LIB_KFILE) $(LIB_KABC) libkmobiledevice.la
+kmobile_la_SOURCES = main.cpp kmobile.cpp kmobileview.cpp kmobileitem.cpp\
 			pref.cpp kmobileiface.skel kmobile_selectiondialog.ui \
 			systemtray.cpp
 
--- kdepim-3.5.0/kmobile/main.cpp	2005-09-10 04:23:39.000000000 -0400
+++ kdepim-3.5.0-new/kmobile/main.cpp	2005-12-04 11:37:54.000000000 -0500
@@ -35,7 +35,7 @@
     KCmdLineLastOption
 };
 
-int main(int argc, char **argv)
+extern "C" int kdemain(int argc, char **argv)
 {
     KAboutData about("kmobile", I18N_NOOP("KMobile"), version, description,
                      KAboutData::License_GPL, "(C) 2003-2005 Helge Deller", 0, 0, "deller@kde.org");
--- kdepim-3.5.0/knode/Makefile.am	2005-09-10 04:24:04.000000000 -0400
+++ kdepim-3.5.0-new/knode/Makefile.am	2005-12-04 13:30:43.000000000 -0500
@@ -10,22 +10,23 @@
 lib_LTLIBRARIES = libknodecommon.la
 
 kde_module_LTLIBRARIES = kcm_knode.la libknodepart.la
-libknodepart_la_LDFLAGS = -module -avoid-version -no-undefined $(all_libraries) $(KDE_RPATH) $(KDE_PLUGIN)
+libknodepart_la_LDFLAGS = -module $(all_libraries) $(KDE_PLUGIN)
 libknodepart_la_LIBADD	= libknodecommon.la
 
 SUBDIRS = pics filters
 
-bin_PROGRAMS = knode
+bin_PROGRAMS = 
+kdeinit_LTLIBRARIES = knode.la
 
-knode_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-knode_LDADD   = libknodecommon.la
+knode_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+knode_la_LIBADD  = libknodecommon.la
 
 kcm_knode_la_SOURCES = knconfigpages.cpp
-kcm_knode_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined
+kcm_knode_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module
 kcm_knode_la_LIBADD = libknodecommon.la $(LIB_KDECORE)
 knconfigpages.lo: smtpaccountwidget_base.h
 
-libknodecommon_la_LDFLAGS = -avoid-version -no-undefined $(all_libraries)
+libknodecommon_la_LDFLAGS = -no-undefined $(all_libraries)
 libknodecommon_la_LIBADD = -lkdeprint -lkwalletclient $(top_builddir)/libkmime/libkmime.la $(top_builddir)/libkpgp/libkpgp.la $(top_builddir)/libkdepim/libkdepim.la $(LIB_KSPELL) $(LIB_KABC) $(LIB_KFILE) $(LIB_KUTILS) $(LIBRESOLV) $(LIB_KHTML)
 libknodecommon_la_SOURCES =   knconfigmanager.cpp \
                   knconfig.cpp \
@@ -93,7 +94,7 @@
                   smtpaccountwidget_base.ui
 libknodecommon_la_COMPILE_FIRST = smtpaccountwidget_base.h
 
-knode_SOURCES = knode.cpp knapplication.cpp main.cpp
+knode_la_SOURCES = knode.cpp knapplication.cpp main.cpp
 
 libknodepart_la_SOURCES = knode_part.cpp
 
@@ -164,7 +165,7 @@
                   csshelper.h
 
 
-knode_METASOURCES = AUTO
+knode_la_METASOURCES = AUTO
 
 xdg_apps_DATA = KNode.desktop
 
--- kdepim-3.5.0/knode/main.cpp	2005-09-10 04:24:04.000000000 -0400
+++ kdepim-3.5.0-new/knode/main.cpp	2005-12-04 11:37:54.000000000 -0500
@@ -25,7 +25,7 @@
 #include "knode_options.h"
 using KNode::AboutData;
 
-int main(int argc, char* argv[])
+extern "C" int kdemain(int argc, char* argv[])
 {
   AboutData aboutData;
 
--- kdepim-3.5.0/knotes/Makefile.am	2005-10-10 11:02:28.000000000 -0400
+++ kdepim-3.5.0-new/knotes/Makefile.am	2005-12-04 13:04:21.000000000 -0500
@@ -2,7 +2,9 @@
 
 SUBDIRS         = . pics icons
 
-bin_PROGRAMS    = knotes
+bin_PROGRAMS    = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = knotes.la
 
 include_HEADERS = KNotesIface.h KNotesAppIface.h
 noinst_HEADERS  = knotesapp.h knote.h knoteedit.h knotebutton.h \
@@ -23,12 +25,12 @@
 libknote_la_SOURCES = knote.cpp knotebutton.cpp knoteconfigdlg.cpp knotehostdlg.cpp \
 							 knotealarmdlg.cpp knotesalarm.cpp
 
-knotes_SOURCES  = main.cpp knotesapp.cpp KNotesAppIface.skel
-knotes_LDADD    = libknote.la libknoteseditor.la libknotesnetwork.la libknotesresources.la \
+knotes_la_SOURCES  = main.cpp knotesapp.cpp KNotesAppIface.skel
+knotes_la_LIBADD   = libknote.la libknoteseditor.la libknotesnetwork.la libknotesresources.la \
                   libknoteslegacy.la libknotesconfig.la  $(top_builddir)/libkcal/libkcal.la \
                   $(top_builddir)/libkdepim/libkdepim.la $(LIB_KIO) -lkresources -lkdeprint -lkutils
-knotes_LDFLAGS  = $(all_libraries) $(KDE_RPATH)
-knotes_COMPILE_FIRST = knoteconfig.h
+knotes_la_LDFLAGS  = $(all_libraries) $(KDE_RPATH) -module
+knotes_la_COMPILE_FIRST = knoteconfig.h
 
 kde_module_LTLIBRARIES  = knotes_local.la
 knotes_local_la_SOURCES = resourcelocal_plugin.cpp
--- kdepim-3.5.0/knotes/main.cpp	2005-09-10 04:24:41.000000000 -0400
+++ kdepim-3.5.0-new/knotes/main.cpp	2005-12-04 11:37:54.000000000 -0500
@@ -86,7 +86,7 @@
     return KUniqueApplication::newInstance();
 }
 
-int main( int argc, char* argv[] )
+extern "C" int kdemain( int argc, char* argv[] )
 {
     QString version = QString::number( KNOTES_VERSION );
 
--- kdepim-3.5.0/kode/Makefile.am	2005-09-10 04:23:43.000000000 -0400
+++ kdepim-3.5.0-new/kode/Makefile.am	2005-12-04 11:37:54.000000000 -0500
@@ -12,10 +12,11 @@
                      -version-info 1:0:0 -no-undefined
 libkode_la_LIBADD = -lkdecore
 
-bin_PROGRAMS = kode
+bin_PROGRAMS = 
+kdeinit_LTLIBRARIES = kode.la
 
-kode_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kode_LDADD   = libkode.la -lkabc
-kode_SOURCES = kodemain.cpp
+kode_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+kode_la_LIBADD  = libkode.la -lkabc
+kode_la_SOURCES = kodemain.cpp
 
 METASOURCES = AUTO
--- kdepim-3.5.0/kode/kodemain.cpp	2005-09-10 04:23:43.000000000 -0400
+++ kdepim-3.5.0-new/kode/kodemain.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -607,7 +607,7 @@
   return 0;
 }
 
-int main(int argc,char **argv)
+extern "C" int kdemain(int argc,char **argv)
 {
   KAboutData aboutData( "kode", I18N_NOOP("KDE Code Generator"), "0.1" );
   aboutData.addAuthor( "Cornelius Schumacher", 0, "schumacher@kde.org" );
--- kdepim-3.5.0/kode/kxml_compiler/Makefile.am	2005-09-10 04:23:43.000000000 -0400
+++ kdepim-3.5.0-new/kode/kxml_compiler/Makefile.am	2005-12-04 11:37:55.000000000 -0500
@@ -1,9 +1,11 @@
 INCLUDES = -I$(top_srcdir) -I$(top_srcdir)/libkdepim $(all_includes)
 
-bin_PROGRAMS = kxml_compiler
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = kxml_compiler.la
 
-kxml_compiler_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kxml_compiler_LDADD   = ../libkode.la -lkdecore
-kxml_compiler_SOURCES = parser.cpp creator.cpp kxml_compiler.cpp
+kxml_compiler_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+kxml_compiler_la_LIBADD  = ../libkode.la -lkdecore
+kxml_compiler_la_SOURCES = parser.cpp creator.cpp kxml_compiler.cpp
 
 METASOURCES = AUTO
--- kdepim-3.5.0/kode/kxml_compiler/kxml_compiler.cpp	2005-09-10 04:23:43.000000000 -0400
+++ kdepim-3.5.0-new/kode/kxml_compiler/kxml_compiler.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -55,7 +55,7 @@
   KCmdLineLastOption
 };
 
-int main( int argc, char **argv )
+extern "C" int kdemain( int argc, char **argv )
 {
   KAboutData aboutData( "kxml_compiler", I18N_NOOP("KDE xml compiler"), "0.1",
   	I18N_NOOP("KDE XML Compiler") , KAboutData::License_LGPL );
--- kdepim-3.5.0/konsolekalendar/Makefile.am	2005-11-08 17:33:45.000000000 -0500
+++ kdepim-3.5.0-new/konsolekalendar/Makefile.am	2005-12-04 13:04:28.000000000 -0500
@@ -6,14 +6,16 @@
 
 METASOURCES = AUTO
 
-bin_PROGRAMS = konsolekalendar
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = konsolekalendar.la
 
-konsolekalendar_SOURCES = konsolekalendarepoch.cpp konsolekalendardelete.cpp \
+konsolekalendar_la_SOURCES = konsolekalendarepoch.cpp konsolekalendardelete.cpp \
   konsolekalendarchange.cpp konsolekalendarvariables.cpp \
   konsolekalendaradd.cpp konsolekalendarexports.cpp konsolekalendar.cpp \
   stdcalendar.cpp main.cpp 
-konsolekalendar_LDADD = $(top_builddir)/libkcal/libkcal.la $(top_builddir)/libkdepim/libkdepim.la
-konsolekalendar_LDFLAGS = $(all_libraries) $(KDE_RPATH)
+konsolekalendar_la_LIBADD = $(top_builddir)/libkcal/libkcal.la $(top_builddir)/libkdepim/libkdepim.la
+konsolekalendar_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
 
 appsdir = $(kde_appsdir)/Utilities
 xdg_apps_DATA = konsolekalendar.desktop
--- kdepim-3.5.0/konsolekalendar/main.cpp	2005-11-20 05:47:52.000000000 -0500
+++ kdepim-3.5.0-new/konsolekalendar/main.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -165,7 +165,7 @@
   KCmdLineLastOption
 };
 
-int main( int argc, char *argv[] )
+extern "C" int kdemain( int argc, char *argv[] )
 {
   KAboutData aboutData(
     progName,                        // internal program name
--- kdepim-3.5.0/kontact/src/Makefile.am	2005-09-10 04:24:42.000000000 -0400
+++ kdepim-3.5.0-new/kontact/src/Makefile.am	2005-12-04 13:04:39.000000000 -0500
@@ -5,23 +5,29 @@
 lib_LTLIBRARIES = libkontact.la
 libkontact_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -version-info 1:0
 libkontact_la_LIBADD = $(LIB_KDECORE)
-libkontact_la_SOURCES = prefs.kcfgc
+libkontact_la_SOURCES = prefs.kcfgc dummy.cpp
 
-bin_PROGRAMS = kontact
+DISTCLEANFILES = dummy.cpp
 
-kontact_METASOURCES = AUTO
-kontact_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kontact_LDADD = $(top_builddir)/libkdepim/libkdepim.la \
+dummy.cpp:
+	echo > dummy.cpp
+
+bin_PROGRAMS = 
+kdeinit_LTLIBRARIES = kontact.la
+
+kontact_la_METASOURCES = AUTO
+kontact_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+kontact_la_LIBADD = $(top_builddir)/libkdepim/libkdepim.la \
   $(top_builddir)/kontact/interfaces/libkpinterfaces.la libkontact.la \
   $(LIB_KPARTS) $(LIB_KUTILS) $(LIB_KHTML)
-kontact_SOURCES = main.cpp mainwindow.cpp sidepanebase.cpp \
+kontact_la_SOURCES = main.cpp mainwindow.cpp sidepanebase.cpp \
   iconsidepane.cpp aboutdialog.cpp
-kontact_COMPILE_FIRST = prefs.h
+kontact_la_COMPILE_FIRST = prefs.h
 
 kde_module_LTLIBRARIES = kcm_kontact.la
 
 kcm_kontact_la_SOURCES = kcmkontact.cpp
-kcm_kontact_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined
+kcm_kontact_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module
 kcm_kontact_la_LIBADD = libkontact.la $(top_builddir)/libkdepim/libkdepim.la
 kcm_kontact_la_COMPILE_FIRST = prefs.h
 
--- kdepim-3.5.0/kontact/src/main.cpp	2005-09-10 04:24:42.000000000 -0400
+++ kdepim-3.5.0-new/kontact/src/main.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -143,7 +143,7 @@
   return KUniqueApplication::newInstance();
 }
 
-int main( int argc, char **argv )
+extern "C" int kdemain( int argc, char **argv )
 {
   KAboutData about( "kontact", I18N_NOOP( "Kontact" ), version, description,
                     KAboutData::License_GPL, I18N_NOOP("(C) 2001-2004 The Kontact developers"), 0, "http://kontact.org" );
--- kdepim-3.5.0/korganizer/Makefile.am	2005-09-10 04:24:47.000000000 -0400
+++ kdepim-3.5.0-new/korganizer/Makefile.am	2005-12-04 13:04:52.000000000 -0500
@@ -12,18 +12,19 @@
   -I$(top_builddir) \
   $(all_includes)
 
-bin_PROGRAMS = korganizer
+bin_PROGRAMS =
+kdeinit_LTLIBRARIES = korganizer.la
 
-korganizer_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-korganizer_LDADD   = libkorganizer.la
-korganizer_SOURCES = main.cpp korganizer.cpp koapp.cpp
-korganizer_COMPILE_FIRST = koprefs_base.h
+korganizer_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+korganizer_la_LIBADD  = libkorganizer.la
+korganizer_la_SOURCES = main.cpp koapp.cpp
+korganizer_la_COMPILE_FIRST = koprefs_base.h
 
 
 kde_module_LTLIBRARIES = kcm_korganizer.la libkorganizerpart.la
 
 kcm_korganizer_la_SOURCES = koprefsdialog.cpp
-kcm_korganizer_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined
+kcm_korganizer_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module
 kcm_korganizer_la_LIBADD = libkorganizer.la $(top_builddir)/libkdepim/libkdepim.la \
   $(LIB_KDECORE)
 kcm_korganizer_la_COMPILE_FIRST = koprefs_base.h 	kogroupwareprefspage.h
@@ -65,7 +66,7 @@
 libkorganizer_la_COMPILE_FIRST = \
 	kogroupwareprefspage.ui \
 	$(top_srcdir)/libkdepim/categoryselectdialog.h
-libkorganizer_la_SOURCES = komessagebox.cpp \
+libkorganizer_la_SOURCES = korganizer.cpp komessagebox.cpp \
 	koagendaview.cpp koagenda.cpp koagendaitem.cpp \
 	datenavigator.cpp kdatenavigator.cpp datenavigatorcontainer.cpp \
 	datechecker.cpp \
--- kdepim-3.5.0/korganizer/korgac/Makefile.am	2005-09-10 04:24:44.000000000 -0400
+++ kdepim-3.5.0-new/korganizer/korgac/Makefile.am	2005-12-04 11:37:55.000000000 -0500
@@ -1,11 +1,13 @@
 INCLUDES= -I$(top_srcdir) -I$(top_srcdir)/korganizer $(all_includes)
 
-bin_PROGRAMS = korgac
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = korgac.la
 
-korgac_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-korgac_LDADD   = $(LIB_KDEUI) \
+korgac_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+korgac_la_LIBADD  = $(LIB_KDEUI) \
                  $(top_builddir)/korganizer/libkorganizer_eventviewer.la
-korgac_SOURCES = korgacmain.cpp alarmdialog.cpp \
+korgac_la_SOURCES = korgacmain.cpp alarmdialog.cpp \
 	         alarmdockwindow.cpp koalarmclient.cpp \
                  alarmclientiface.skel
 
@@ -13,8 +15,8 @@
 
 testalarmdlg_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 testalarmdlg_LDADD = $(LIB_KDEUI) $(top_builddir)/libkcal/libkcal.la \
-                     $(top_builddir)/korganizer/libkorganizer_eventviewer.la
-testalarmdlg_SOURCES = testalarmdlg.cpp alarmdialog.cpp
+                     $(top_builddir)/korganizer/libkorganizer_eventviewer.la libkdeinit_korgac.la
+testalarmdlg_SOURCES = testalarmdlg.cpp
 
 noinst_HEADERS = alarmclientiface.h alarmdialog.h \
                  alarmdockwindow.h koalarmclient.h
--- kdepim-3.5.0/korganizer/korgac/korgacmain.cpp	2005-09-10 04:24:44.000000000 -0400
+++ kdepim-3.5.0-new/korganizer/korgac/korgacmain.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -58,7 +58,7 @@
   { 0, 0, 0 }
 };
 
-int main( int argc, char **argv )
+extern "C" int kdemain( int argc, char **argv )
 {
   KLocale::setMainCatalogue( "korganizer" );
   KAboutData aboutData( "korgac", I18N_NOOP("KOrganizer Reminder Daemon"),
--- kdepim-3.5.0/korganizer/korgplugins.cpp	2005-09-10 04:24:47.000000000 -0400
+++ kdepim-3.5.0-new/korganizer/korgplugins.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -32,7 +32,7 @@
 
 #include "kocore.h"
 
-int main(int argc,char **argv)
+extern "C" int kdemain(int argc,char **argv)
 {
   KAboutData aboutData("korgplugins",I18N_NOOP("KOrgPlugins"),"0.1");
   KCmdLineArgs::init(argc,argv,&aboutData);
--- kdepim-3.5.0/korganizer/main.cpp	2005-09-10 04:24:47.000000000 -0400
+++ kdepim-3.5.0-new/korganizer/main.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -35,7 +35,7 @@
 #include "korganizer.h"
 #include "korganizer_options.h"
 
-int main ( int argc, char **argv )
+extern "C" int kdemain ( int argc, char **argv )
 {
   KOrg::AboutData aboutData;
 
--- kdepim-3.5.0/korganizer/timezone.cpp	2005-09-10 04:24:47.000000000 -0400
+++ kdepim-3.5.0-new/korganizer/timezone.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -34,7 +34,7 @@
 
 #include "koprefs.h"
 
-int main(int argc,char **argv)
+extern "C" int kdemain(int argc,char **argv)
 {
   KAboutData aboutData("timezone",I18N_NOOP("KOrganizer Timezone Test"),"0.1");
   KCmdLineArgs::init(argc,argv,&aboutData);
--- kdepim-3.5.0/korn/Makefile.am	2005-11-08 17:33:32.000000000 -0500
+++ kdepim-3.5.0-new/korn/Makefile.am	2005-12-04 11:37:55.000000000 -0500
@@ -6,11 +6,15 @@
 
 METASOURCES = AUTO
 
-bin_PROGRAMS = korn
-korn_LDADD = $(LIB_KIO)
+lib_LTLIBRARIES = 
+bin_PROGRAMS =
+kdeinit_LTLIBRARIES = korn.la
+
+korn_la_LDFLAGS = $(KDE_RPATH) -module
+korn_la_LIBADD = $(LIB_KIO)
 #korn_LDADD = $(top_builddir)/mimelib/libmimelib.la $(LIB_KFILE) $(LIBSOCKET) $(top_builddir)/libkmime/libkmime.la
 
-korn_SOURCES = \
+korn_la_SOURCES = \
   accountmanager.cpp \
   account_input.cpp \
   boxcontainer.cpp \
--- kdepim-3.5.0/korn/main.cpp	2005-11-08 17:33:32.000000000 -0500
+++ kdepim-3.5.0-new/korn/main.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -14,7 +14,7 @@
 static const char version[] = "0.4";
 
 
-int main(int argc, char *argv[])
+extern "C" int kdemain(int argc, char *argv[])
 {
 	KAboutData aboutData(argv[0], I18N_NOOP("Korn"),
 		version, description, KAboutData::License_GPL,
--- kdepim-3.5.0/kpilot/conduits/docconduit/Makefile.am	2005-11-08 17:33:38.000000000 -0500
+++ kdepim-3.5.0-new/kpilot/conduits/docconduit/Makefile.am	2005-12-04 11:37:55.000000000 -0500
@@ -14,7 +14,9 @@
 
 noinst_LTLIBRARIES = libpalmdoc_shared.la
 kde_module_LTLIBRARIES = conduit_doc.la
-bin_PROGRAMS = kpalmdoc
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = kpalmdoc.la
 
 libpalmdoc_shared_la_SOURCES = makedoc9.cc pilotDOCHead.cc pilotDOCEntry.cc pilotDOCBookmark.cc DOC-converter.cc
 
@@ -25,9 +27,9 @@
 
 ##libpalmdoc_shared.la
 
-kpalmdoc_SOURCES = kpalmdocSettings.kcfgc kpalmdoc_dlgbase.ui kpalmdoc_dlg.cc kpalmdoc.cpp
-kpalmdoc_LDFLAGS = $(PISOCK_LDFLAGS) $(all_libraries) $(KDE_RPATH)
-kpalmdoc_LDADD = $(LIB_KFILE) $(PISOCK_LIB) ../../lib/libkpilot.la libpalmdoc_shared.la
+kpalmdoc_la_SOURCES = kpalmdocSettings.kcfgc kpalmdoc_dlgbase.ui kpalmdoc_dlg.cc kpalmdoc.cpp
+kpalmdoc_la_LDFLAGS = $(PISOCK_LDFLAGS) $(all_libraries) $(KDE_RPATH) -module
+kpalmdoc_la_LIBADD = $(LIB_KFILE) $(PISOCK_LIB) ../../lib/libkpilot.la libpalmdoc_shared.la
 
 xdg_apps_DATA = kpalmdoc.desktop
 servicetypedir = $(kde_servicetypesdir)
--- kdepim-3.5.0/kpilot/conduits/docconduit/kpalmdoc.cpp	2005-09-10 04:24:37.000000000 -0400
+++ kdepim-3.5.0-new/kpilot/conduits/docconduit/kpalmdoc.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -36,7 +36,7 @@
 
 
 
-int main(int argc, char *argv[])
+extern "C" int kdemain(int argc, char *argv[])
 {
 
 	KAboutData about("converter", I18N_NOOP("KPalmDOC"), "-0.0.1",
--- kdepim-3.5.0/kpilot/conduits/malconduit/mal-conduit.cc	2005-09-10 04:24:37.000000000 -0400
+++ kdepim-3.5.0-new/kpilot/conduits/malconduit/mal-conduit.cc	2005-12-04 11:37:55.000000000 -0500
@@ -34,6 +34,7 @@
 
 #include "options.h"
 
+#include <stdarg.h>
 #include <qregexp.h>
 #include <kconfig.h>
 #include <kdebug.h>
--- kdepim-3.5.0/kpilot/kpilot/Makefile.am	2005-09-10 04:24:40.000000000 -0400
+++ kdepim-3.5.0-new/kpilot/kpilot/Makefile.am	2005-12-04 13:05:06.000000000 -0500
@@ -9,9 +9,10 @@
 SUBDIRS = Icons
 
 noinst_LTLIBRARIES = libconfiguration.la
-noinst_PROGRAMS = kpilotTest
-bin_PROGRAMS = kpilot kpilotDaemon
+bin_PROGRAMS = 
 kde_module_LTLIBRARIES = kcm_kpilot.la
+lib_LTLIBRARIES = 
+kdeinit_LTLIBRARIES = kpilot.la kpilotDaemon.la
 
 METASOURCES = AUTO
 
@@ -35,13 +36,13 @@
 	kpilotConfigWizard_app.ui \
 	kpilotConfigWizard.cc \
 	dbSelectionDialog.cc dbSelection_base.ui
-kcm_kpilot_la_LDFLAGS = $(PISOCK_LDFLAGS) $(all_libraries) -module -avoid-version -no-undefined
+kcm_kpilot_la_LDFLAGS = $(PISOCK_LDFLAGS) $(all_libraries) $(KDE_PLUGIN) -module
 kcm_kpilot_la_LIBADD = $(LIB_KFILE) $(PISOCK_LIB) \
 	../lib/libkpilot.la \
 	libconfiguration.la
 
 
-kpilot_SOURCES	= \
+kpilot_la_SOURCES	= \
 	pilotDaemonDCOP.stub kpilotDCOP.skel loggerDCOP.skel \
 	kpilot.cc \
 	pilotComponent.cc logWidget.cc memoWidget.cc \
@@ -52,35 +53,26 @@
 	todoWidget.cc todoEditor.cc todoEditor_base.ui \
 	fileInstaller.cc fileInstallWidget.cc \
 	listItems.cc
-kpilot_COMPILE_FIRST = kpilotSettings.h
+kpilot_la_COMPILE_FIRST = kpilotSettings.h
 
 
-kpilotDaemon_SOURCES = \
+kpilotDaemon_la_SOURCES = \
 	pilotDaemonDCOP.skel kpilotDCOP.stub loggerDCOP.stub loggerDCOP.skel \
 	pilotDaemon.cc logFile.cc \
 	hotSync.cc internalEditorAction.cc interactiveSync.cc syncStack.cc \
 	fileInstaller.cc
 
-kpilotTest_SOURCES = \
-	logWidget.cc pilotComponent.cc \
-	hotSync.cc internalEditorAction.cc interactiveSync.cc \
-	loggerDCOP.skel \
-	syncStack.cc \
-	main-test.cc
 
 
-kpilot_LDFLAGS = $(PISOCK_LDFLAGS) $(all_libraries) $(KDE_RPATH)
-kpilotDaemon_LDFLAGS = $(PISOCK_LDFLAGS) $(all_libraries) $(KDE_RPATH)
-kpilotTest_LDFLAGS = $(PISOCK_LDFLAGS) $(all_libraries) $(KDE_RPATH)
+kpilot_la_LDFLAGS = $(PISOCK_LDFLAGS) $(all_libraries) $(KDE_RPATH) -module
+kpilotDaemon_la_LDFLAGS = $(PISOCK_LDFLAGS) $(all_libraries) $(KDE_RPATH) -module
 
 
 # the libraries to link against. Be aware of the order. First the libraries,
 # that depend on the following ones.
-kpilot_LDADD		= $(LIB_KFILE) $(PISOCK_LIB) -lkutils \
+kpilot_la_LIBADD		= $(LIB_KFILE) $(PISOCK_LIB) -lkutils \
 	../lib/libkpilot.la  libconfiguration.la
-kpilotDaemon_LDADD	= $(LIB_KFILE) $(PISOCK_LIB) \
-	../lib/libkpilot.la libconfiguration.la
-kpilotTest_LDADD	= $(LIB_KFILE) $(PISOCK_LIB) \
+kpilotDaemon_la_LIBADD	= $(LIB_KFILE) $(PISOCK_LIB) \
 	../lib/libkpilot.la libconfiguration.la
 
 xdg_apps_DATA = kpilot.desktop  kpilotdaemon.desktop
--- kdepim-3.5.0/kpilot/kpilot/kpilot.cc	2005-09-10 04:24:39.000000000 -0400
+++ kdepim-3.5.0-new/kpilot/kpilot/kpilot.cc	2005-12-04 11:37:55.000000000 -0500
@@ -1102,7 +1102,7 @@
 
 
 
-int main(int argc, char **argv)
+extern "C" int kdemain(int argc, char **argv)
 {
 	FUNCTIONSETUP;
 
--- kdepim-3.5.0/kpilot/kpilot/pilotDaemon.cc	2005-09-10 04:24:39.000000000 -0400
+++ kdepim-3.5.0-new/kpilot/kpilot/pilotDaemon.cc	2005-12-04 11:37:55.000000000 -0500
@@ -1265,7 +1265,7 @@
 } ;
 
 
-int main(int argc, char **argv)
+extern "C" int kdemain(int argc, char **argv)
 {
 	FUNCTIONSETUP;
 
--- kdepim-3.5.0/kresources/featureplan/benchmarkfeaturelist.cpp	2005-09-10 04:23:46.000000000 -0400
+++ kdepim-3.5.0-new/kresources/featureplan/benchmarkfeaturelist.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -67,7 +67,7 @@
   }
 }
 
-int main( int argc, char **argv )
+extern "C" int kdemain( int argc, char **argv )
 {
   KAboutData aboutData( "benchmarkfeaturelist",
                         "Benchmark for feature list XML parser",
--- kdepim-3.5.0/kresources/featureplan/dumpfeaturelist.cpp	2005-09-10 04:23:46.000000000 -0400
+++ kdepim-3.5.0-new/kresources/featureplan/dumpfeaturelist.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -67,7 +67,7 @@
   }
 }
 
-int main( int argc, char **argv )
+extern "C" int kdemain( int argc, char **argv )
 {
   KAboutData aboutData( "dumpfeaturelist", "Dump XML feature list to stdout",
                         "0.1" );
--- kdepim-3.5.0/kresources/groupwise/soap/soapdebug.cpp	2005-09-10 04:23:46.000000000 -0400
+++ kdepim-3.5.0-new/kresources/groupwise/soap/soapdebug.cpp	2005-12-04 11:37:55.000000000 -0500
@@ -44,7 +44,7 @@
   KCmdLineLastOption
 };
 
-int main( int argc, char **argv )
+extern "C" int kdemain( int argc, char **argv )
 {
   KAboutData aboutData( "soapdebug", I18N_NOOP("Groupwise Soap Debug"), "0.1" );
   aboutData.addAuthor( "Cornelius Schumacher", 0, "schumacher@kde.org" );
--- kdepim-3.5.0/ksync/src/Makefile.am	2005-09-10 04:23:48.000000000 -0400
+++ kdepim-3.5.0-new/ksync/src/Makefile.am	2005-12-04 11:37:55.000000000 -0500
@@ -1,7 +1,10 @@
-bin_PROGRAMS = ksync
-ksync_SOURCES = ksyncview.cpp ksync.cpp main.cpp 
-ksync_LDADD   = ../lib/libksync.la $(LIB_KIO)
-ksync_LDFLAGS = $(all_libraries) $(KDE_RPATH)
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = ksync.la
+
+ksync_la_SOURCES = ksyncview.cpp ksync.cpp main.cpp 
+ksync_la_LIBADD  = ../lib/libksync.la $(LIB_KIO)
+ksync_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
 
 EXTRA_DIST = main.cpp ksync.cpp ksync.h ksyncdoc.cpp ksyncdoc.h ksyncview.cpp ksyncview.h ksyncui.rc ksync.desktop lo32-app-ksync.png lo16-app-ksync.png 
 
--- kdepim-3.5.0/ksync/src/main.cpp	2005-09-10 04:23:48.000000000 -0400
+++ kdepim-3.5.0-new/ksync/src/main.cpp	2005-12-04 11:37:56.000000000 -0500
@@ -37,7 +37,7 @@
   // INSERT YOUR COMMANDLINE OPTIONS HERE
 };
 
-int main(int argc, char *argv[])
+extern "C" int kdemain(int argc, char *argv[])
 {
 
 	KAboutData aboutData( "ksync", I18N_NOOP("KSync"),
--- kdepim-3.5.0/ktnef/gui/Makefile.am	2005-09-10 04:24:43.000000000 -0400
+++ kdepim-3.5.0-new/ktnef/gui/Makefile.am	2005-12-04 11:37:56.000000000 -0500
@@ -2,14 +2,16 @@
 
 SUBDIRS = pics
 
-bin_PROGRAMS = ktnef
-
-ktnef_LDFLAGS = $(KDE_RPATH) $(all_libraries)
-ktnef_LDADD   = $(LIB_KFILE) $(top_builddir)/ktnef/lib/libktnef.la
-ktnef_SOURCES = ktnefmain.cpp ktnefview.cpp attachpropertydialogbase.ui \
+bin_PROGRAMS = 
+lib_LTLIBRARIES = 
+kdeinit_LTLIBRARIES = ktnef.la
+
+ktnef_la_LDFLAGS = $(KDE_RPATH) -module $(all_libraries)
+ktnef_la_LIBADD  = $(LIB_KFILE) $(top_builddir)/ktnef/lib/libktnef.la
+ktnef_la_SOURCES = ktnefmain.cpp ktnefview.cpp attachpropertydialogbase.ui \
                 attachpropertydialog.cpp messagepropertydialog.cpp \
                 qwmf.cpp main.cpp
-ktnef_METASOURCES = AUTO
+ktnef_la_METASOURCES = AUTO
 
 noinst_HEADERS = ktnefmain.h ktnefview.h attachpropertydialog.h \
                  qwmf.h wmfstruct.h metafuncs.h
--- kdepim-3.5.0/ktnef/gui/main.cpp	2005-09-10 04:24:43.000000000 -0400
+++ kdepim-3.5.0-new/ktnef/gui/main.cpp	2005-12-04 11:37:56.000000000 -0500
@@ -33,7 +33,7 @@
   // INSERT YOUR COMMANDLINE OPTIONS HERE
 };
 
-int main(int argc, char *argv[])
+extern "C" int kdemain(int argc, char *argv[])
 {
 
   KAboutData aboutData( "ktnef", I18N_NOOP("KTnef"),
--- kdepim-3.5.0/libkcal/convertqtopia.cpp	2005-09-10 04:24:36.000000000 -0400
+++ kdepim-3.5.0-new/libkcal/convertqtopia.cpp	2005-12-04 11:37:56.000000000 -0500
@@ -48,7 +48,7 @@
   KCmdLineLastOption
 };
 
-int main(int argc,char **argv)
+extern "C" int kdemain(int argc,char **argv)
 {
   KAboutData aboutData("convertqtopia",I18N_NOOP("Qtopia calendar file converter"),"0.1");
   aboutData.addAuthor("Cornelius Schumacher", 0, "schumacher@kde.org");
--- kdepim-3.5.0/libkcal/versit/vcc.c	2005-09-10 04:24:36.000000000 -0400
+++ kdepim-3.5.0-new/libkcal/versit/vcc.c	2005-12-04 11:37:56.000000000 -0500
@@ -198,9 +198,6 @@
 #endif
 
 #include <string.h>
-#if !defined(__FreeBSD__) && !defined(__APPLE__)
-#include <malloc.h>
-#endif
 #include <stdio.h>
 #include <stdlib.h>
 #include <ctype.h>
--- kdepim-3.5.0/libkdepim/cfgc/autoexample.cpp	2005-09-10 04:24:24.000000000 -0400
+++ kdepim-3.5.0-new/libkdepim/cfgc/autoexample.cpp	2005-12-04 11:37:56.000000000 -0500
@@ -36,7 +36,7 @@
 
 #include <qlabel.h>
 
-int main( int argc, char **argv )
+extern "C" int kdemain( int argc, char **argv )
 {
   KAboutData aboutData( "example", I18N_NOOP("autoconfig example"), "0.1" );
   aboutData.addAuthor( "Cornelius Schumacher", 0, "schumacher@kde.org" );
--- kdepim-3.5.0/libkdepim/cfgc/example.cpp	2005-09-10 04:24:24.000000000 -0400
+++ kdepim-3.5.0-new/libkdepim/cfgc/example.cpp	2005-12-04 11:37:56.000000000 -0500
@@ -32,7 +32,7 @@
 
 #include <libkdepim/kprefsdialog.h>
 
-int main( int argc, char **argv )
+extern "C" int kdemain( int argc, char **argv )
 {
   KAboutData aboutData( "example", I18N_NOOP("cfgc example"), "0.1" );
   aboutData.addAuthor( "Cornelius Schumacher", 0, "schumacher@kde.org" );
--- kdepim-3.5.0/libkholidays/Makefile.am	2005-09-10 04:24:19.000000000 -0400
+++ kdepim-3.5.0-new/libkholidays/Makefile.am	2005-12-04 11:37:56.000000000 -0500
@@ -7,7 +7,7 @@
 lib_LTLIBRARIES = libkholidays.la
 
 libkholidays_la_LDFLAGS = $(all_libraries) -no-undefined -version-info 1:0:0
-libkholidays_la_LIBADD = $(LIB_KIO)
+libkholidays_la_LIBADD = $(LIB_KIO) $(LIBZ)
 libkholidays_la_SOURCES = kholidays.cpp scanholiday.c parseholiday.h parseholiday.c lunarphase.cpp
 
 #the lex/flex and yacc/bison files are in CVS and NOT generated
--- kdepim-3.5.0/libkholidays/parseholiday.c	2005-09-10 04:24:19.000000000 -0400
+++ kdepim-3.5.0-new/libkholidays/parseholiday.c	2005-12-04 11:37:56.000000000 -0500
@@ -106,7 +106,7 @@
 /*** Variables and structures ***/
 static int	 m, d, y;
 int              kcallineno;	       	/* current line # being parsed */
-FILE            *kcalin;                  /* file currently being processed */
+extern FILE            *kcalin;                  /* file currently being processed */
 int	         yacc_small;		/* small string or on its own line? */
 int	         yacc_stringcolor;	/* color of holiday name text, 1..8 */
 char	        *yacc_string;		/* holiday name text */
--- kdepim-3.5.0/mimelib/dw_date.cpp	2005-09-10 04:24:49.000000000 -0400
+++ kdepim-3.5.0-new/mimelib/dw_date.cpp	2005-12-04 11:37:56.000000000 -0500
@@ -673,7 +673,7 @@
     "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
 };
 
-int main()
+extern "C" int kdemain()
 {
     struct tm *ptms, tms1, tms2;
     time_t tt;
--- kdepim-3.5.0/mimelib/uuencode.cpp	2005-09-10 04:24:49.000000000 -0400
+++ kdepim-3.5.0-new/mimelib/uuencode.cpp	2005-12-04 11:37:56.000000000 -0500
@@ -431,7 +431,7 @@
 
 // Test harness for DwUudecode
 
-int main(int argc, char** argv)
+extern "C" int kdemain(int argc, char** argv)
 {
 	srand(time(0));
 	DwString binStr;
--- kdepim-3.5.0/networkstatus/Makefile.am	2005-09-10 04:24:02.000000000 -0400
+++ kdepim-3.5.0-new/networkstatus/Makefile.am	2005-12-04 13:05:15.000000000 -0500
@@ -19,7 +19,7 @@
 	clientiface.skel serviceiface.skel network.cpp
 #kclientiface.skel serviceiface.skel
 kded_networkstatus_la_LIBADD = $(LIB_KDECORE) $(LIB_KIO) ./libnetworkstatus.la
-kded_networkstatus_la_LDFLAGS = $(all_libraries) -module -avoid-version 
+kded_networkstatus_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
 
 servicesdir = $(kde_servicesdir)/kded
 services_DATA = networkstatus.desktop
@@ -27,9 +27,11 @@
 noinst_HEADERS = serviceiface.h networkstatuscommon.h serviceifaceimpl.h \
 	network.h clientifaceimpl.h provideriface.h testservice.h connectionmanager.h
 
-bin_PROGRAMS = networkstatustestservice
+bin_PROGRAMS = 
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = networkstatustestservice.la
 
-networkstatustestservice_LDFLAGS = $(all_libraries)
-networkstatustestservice_LDADD = libnetworkstatus.la
+networkstatustestservice_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module
+networkstatustestservice_la_LIBADD = libnetworkstatus.la
 
-networkstatustestservice_SOURCES = testservice.cpp provideriface.skel serviceiface.stub
+networkstatustestservice_la_SOURCES = testservice.cpp provideriface.skel serviceiface.stub
--- kdepim-3.5.0/networkstatus/testservice.cpp	2005-09-10 04:24:02.000000000 -0400
+++ kdepim-3.5.0-new/networkstatus/testservice.cpp	2005-12-04 11:37:56.000000000 -0500
@@ -90,7 +90,7 @@
 	m_service->setNetworkStatus( "test_net", (int)m_status );
 }
 
-int main( int argc, char** argv )
+extern "C" int kdemain( int argc, char** argv )
 {
 	KApplication app(argc, argv, "testdcop");
 	TestService * test = new TestService;
--- kdepim-3.5.0/wizards/Makefile.am	2005-09-10 04:23:44.000000000 -0400
+++ kdepim-3.5.0-new/wizards/Makefile.am	2005-12-04 11:37:56.000000000 -0500
@@ -12,7 +12,7 @@
 bin_PROGRAMS = groupwarewizard egroupwarewizard sloxwizard kolabwizard \
                groupwisewizard exchangewizard
 
-kde_module_LTLIBRARIES = libegroupwarewizard.la libsloxwizard.la \
+lib_LTLIBRARIES = libegroupwarewizard.la libsloxwizard.la \
                          libkolabwizard.la libgroupwisewizard.la \
                          libexchangewizard.la
 
