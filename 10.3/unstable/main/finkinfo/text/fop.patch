diff -urN fop-0.20.5.orig/fop.sh fop-0.20.5/fop.sh
--- fop-0.20.5.orig/fop.sh	2003-07-15 04:03:23.000000000 +0200
+++ fop-0.20.5/fop.sh	2004-02-11 16:33:45.000000000 +0100
@@ -11,7 +11,11 @@
 darwin=false;
 case "`uname`" in
   CYGWIN*) cygwin=true ;;
-  Darwin*) darwin=true ;;
+  Darwin*) darwin=true 
+           if [ -z "$JAVA_HOME" ] ; then
+             JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home
+           fi
+           ;;
 esac
 
 if [ -z "$FOP_HOME" ] ; then
@@ -100,5 +104,5 @@
   LOCALCLASSPATH=`cygpath --path --windows "$LOCALCLASSPATH"`
 fi
 
-$JAVACMD -classpath "$LOCALCLASSPATH" $FOP_OPTS org.apache.fop.apps.Fop "$@"
+$JAVACMD -Djava.awt.headless=true -classpath "$LOCALCLASSPATH" $FOP_OPTS org.apache.fop.apps.Fop "$@"
 
